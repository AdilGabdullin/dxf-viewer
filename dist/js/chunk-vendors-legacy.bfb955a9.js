(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"0ca9":function(t,e,i){},"1fb5":function(t,e,i){"use strict";e.byteLength=c,e.toByteArray=d,e.fromByteArray=m;for(var n=[],s=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)n[a]=o[a],s[o.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");-1===i&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function c(t){var e=h(t),i=e[0],n=e[1];return 3*(i+n)/4-n}function u(t,e,i){return 3*(e+i)/4-i}function d(t){var e,i,n=h(t),o=n[0],a=n[1],l=new r(u(t,o,a)),c=0,d=a>0?o-4:o;for(i=0;i<d;i+=4)e=s[t.charCodeAt(i)]<<18|s[t.charCodeAt(i+1)]<<12|s[t.charCodeAt(i+2)]<<6|s[t.charCodeAt(i+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;return 2===a&&(e=s[t.charCodeAt(i)]<<2|s[t.charCodeAt(i+1)]>>4,l[c++]=255&e),1===a&&(e=s[t.charCodeAt(i)]<<10|s[t.charCodeAt(i+1)]<<4|s[t.charCodeAt(i+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e),l}function p(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function f(t,e,i){for(var n,s=[],r=e;r<i;r+=3)n=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),s.push(p(n));return s.join("")}function m(t){for(var e,i=t.length,s=i%3,r=[],o=16383,a=0,l=i-s;a<l;a+=o)r.push(f(t,a,a+o>l?l:a+o));return 1===s?(e=t[i-1],r.push(n[e>>2]+n[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],r.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),r.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},2877:function(t,e,i){"use strict";function n(t,e,i,n,s,r,o,a){var l,h="function"===typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=i,h._compiled=!0),n&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):s&&(l=a?function(){s.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(h.functional){h._injectStyles=l;var c=h.render;h.render=function(t,e){return l.call(e),c(t,e)}}else{var u=h.beforeCreate;h.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:h}}i.d(e,"a",(function(){return n}))},"2b0e":function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return Kn}));
/*!
 * Vue.js v2.7.13
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({}),s=Array.isArray;function r(t){return void 0===t||null===t}function o(t){return void 0!==t&&null!==t}function a(t){return!0===t}function l(t){return!1===t}function h(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function c(t){return"function"===typeof t}function u(t){return null!==t&&"object"===typeof t}var d=Object.prototype.toString;function p(t){return"[object Object]"===d.call(t)}function f(t){return"[object RegExp]"===d.call(t)}function m(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function g(t){return o(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function v(t){return null==t?"":Array.isArray(t)||p(t)&&t.toString===d?JSON.stringify(t,null,2):String(t)}function _(t){var e=parseFloat(t);return isNaN(e)?t:e}function y(t,e){for(var i=Object.create(null),n=t.split(","),s=0;s<n.length;s++)i[n[s]]=!0;return e?function(t){return i[t.toLowerCase()]}:function(t){return i[t]}}y("slot,component",!0);var b=y("key,ref,slot,slot-scope,is");function x(t,e){var i=t.length;if(i){if(e===t[i-1])return void(t.length=i-1);var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var S=Object.prototype.hasOwnProperty;function w(t,e){return S.call(t,e)}function C(t){var e=Object.create(null);return function(i){var n=e[i];return n||(e[i]=t(i))}}var M=/-(\w)/g,T=C((function(t){return t.replace(M,(function(t,e){return e?e.toUpperCase():""}))})),k=C((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),E=/\B([A-Z])/g,L=C((function(t){return t.replace(E,"-$1").toLowerCase()}));function A(t,e){function i(i){var n=arguments.length;return n?n>1?t.apply(e,arguments):t.call(e,i):t.call(e)}return i._length=t.length,i}function P(t,e){return t.bind(e)}var R=Function.prototype.bind?P:A;function O(t,e){e=e||0;var i=t.length-e,n=new Array(i);while(i--)n[i]=t[i+e];return n}function I(t,e){for(var i in e)t[i]=e[i];return t}function D(t){for(var e={},i=0;i<t.length;i++)t[i]&&I(e,t[i]);return e}function N(t,e,i){}var z=function(t,e,i){return!1},q=function(t){return t};function B(t,e){if(t===e)return!0;var i=u(t),n=u(e);if(!i||!n)return!i&&!n&&String(t)===String(e);try{var s=Array.isArray(t),r=Array.isArray(e);if(s&&r)return t.length===e.length&&t.every((function(t,i){return B(t,e[i])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(s||r)return!1;var o=Object.keys(t),a=Object.keys(e);return o.length===a.length&&o.every((function(i){return B(t[i],e[i])}))}catch(l){return!1}}function F(t,e){for(var i=0;i<t.length;i++)if(B(t[i],e))return i;return-1}function U(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function $(t,e){return t===e?0===t&&1/t!==1/e:t===t||e===e}var V="data-server-rendered",H=["component","directive","filter"],G=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],W={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:z,isReservedAttr:z,isUnknownElement:z,getTagNamespace:N,parsePlatformTagName:q,mustUseProp:z,async:!0,_lifecycleHooks:G},j=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Y(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function X(t,e,i,n){Object.defineProperty(t,e,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var Q=new RegExp("[^".concat(j.source,".$_\\d]"));function K(t){if(!Q.test(t)){var e=t.split(".");return function(t){for(var i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}}var Z="__proto__"in{},J="undefined"!==typeof window,tt=J&&window.navigator.userAgent.toLowerCase(),et=tt&&/msie|trident/.test(tt),it=tt&&tt.indexOf("msie 9.0")>0,nt=tt&&tt.indexOf("edge/")>0;tt&&tt.indexOf("android");var st=tt&&/iphone|ipad|ipod|ios/.test(tt);tt&&/chrome\/\d+/.test(tt),tt&&/phantomjs/.test(tt);var rt,ot=tt&&tt.match(/firefox\/(\d+)/),at={}.watch,lt=!1;if(J)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){lt=!0}}),window.addEventListener("test-passive",null,ht)}catch(Zo){}var ct=function(){return void 0===rt&&(rt=!J&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),rt},ut=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function dt(t){return"function"===typeof t&&/native code/.test(t.toString())}var pt,ft="undefined"!==typeof Symbol&&dt(Symbol)&&"undefined"!==typeof Reflect&&dt(Reflect.ownKeys);pt="undefined"!==typeof Set&&dt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var mt=null;function gt(t){void 0===t&&(t=null),t||mt&&mt._scope.off(),mt=t,t&&t._scope.on()}var vt=function(){function t(t,e,i,n,s,r,o,a){this.tag=t,this.data=e,this.children=i,this.text=n,this.elm=s,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),_t=function(t){void 0===t&&(t="");var e=new vt;return e.text=t,e.isComment=!0,e};function yt(t){return new vt(void 0,void 0,void 0,String(t))}function bt(t){var e=new vt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var xt=0,St=[],wt=function(){for(var t=0;t<St.length;t++){var e=St[t];e.subs=e.subs.filter((function(t){return t})),e._pending=!1}St.length=0},Ct=function(){function t(){this._pending=!1,this.id=xt++,this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.removeSub=function(t){this.subs[this.subs.indexOf(t)]=null,this._pending||(this._pending=!0,St.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(t){var e=this.subs.filter((function(t){return t}));for(var i=0,n=e.length;i<n;i++){var s=e[i];0,s.update()}},t}();Ct.target=null;var Mt=[];function Tt(t){Mt.push(t),Ct.target=t}function kt(){Mt.pop(),Ct.target=Mt[Mt.length-1]}var Et=Array.prototype,Lt=Object.create(Et),At=["push","pop","shift","unshift","splice","sort","reverse"];At.forEach((function(t){var e=Et[t];X(Lt,t,(function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var s,r=e.apply(this,i),o=this.__ob__;switch(t){case"push":case"unshift":s=i;break;case"splice":s=i.slice(2);break}return s&&o.observeArray(s),o.dep.notify(),r}))}));var Pt=new WeakMap;function Rt(t){return Ot(t,!0),X(t,"__v_isShallow",!0),t}function Ot(t,e){if(!It(t)){Ut(t,e,ct());0}}function It(t){return!(!t||!t.__v_isReadonly)}var Dt=Object.getOwnPropertyNames(Lt),Nt={},zt=!0;function qt(t){zt=t}var Bt={notify:N,depend:N,addSub:N,removeSub:N},Ft=function(){function t(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this.value=t,this.shallow=e,this.mock=i,this.dep=i?Bt:new Ct,this.vmCount=0,X(t,"__ob__",this),s(t)){if(!i)if(Z)t.__proto__=Lt;else for(var n=0,r=Dt.length;n<r;n++){var o=Dt[n];X(t,o,Lt[o])}e||this.observeArray(t)}else{var a=Object.keys(t);for(n=0;n<a.length;n++){o=a[n];$t(t,o,Nt,void 0,e,i)}}}return t.prototype.observeArray=function(t){for(var e=0,i=t.length;e<i;e++)Ut(t[e],!1,this.mock)},t}();function Ut(t,e,i){return t&&w(t,"__ob__")&&t.__ob__ instanceof Ft?t.__ob__:!zt||!i&&ct()||!s(t)&&!p(t)||!Object.isExtensible(t)||t.__v_skip||Pt.has(t)||Wt(t)||t instanceof vt?void 0:new Ft(t,e,i)}function $t(t,e,i,n,r,o){var a=new Ct,l=Object.getOwnPropertyDescriptor(t,e);if(!l||!1!==l.configurable){var h=l&&l.get,c=l&&l.set;h&&!c||i!==Nt&&2!==arguments.length||(i=t[e]);var u=!r&&Ut(i,!1,o);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=h?h.call(t):i;return Ct.target&&(a.depend(),u&&(u.dep.depend(),s(e)&&Gt(e))),Wt(e)&&!r?e.value:e},set:function(e){var n=h?h.call(t):i;if($(n,e)){if(c)c.call(t,e);else{if(h)return;if(!r&&Wt(n)&&!Wt(e))return void(n.value=e);i=e}u=!r&&Ut(e,!1,o),a.notify()}}}),a}}function Vt(t,e,i){if(!It(t)){var n=t.__ob__;return s(t)&&m(e)?(t.length=Math.max(t.length,e),t.splice(e,1,i),n&&!n.shallow&&n.mock&&Ut(i,!1,!0),i):e in t&&!(e in Object.prototype)?(t[e]=i,i):t._isVue||n&&n.vmCount?i:n?($t(n.value,e,i,void 0,n.shallow,n.mock),n.dep.notify(),i):(t[e]=i,i)}}function Ht(t,e){if(s(t)&&m(e))t.splice(e,1);else{var i=t.__ob__;t._isVue||i&&i.vmCount||It(t)||w(t,e)&&(delete t[e],i&&i.dep.notify())}}function Gt(t){for(var e=void 0,i=0,n=t.length;i<n;i++)e=t[i],e&&e.__ob__&&e.__ob__.dep.depend(),s(e)&&Gt(e)}function Wt(t){return!(!t||!0!==t.__v_isRef)}function jt(t,e,i){Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){var t=e[i];if(Wt(t))return t.value;var n=t&&t.__ob__;return n&&n.dep.depend(),t},set:function(t){var n=e[i];Wt(n)&&!Wt(t)?n.value=t:e[i]=t}})}new WeakMap,new WeakMap;var Yt="watcher";"".concat(Yt," callback"),"".concat(Yt," getter"),"".concat(Yt," cleanup");var Xt;var Qt=function(){function t(t){void 0===t&&(t=!1),this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Xt,!t&&Xt&&(this.index=(Xt.scopes||(Xt.scopes=[])).push(this)-1)}return t.prototype.run=function(t){if(this.active){var e=Xt;try{return Xt=this,t()}finally{Xt=e}}else 0},t.prototype.on=function(){Xt=this},t.prototype.off=function(){Xt=this.parent},t.prototype.stop=function(t){if(this.active){var e=void 0,i=void 0;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].teardown();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){var n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this.active=!1}},t}();function Kt(t,e){void 0===e&&(e=Xt),e&&e.active&&e.effects.push(t)}function Zt(t){var e=t._provided,i=t.$parent&&t.$parent._provided;return i===e?t._provided=Object.create(i):e}var Jt=C((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var i="~"===t.charAt(0);t=i?t.slice(1):t;var n="!"===t.charAt(0);return t=n?t.slice(1):t,{name:t,once:i,capture:n,passive:e}}));function te(t,e){function i(){var t=i.fns;if(!s(t))return Qe(t,null,arguments,e,"v-on handler");for(var n=t.slice(),r=0;r<n.length;r++)Qe(n[r],null,arguments,e,"v-on handler")}return i.fns=t,i}function ee(t,e,i,n,s,o){var l,h,c,u;for(l in t)h=t[l],c=e[l],u=Jt(l),r(h)||(r(c)?(r(h.fns)&&(h=t[l]=te(h,o)),a(u.once)&&(h=t[l]=s(u.name,h,u.capture)),i(u.name,h,u.capture,u.passive,u.params)):h!==c&&(c.fns=h,t[l]=c));for(l in e)r(t[l])&&(u=Jt(l),n(u.name,e[l],u.capture))}function ie(t,e,i){var n;t instanceof vt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function l(){i.apply(this,arguments),x(n.fns,l)}r(s)?n=te([l]):o(s.fns)&&a(s.merged)?(n=s,n.fns.push(l)):n=te([s,l]),n.merged=!0,t[e]=n}function ne(t,e,i){var n=e.options.props;if(!r(n)){var s={},a=t.attrs,l=t.props;if(o(a)||o(l))for(var h in n){var c=L(h);se(s,l,h,c,!0)||se(s,a,h,c,!1)}return s}}function se(t,e,i,n,s){if(o(e)){if(w(e,i))return t[i]=e[i],s||delete e[i],!0;if(w(e,n))return t[i]=e[n],s||delete e[n],!0}return!1}function re(t){for(var e=0;e<t.length;e++)if(s(t[e]))return Array.prototype.concat.apply([],t);return t}function oe(t){return h(t)?[yt(t)]:s(t)?le(t):void 0}function ae(t){return o(t)&&o(t.text)&&l(t.isComment)}function le(t,e){var i,n,l,c,u=[];for(i=0;i<t.length;i++)n=t[i],r(n)||"boolean"===typeof n||(l=u.length-1,c=u[l],s(n)?n.length>0&&(n=le(n,"".concat(e||"","_").concat(i)),ae(n[0])&&ae(c)&&(u[l]=yt(c.text+n[0].text),n.shift()),u.push.apply(u,n)):h(n)?ae(c)?u[l]=yt(c.text+n):""!==n&&u.push(yt(n)):ae(n)&&ae(c)?u[l]=yt(c.text+n.text):(a(t._isVList)&&o(n.tag)&&r(n.key)&&o(e)&&(n.key="__vlist".concat(e,"_").concat(i,"__")),u.push(n)));return u}function he(t,e){var i,n,r,a,l=null;if(s(t)||"string"===typeof t)for(l=new Array(t.length),i=0,n=t.length;i<n;i++)l[i]=e(t[i],i);else if("number"===typeof t)for(l=new Array(t),i=0;i<t;i++)l[i]=e(i+1,i);else if(u(t))if(ft&&t[Symbol.iterator]){l=[];var h=t[Symbol.iterator](),c=h.next();while(!c.done)l.push(e(c.value,l.length)),c=h.next()}else for(r=Object.keys(t),l=new Array(r.length),i=0,n=r.length;i<n;i++)a=r[i],l[i]=e(t[a],a,i);return o(l)||(l=[]),l._isVList=!0,l}function ce(t,e,i,n){var s,r=this.$scopedSlots[t];r?(i=i||{},n&&(i=I(I({},n),i)),s=r(i)||(c(e)?e():e)):s=this.$slots[t]||(c(e)?e():e);var o=i&&i.slot;return o?this.$createElement("template",{slot:o},s):s}function ue(t){return Cn(this.$options,"filters",t,!0)||q}function de(t,e){return s(t)?-1===t.indexOf(e):t!==e}function pe(t,e,i,n,s){var r=W.keyCodes[e]||i;return s&&n&&!W.keyCodes[e]?de(s,n):r?de(r,t):n?L(n)!==e:void 0===t}function fe(t,e,i,n,r){if(i)if(u(i)){s(i)&&(i=D(i));var o=void 0,a=function(s){if("class"===s||"style"===s||b(s))o=t;else{var a=t.attrs&&t.attrs.type;o=n||W.mustUseProp(e,a,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=T(s),h=L(s);if(!(l in o)&&!(h in o)&&(o[s]=i[s],r)){var c=t.on||(t.on={});c["update:".concat(s)]=function(t){i[s]=t}}};for(var l in i)a(l)}else;return t}function me(t,e){var i=this._staticTrees||(this._staticTrees=[]),n=i[t];return n&&!e||(n=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),ve(n,"__static__".concat(t),!1)),n}function ge(t,e,i){return ve(t,"__once__".concat(e).concat(i?"_".concat(i):""),!0),t}function ve(t,e,i){if(s(t))for(var n=0;n<t.length;n++)t[n]&&"string"!==typeof t[n]&&_e(t[n],"".concat(e,"_").concat(n),i);else _e(t,e,i)}function _e(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function ye(t,e){if(e)if(p(e)){var i=t.on=t.on?I({},t.on):{};for(var n in e){var s=i[n],r=e[n];i[n]=s?[].concat(s,r):r}}else;return t}function be(t,e,i,n){e=e||{$stable:!i};for(var r=0;r<t.length;r++){var o=t[r];s(o)?be(o,e,i):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return n&&(e.$key=n),e}function xe(t,e){for(var i=0;i<e.length;i+=2){var n=e[i];"string"===typeof n&&n&&(t[e[i]]=e[i+1])}return t}function Se(t,e){return"string"===typeof t?e+t:t}function we(t){t._o=ge,t._n=_,t._s=v,t._l=he,t._t=ce,t._q=B,t._i=F,t._m=me,t._f=ue,t._k=pe,t._b=fe,t._v=yt,t._e=_t,t._u=be,t._g=ye,t._d=xe,t._p=Se}function Ce(t,e){if(!t||!t.length)return{};for(var i={},n=0,s=t.length;n<s;n++){var r=t[n],o=r.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,r.context!==e&&r.fnContext!==e||!o||null==o.slot)(i.default||(i.default=[])).push(r);else{var a=o.slot,l=i[a]||(i[a]=[]);"template"===r.tag?l.push.apply(l,r.children||[]):l.push(r)}}for(var h in i)i[h].every(Me)&&delete i[h];return i}function Me(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Te(t){return t.isComment&&t.asyncFactory}function ke(t,e,i,s){var r,o=Object.keys(i).length>0,a=e?!!e.$stable:!o,l=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&s&&s!==n&&l===s.$key&&!o&&!s.$hasNormal)return s;for(var h in r={},e)e[h]&&"$"!==h[0]&&(r[h]=Ee(t,i,h,e[h]))}else r={};for(var c in i)c in r||(r[c]=Le(i,c));return e&&Object.isExtensible(e)&&(e._normalized=r),X(r,"$stable",a),X(r,"$key",l),X(r,"$hasNormal",o),r}function Ee(t,e,i,n){var r=function(){var e=mt;gt(t);var i=arguments.length?n.apply(null,arguments):n({});i=i&&"object"===typeof i&&!s(i)?[i]:oe(i);var r=i&&i[0];return gt(e),i&&(!r||1===i.length&&r.isComment&&!Te(r))?void 0:i};return n.proxy&&Object.defineProperty(e,i,{get:r,enumerable:!0,configurable:!0}),r}function Le(t,e){return function(){return t[e]}}function Ae(t){var e=t.$options,i=e.setup;if(i){var n=t._setupContext=Pe(t);gt(t),Tt();var s=Qe(i,null,[t._props||Rt({}),n],t,"setup");if(kt(),gt(),c(s))e.render=s;else if(u(s))if(t._setupState=s,s.__sfc){var r=t._setupProxy={};for(var o in s)"__sfc"!==o&&jt(r,s,o)}else for(var o in s)Y(o)||jt(t,s,o);else 0}}function Pe(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};X(e,"_v_attr_proxy",!0),Re(e,t.$attrs,n,t,"$attrs")}return t._attrsProxy},get listeners(){if(!t._listenersProxy){var e=t._listenersProxy={};Re(e,t.$listeners,n,t,"$listeners")}return t._listenersProxy},get slots(){return Ie(t)},emit:R(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach((function(i){return jt(t,e,i)}))}}}function Re(t,e,i,n,s){var r=!1;for(var o in e)o in t?e[o]!==i[o]&&(r=!0):(r=!0,Oe(t,o,n,s));for(var o in t)o in e||(r=!0,delete t[o]);return r}function Oe(t,e,i,n){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return i[n][e]}})}function Ie(t){return t._slotsProxy||De(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}function De(t,e){for(var i in e)t[i]=e[i];for(var i in t)i in e||delete t[i]}function Ne(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,s=i&&i.context;t.$slots=Ce(e._renderChildren,s),t.$scopedSlots=i?ke(t.$parent,i.data.scopedSlots,t.$slots):n,t._c=function(e,i,n,s){return Ge(t,e,i,n,s,!1)},t.$createElement=function(e,i,n,s){return Ge(t,e,i,n,s,!0)};var r=i&&i.data;$t(t,"$attrs",r&&r.attrs||n,null,!0),$t(t,"$listeners",e._parentListeners||n,null,!0)}var ze=null;function qe(t){we(t.prototype),t.prototype.$nextTick=function(t){return li(t,this)},t.prototype._render=function(){var t,e=this,i=e.$options,n=i.render,r=i._parentVnode;r&&e._isMounted&&(e.$scopedSlots=ke(e.$parent,r.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&De(e._slotsProxy,e.$scopedSlots)),e.$vnode=r;try{gt(e),ze=e,t=n.call(e._renderProxy,e.$createElement)}catch(Zo){Xe(Zo,e,"render"),t=e._vnode}finally{ze=null,gt()}return s(t)&&1===t.length&&(t=t[0]),t instanceof vt||(t=_t()),t.parent=r,t}}function Be(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function Fe(t,e,i,n,s){var r=_t();return r.asyncFactory=t,r.asyncMeta={data:e,context:i,children:n,tag:s},r}function Ue(t,e){if(a(t.error)&&o(t.errorComp))return t.errorComp;if(o(t.resolved))return t.resolved;var i=ze;if(i&&o(t.owners)&&-1===t.owners.indexOf(i)&&t.owners.push(i),a(t.loading)&&o(t.loadingComp))return t.loadingComp;if(i&&!o(t.owners)){var n=t.owners=[i],s=!0,l=null,h=null;i.$on("hook:destroyed",(function(){return x(n,i)}));var c=function(t){for(var e=0,i=n.length;e<i;e++)n[e].$forceUpdate();t&&(n.length=0,null!==l&&(clearTimeout(l),l=null),null!==h&&(clearTimeout(h),h=null))},d=U((function(i){t.resolved=Be(i,e),s?n.length=0:c(!0)})),p=U((function(e){o(t.errorComp)&&(t.error=!0,c(!0))})),f=t(d,p);return u(f)&&(g(f)?r(t.resolved)&&f.then(d,p):g(f.component)&&(f.component.then(d,p),o(f.error)&&(t.errorComp=Be(f.error,e)),o(f.loading)&&(t.loadingComp=Be(f.loading,e),0===f.delay?t.loading=!0:l=setTimeout((function(){l=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,c(!1))}),f.delay||200)),o(f.timeout)&&(h=setTimeout((function(){h=null,r(t.resolved)&&p(null)}),f.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function $e(t){if(s(t))for(var e=0;e<t.length;e++){var i=t[e];if(o(i)&&(o(i.componentOptions)||Te(i)))return i}}var Ve=1,He=2;function Ge(t,e,i,n,r,o){return(s(i)||h(i))&&(r=n,n=i,i=void 0),a(o)&&(r=He),We(t,e,i,n,r)}function We(t,e,i,n,r){if(o(i)&&o(i.__ob__))return _t();if(o(i)&&o(i.is)&&(e=i.is),!e)return _t();var a,l;if(s(n)&&c(n[0])&&(i=i||{},i.scopedSlots={default:n[0]},n.length=0),r===He?n=oe(n):r===Ve&&(n=re(n)),"string"===typeof e){var h=void 0;l=t.$vnode&&t.$vnode.ns||W.getTagNamespace(e),a=W.isReservedTag(e)?new vt(W.parsePlatformTagName(e),i,n,void 0,void 0,t):i&&i.pre||!o(h=Cn(t.$options,"components",e))?new vt(e,i,n,void 0,void 0,t):an(h,i,t,n,e)}else a=an(e,i,t,n);return s(a)?a:o(a)?(o(l)&&je(a,l),o(i)&&Ye(i),a):_t()}function je(t,e,i){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,i=!0),o(t.children))for(var n=0,s=t.children.length;n<s;n++){var l=t.children[n];o(l.tag)&&(r(l.ns)||a(i)&&"svg"!==l.tag)&&je(l,e,i)}}function Ye(t){u(t.style)&&pi(t.style),u(t.class)&&pi(t.class)}function Xe(t,e,i){Tt();try{if(e){var n=e;while(n=n.$parent){var s=n.$options.errorCaptured;if(s)for(var r=0;r<s.length;r++)try{var o=!1===s[r].call(n,t,e,i);if(o)return}catch(Zo){Ke(Zo,n,"errorCaptured hook")}}}Ke(t,e,i)}finally{kt()}}function Qe(t,e,i,n,s){var r;try{r=i?t.apply(e,i):t.call(e),r&&!r._isVue&&g(r)&&!r._handled&&(r.catch((function(t){return Xe(t,n,s+" (Promise/async)")})),r._handled=!0)}catch(Zo){Xe(Zo,n,s)}return r}function Ke(t,e,i){if(W.errorHandler)try{return W.errorHandler.call(null,t,e,i)}catch(Zo){Zo!==t&&Ze(Zo,null,"config.errorHandler")}Ze(t,e,i)}function Ze(t,e,i){if(!J||"undefined"===typeof console)throw t;console.error(t)}var Je,ti=!1,ei=[],ii=!1;function ni(){ii=!1;var t=ei.slice(0);ei.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&dt(Promise)){var si=Promise.resolve();Je=function(){si.then(ni),st&&setTimeout(N)},ti=!0}else if(et||"undefined"===typeof MutationObserver||!dt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Je="undefined"!==typeof setImmediate&&dt(setImmediate)?function(){setImmediate(ni)}:function(){setTimeout(ni,0)};else{var ri=1,oi=new MutationObserver(ni),ai=document.createTextNode(String(ri));oi.observe(ai,{characterData:!0}),Je=function(){ri=(ri+1)%2,ai.data=String(ri)},ti=!0}function li(t,e){var i;if(ei.push((function(){if(t)try{t.call(e)}catch(Zo){Xe(Zo,e,"nextTick")}else i&&i(e)})),ii||(ii=!0,Je()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){i=t}))}function hi(t){return function(e,i){if(void 0===i&&(i=mt),i)return ci(i,t,e)}}function ci(t,e,i){var n=t.$options;n[e]=gn(n[e],i)}hi("beforeMount"),hi("mounted"),hi("beforeUpdate"),hi("updated"),hi("beforeDestroy"),hi("destroyed"),hi("activated"),hi("deactivated"),hi("serverPrefetch"),hi("renderTracked"),hi("renderTriggered"),hi("errorCaptured");var ui="2.7.13";var di=new pt;function pi(t){return fi(t,di),di.clear(),t}function fi(t,e){var i,n,r=s(t);if(!(!r&&!u(t)||t.__v_skip||Object.isFrozen(t)||t instanceof vt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(r){i=t.length;while(i--)fi(t[i],e)}else if(Wt(t))fi(t.value,e);else{n=Object.keys(t),i=n.length;while(i--)fi(t[n[i]],e)}}}var mi,gi=0,vi=function(){function t(t,e,i,n,s){Kt(this,Xt&&!Xt._vm?Xt:t?t._scope:void 0),(this.vm=t)&&s&&(t._watcher=this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++gi,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pt,this.newDepIds=new pt,this.expression="",c(e)?this.getter=e:(this.getter=K(e),this.getter||(this.getter=N)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;Tt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Zo){if(!this.user)throw Zo;Xe(Zo,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&pi(t),kt(),this.cleanupDeps()}return t},t.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},t.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Xi(this)},t.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user){var i='callback for watcher "'.concat(this.expression,'"');Qe(this.cb,this.vm,[t,e],this.vm,i)}else this.cb.call(this.vm,t,e)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&x(this.vm._scope.effects,this),this.active){var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}();function _i(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Si(t,e)}function yi(t,e){mi.$on(t,e)}function bi(t,e){mi.$off(t,e)}function xi(t,e){var i=mi;return function n(){var s=e.apply(null,arguments);null!==s&&i.$off(t,n)}}function Si(t,e,i){mi=t,ee(e,i||{},yi,bi,xi,t),mi=void 0}function wi(t){var e=/^hook:/;t.prototype.$on=function(t,i){var n=this;if(s(t))for(var r=0,o=t.length;r<o;r++)n.$on(t[r],i);else(n._events[t]||(n._events[t]=[])).push(i),e.test(t)&&(n._hasHookEvent=!0);return n},t.prototype.$once=function(t,e){var i=this;function n(){i.$off(t,n),e.apply(i,arguments)}return n.fn=e,i.$on(t,n),i},t.prototype.$off=function(t,e){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(s(t)){for(var n=0,r=t.length;n<r;n++)i.$off(t[n],e);return i}var o,a=i._events[t];if(!a)return i;if(!e)return i._events[t]=null,i;var l=a.length;while(l--)if(o=a[l],o===e||o.fn===e){a.splice(l,1);break}return i},t.prototype.$emit=function(t){var e=this,i=e._events[t];if(i){i=i.length>1?O(i):i;for(var n=O(arguments,1),s='event handler for "'.concat(t,'"'),r=0,o=i.length;r<o;r++)Qe(i[r],e,n,e,s)}return e}}var Ci=null;function Mi(t){var e=Ci;return Ci=t,function(){Ci=e}}function Ti(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){while(i.$options.abstract&&i.$parent)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._provided=i?i._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function ki(t){t.prototype._update=function(t,e){var i=this,n=i.$el,s=i._vnode,r=Mi(i);i._vnode=t,i.$el=s?i.__patch__(s,t):i.__patch__(i.$el,t,e,!1),r(),n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i);var o=i;while(o&&o.$vnode&&o.$parent&&o.$vnode===o.$parent._vnode)o.$parent.$el=o.$el,o=o.$parent},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Oi(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||x(e.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Oi(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Ei(t,e,i){var n;t.$el=e,t.$options.render||(t.$options.render=_t),Oi(t,"beforeMount"),n=function(){t._update(t._render(),i)};var s={before:function(){t._isMounted&&!t._isDestroyed&&Oi(t,"beforeUpdate")}};new vi(t,n,N,s,!0),i=!1;var r=t._preWatchers;if(r)for(var o=0;o<r.length;o++)r[o].run();return null==t.$vnode&&(t._isMounted=!0,Oi(t,"mounted")),t}function Li(t,e,i,s,r){var o=s.data.scopedSlots,a=t.$scopedSlots,l=!!(o&&!o.$stable||a!==n&&!a.$stable||o&&t.$scopedSlots.$key!==o.$key||!o&&t.$scopedSlots.$key),h=!!(r||t.$options._renderChildren||l),c=t.$vnode;t.$options._parentVnode=s,t.$vnode=s,t._vnode&&(t._vnode.parent=s),t.$options._renderChildren=r;var u=s.data.attrs||n;t._attrsProxy&&Re(t._attrsProxy,u,c.data&&c.data.attrs||n,t,"$attrs")&&(h=!0),t.$attrs=u,i=i||n;var d=t.$options._parentListeners;if(t._listenersProxy&&Re(t._listenersProxy,i,d||n,t,"$listeners"),t.$listeners=t.$options._parentListeners=i,Si(t,i,d),e&&t.$options.props){qt(!1);for(var p=t._props,f=t.$options._propKeys||[],m=0;m<f.length;m++){var g=f[m],v=t.$options.props;p[g]=Mn(g,v,e,t)}qt(!0),t.$options.propsData=e}h&&(t.$slots=Ce(r,s.context),t.$forceUpdate())}function Ai(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Pi(t,e){if(e){if(t._directInactive=!1,Ai(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var i=0;i<t.$children.length;i++)Pi(t.$children[i]);Oi(t,"activated")}}function Ri(t,e){if((!e||(t._directInactive=!0,!Ai(t)))&&!t._inactive){t._inactive=!0;for(var i=0;i<t.$children.length;i++)Ri(t.$children[i]);Oi(t,"deactivated")}}function Oi(t,e,i,n){void 0===n&&(n=!0),Tt();var s=mt;n&&gt(t);var r=t.$options[e],o="".concat(e," hook");if(r)for(var a=0,l=r.length;a<l;a++)Qe(r[a],t,i||null,t,o);t._hasHookEvent&&t.$emit("hook:"+e),n&&gt(s),kt()}var Ii=[],Di=[],Ni={},zi=!1,qi=!1,Bi=0;function Fi(){Bi=Ii.length=Di.length=0,Ni={},zi=qi=!1}var Ui=0,$i=Date.now;if(J&&!et){var Vi=window.performance;Vi&&"function"===typeof Vi.now&&$i()>document.createEvent("Event").timeStamp&&($i=function(){return Vi.now()})}var Hi=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function Gi(){var t,e;for(Ui=$i(),qi=!0,Ii.sort(Hi),Bi=0;Bi<Ii.length;Bi++)t=Ii[Bi],t.before&&t.before(),e=t.id,Ni[e]=null,t.run();var i=Di.slice(),n=Ii.slice();Fi(),Yi(i),Wi(n),wt(),ut&&W.devtools&&ut.emit("flush")}function Wi(t){var e=t.length;while(e--){var i=t[e],n=i.vm;n&&n._watcher===i&&n._isMounted&&!n._isDestroyed&&Oi(n,"updated")}}function ji(t){t._inactive=!1,Di.push(t)}function Yi(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Pi(t[e],!0)}function Xi(t){var e=t.id;if(null==Ni[e]&&(t!==Ct.target||!t.noRecurse)){if(Ni[e]=!0,qi){var i=Ii.length-1;while(i>Bi&&Ii[i].id>t.id)i--;Ii.splice(i+1,0,t)}else Ii.push(t);zi||(zi=!0,li(Gi))}}function Qi(t){var e=t.$options.provide;if(e){var i=c(e)?e.call(t):e;if(!u(i))return;for(var n=Zt(t),s=ft?Reflect.ownKeys(i):Object.keys(i),r=0;r<s.length;r++){var o=s[r];Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(i,o))}}}function Ki(t){var e=Zi(t.$options.inject,t);e&&(qt(!1),Object.keys(e).forEach((function(i){$t(t,i,e[i])})),qt(!0))}function Zi(t,e){if(t){for(var i=Object.create(null),n=ft?Reflect.ownKeys(t):Object.keys(t),s=0;s<n.length;s++){var r=n[s];if("__ob__"!==r){var o=t[r].from;if(o in e._provided)i[r]=e._provided[o];else if("default"in t[r]){var a=t[r].default;i[r]=c(a)?a.call(e):a}else 0}}return i}}function Ji(t,e,i,r,o){var l,h=this,c=o.options;w(r,"_uid")?(l=Object.create(r),l._original=r):(l=r,r=r._original);var u=a(c._compiled),d=!u;this.data=t,this.props=e,this.children=i,this.parent=r,this.listeners=t.on||n,this.injections=Zi(c.inject,r),this.slots=function(){return h.$slots||ke(r,t.scopedSlots,h.$slots=Ce(i,r)),h.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ke(r,t.scopedSlots,this.slots())}}),u&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=ke(r,t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,i,n){var o=Ge(l,t,e,i,n,d);return o&&!s(o)&&(o.fnScopeId=c._scopeId,o.fnContext=r),o}:this._c=function(t,e,i,n){return Ge(l,t,e,i,n,d)}}function tn(t,e,i,r,a){var l=t.options,h={},c=l.props;if(o(c))for(var u in c)h[u]=Mn(u,c,e||n);else o(i.attrs)&&nn(h,i.attrs),o(i.props)&&nn(h,i.props);var d=new Ji(i,h,a,r,t),p=l.render.call(null,d._c,d);if(p instanceof vt)return en(p,i,d.parent,l,d);if(s(p)){for(var f=oe(p)||[],m=new Array(f.length),g=0;g<f.length;g++)m[g]=en(f[g],i,d.parent,l,d);return m}}function en(t,e,i,n,s){var r=bt(t);return r.fnContext=i,r.fnOptions=n,e.slot&&((r.data||(r.data={})).slot=e.slot),r}function nn(t,e){for(var i in e)t[T(i)]=e[i]}function sn(t){return t.name||t.__name||t._componentTag}we(Ji.prototype);var rn={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;rn.prepatch(i,i)}else{var n=t.componentInstance=ln(t,Ci);n.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var i=e.componentOptions,n=e.componentInstance=t.componentInstance;Li(n,i.propsData,i.listeners,e,i.children)},insert:function(t){var e=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,Oi(i,"mounted")),t.data.keepAlive&&(e._isMounted?ji(i):Pi(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Ri(e,!0):e.$destroy())}},on=Object.keys(rn);function an(t,e,i,n,s){if(!r(t)){var l=i.$options._base;if(u(t)&&(t=l.extend(t)),"function"===typeof t){var h;if(r(t.cid)&&(h=t,t=Ue(h,l),void 0===t))return Fe(h,e,i,n,s);e=e||{},Xn(t),o(e.model)&&un(t.options,e);var c=ne(e,t,s);if(a(t.options.functional))return tn(t,c,e,i,n);var d=e.on;if(e.on=e.nativeOn,a(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}hn(e);var f=sn(t.options)||s,m=new vt("vue-component-".concat(t.cid).concat(f?"-".concat(f):""),e,void 0,void 0,void 0,i,{Ctor:t,propsData:c,listeners:d,tag:s,children:n},h);return m}}}function ln(t,e){var i={_isComponent:!0,_parentVnode:t,parent:e},n=t.data.inlineTemplate;return o(n)&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new t.componentOptions.Ctor(i)}function hn(t){for(var e=t.hook||(t.hook={}),i=0;i<on.length;i++){var n=on[i],s=e[n],r=rn[n];s===r||s&&s._merged||(e[n]=s?cn(r,s):r)}}function cn(t,e){var i=function(i,n){t(i,n),e(i,n)};return i._merged=!0,i}function un(t,e){var i=t.model&&t.model.prop||"value",n=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[i]=e.model.value;var r=e.on||(e.on={}),a=r[n],l=e.model.callback;o(a)?(s(a)?-1===a.indexOf(l):a!==l)&&(r[n]=[l].concat(a)):r[n]=l}var dn=N,pn=W.optionMergeStrategies;function fn(t,e){if(!e)return t;for(var i,n,s,r=ft?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++)i=r[o],"__ob__"!==i&&(n=t[i],s=e[i],w(t,i)?n!==s&&p(n)&&p(s)&&fn(n,s):Vt(t,i,s));return t}function mn(t,e,i){return i?function(){var n=c(e)?e.call(i,i):e,s=c(t)?t.call(i,i):t;return n?fn(n,s):s}:e?t?function(){return fn(c(e)?e.call(this,this):e,c(t)?t.call(this,this):t)}:e:t}function gn(t,e){var i=e?t?t.concat(e):s(e)?e:[e]:t;return i?vn(i):i}function vn(t){for(var e=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&e.push(t[i]);return e}function _n(t,e,i,n){var s=Object.create(t||null);return e?I(s,e):s}pn.data=function(t,e,i){return i?mn(t,e,i):e&&"function"!==typeof e?t:mn(t,e)},G.forEach((function(t){pn[t]=gn})),H.forEach((function(t){pn[t+"s"]=_n})),pn.watch=function(t,e,i,n){if(t===at&&(t=void 0),e===at&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};for(var o in I(r,t),e){var a=r[o],l=e[o];a&&!s(a)&&(a=[a]),r[o]=a?a.concat(l):s(l)?l:[l]}return r},pn.props=pn.methods=pn.inject=pn.computed=function(t,e,i,n){if(!t)return e;var s=Object.create(null);return I(s,t),e&&I(s,e),s},pn.provide=mn;var yn=function(t,e){return void 0===e?t:e};function bn(t,e){var i=t.props;if(i){var n,r,o,a={};if(s(i)){n=i.length;while(n--)r=i[n],"string"===typeof r&&(o=T(r),a[o]={type:null})}else if(p(i))for(var l in i)r=i[l],o=T(l),a[o]=p(r)?r:{type:r};else 0;t.props=a}}function xn(t,e){var i=t.inject;if(i){var n=t.inject={};if(s(i))for(var r=0;r<i.length;r++)n[i[r]]={from:i[r]};else if(p(i))for(var o in i){var a=i[o];n[o]=p(a)?I({from:o},a):{from:a}}else 0}}function Sn(t){var e=t.directives;if(e)for(var i in e){var n=e[i];c(n)&&(e[i]={bind:n,update:n})}}function wn(t,e,i){if(c(e)&&(e=e.options),bn(e,i),xn(e,i),Sn(e),!e._base&&(e.extends&&(t=wn(t,e.extends,i)),e.mixins))for(var n=0,s=e.mixins.length;n<s;n++)t=wn(t,e.mixins[n],i);var r,o={};for(r in t)a(r);for(r in e)w(t,r)||a(r);function a(n){var s=pn[n]||yn;o[n]=s(t[n],e[n],i,n)}return o}function Cn(t,e,i,n){if("string"===typeof i){var s=t[e];if(w(s,i))return s[i];var r=T(i);if(w(s,r))return s[r];var o=k(r);if(w(s,o))return s[o];var a=s[i]||s[r]||s[o];return a}}function Mn(t,e,i,n){var s=e[t],r=!w(i,t),o=i[t],a=An(Boolean,s.type);if(a>-1)if(r&&!w(s,"default"))o=!1;else if(""===o||o===L(t)){var l=An(String,s.type);(l<0||a<l)&&(o=!0)}if(void 0===o){o=Tn(n,s,t);var h=zt;qt(!0),Ut(o),qt(h)}return o}function Tn(t,e,i){if(w(e,"default")){var n=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[i]&&void 0!==t._props[i]?t._props[i]:c(n)&&"Function"!==En(e.type)?n.call(t):n}}var kn=/^\s*function (\w+)/;function En(t){var e=t&&t.toString().match(kn);return e?e[1]:""}function Ln(t,e){return En(t)===En(e)}function An(t,e){if(!s(e))return Ln(e,t)?0:-1;for(var i=0,n=e.length;i<n;i++)if(Ln(e[i],t))return i;return-1}var Pn={enumerable:!0,configurable:!0,get:N,set:N};function Rn(t,e,i){Pn.get=function(){return this[e][i]},Pn.set=function(t){this[e][i]=t},Object.defineProperty(t,i,Pn)}function On(t){var e=t.$options;if(e.props&&In(t,e.props),Ae(t),e.methods&&$n(t,e.methods),e.data)Dn(t);else{var i=Ut(t._data={});i&&i.vmCount++}e.computed&&qn(t,e.computed),e.watch&&e.watch!==at&&Vn(t,e.watch)}function In(t,e){var i=t.$options.propsData||{},n=t._props=Rt({}),s=t.$options._propKeys=[],r=!t.$parent;r||qt(!1);var o=function(r){s.push(r);var o=Mn(r,e,i,t);$t(n,r,o),r in t||Rn(t,"_props",r)};for(var a in e)o(a);qt(!0)}function Dn(t){var e=t.$options.data;e=t._data=c(e)?Nn(e,t):e||{},p(e)||(e={});var i=Object.keys(e),n=t.$options.props,s=(t.$options.methods,i.length);while(s--){var r=i[s];0,n&&w(n,r)||Y(r)||Rn(t,"_data",r)}var o=Ut(e);o&&o.vmCount++}function Nn(t,e){Tt();try{return t.call(e,e)}catch(Zo){return Xe(Zo,e,"data()"),{}}finally{kt()}}var zn={lazy:!0};function qn(t,e){var i=t._computedWatchers=Object.create(null),n=ct();for(var s in e){var r=e[s],o=c(r)?r:r.get;0,n||(i[s]=new vi(t,o||N,N,zn)),s in t||Bn(t,s,r)}}function Bn(t,e,i){var n=!ct();c(i)?(Pn.get=n?Fn(e):Un(i),Pn.set=N):(Pn.get=i.get?n&&!1!==i.cache?Fn(e):Un(i.get):N,Pn.set=i.set||N),Object.defineProperty(t,e,Pn)}function Fn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),Ct.target&&e.depend(),e.value}}function Un(t){return function(){return t.call(this,this)}}function $n(t,e){t.$options.props;for(var i in e)t[i]="function"!==typeof e[i]?N:R(e[i],t)}function Vn(t,e){for(var i in e){var n=e[i];if(s(n))for(var r=0;r<n.length;r++)Hn(t,i,n[r]);else Hn(t,i,n)}}function Hn(t,e,i,n){return p(i)&&(n=i,i=i.handler),"string"===typeof i&&(i=t[i]),t.$watch(e,i,n)}function Gn(t){var e={get:function(){return this._data}},i={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",i),t.prototype.$set=Vt,t.prototype.$delete=Ht,t.prototype.$watch=function(t,e,i){var n=this;if(p(e))return Hn(n,t,e,i);i=i||{},i.user=!0;var s=new vi(n,t,e,i);if(i.immediate){var r='callback for immediate watcher "'.concat(s.expression,'"');Tt(),Qe(e,n,[s.value],n,r),kt()}return function(){s.teardown()}}}var Wn=0;function jn(t){t.prototype._init=function(t){var e=this;e._uid=Wn++,e._isVue=!0,e.__v_skip=!0,e._scope=new Qt(!0),e._scope._vm=!0,t&&t._isComponent?Yn(e,t):e.$options=wn(Xn(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Ti(e),_i(e),Ne(e),Oi(e,"beforeCreate",void 0,!1),Ki(e),On(e),Qi(e),Oi(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function Yn(t,e){var i=t.$options=Object.create(t.constructor.options),n=e._parentVnode;i.parent=e.parent,i._parentVnode=n;var s=n.componentOptions;i.propsData=s.propsData,i._parentListeners=s.listeners,i._renderChildren=s.children,i._componentTag=s.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}function Xn(t){var e=t.options;if(t.super){var i=Xn(t.super),n=t.superOptions;if(i!==n){t.superOptions=i;var s=Qn(t);s&&I(t.extendOptions,s),e=t.options=wn(i,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Qn(t){var e,i=t.options,n=t.sealedOptions;for(var s in i)i[s]!==n[s]&&(e||(e={}),e[s]=i[s]);return e}function Kn(t){this._init(t)}function Zn(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var i=O(arguments,1);return i.unshift(this),c(t.install)?t.install.apply(t,i):c(t)&&t.apply(null,i),e.push(t),this}}function Jn(t){t.mixin=function(t){return this.options=wn(this.options,t),this}}function ts(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var i=this,n=i.cid,s=t._Ctor||(t._Ctor={});if(s[n])return s[n];var r=sn(t)||sn(i.options);var o=function(t){this._init(t)};return o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.cid=e++,o.options=wn(i.options,t),o["super"]=i,o.options.props&&es(o),o.options.computed&&is(o),o.extend=i.extend,o.mixin=i.mixin,o.use=i.use,H.forEach((function(t){o[t]=i[t]})),r&&(o.options.components[r]=o),o.superOptions=i.options,o.extendOptions=t,o.sealedOptions=I({},o.options),s[n]=o,o}}function es(t){var e=t.options.props;for(var i in e)Rn(t.prototype,"_props",i)}function is(t){var e=t.options.computed;for(var i in e)Bn(t.prototype,i,e[i])}function ns(t){H.forEach((function(e){t[e]=function(t,i){return i?("component"===e&&p(i)&&(i.name=i.name||t,i=this.options._base.extend(i)),"directive"===e&&c(i)&&(i={bind:i,update:i}),this.options[e+"s"][t]=i,i):this.options[e+"s"][t]}}))}function ss(t){return t&&(sn(t.Ctor.options)||t.tag)}function rs(t,e){return s(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!f(t)&&t.test(e)}function os(t,e){var i=t.cache,n=t.keys,s=t._vnode;for(var r in i){var o=i[r];if(o){var a=o.name;a&&!e(a)&&as(i,r,n,s)}}}function as(t,e,i,n){var s=t[e];!s||n&&s.tag===n.tag||s.componentInstance.$destroy(),t[e]=null,x(i,e)}jn(Kn),Gn(Kn),wi(Kn),ki(Kn),qe(Kn);var ls=[String,RegExp,Array],hs={name:"keep-alive",abstract:!0,props:{include:ls,exclude:ls,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,i=t.keys,n=t.vnodeToCache,s=t.keyToCache;if(n){var r=n.tag,o=n.componentInstance,a=n.componentOptions;e[s]={name:ss(a),tag:r,componentInstance:o},i.push(s),this.max&&i.length>parseInt(this.max)&&as(e,i[0],i,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)as(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){os(t,(function(t){return rs(e,t)}))})),this.$watch("exclude",(function(e){os(t,(function(t){return!rs(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=$e(t),i=e&&e.componentOptions;if(i){var n=ss(i),s=this,r=s.include,o=s.exclude;if(r&&(!n||!rs(r,n))||o&&n&&rs(o,n))return e;var a=this,l=a.cache,h=a.keys,c=null==e.key?i.Ctor.cid+(i.tag?"::".concat(i.tag):""):e.key;l[c]?(e.componentInstance=l[c].componentInstance,x(h,c),h.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||t&&t[0]}},cs={KeepAlive:hs};function us(t){var e={get:function(){return W}};Object.defineProperty(t,"config",e),t.util={warn:dn,extend:I,mergeOptions:wn,defineReactive:$t},t.set=Vt,t.delete=Ht,t.nextTick=li,t.observable=function(t){return Ut(t),t},t.options=Object.create(null),H.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,I(t.options.components,cs),Zn(t),Jn(t),ts(t),ns(t)}us(Kn),Object.defineProperty(Kn.prototype,"$isServer",{get:ct}),Object.defineProperty(Kn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Kn,"FunctionalRenderContext",{value:Ji}),Kn.version=ui;var ds=y("style,class"),ps=y("input,textarea,option,select,progress"),fs=function(t,e,i){return"value"===i&&ps(t)&&"button"!==e||"selected"===i&&"option"===t||"checked"===i&&"input"===t||"muted"===i&&"video"===t},ms=y("contenteditable,draggable,spellcheck"),gs=y("events,caret,typing,plaintext-only"),vs=function(t,e){return Ss(e)||"false"===e?"false":"contenteditable"===t&&gs(e)?e:"true"},_s=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),ys="http://www.w3.org/1999/xlink",bs=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},xs=function(t){return bs(t)?t.slice(6,t.length):""},Ss=function(t){return null==t||!1===t};function ws(t){var e=t.data,i=t,n=t;while(o(n.componentInstance))n=n.componentInstance._vnode,n&&n.data&&(e=Cs(n.data,e));while(o(i=i.parent))i&&i.data&&(e=Cs(e,i.data));return Ms(e.staticClass,e.class)}function Cs(t,e){return{staticClass:Ts(t.staticClass,e.staticClass),class:o(t.class)?[t.class,e.class]:e.class}}function Ms(t,e){return o(t)||o(e)?Ts(t,ks(e)):""}function Ts(t,e){return t?e?t+" "+e:t:e||""}function ks(t){return Array.isArray(t)?Es(t):u(t)?Ls(t):"string"===typeof t?t:""}function Es(t){for(var e,i="",n=0,s=t.length;n<s;n++)o(e=ks(t[n]))&&""!==e&&(i&&(i+=" "),i+=e);return i}function Ls(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}var As={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ps=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Rs=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Os=function(t){return Ps(t)||Rs(t)};function Is(t){return Rs(t)?"svg":"math"===t?"math":void 0}var Ds=Object.create(null);function Ns(t){if(!J)return!0;if(Os(t))return!1;if(t=t.toLowerCase(),null!=Ds[t])return Ds[t];var e=document.createElement(t);return t.indexOf("-")>-1?Ds[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Ds[t]=/HTMLUnknownElement/.test(e.toString())}var zs=y("text,number,password,search,email,tel,url");function qs(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function Bs(t,e){var i=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i}function Fs(t,e){return document.createElementNS(As[t],e)}function Us(t){return document.createTextNode(t)}function $s(t){return document.createComment(t)}function Vs(t,e,i){t.insertBefore(e,i)}function Hs(t,e){t.removeChild(e)}function Gs(t,e){t.appendChild(e)}function Ws(t){return t.parentNode}function js(t){return t.nextSibling}function Ys(t){return t.tagName}function Xs(t,e){t.textContent=e}function Qs(t,e){t.setAttribute(e,"")}var Ks=Object.freeze({__proto__:null,createElement:Bs,createElementNS:Fs,createTextNode:Us,createComment:$s,insertBefore:Vs,removeChild:Hs,appendChild:Gs,parentNode:Ws,nextSibling:js,tagName:Ys,setTextContent:Xs,setStyleScope:Qs}),Zs={create:function(t,e){Js(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Js(t,!0),Js(e))},destroy:function(t){Js(t,!0)}};function Js(t,e){var i=t.data.ref;if(o(i)){var n=t.context,r=t.componentInstance||t.elm,a=e?null:r,l=e?void 0:r;if(c(i))Qe(i,n,[a],n,"template ref function");else{var h=t.data.refInFor,u="string"===typeof i||"number"===typeof i,d=Wt(i),p=n.$refs;if(u||d)if(h){var f=u?p[i]:i.value;e?s(f)&&x(f,r):s(f)?f.includes(r)||f.push(r):u?(p[i]=[r],tr(n,i,p[i])):i.value=[r]}else if(u){if(e&&p[i]!==r)return;p[i]=l,tr(n,i,a)}else if(d){if(e&&i.value!==r)return;i.value=a}else 0}}}function tr(t,e,i){var n=t._setupState;n&&w(n,e)&&(Wt(n[e])?n[e].value=i:n[e]=i)}var er=new vt("",{},[]),ir=["create","activate","update","remove","destroy"];function nr(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&o(t.data)===o(e.data)&&sr(t,e)||a(t.isAsyncPlaceholder)&&r(e.asyncFactory.error))}function sr(t,e){if("input"!==t.tag)return!0;var i,n=o(i=t.data)&&o(i=i.attrs)&&i.type,s=o(i=e.data)&&o(i=i.attrs)&&i.type;return n===s||zs(n)&&zs(s)}function rr(t,e,i){var n,s,r={};for(n=e;n<=i;++n)s=t[n].key,o(s)&&(r[s]=n);return r}function or(t){var e,i,n={},l=t.modules,c=t.nodeOps;for(e=0;e<ir.length;++e)for(n[ir[e]]=[],i=0;i<l.length;++i)o(l[i][ir[e]])&&n[ir[e]].push(l[i][ir[e]]);function u(t){return new vt(c.tagName(t).toLowerCase(),{},[],void 0,t)}function d(t,e){function i(){0===--i.listeners&&p(t)}return i.listeners=e,i}function p(t){var e=c.parentNode(t);o(e)&&c.removeChild(e,t)}function f(t,e,i,n,s,r,l){if(o(t.elm)&&o(r)&&(t=r[l]=bt(t)),t.isRootInsert=!s,!m(t,e,i,n)){var h=t.data,u=t.children,d=t.tag;o(d)?(t.elm=t.ns?c.createElementNS(t.ns,d):c.createElement(d,t),w(t),b(t,u,e),o(h)&&S(t,e),_(i,t.elm,n)):a(t.isComment)?(t.elm=c.createComment(t.text),_(i,t.elm,n)):(t.elm=c.createTextNode(t.text),_(i,t.elm,n))}}function m(t,e,i,n){var s=t.data;if(o(s)){var r=o(t.componentInstance)&&s.keepAlive;if(o(s=s.hook)&&o(s=s.init)&&s(t,!1),o(t.componentInstance))return g(t,e),_(i,t.elm,n),a(r)&&v(t,e,i,n),!0}}function g(t,e){o(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(S(t,e),w(t)):(Js(t),e.push(t))}function v(t,e,i,s){var r,a=t;while(a.componentInstance)if(a=a.componentInstance._vnode,o(r=a.data)&&o(r=r.transition)){for(r=0;r<n.activate.length;++r)n.activate[r](er,a);e.push(a);break}_(i,t.elm,s)}function _(t,e,i){o(t)&&(o(i)?c.parentNode(i)===t&&c.insertBefore(t,e,i):c.appendChild(t,e))}function b(t,e,i){if(s(e)){0;for(var n=0;n<e.length;++n)f(e[n],i,t.elm,null,!0,e,n)}else h(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return o(t.tag)}function S(t,i){for(var s=0;s<n.create.length;++s)n.create[s](er,t);e=t.data.hook,o(e)&&(o(e.create)&&e.create(er,t),o(e.insert)&&i.push(t))}function w(t){var e;if(o(e=t.fnScopeId))c.setStyleScope(t.elm,e);else{var i=t;while(i)o(e=i.context)&&o(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),i=i.parent}o(e=Ci)&&e!==t.context&&e!==t.fnContext&&o(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function C(t,e,i,n,s,r){for(;n<=s;++n)f(i[n],r,t,e,!1,i,n)}function M(t){var e,i,s=t.data;if(o(s))for(o(e=s.hook)&&o(e=e.destroy)&&e(t),e=0;e<n.destroy.length;++e)n.destroy[e](t);if(o(e=t.children))for(i=0;i<t.children.length;++i)M(t.children[i])}function T(t,e,i){for(;e<=i;++e){var n=t[e];o(n)&&(o(n.tag)?(k(n),M(n)):p(n.elm))}}function k(t,e){if(o(e)||o(t.data)){var i,s=n.remove.length+1;for(o(e)?e.listeners+=s:e=d(t.elm,s),o(i=t.componentInstance)&&o(i=i._vnode)&&o(i.data)&&k(i,e),i=0;i<n.remove.length;++i)n.remove[i](t,e);o(i=t.data.hook)&&o(i=i.remove)?i(t,e):e()}else p(t.elm)}function E(t,e,i,n,s){var a,l,h,u,d=0,p=0,m=e.length-1,g=e[0],v=e[m],_=i.length-1,y=i[0],b=i[_],x=!s;while(d<=m&&p<=_)r(g)?g=e[++d]:r(v)?v=e[--m]:nr(g,y)?(A(g,y,n,i,p),g=e[++d],y=i[++p]):nr(v,b)?(A(v,b,n,i,_),v=e[--m],b=i[--_]):nr(g,b)?(A(g,b,n,i,_),x&&c.insertBefore(t,g.elm,c.nextSibling(v.elm)),g=e[++d],b=i[--_]):nr(v,y)?(A(v,y,n,i,p),x&&c.insertBefore(t,v.elm,g.elm),v=e[--m],y=i[++p]):(r(a)&&(a=rr(e,d,m)),l=o(y.key)?a[y.key]:L(y,e,d,m),r(l)?f(y,n,t,g.elm,!1,i,p):(h=e[l],nr(h,y)?(A(h,y,n,i,p),e[l]=void 0,x&&c.insertBefore(t,h.elm,g.elm)):f(y,n,t,g.elm,!1,i,p)),y=i[++p]);d>m?(u=r(i[_+1])?null:i[_+1].elm,C(t,u,i,p,_,n)):p>_&&T(e,d,m)}function L(t,e,i,n){for(var s=i;s<n;s++){var r=e[s];if(o(r)&&nr(t,r))return s}}function A(t,e,i,s,l,h){if(t!==e){o(e.elm)&&o(s)&&(e=s[l]=bt(e));var u=e.elm=t.elm;if(a(t.isAsyncPlaceholder))o(e.asyncFactory.resolved)?O(t.elm,e,i):e.isAsyncPlaceholder=!0;else if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))e.componentInstance=t.componentInstance;else{var d,p=e.data;o(p)&&o(d=p.hook)&&o(d=d.prepatch)&&d(t,e);var f=t.children,m=e.children;if(o(p)&&x(e)){for(d=0;d<n.update.length;++d)n.update[d](t,e);o(d=p.hook)&&o(d=d.update)&&d(t,e)}r(e.text)?o(f)&&o(m)?f!==m&&E(u,f,m,i,h):o(m)?(o(t.text)&&c.setTextContent(u,""),C(u,null,m,0,m.length-1,i)):o(f)?T(f,0,f.length-1):o(t.text)&&c.setTextContent(u,""):t.text!==e.text&&c.setTextContent(u,e.text),o(p)&&o(d=p.hook)&&o(d=d.postpatch)&&d(t,e)}}}function P(t,e,i){if(a(i)&&o(t.parent))t.parent.data.pendingInsert=e;else for(var n=0;n<e.length;++n)e[n].data.hook.insert(e[n])}var R=y("attrs,class,staticClass,staticStyle,key");function O(t,e,i,n){var s,r=e.tag,l=e.data,h=e.children;if(n=n||l&&l.pre,e.elm=t,a(e.isComment)&&o(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(o(l)&&(o(s=l.hook)&&o(s=s.init)&&s(e,!0),o(s=e.componentInstance)))return g(e,i),!0;if(o(r)){if(o(h))if(t.hasChildNodes())if(o(s=l)&&o(s=s.domProps)&&o(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var c=!0,u=t.firstChild,d=0;d<h.length;d++){if(!u||!O(u,h[d],i,n)){c=!1;break}u=u.nextSibling}if(!c||u)return!1}else b(e,h,i);if(o(l)){var p=!1;for(var f in l)if(!R(f)){p=!0,S(e,i);break}!p&&l["class"]&&pi(l["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,i,s){if(!r(e)){var l=!1,h=[];if(r(t))l=!0,f(e,h);else{var d=o(t.nodeType);if(!d&&nr(t,e))A(t,e,h,null,null,s);else{if(d){if(1===t.nodeType&&t.hasAttribute(V)&&(t.removeAttribute(V),i=!0),a(i)&&O(t,e,h))return P(e,h,!0),t;t=u(t)}var p=t.elm,m=c.parentNode(p);if(f(e,h,p._leaveCb?null:m,c.nextSibling(p)),o(e.parent)){var g=e.parent,v=x(e);while(g){for(var _=0;_<n.destroy.length;++_)n.destroy[_](g);if(g.elm=e.elm,v){for(var y=0;y<n.create.length;++y)n.create[y](er,g);var b=g.data.hook.insert;if(b.merged)for(var S=1;S<b.fns.length;S++)b.fns[S]()}else Js(g);g=g.parent}}o(m)?T([t],0,0):o(t.tag)&&M(t)}}return P(e,h,l),e.elm}o(t)&&M(t)}}var ar={create:lr,update:lr,destroy:function(t){lr(t,er)}};function lr(t,e){(t.data.directives||e.data.directives)&&hr(t,e)}function hr(t,e){var i,n,s,r=t===er,o=e===er,a=ur(t.data.directives,t.context),l=ur(e.data.directives,e.context),h=[],c=[];for(i in l)n=a[i],s=l[i],n?(s.oldValue=n.value,s.oldArg=n.arg,pr(s,"update",e,t),s.def&&s.def.componentUpdated&&c.push(s)):(pr(s,"bind",e,t),s.def&&s.def.inserted&&h.push(s));if(h.length){var u=function(){for(var i=0;i<h.length;i++)pr(h[i],"inserted",e,t)};r?ie(e,"insert",u):u()}if(c.length&&ie(e,"postpatch",(function(){for(var i=0;i<c.length;i++)pr(c[i],"componentUpdated",e,t)})),!r)for(i in a)l[i]||pr(a[i],"unbind",t,t,o)}var cr=Object.create(null);function ur(t,e){var i,n,s=Object.create(null);if(!t)return s;for(i=0;i<t.length;i++){if(n=t[i],n.modifiers||(n.modifiers=cr),s[dr(n)]=n,e._setupState&&e._setupState.__sfc){var r=n.def||Cn(e,"_setupState","v-"+n.name);n.def="function"===typeof r?{bind:r,update:r}:r}n.def=n.def||Cn(e.$options,"directives",n.name,!0)}return s}function dr(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function pr(t,e,i,n,s){var r=t.def&&t.def[e];if(r)try{r(i.elm,t,i,n,s)}catch(Zo){Xe(Zo,i.context,"directive ".concat(t.name," ").concat(e," hook"))}}var fr=[Zs,ar];function mr(t,e){var i=e.componentOptions;if((!o(i)||!1!==i.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var n,s,l,h=e.elm,c=t.data.attrs||{},u=e.data.attrs||{};for(n in(o(u.__ob__)||a(u._v_attr_proxy))&&(u=e.data.attrs=I({},u)),u)s=u[n],l=c[n],l!==s&&gr(h,n,s,e.data.pre);for(n in(et||nt)&&u.value!==c.value&&gr(h,"value",u.value),c)r(u[n])&&(bs(n)?h.removeAttributeNS(ys,xs(n)):ms(n)||h.removeAttribute(n))}}function gr(t,e,i,n){n||t.tagName.indexOf("-")>-1?vr(t,e,i):_s(e)?Ss(i)?t.removeAttribute(e):(i="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,i)):ms(e)?t.setAttribute(e,vs(e,i)):bs(e)?Ss(i)?t.removeAttributeNS(ys,xs(e)):t.setAttributeNS(ys,e,i):vr(t,e,i)}function vr(t,e,i){if(Ss(i))t.removeAttribute(e);else{if(et&&!it&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==i&&!t.__ieph){var n=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,i)}}var _r={create:mr,update:mr};function yr(t,e){var i=e.elm,n=e.data,s=t.data;if(!(r(n.staticClass)&&r(n.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var a=ws(e),l=i._transitionClasses;o(l)&&(a=Ts(a,ks(l))),a!==i._prevClass&&(i.setAttribute("class",a),i._prevClass=a)}}var br,xr={create:yr,update:yr},Sr="__r",wr="__c";function Cr(t){if(o(t[Sr])){var e=et?"change":"input";t[e]=[].concat(t[Sr],t[e]||[]),delete t[Sr]}o(t[wr])&&(t.change=[].concat(t[wr],t.change||[]),delete t[wr])}function Mr(t,e,i){var n=br;return function s(){var r=e.apply(null,arguments);null!==r&&Er(t,s,i,n)}}var Tr=ti&&!(ot&&Number(ot[1])<=53);function kr(t,e,i,n){if(Tr){var s=Ui,r=e;e=r._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=s||t.timeStamp<=0||t.target.ownerDocument!==document)return r.apply(this,arguments)}}br.addEventListener(t,e,lt?{capture:i,passive:n}:i)}function Er(t,e,i,n){(n||br).removeEventListener(t,e._wrapper||e,i)}function Lr(t,e){if(!r(t.data.on)||!r(e.data.on)){var i=e.data.on||{},n=t.data.on||{};br=e.elm||t.elm,Cr(i),ee(i,n,kr,Er,Mr,e.context),br=void 0}}var Ar,Pr={create:Lr,update:Lr,destroy:function(t){return Lr(t,er)}};function Rr(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var i,n,s=e.elm,l=t.data.domProps||{},h=e.data.domProps||{};for(i in(o(h.__ob__)||a(h._v_attr_proxy))&&(h=e.data.domProps=I({},h)),l)i in h||(s[i]="");for(i in h){if(n=h[i],"textContent"===i||"innerHTML"===i){if(e.children&&(e.children.length=0),n===l[i])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===i&&"PROGRESS"!==s.tagName){s._value=n;var c=r(n)?"":String(n);Or(s,c)&&(s.value=c)}else if("innerHTML"===i&&Rs(s.tagName)&&r(s.innerHTML)){Ar=Ar||document.createElement("div"),Ar.innerHTML="<svg>".concat(n,"</svg>");var u=Ar.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(u.firstChild)s.appendChild(u.firstChild)}else if(n!==l[i])try{s[i]=n}catch(Zo){}}}}function Or(t,e){return!t.composing&&("OPTION"===t.tagName||Ir(t,e)||Dr(t,e))}function Ir(t,e){var i=!0;try{i=document.activeElement!==t}catch(Zo){}return i&&t.value!==e}function Dr(t,e){var i=t.value,n=t._vModifiers;if(o(n)){if(n.number)return _(i)!==_(e);if(n.trim)return i.trim()!==e.trim()}return i!==e}var Nr={create:Rr,update:Rr},zr=C((function(t){var e={},i=/;(?![^(]*\))/g,n=/:(.+)/;return t.split(i).forEach((function(t){if(t){var i=t.split(n);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}));function qr(t){var e=Br(t.style);return t.staticStyle?I(t.staticStyle,e):e}function Br(t){return Array.isArray(t)?D(t):"string"===typeof t?zr(t):t}function Fr(t,e){var i,n={};if(e){var s=t;while(s.componentInstance)s=s.componentInstance._vnode,s&&s.data&&(i=qr(s.data))&&I(n,i)}(i=qr(t.data))&&I(n,i);var r=t;while(r=r.parent)r.data&&(i=qr(r.data))&&I(n,i);return n}var Ur,$r=/^--/,Vr=/\s*!important$/,Hr=function(t,e,i){if($r.test(e))t.style.setProperty(e,i);else if(Vr.test(i))t.style.setProperty(L(e),i.replace(Vr,""),"important");else{var n=Wr(e);if(Array.isArray(i))for(var s=0,r=i.length;s<r;s++)t.style[n]=i[s];else t.style[n]=i}},Gr=["Webkit","Moz","ms"],Wr=C((function(t){if(Ur=Ur||document.createElement("div").style,t=T(t),"filter"!==t&&t in Ur)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<Gr.length;i++){var n=Gr[i]+e;if(n in Ur)return n}}));function jr(t,e){var i=e.data,n=t.data;if(!(r(i.staticStyle)&&r(i.style)&&r(n.staticStyle)&&r(n.style))){var s,a,l=e.elm,h=n.staticStyle,c=n.normalizedStyle||n.style||{},u=h||c,d=Br(e.data.style)||{};e.data.normalizedStyle=o(d.__ob__)?I({},d):d;var p=Fr(e,!0);for(a in u)r(p[a])&&Hr(l,a,"");for(a in p)s=p[a],s!==u[a]&&Hr(l,a,null==s?"":s)}}var Yr={create:jr,update:jr},Xr=/\s+/;function Qr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Xr).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var i=" ".concat(t.getAttribute("class")||""," ");i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function Kr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Xr).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var i=" ".concat(t.getAttribute("class")||""," "),n=" "+e+" ";while(i.indexOf(n)>=0)i=i.replace(n," ");i=i.trim(),i?t.setAttribute("class",i):t.removeAttribute("class")}}function Zr(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&I(e,Jr(t.name||"v")),I(e,t),e}return"string"===typeof t?Jr(t):void 0}}var Jr=C((function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}})),to=J&&!it,eo="transition",io="animation",no="transition",so="transitionend",ro="animation",oo="animationend";to&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(no="WebkitTransition",so="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ro="WebkitAnimation",oo="webkitAnimationEnd"));var ao=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function lo(t){ao((function(){ao(t)}))}function ho(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),Qr(t,e))}function co(t,e){t._transitionClasses&&x(t._transitionClasses,e),Kr(t,e)}function uo(t,e,i){var n=fo(t,e),s=n.type,r=n.timeout,o=n.propCount;if(!s)return i();var a=s===eo?so:oo,l=0,h=function(){t.removeEventListener(a,c),i()},c=function(e){e.target===t&&++l>=o&&h()};setTimeout((function(){l<o&&h()}),r+1),t.addEventListener(a,c)}var po=/\b(transform|all)(,|$)/;function fo(t,e){var i,n=window.getComputedStyle(t),s=(n[no+"Delay"]||"").split(", "),r=(n[no+"Duration"]||"").split(", "),o=mo(s,r),a=(n[ro+"Delay"]||"").split(", "),l=(n[ro+"Duration"]||"").split(", "),h=mo(a,l),c=0,u=0;e===eo?o>0&&(i=eo,c=o,u=r.length):e===io?h>0&&(i=io,c=h,u=l.length):(c=Math.max(o,h),i=c>0?o>h?eo:io:null,u=i?i===eo?r.length:l.length:0);var d=i===eo&&po.test(n[no+"Property"]);return{type:i,timeout:c,propCount:u,hasTransform:d}}function mo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,i){return go(e)+go(t[i])})))}function go(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function vo(t,e){var i=t.elm;o(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var n=Zr(t.data.transition);if(!r(n)&&!o(i._enterCb)&&1===i.nodeType){var s=n.css,a=n.type,l=n.enterClass,h=n.enterToClass,d=n.enterActiveClass,p=n.appearClass,f=n.appearToClass,m=n.appearActiveClass,g=n.beforeEnter,v=n.enter,y=n.afterEnter,b=n.enterCancelled,x=n.beforeAppear,S=n.appear,w=n.afterAppear,C=n.appearCancelled,M=n.duration,T=Ci,k=Ci.$vnode;while(k&&k.parent)T=k.context,k=k.parent;var E=!T._isMounted||!t.isRootInsert;if(!E||S||""===S){var L=E&&p?p:l,A=E&&m?m:d,P=E&&f?f:h,R=E&&x||g,O=E&&c(S)?S:v,I=E&&w||y,D=E&&C||b,N=_(u(M)?M.enter:M);0;var z=!1!==s&&!it,q=bo(O),B=i._enterCb=U((function(){z&&(co(i,P),co(i,A)),B.cancelled?(z&&co(i,L),D&&D(i)):I&&I(i),i._enterCb=null}));t.data.show||ie(t,"insert",(function(){var e=i.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),O&&O(i,B)})),R&&R(i),z&&(ho(i,L),ho(i,A),lo((function(){co(i,L),B.cancelled||(ho(i,P),q||(yo(N)?setTimeout(B,N):uo(i,a,B)))}))),t.data.show&&(e&&e(),O&&O(i,B)),z||q||B()}}}function _o(t,e){var i=t.elm;o(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var n=Zr(t.data.transition);if(r(n)||1!==i.nodeType)return e();if(!o(i._leaveCb)){var s=n.css,a=n.type,l=n.leaveClass,h=n.leaveToClass,c=n.leaveActiveClass,d=n.beforeLeave,p=n.leave,f=n.afterLeave,m=n.leaveCancelled,g=n.delayLeave,v=n.duration,y=!1!==s&&!it,b=bo(p),x=_(u(v)?v.leave:v);0;var S=i._leaveCb=U((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[t.key]=null),y&&(co(i,h),co(i,c)),S.cancelled?(y&&co(i,l),m&&m(i)):(e(),f&&f(i)),i._leaveCb=null}));g?g(w):w()}function w(){S.cancelled||(!t.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[t.key]=t),d&&d(i),y&&(ho(i,l),ho(i,c),lo((function(){co(i,l),S.cancelled||(ho(i,h),b||(yo(x)?setTimeout(S,x):uo(i,a,S)))}))),p&&p(i,S),y||b||S())}}function yo(t){return"number"===typeof t&&!isNaN(t)}function bo(t){if(r(t))return!1;var e=t.fns;return o(e)?bo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function xo(t,e){!0!==e.data.show&&vo(e)}var So=J?{create:xo,activate:xo,remove:function(t,e){!0!==t.data.show?_o(t,e):e()}}:{},wo=[_r,xr,Pr,Nr,Yr,So],Co=wo.concat(fr),Mo=or({nodeOps:Ks,modules:Co});it&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&Oo(t,"input")}));var To={inserted:function(t,e,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?ie(i,"postpatch",(function(){To.componentUpdated(t,e,i)})):ko(t,e,i.context),t._vOptions=[].map.call(t.options,Ao)):("textarea"===i.tag||zs(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Po),t.addEventListener("compositionend",Ro),t.addEventListener("change",Ro),it&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if("select"===i.tag){ko(t,e,i.context);var n=t._vOptions,s=t._vOptions=[].map.call(t.options,Ao);if(s.some((function(t,e){return!B(t,n[e])}))){var r=t.multiple?e.value.some((function(t){return Lo(t,s)})):e.value!==e.oldValue&&Lo(e.value,s);r&&Oo(t,"change")}}}};function ko(t,e,i){Eo(t,e,i),(et||nt)&&setTimeout((function(){Eo(t,e,i)}),0)}function Eo(t,e,i){var n=e.value,s=t.multiple;if(!s||Array.isArray(n)){for(var r,o,a=0,l=t.options.length;a<l;a++)if(o=t.options[a],s)r=F(n,Ao(o))>-1,o.selected!==r&&(o.selected=r);else if(B(Ao(o),n))return void(t.selectedIndex!==a&&(t.selectedIndex=a));s||(t.selectedIndex=-1)}}function Lo(t,e){return e.every((function(e){return!B(e,t)}))}function Ao(t){return"_value"in t?t._value:t.value}function Po(t){t.target.composing=!0}function Ro(t){t.target.composing&&(t.target.composing=!1,Oo(t.target,"input"))}function Oo(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function Io(t){return!t.componentInstance||t.data&&t.data.transition?t:Io(t.componentInstance._vnode)}var Do={bind:function(t,e,i){var n=e.value;i=Io(i);var s=i.data&&i.data.transition,r=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;n&&s?(i.data.show=!0,vo(i,(function(){t.style.display=r}))):t.style.display=n?r:"none"},update:function(t,e,i){var n=e.value,s=e.oldValue;if(!n!==!s){i=Io(i);var r=i.data&&i.data.transition;r?(i.data.show=!0,n?vo(i,(function(){t.style.display=t.__vOriginalDisplay})):_o(i,(function(){t.style.display="none"}))):t.style.display=n?t.__vOriginalDisplay:"none"}},unbind:function(t,e,i,n,s){s||(t.style.display=t.__vOriginalDisplay)}},No={model:To,show:Do},zo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function qo(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?qo($e(e.children)):t}function Bo(t){var e={},i=t.$options;for(var n in i.propsData)e[n]=t[n];var s=i._parentListeners;for(var n in s)e[T(n)]=s[n];return e}function Fo(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Uo(t){while(t=t.parent)if(t.data.transition)return!0}function $o(t,e){return e.key===t.key&&e.tag===t.tag}var Vo=function(t){return t.tag||Te(t)},Ho=function(t){return"show"===t.name},Go={name:"transition",props:zo,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(Vo),i.length)){0;var n=this.mode;0;var s=i[0];if(Uo(this.$vnode))return s;var r=qo(s);if(!r)return s;if(this._leaving)return Fo(t,s);var o="__transition-".concat(this._uid,"-");r.key=null==r.key?r.isComment?o+"comment":o+r.tag:h(r.key)?0===String(r.key).indexOf(o)?r.key:o+r.key:r.key;var a=(r.data||(r.data={})).transition=Bo(this),l=this._vnode,c=qo(l);if(r.data.directives&&r.data.directives.some(Ho)&&(r.data.show=!0),c&&c.data&&!$o(r,c)&&!Te(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var u=c.data.transition=I({},a);if("out-in"===n)return this._leaving=!0,ie(u,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Fo(t,s);if("in-out"===n){if(Te(r))return l;var d,p=function(){d()};ie(a,"afterEnter",p),ie(a,"enterCancelled",p),ie(u,"delayLeave",(function(t){d=t}))}}return s}}},Wo=I({tag:String,moveClass:String},zo);delete Wo.mode;var jo={props:Wo,beforeMount:function(){var t=this,e=this._update;this._update=function(i,n){var s=Mi(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,s(),e.call(t,i,n)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,s=this.$slots.default||[],r=this.children=[],o=Bo(this),a=0;a<s.length;a++){var l=s[a];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))r.push(l),i[l.key]=l,(l.data||(l.data={})).transition=o;else;}if(n){var h=[],c=[];for(a=0;a<n.length;a++){l=n[a];l.data.transition=o,l.data.pos=l.elm.getBoundingClientRect(),i[l.key]?h.push(l):c.push(l)}this.kept=t(e,null,h),this.removed=c}return t(e,null,r)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Yo),t.forEach(Xo),t.forEach(Qo),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var i=t.elm,n=i.style;ho(i,e),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(so,i._moveCb=function t(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(so,t),i._moveCb=null,co(i,e))})}})))},methods:{hasMove:function(t,e){if(!to)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Kr(i,t)})),Qr(i,e),i.style.display="none",this.$el.appendChild(i);var n=fo(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}};function Yo(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Xo(t){t.data.newPos=t.elm.getBoundingClientRect()}function Qo(t){var e=t.data.pos,i=t.data.newPos,n=e.left-i.left,s=e.top-i.top;if(n||s){t.data.moved=!0;var r=t.elm.style;r.transform=r.WebkitTransform="translate(".concat(n,"px,").concat(s,"px)"),r.transitionDuration="0s"}}var Ko={Transition:Go,TransitionGroup:jo};Kn.config.mustUseProp=fs,Kn.config.isReservedTag=Os,Kn.config.isReservedAttr=ds,Kn.config.getTagNamespace=Is,Kn.config.isUnknownElement=Ns,I(Kn.options.directives,No),I(Kn.options.components,Ko),Kn.prototype.__patch__=J?Mo:N,Kn.prototype.$mount=function(t,e){return t=t&&J?qs(t):void 0,Ei(this,t,e)},J&&setTimeout((function(){W.devtools&&ut&&ut.emit("init",Kn)}),0)}).call(this,i("c8ba"))},"573e":function(t,e,i){},"5a89":function(t,e,i){"use strict";i.d(e,"a",(function(){return Rn})),i.d(e,"b",(function(){return Vn})),i.d(e,"c",(function(){return ei})),i.d(e,"d",(function(){return f})),i.d(e,"e",(function(){return Le})),i.d(e,"f",(function(){return ke})),i.d(e,"g",(function(){return pc})),i.d(e,"h",(function(){return jc})),i.d(e,"i",(function(){return ou})),i.d(e,"j",(function(){return dc})),i.d(e,"k",(function(){return wc})),i.d(e,"l",(function(){return s})),i.d(e,"m",(function(){return $e})),i.d(e,"n",(function(){return as})),i.d(e,"o",(function(){return wa})),i.d(e,"p",(function(){return Lc})),i.d(e,"q",(function(){return di})),i.d(e,"r",(function(){return Pc})),i.d(e,"s",(function(){return hc})),i.d(e,"t",(function(){return au})),i.d(e,"u",(function(){return r})),i.d(e,"v",(function(){return Ue})),i.d(e,"w",(function(){return pi})),i.d(e,"x",(function(){return ac}));
/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const n="146",s={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},r={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,a=1,l=2,h=1,c=2,u=3,d=0,p=1,f=2,m=0,g=1,v=2,_=3,y=4,b=5,x=100,S=101,w=102,C=103,M=104,T=200,k=201,E=202,L=203,A=204,P=205,R=206,O=207,I=208,D=209,N=210,z=0,q=1,B=2,F=3,U=4,$=5,V=6,H=7,G=0,W=1,j=2,Y=0,X=1,Q=2,K=3,Z=4,J=5,tt=300,et=301,it=302,nt=303,st=304,rt=306,ot=1e3,at=1001,lt=1002,ht=1003,ct=1004,ut=1005,dt=1006,pt=1007,ft=1008,mt=1009,gt=1010,vt=1011,_t=1012,yt=1013,bt=1014,xt=1015,St=1016,wt=1017,Ct=1018,Mt=1020,Tt=1021,kt=1022,Et=1023,Lt=1024,At=1025,Pt=1026,Rt=1027,Ot=1028,It=1029,Dt=1030,Nt=1031,zt=1033,qt=33776,Bt=33777,Ft=33778,Ut=33779,$t=35840,Vt=35841,Ht=35842,Gt=35843,Wt=36196,jt=37492,Yt=37496,Xt=37808,Qt=37809,Kt=37810,Zt=37811,Jt=37812,te=37813,ee=37814,ie=37815,ne=37816,se=37817,re=37818,oe=37819,ae=37820,le=37821,he=36492,ce=2300,ue=2301,de=2302,pe=2400,fe=2401,me=2402,ge=3e3,ve=3001,_e=3200,ye=3201,be=0,xe=1,Se="srgb",we="srgb-linear",Ce=7680,Me=519,Te=35044,ke="300 es",Ee=1035;class Le{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const i=this._listeners,n=i[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;const e=i.slice(0);for(let i=0,n=e.length;i<n;i++)e[i].call(this,t);t.target=null}}}const Ae=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Pe=Math.PI/180,Re=180/Math.PI;function Oe(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,s=Ae[255&t]+Ae[t>>8&255]+Ae[t>>16&255]+Ae[t>>24&255]+"-"+Ae[255&e]+Ae[e>>8&255]+"-"+Ae[e>>16&15|64]+Ae[e>>24&255]+"-"+Ae[63&i|128]+Ae[i>>8&255]+"-"+Ae[i>>16&255]+Ae[i>>24&255]+Ae[255&n]+Ae[n>>8&255]+Ae[n>>16&255]+Ae[n>>24&255];return s.toLowerCase()}function Ie(t,e,i){return Math.max(e,Math.min(i,t))}function De(t,e){return(t%e+e)%e}function Ne(t,e,i){return(1-i)*t+i*e}function ze(t){return 0===(t&t-1)&&0!==t}function qe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Be(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Fe(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class Ue{constructor(t=0,e=0){Ue.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),s=this.x-t.x,r=this.y-t.y;return this.x=s*i-r*n+t.x,this.y=s*n+r*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class $e{constructor(){$e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,s,r,o,a,l){const h=this.elements;return h[0]=t,h[1]=n,h[2]=o,h[3]=e,h[4]=s,h[5]=a,h[6]=i,h[7]=r,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,s=this.elements,r=i[0],o=i[3],a=i[6],l=i[1],h=i[4],c=i[7],u=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],v=n[1],_=n[4],y=n[7],b=n[2],x=n[5],S=n[8];return s[0]=r*f+o*v+a*b,s[3]=r*m+o*_+a*x,s[6]=r*g+o*y+a*S,s[1]=l*f+h*v+c*b,s[4]=l*m+h*_+c*x,s[7]=l*g+h*y+c*S,s[2]=u*f+d*v+p*b,s[5]=u*m+d*_+p*x,s[8]=u*g+d*y+p*S,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],l=t[7],h=t[8];return e*r*h-e*o*l-i*s*h+i*o*a+n*s*l-n*r*a}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=h*r-o*l,u=o*a-h*s,d=l*s-r*a,p=e*c+i*u+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=c*f,t[1]=(n*l-h*i)*f,t[2]=(o*i-n*r)*f,t[3]=u*f,t[4]=(h*e-n*a)*f,t[5]=(n*s-o*e)*f,t[6]=d*f,t[7]=(i*a-l*e)*f,t[8]=(r*e-i*s)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,s,r,o){const a=Math.cos(s),l=Math.sin(s);return this.set(i*a,i*l,-i*(a*r+l*o)+r+t,-n*l,n*a,-n*(-l*r+a*o)+o+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.elements,s=n[0],r=n[3],o=n[6],a=n[1],l=n[4],h=n[7];return n[0]=e*s+i*a,n[3]=e*r+i*l,n[6]=e*o+i*h,n[1]=-i*s+e*a,n[4]=-i*r+e*l,n[7]=-i*o+e*h,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function Ve(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function He(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Ge(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function We(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const je={[Se]:{[we]:Ge},[we]:{[Se]:We}},Ye={legacyMode:!0,get workingColorSpace(){return we},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,i){if(this.legacyMode||e===i||!e||!i)return t;if(je[e]&&void 0!==je[e][i]){const n=je[e][i];return t.r=n(t.r),t.g=n(t.g),t.b=n(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Xe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qe={r:0,g:0,b:0},Ke={h:0,s:0,l:0},Ze={h:0,s:0,l:0};function Je(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function ti(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class ei{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Se){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Ye.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=we){return this.r=t,this.g=e,this.b=i,Ye.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=we){if(t=De(t,1),e=Ie(e,0,1),i=Ie(i,0,1),0===e)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,s=2*i-n;this.r=Je(s,n,t+1/3),this.g=Je(s,n,t),this.b=Je(s,n,t-1/3)}return Ye.toWorkingColorSpace(this,n),this}setStyle(t,e=Se){function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const s=n[1],r=n[2];switch(s){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,Ye.toWorkingColorSpace(this,e),i(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,Ye.toWorkingColorSpace(this,e),i(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,s=parseFloat(t[2])/100,r=parseFloat(t[3])/100;return i(t[4]),this.setHSL(n,s,r,e)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],i=t.length;if(3===i)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,Ye.toWorkingColorSpace(this,e),this;if(6===i)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,Ye.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=Se){const i=Xe[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ge(t.r),this.g=Ge(t.g),this.b=Ge(t.b),this}copyLinearToSRGB(t){return this.r=We(t.r),this.g=We(t.g),this.b=We(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Se){return Ye.fromWorkingColorSpace(ti(this,Qe),t),Ie(255*Qe.r,0,255)<<16^Ie(255*Qe.g,0,255)<<8^Ie(255*Qe.b,0,255)<<0}getHexString(t=Se){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=we){Ye.fromWorkingColorSpace(ti(this,Qe),e);const i=Qe.r,n=Qe.g,s=Qe.b,r=Math.max(i,n,s),o=Math.min(i,n,s);let a,l;const h=(o+r)/2;if(o===r)a=0,l=0;else{const t=r-o;switch(l=h<=.5?t/(r+o):t/(2-r-o),r){case i:a=(n-s)/t+(n<s?6:0);break;case n:a=(s-i)/t+2;break;case s:a=(i-n)/t+4;break}a/=6}return t.h=a,t.s=l,t.l=h,t}getRGB(t,e=we){return Ye.fromWorkingColorSpace(ti(this,Qe),e),t.r=Qe.r,t.g=Qe.g,t.b=Qe.b,t}getStyle(t=Se){return Ye.fromWorkingColorSpace(ti(this,Qe),t),t!==Se?`color(${t} ${Qe.r} ${Qe.g} ${Qe.b})`:`rgb(${255*Qe.r|0},${255*Qe.g|0},${255*Qe.b|0})`}offsetHSL(t,e,i){return this.getHSL(Ke),Ke.h+=t,Ke.s+=e,Ke.l+=i,this.setHSL(Ke.h,Ke.s,Ke.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Ke),t.getHSL(Ze);const i=Ne(Ke.h,Ze.h,e),n=Ne(Ke.s,Ze.s,e),s=Ne(Ke.l,Ze.l,e);return this.setHSL(i,n,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let ii;ei.NAMES=Xe;class ni{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ii&&(ii=He("canvas")),ii.width=t.width,ii.height=t.height;const i=ii.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=ii}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=He("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height),s=n.data;for(let t=0;t<s.length;t++)s[t]=255*Ge(s[t]/255);return i.putImageData(n,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Ge(e[t]/255)):e[t]=Ge(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class si{constructor(t=null){this.isSource=!0,this.uuid=Oe(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(ri(n[e].image)):t.push(ri(n[e]))}else t=ri(n);i.url=t}return e||(t.images[this.uuid]=i),i}}function ri(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?ni.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let oi=0;class ai extends Le{constructor(t=ai.DEFAULT_IMAGE,e=ai.DEFAULT_MAPPING,i=at,n=at,s=dt,r=ft,o=Et,a=mt,l=1,h=ge){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:oi++}),this.uuid=Oe(),this.name="",this.source=new si(t),this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=s,this.minFilter=r,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $e,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ot:t.x=t.x-Math.floor(t.x);break;case at:t.x=t.x<0?0:1;break;case lt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ot:t.y=t.y-Math.floor(t.y);break;case at:t.y=t.y<0?0:1;break;case lt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}ai.DEFAULT_IMAGE=null,ai.DEFAULT_MAPPING=tt;class li{constructor(t=0,e=0,i=0,n=1){li.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,s=this.w,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12]*s,this.y=r[1]*e+r[5]*i+r[9]*n+r[13]*s,this.z=r[2]*e+r[6]*i+r[10]*n+r[14]*s,this.w=r[3]*e+r[7]*i+r[11]*n+r[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,s;const r=.01,o=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(h-u)<r&&Math.abs(c-f)<r&&Math.abs(p-m)<r){if(Math.abs(h+u)<o&&Math.abs(c+f)<o&&Math.abs(p+m)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(d+1)/2,v=(g+1)/2,_=(h+u)/4,y=(c+f)/4,b=(p+m)/4;return t>a&&t>v?t<r?(i=0,n=.707106781,s=.707106781):(i=Math.sqrt(t),n=_/i,s=y/i):a>v?a<r?(i=.707106781,n=0,s=.707106781):(n=Math.sqrt(a),i=_/n,s=b/n):v<r?(i=.707106781,n=.707106781,s=0):(s=Math.sqrt(v),i=y/s,n=b/s),this.set(i,n,s,e),this}let v=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(u-h)*(u-h));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(c-f)/v,this.z=(u-h)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hi extends Le{constructor(t=1,e=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new li(0,0,t,e),this.scissorTest=!1,this.viewport=new li(0,0,t,e);const n={width:t,height:e,depth:1};this.texture=new ai(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:dt,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){this.width===t&&this.height===e&&this.depth===i||(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new si(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ci extends ai{constructor(t=null,e=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=ht,this.minFilter=ht,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ui extends ai{constructor(t=null,e=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=ht,this.minFilter=ht,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class di{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,s,r,o){let a=i[n+0],l=i[n+1],h=i[n+2],c=i[n+3];const u=s[r+0],d=s[r+1],p=s[r+2],f=s[r+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(c!==f||a!==u||l!==d||h!==p){let t=1-o;const e=a*u+l*d+h*p+c*f,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const s=Math.sqrt(n),r=Math.atan2(s,e*i);t=Math.sin(t*r)/s,o=Math.sin(o*r)/s}const s=o*i;if(a=a*t+u*s,l=l*t+d*s,h=h*t+p*s,c=c*t+f*s,t===1-o){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,i,n,s,r){const o=i[n],a=i[n+1],l=i[n+2],h=i[n+3],c=s[r],u=s[r+1],d=s[r+2],p=s[r+3];return t[e]=o*p+h*c+a*d-l*u,t[e+1]=a*p+h*u+l*c-o*d,t[e+2]=l*p+h*d+o*u-a*c,t[e+3]=h*p-o*c-a*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,n=t._y,s=t._z,r=t._order,o=Math.cos,a=Math.sin,l=o(i/2),h=o(n/2),c=o(s/2),u=a(i/2),d=a(n/2),p=a(s/2);switch(r){case"XYZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"YXZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"ZXY":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"ZYX":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"YZX":this._x=u*h*c+l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c-u*d*p;break;case"XZY":this._x=u*h*c-l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],s=e[8],r=e[1],o=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=i+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(s-l)*t,this._z=(r-n)*t}else if(i>o&&i>c){const t=2*Math.sqrt(1+i-o-c);this._w=(h-a)/t,this._x=.25*t,this._y=(n+r)/t,this._z=(s+l)/t}else if(o>c){const t=2*Math.sqrt(1+o-i-c);this._w=(s-l)/t,this._x=(n+r)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-i-o);this._w=(r-n)/t,this._x=(s+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ie(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,s=t._z,r=t._w,o=e._x,a=e._y,l=e._z,h=e._w;return this._x=i*h+r*o+n*l-s*a,this._y=n*h+r*a+s*o-i*l,this._z=s*h+r*l+i*a-n*o,this._w=r*h-i*o-n*a-s*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,n=this._y,s=this._z,r=this._w;let o=r*t._w+i*t._x+n*t._y+s*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=r,this._x=i,this._y=n,this._z=s,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*r+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=r*c+this._w*u,this._x=i*c+this._x*u,this._y=n*c+this._y*u,this._z=s*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(s),i*Math.cos(s),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pi{constructor(t=0,e=0,i=0){pi.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(mi.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(mi.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*n,this.y=s[1]*e+s[4]*i+s[7]*n,this.z=s[2]*e+s[5]*i+s[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,s=t.elements,r=1/(s[3]*e+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*n+s[12])*r,this.y=(s[1]*e+s[5]*i+s[9]*n+s[13])*r,this.z=(s[2]*e+s[6]*i+s[10]*n+s[14])*r,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,s=t.x,r=t.y,o=t.z,a=t.w,l=a*e+r*n-o*i,h=a*i+o*e-s*n,c=a*n+s*i-r*e,u=-s*e-r*i-o*n;return this.x=l*a+u*-s+h*-o-c*-r,this.y=h*a+u*-r+c*-s-l*-o,this.z=c*a+u*-o+l*-r-h*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n,this.y=s[1]*e+s[5]*i+s[9]*n,this.z=s[2]*e+s[6]*i+s[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,s=t.z,r=e.x,o=e.y,a=e.z;return this.x=n*a-s*o,this.y=s*r-i*a,this.z=i*o-n*r,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return fi.copy(this).projectOnVector(t),this.sub(fi)}reflect(t){return this.sub(fi.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Ie(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fi=new pi,mi=new di;class gi{constructor(t=new pi(1/0,1/0,1/0),e=new pi(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,s=-1/0,r=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){const l=t[a],h=t[a+1],c=t[a+2];l<e&&(e=l),h<i&&(i=h),c<n&&(n=c),l>s&&(s=l),h>r&&(r=h),c>o&&(o=c)}return this.min.set(e,i,n),this.max.set(s,r,o),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,s=-1/0,r=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){const l=t.getX(a),h=t.getY(a),c=t.getZ(a);l<e&&(e=l),h<i&&(i=h),c<n&&(n=c),l>s&&(s=l),h>r&&(r=h),c>o&&(o=c)}return this.min.set(e,i,n),this.max.set(s,r,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=_i.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i)if(e&&void 0!=i.attributes&&void 0!==i.attributes.position){const e=i.attributes.position;for(let i=0,n=e.count;i<n;i++)_i.fromBufferAttribute(e,i).applyMatrix4(t.matrixWorld),this.expandByPoint(_i)}else null===i.boundingBox&&i.computeBoundingBox(),yi.copy(i.boundingBox),yi.applyMatrix4(t.matrixWorld),this.union(yi);const n=t.children;for(let s=0,r=n.length;s<r;s++)this.expandByObject(n[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,_i),_i.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ti),ki.subVectors(this.max,Ti),bi.subVectors(t.a,Ti),xi.subVectors(t.b,Ti),Si.subVectors(t.c,Ti),wi.subVectors(xi,bi),Ci.subVectors(Si,xi),Mi.subVectors(bi,Si);let e=[0,-wi.z,wi.y,0,-Ci.z,Ci.y,0,-Mi.z,Mi.y,wi.z,0,-wi.x,Ci.z,0,-Ci.x,Mi.z,0,-Mi.x,-wi.y,wi.x,0,-Ci.y,Ci.x,0,-Mi.y,Mi.x,0];return!!Ai(e,bi,xi,Si,ki)&&(e=[1,0,0,0,1,0,0,0,1],!!Ai(e,bi,xi,Si,ki)&&(Ei.crossVectors(wi,Ci),e=[Ei.x,Ei.y,Ei.z],Ai(e,bi,xi,Si,ki)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=_i.copy(t).clamp(this.min,this.max);return e.sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(_i).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(vi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),vi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),vi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),vi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),vi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),vi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),vi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),vi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(vi)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const vi=[new pi,new pi,new pi,new pi,new pi,new pi,new pi,new pi],_i=new pi,yi=new gi,bi=new pi,xi=new pi,Si=new pi,wi=new pi,Ci=new pi,Mi=new pi,Ti=new pi,ki=new pi,Ei=new pi,Li=new pi;function Ai(t,e,i,n,s){for(let r=0,o=t.length-3;r<=o;r+=3){Li.fromArray(t,r);const o=s.x*Math.abs(Li.x)+s.y*Math.abs(Li.y)+s.z*Math.abs(Li.z),a=e.dot(Li),l=i.dot(Li),h=n.dot(Li);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>o)return!1}return!0}const Pi=new gi,Ri=new pi,Oi=new pi;class Ii{constructor(t=new pi,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):Pi.setFromPoints(t).getCenter(i);let n=0;for(let s=0,r=t.length;s<r;s++)n=Math.max(n,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ri.subVectors(t,this.center);const e=Ri.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(Ri,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Oi.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ri.copy(t.center).add(Oi)),this.expandByPoint(Ri.copy(t.center).sub(Oi))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Di=new pi,Ni=new pi,zi=new pi,qi=new pi,Bi=new pi,Fi=new pi,Ui=new pi;class $i{constructor(t=new pi,e=new pi(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Di)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Di.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Di.copy(this.direction).multiplyScalar(e).add(this.origin),Di.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){Ni.copy(t).add(e).multiplyScalar(.5),zi.copy(e).sub(t).normalize(),qi.copy(this.origin).sub(Ni);const s=.5*t.distanceTo(e),r=-this.direction.dot(zi),o=qi.dot(this.direction),a=-qi.dot(zi),l=qi.lengthSq(),h=Math.abs(1-r*r);let c,u,d,p;if(h>0)if(c=r*a-o,u=r*o-a,p=s*h,c>=0)if(u>=-p)if(u<=p){const t=1/h;c*=t,u*=t,d=c*(c+r*u+2*o)+u*(r*c+u+2*a)+l}else u=s,c=Math.max(0,-(r*u+o)),d=-c*c+u*(u+2*a)+l;else u=-s,c=Math.max(0,-(r*u+o)),d=-c*c+u*(u+2*a)+l;else u<=-p?(c=Math.max(0,-(-r*s+o)),u=c>0?-s:Math.min(Math.max(-s,-a),s),d=-c*c+u*(u+2*a)+l):u<=p?(c=0,u=Math.min(Math.max(-s,-a),s),d=u*(u+2*a)+l):(c=Math.max(0,-(r*s+o)),u=c>0?s:Math.min(Math.max(-s,-a),s),d=-c*c+u*(u+2*a)+l);else u=r>0?-s:s,c=Math.max(0,-(r*u+o)),d=-c*c+u*(u+2*a)+l;return i&&i.copy(this.direction).multiplyScalar(c).add(this.origin),n&&n.copy(zi).multiplyScalar(u).add(Ni),d}intersectSphere(t,e){Di.subVectors(t.center,this.origin);const i=Di.dot(this.direction),n=Di.dot(Di)-i*i,s=t.radius*t.radius;if(n>s)return null;const r=Math.sqrt(s-n),o=i-r,a=i+r;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const i=t.normal.dot(this.direction);return i*e<0}intersectBox(t,e){let i,n,s,r,o,a;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,n=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,n=(t.min.x-u.x)*l),h>=0?(s=(t.min.y-u.y)*h,r=(t.max.y-u.y)*h):(s=(t.max.y-u.y)*h,r=(t.min.y-u.y)*h),i>r||s>n?null:((s>i||isNaN(i))&&(i=s),(r<n||isNaN(n))&&(n=r),c>=0?(o=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(o=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),i>a||o>n?null:((o>i||i!==i)&&(i=o),(a<n||n!==n)&&(n=a),n<0?null:this.at(i>=0?i:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,Di)}intersectTriangle(t,e,i,n,s){Bi.subVectors(e,t),Fi.subVectors(i,t),Ui.crossVectors(Bi,Fi);let r,o=this.direction.dot(Ui);if(o>0){if(n)return null;r=1}else{if(!(o<0))return null;r=-1,o=-o}qi.subVectors(this.origin,t);const a=r*this.direction.dot(Fi.crossVectors(qi,Fi));if(a<0)return null;const l=r*this.direction.dot(Bi.cross(qi));if(l<0)return null;if(a+l>o)return null;const h=-r*qi.dot(Ui);return h<0?null:this.at(h/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Vi{constructor(){Vi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,s,r,o,a,l,h,c,u,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=s,g[5]=r,g[9]=o,g[13]=a,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Vi).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/Hi.setFromMatrixColumn(t,0).length(),s=1/Hi.setFromMatrixColumn(t,1).length(),r=1/Hi.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,n=t.y,s=t.z,r=Math.cos(i),o=Math.sin(i),a=Math.cos(n),l=Math.sin(n),h=Math.cos(s),c=Math.sin(s);if("XYZ"===t.order){const t=r*h,i=r*c,n=o*h,s=o*c;e[0]=a*h,e[4]=-a*c,e[8]=l,e[1]=i+n*l,e[5]=t-s*l,e[9]=-o*a,e[2]=s-t*l,e[6]=n+i*l,e[10]=r*a}else if("YXZ"===t.order){const t=a*h,i=a*c,n=l*h,s=l*c;e[0]=t+s*o,e[4]=n*o-i,e[8]=r*l,e[1]=r*c,e[5]=r*h,e[9]=-o,e[2]=i*o-n,e[6]=s+t*o,e[10]=r*a}else if("ZXY"===t.order){const t=a*h,i=a*c,n=l*h,s=l*c;e[0]=t-s*o,e[4]=-r*c,e[8]=n+i*o,e[1]=i+n*o,e[5]=r*h,e[9]=s-t*o,e[2]=-r*l,e[6]=o,e[10]=r*a}else if("ZYX"===t.order){const t=r*h,i=r*c,n=o*h,s=o*c;e[0]=a*h,e[4]=n*l-i,e[8]=t*l+s,e[1]=a*c,e[5]=s*l+t,e[9]=i*l-n,e[2]=-l,e[6]=o*a,e[10]=r*a}else if("YZX"===t.order){const t=r*a,i=r*l,n=o*a,s=o*l;e[0]=a*h,e[4]=s-t*c,e[8]=n*c+i,e[1]=c,e[5]=r*h,e[9]=-o*h,e[2]=-l*h,e[6]=i*c+n,e[10]=t-s*c}else if("XZY"===t.order){const t=r*a,i=r*l,n=o*a,s=o*l;e[0]=a*h,e[4]=-c,e[8]=l*h,e[1]=t*c+s,e[5]=r*h,e[9]=i*c-n,e[2]=n*c-i,e[6]=o*h,e[10]=s*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Wi,t,ji)}lookAt(t,e,i){const n=this.elements;return Qi.subVectors(t,e),0===Qi.lengthSq()&&(Qi.z=1),Qi.normalize(),Yi.crossVectors(i,Qi),0===Yi.lengthSq()&&(1===Math.abs(i.z)?Qi.x+=1e-4:Qi.z+=1e-4,Qi.normalize(),Yi.crossVectors(i,Qi)),Yi.normalize(),Xi.crossVectors(Qi,Yi),n[0]=Yi.x,n[4]=Xi.x,n[8]=Qi.x,n[1]=Yi.y,n[5]=Xi.y,n[9]=Qi.y,n[2]=Yi.z,n[6]=Xi.z,n[10]=Qi.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,s=this.elements,r=i[0],o=i[4],a=i[8],l=i[12],h=i[1],c=i[5],u=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],_=i[7],y=i[11],b=i[15],x=n[0],S=n[4],w=n[8],C=n[12],M=n[1],T=n[5],k=n[9],E=n[13],L=n[2],A=n[6],P=n[10],R=n[14],O=n[3],I=n[7],D=n[11],N=n[15];return s[0]=r*x+o*M+a*L+l*O,s[4]=r*S+o*T+a*A+l*I,s[8]=r*w+o*k+a*P+l*D,s[12]=r*C+o*E+a*R+l*N,s[1]=h*x+c*M+u*L+d*O,s[5]=h*S+c*T+u*A+d*I,s[9]=h*w+c*k+u*P+d*D,s[13]=h*C+c*E+u*R+d*N,s[2]=p*x+f*M+m*L+g*O,s[6]=p*S+f*T+m*A+g*I,s[10]=p*w+f*k+m*P+g*D,s[14]=p*C+f*E+m*R+g*N,s[3]=v*x+_*M+y*L+b*O,s[7]=v*S+_*T+y*A+b*I,s[11]=v*w+_*k+y*P+b*D,s[15]=v*C+_*E+y*R+b*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],s=t[12],r=t[1],o=t[5],a=t[9],l=t[13],h=t[2],c=t[6],u=t[10],d=t[14],p=t[3],f=t[7],m=t[11],g=t[15];return p*(+s*a*c-n*l*c-s*o*u+i*l*u+n*o*d-i*a*d)+f*(+e*a*d-e*l*u+s*r*u-n*r*d+n*l*h-s*a*h)+m*(+e*l*c-e*o*d-s*r*c+i*r*d+s*o*h-i*l*h)+g*(-n*o*h-e*a*c+e*o*u+n*r*c-i*r*u+i*a*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=c*m*l-f*u*l+f*a*d-o*m*d-c*a*g+o*u*g,_=p*u*l-h*m*l-p*a*d+r*m*d+h*a*g-r*u*g,y=h*f*l-p*c*l+p*o*d-r*f*d-h*o*g+r*c*g,b=p*c*a-h*f*a-p*o*u+r*f*u+h*o*m-r*c*m,x=e*v+i*_+n*y+s*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return t[0]=v*S,t[1]=(f*u*s-c*m*s-f*n*d+i*m*d+c*n*g-i*u*g)*S,t[2]=(o*m*s-f*a*s+f*n*l-i*m*l-o*n*g+i*a*g)*S,t[3]=(c*a*s-o*u*s-c*n*l+i*u*l+o*n*d-i*a*d)*S,t[4]=_*S,t[5]=(h*m*s-p*u*s+p*n*d-e*m*d-h*n*g+e*u*g)*S,t[6]=(p*a*s-r*m*s-p*n*l+e*m*l+r*n*g-e*a*g)*S,t[7]=(r*u*s-h*a*s+h*n*l-e*u*l-r*n*d+e*a*d)*S,t[8]=y*S,t[9]=(p*c*s-h*f*s-p*i*d+e*f*d+h*i*g-e*c*g)*S,t[10]=(r*f*s-p*o*s+p*i*l-e*f*l-r*i*g+e*o*g)*S,t[11]=(h*o*s-r*c*s-h*i*l+e*c*l+r*i*d-e*o*d)*S,t[12]=b*S,t[13]=(h*f*n-p*c*n+p*i*u-e*f*u-h*i*m+e*c*m)*S,t[14]=(p*o*n-r*f*n-p*i*a+e*f*a+r*i*m-e*o*m)*S,t[15]=(r*c*n-h*o*n+h*i*a-e*c*a-r*i*u+e*o*u)*S,this}scale(t){const e=this.elements,i=t.x,n=t.y,s=t.z;return e[0]*=i,e[4]*=n,e[8]*=s,e[1]*=i,e[5]*=n,e[9]*=s,e[2]*=i,e[6]*=n,e[10]*=s,e[3]*=i,e[7]*=n,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),s=1-i,r=t.x,o=t.y,a=t.z,l=s*r,h=s*o;return this.set(l*r+i,l*o-n*a,l*a+n*o,0,l*o+n*a,h*o+i,h*a-n*r,0,l*a-n*o,h*a+n*r,s*a*a+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,s,r){return this.set(1,i,s,0,t,1,r,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,s=e._x,r=e._y,o=e._z,a=e._w,l=s+s,h=r+r,c=o+o,u=s*l,d=s*h,p=s*c,f=r*h,m=r*c,g=o*c,v=a*l,_=a*h,y=a*c,b=i.x,x=i.y,S=i.z;return n[0]=(1-(f+g))*b,n[1]=(d+y)*b,n[2]=(p-_)*b,n[3]=0,n[4]=(d-y)*x,n[5]=(1-(u+g))*x,n[6]=(m+v)*x,n[7]=0,n[8]=(p+_)*S,n[9]=(m-v)*S,n[10]=(1-(u+f))*S,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let s=Hi.set(n[0],n[1],n[2]).length();const r=Hi.set(n[4],n[5],n[6]).length(),o=Hi.set(n[8],n[9],n[10]).length(),a=this.determinant();a<0&&(s=-s),t.x=n[12],t.y=n[13],t.z=n[14],Gi.copy(this);const l=1/s,h=1/r,c=1/o;return Gi.elements[0]*=l,Gi.elements[1]*=l,Gi.elements[2]*=l,Gi.elements[4]*=h,Gi.elements[5]*=h,Gi.elements[6]*=h,Gi.elements[8]*=c,Gi.elements[9]*=c,Gi.elements[10]*=c,e.setFromRotationMatrix(Gi),i.x=s,i.y=r,i.z=o,this}makePerspective(t,e,i,n,s,r){const o=this.elements,a=2*s/(e-t),l=2*s/(i-n),h=(e+t)/(e-t),c=(i+n)/(i-n),u=-(r+s)/(r-s),d=-2*r*s/(r-s);return o[0]=a,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,i,n,s,r){const o=this.elements,a=1/(e-t),l=1/(i-n),h=1/(r-s),c=(e+t)*a,u=(i+n)*l,d=(r+s)*h;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Hi=new pi,Gi=new Vi,Wi=new pi(0,0,0),ji=new pi(1,1,1),Yi=new pi,Xi=new pi,Qi=new pi,Ki=new Vi,Zi=new di;class Ji{constructor(t=0,e=0,i=0,n=Ji.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,s=n[0],r=n[4],o=n[8],a=n[1],l=n[5],h=n[9],c=n[2],u=n[6],d=n[10];switch(e){case"XYZ":this._y=Math.asin(Ie(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-r,s)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ie(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ie(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-r,l)):(this._y=0,this._z=Math.atan2(a,s));break;case"ZYX":this._y=Math.asin(-Ie(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,s)):(this._x=0,this._z=Math.atan2(-r,l));break;case"YZX":this._z=Math.asin(Ie(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Ie(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Ki.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ki,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Zi.setFromEuler(this),this.setFromQuaternion(Zi,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Ji.DefaultOrder="XYZ",Ji.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class tn{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let en=0;const nn=new pi,sn=new di,rn=new Vi,on=new pi,an=new pi,ln=new pi,hn=new di,cn=new pi(1,0,0),un=new pi(0,1,0),dn=new pi(0,0,1),pn={type:"added"},fn={type:"removed"};class mn extends Le{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:en++}),this.uuid=Oe(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mn.DefaultUp.clone();const t=new pi,e=new Ji,i=new di,n=new pi(1,1,1);function s(){i.setFromEuler(e,!1)}function r(){e.setFromQuaternion(i,void 0,!1)}e._onChange(s),i._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Vi},normalMatrix:{value:new $e}}),this.matrix=new Vi,this.matrixWorld=new Vi,this.matrixAutoUpdate=mn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=mn.DefaultMatrixWorldAutoUpdate,this.layers=new tn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return sn.setFromAxisAngle(t,e),this.quaternion.multiply(sn),this}rotateOnWorldAxis(t,e){return sn.setFromAxisAngle(t,e),this.quaternion.premultiply(sn),this}rotateX(t){return this.rotateOnAxis(cn,t)}rotateY(t){return this.rotateOnAxis(un,t)}rotateZ(t){return this.rotateOnAxis(dn,t)}translateOnAxis(t,e){return nn.copy(t).applyQuaternion(this.quaternion),this.position.add(nn.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(cn,t)}translateY(t){return this.translateOnAxis(un,t)}translateZ(t){return this.translateOnAxis(dn,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(rn.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?on.copy(t):on.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),an.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rn.lookAt(an,on,this.up):rn.lookAt(on,an,this.up),this.quaternion.setFromRotationMatrix(rn),n&&(rn.extractRotation(n.matrixWorld),sn.setFromRotationMatrix(rn),this.quaternion.premultiply(sn.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(pn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(fn)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(fn)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),rn.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),rn.multiply(t.parent.matrixWorld)),t.applyMatrix4(rn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i],s=n.getObjectByProperty(t,e);if(void 0!==s)return s}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(an,t,ln),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(an,hn,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++){const n=e[i];!0!==n.matrixWorldAutoUpdate&&!0!==t||n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++){const i=t[e];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function s(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const n=i[e];s(t.shapes,n)}else s(t.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,n=this.material.length;i<n;i++)e.push(s(t.materials,this.material[i]));n.material=e}else n.material=s(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];n.animations.push(s(t.animations,i))}}if(e){const e=r(t.geometries),n=r(t.materials),s=r(t.textures),o=r(t.images),a=r(t.shapes),l=r(t.skeletons),h=r(t.animations),c=r(t.nodes);e.length>0&&(i.geometries=e),n.length>0&&(i.materials=n),s.length>0&&(i.textures=s),o.length>0&&(i.images=o),a.length>0&&(i.shapes=a),l.length>0&&(i.skeletons=l),h.length>0&&(i.animations=h),c.length>0&&(i.nodes=c)}return i.object=n,i;function r(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let i=0;i<t.children.length;i++){const e=t.children[i];this.add(e.clone())}return this}}mn.DefaultUp=new pi(0,1,0),mn.DefaultMatrixAutoUpdate=!0,mn.DefaultMatrixWorldAutoUpdate=!0;const gn=new pi,vn=new pi,_n=new pi,yn=new pi,bn=new pi,xn=new pi,Sn=new pi,wn=new pi,Cn=new pi,Mn=new pi;class Tn{constructor(t=new pi,e=new pi,i=new pi){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),gn.subVectors(t,e),n.cross(gn);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(t,e,i,n,s){gn.subVectors(n,e),vn.subVectors(i,e),_n.subVectors(t,e);const r=gn.dot(gn),o=gn.dot(vn),a=gn.dot(_n),l=vn.dot(vn),h=vn.dot(_n),c=r*l-o*o;if(0===c)return s.set(-2,-1,-1);const u=1/c,d=(l*a-o*h)*u,p=(r*h-o*a)*u;return s.set(1-d-p,p,d)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,yn),yn.x>=0&&yn.y>=0&&yn.x+yn.y<=1}static getUV(t,e,i,n,s,r,o,a){return this.getBarycoord(t,e,i,n,yn),a.set(0,0),a.addScaledVector(s,yn.x),a.addScaledVector(r,yn.y),a.addScaledVector(o,yn.z),a}static isFrontFacing(t,e,i,n){return gn.subVectors(i,e),vn.subVectors(t,e),gn.cross(vn).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return gn.subVectors(this.c,this.b),vn.subVectors(this.a,this.b),.5*gn.cross(vn).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Tn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Tn.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,s){return Tn.getUV(t,this.a,this.b,this.c,e,i,n,s)}containsPoint(t){return Tn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Tn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,n=this.b,s=this.c;let r,o;bn.subVectors(n,i),xn.subVectors(s,i),wn.subVectors(t,i);const a=bn.dot(wn),l=xn.dot(wn);if(a<=0&&l<=0)return e.copy(i);Cn.subVectors(t,n);const h=bn.dot(Cn),c=xn.dot(Cn);if(h>=0&&c<=h)return e.copy(n);const u=a*c-h*l;if(u<=0&&a>=0&&h<=0)return r=a/(a-h),e.copy(i).addScaledVector(bn,r);Mn.subVectors(t,s);const d=bn.dot(Mn),p=xn.dot(Mn);if(p>=0&&d<=p)return e.copy(s);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),e.copy(i).addScaledVector(xn,o);const m=h*p-d*c;if(m<=0&&c-h>=0&&d-p>=0)return Sn.subVectors(s,n),o=(c-h)/(c-h+(d-p)),e.copy(n).addScaledVector(Sn,o);const g=1/(m+f+u);return r=f*g,o=u*g,e.copy(i).addScaledVector(bn,r).addScaledVector(xn,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let kn=0;class En extends Le{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kn++}),this.uuid=Oe(),this.name="",this.type="Material",this.blending=g,this.side=d,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=A,this.blendDst=P,this.blendEquation=x,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=F,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Me,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ce,this.stencilZFail=Ce,this.stencilZPass=Ce,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==g&&(i.blending=this.blending),this.side!==d&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const e=n(t.textures),s=n(t.images);e.length>0&&(i.textures=e),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let n=0;n!==t;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Ln extends En{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ei(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=G,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const An=new pi,Pn=new Ue;class Rn{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=Te,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)Pn.fromBufferAttribute(this,e),Pn.applyMatrix3(t),this.setXY(e,Pn.x,Pn.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)An.fromBufferAttribute(this,e),An.applyMatrix3(t),this.setXYZ(e,An.x,An.y,An.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)An.fromBufferAttribute(this,e),An.applyMatrix4(t),this.setXYZ(e,An.x,An.y,An.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)An.fromBufferAttribute(this,e),An.applyNormalMatrix(t),this.setXYZ(e,An.x,An.y,An.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)An.fromBufferAttribute(this,e),An.transformDirection(t),this.setXYZ(e,An.x,An.y,An.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Be(e,this.array)),e}setX(t,e){return this.normalized&&(e=Fe(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Be(e,this.array)),e}setY(t,e){return this.normalized&&(e=Fe(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Be(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Fe(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Be(e,this.array)),e}setW(t,e){return this.normalized&&(e=Fe(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Fe(e,this.array),i=Fe(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=Fe(e,this.array),i=Fe(i,this.array),n=Fe(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,s){return t*=this.itemSize,this.normalized&&(e=Fe(e,this.array),i=Fe(i,this.array),n=Fe(n,this.array),s=Fe(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Te&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class On extends Rn{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class In extends Rn{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class Dn extends Rn{constructor(t,e,i){super(new Float32Array(t),e,i)}}let Nn=0;const zn=new Vi,qn=new mn,Bn=new pi,Fn=new gi,Un=new gi,$n=new pi;class Vn extends Le{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Nn++}),this.uuid=Oe(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ve(t)?In:On)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new $e).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return zn.makeRotationFromQuaternion(t),this.applyMatrix4(zn),this}rotateX(t){return zn.makeRotationX(t),this.applyMatrix4(zn),this}rotateY(t){return zn.makeRotationY(t),this.applyMatrix4(zn),this}rotateZ(t){return zn.makeRotationZ(t),this.applyMatrix4(zn),this}translate(t,e,i){return zn.makeTranslation(t,e,i),this.applyMatrix4(zn),this}scale(t,e,i){return zn.makeScale(t,e,i),this.applyMatrix4(zn),this}lookAt(t){return qn.lookAt(t),qn.updateMatrix(),this.applyMatrix4(qn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bn).negate(),this.translate(Bn.x,Bn.y,Bn.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Dn(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new gi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new pi(-1/0,-1/0,-1/0),new pi(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,n=e.length;i<n;i++){const t=e[i];Fn.setFromBufferAttribute(t),this.morphTargetsRelative?($n.addVectors(this.boundingBox.min,Fn.min),this.boundingBox.expandByPoint($n),$n.addVectors(this.boundingBox.max,Fn.max),this.boundingBox.expandByPoint($n)):(this.boundingBox.expandByPoint(Fn.min),this.boundingBox.expandByPoint(Fn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ii);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new pi,1/0);if(t){const i=this.boundingSphere.center;if(Fn.setFromBufferAttribute(t),e)for(let t=0,s=e.length;t<s;t++){const i=e[t];Un.setFromBufferAttribute(i),this.morphTargetsRelative?($n.addVectors(Fn.min,Un.min),Fn.expandByPoint($n),$n.addVectors(Fn.max,Un.max),Fn.expandByPoint($n)):(Fn.expandByPoint(Un.min),Fn.expandByPoint(Un.max))}Fn.getCenter(i);let n=0;for(let e=0,s=t.count;e<s;e++)$n.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared($n));if(e)for(let s=0,r=e.length;s<r;s++){const r=e[s],o=this.morphTargetsRelative;for(let e=0,s=r.count;e<s;e++)$n.fromBufferAttribute(r,e),o&&(Bn.fromBufferAttribute(t,e),$n.add(Bn)),n=Math.max(n,i.distanceToSquared($n))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,n=e.position.array,s=e.normal.array,r=e.uv.array,o=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Rn(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,l=[],h=[];for(let M=0;M<o;M++)l[M]=new pi,h[M]=new pi;const c=new pi,u=new pi,d=new pi,p=new Ue,f=new Ue,m=new Ue,g=new pi,v=new pi;function _(t,e,i){c.fromArray(n,3*t),u.fromArray(n,3*e),d.fromArray(n,3*i),p.fromArray(r,2*t),f.fromArray(r,2*e),m.fromArray(r,2*i),u.sub(c),d.sub(c),f.sub(p),m.sub(p);const s=1/(f.x*m.y-m.x*f.y);isFinite(s)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(s),v.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(s),l[t].add(g),l[e].add(g),l[i].add(g),h[t].add(v),h[e].add(v),h[i].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:i.length}]);for(let M=0,T=y.length;M<T;++M){const t=y[M],e=t.start,n=t.count;for(let s=e,r=e+n;s<r;s+=3)_(i[s+0],i[s+1],i[s+2])}const b=new pi,x=new pi,S=new pi,w=new pi;function C(t){S.fromArray(s,3*t),w.copy(S);const e=l[t];b.copy(e),b.sub(S.multiplyScalar(S.dot(e))).normalize(),x.crossVectors(w,e);const i=x.dot(h[t]),n=i<0?-1:1;a[4*t]=b.x,a[4*t+1]=b.y,a[4*t+2]=b.z,a[4*t+3]=n}for(let M=0,T=y.length;M<T;++M){const t=y[M],e=t.start,n=t.count;for(let s=e,r=e+n;s<r;s+=3)C(i[s+0]),C(i[s+1]),C(i[s+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Rn(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const n=new pi,s=new pi,r=new pi,o=new pi,a=new pi,l=new pi,h=new pi,c=new pi;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),p=t.getX(u+1),f=t.getX(u+2);n.fromBufferAttribute(e,d),s.fromBufferAttribute(e,p),r.fromBufferAttribute(e,f),h.subVectors(r,s),c.subVectors(n,s),h.cross(c),o.fromBufferAttribute(i,d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),o.add(h),a.add(h),l.add(h),i.setXYZ(d,o.x,o.y,o.z),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,u=e.count;t<u;t+=3)n.fromBufferAttribute(e,t+0),s.fromBufferAttribute(e,t+1),r.fromBufferAttribute(e,t+2),h.subVectors(r,s),c.subVectors(n,s),h.cross(c),i.setXYZ(t+0,h.x,h.y,h.z),i.setXYZ(t+1,h.x,h.y,h.z),i.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)$n.fromBufferAttribute(t,e),$n.normalize(),t.setXYZ(e,$n.x,$n.y,$n.z)}toNonIndexed(){function t(t,e){const i=t.array,n=t.itemSize,s=t.normalized,r=new i.constructor(e.length*n);let o=0,a=0;for(let l=0,h=e.length;l<h;l++){o=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*n;for(let t=0;t<n;t++)r[a++]=i[o++]}return new Rn(r,n,s)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Vn,i=this.index.array,n=this.attributes;for(const o in n){const s=n[o],r=t(s,i);e.setAttribute(o,r)}const s=this.morphAttributes;for(const o in s){const n=[],r=s[o];for(let e=0,s=r.length;e<s;e++){const s=r[e],o=t(s,i);n.push(o)}e.morphAttributes[o]=n}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let o=0,a=r.length;o<a;o++){const t=r[o];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const a in i){const e=i[a];t.data.attributes[a]=e.toJSON(t.data)}const n={};let s=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],i=[];for(let n=0,s=e.length;n<s;n++){const s=e[n];i.push(s.toJSON(t.data))}i.length>0&&(n[a]=i,s=!0)}s&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const n=t.attributes;for(const l in n){const t=n[l];this.setAttribute(l,t.clone(e))}const s=t.morphAttributes;for(const l in s){const t=[],i=s[l];for(let n=0,s=i.length;n<s;n++)t.push(i[n].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let l=0,h=r.length;l<h;l++){const t=r[l];this.addGroup(t.start,t.count,t.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hn=new Vi,Gn=new $i,Wn=new Ii,jn=new pi,Yn=new pi,Xn=new pi,Qn=new pi,Kn=new pi,Zn=new pi,Jn=new pi,ts=new pi,es=new pi,is=new Ue,ns=new Ue,ss=new Ue,rs=new pi,os=new pi;class as extends mn{constructor(t=new Vn,e=new Ln){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}raycast(t,e){const i=this.geometry,n=this.material,s=this.matrixWorld;if(void 0===n)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),Wn.copy(i.boundingSphere),Wn.applyMatrix4(s),!1===t.ray.intersectsSphere(Wn))return;if(Hn.copy(s).invert(),Gn.copy(t.ray).applyMatrix4(Hn),null!==i.boundingBox&&!1===Gn.intersectsBox(i.boundingBox))return;let r;const o=i.index,a=i.attributes.position,l=i.morphAttributes.position,h=i.morphTargetsRelative,c=i.attributes.uv,u=i.attributes.uv2,d=i.groups,p=i.drawRange;if(null!==o)if(Array.isArray(n))for(let f=0,m=d.length;f<m;f++){const i=d[f],s=n[i.materialIndex],m=Math.max(i.start,p.start),g=Math.min(o.count,Math.min(i.start+i.count,p.start+p.count));for(let n=m,d=g;n<d;n+=3){const d=o.getX(n),p=o.getX(n+1),f=o.getX(n+2);r=hs(this,s,t,Gn,a,l,h,c,u,d,p,f),r&&(r.faceIndex=Math.floor(n/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,p.start),s=Math.min(o.count,p.start+p.count);for(let d=i,p=s;d<p;d+=3){const i=o.getX(d),s=o.getX(d+1),p=o.getX(d+2);r=hs(this,n,t,Gn,a,l,h,c,u,i,s,p),r&&(r.faceIndex=Math.floor(d/3),e.push(r))}}else if(void 0!==a)if(Array.isArray(n))for(let f=0,m=d.length;f<m;f++){const i=d[f],s=n[i.materialIndex],o=Math.max(i.start,p.start),m=Math.min(a.count,Math.min(i.start+i.count,p.start+p.count));for(let n=o,d=m;n<d;n+=3){const o=n,d=n+1,p=n+2;r=hs(this,s,t,Gn,a,l,h,c,u,o,d,p),r&&(r.faceIndex=Math.floor(n/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,p.start),s=Math.min(a.count,p.start+p.count);for(let o=i,d=s;o<d;o+=3){const i=o,s=o+1,d=o+2;r=hs(this,n,t,Gn,a,l,h,c,u,i,s,d),r&&(r.faceIndex=Math.floor(o/3),e.push(r))}}}}function ls(t,e,i,n,s,r,o,a){let l;if(l=e.side===p?n.intersectTriangle(o,r,s,!0,a):n.intersectTriangle(s,r,o,e.side!==f,a),null===l)return null;os.copy(a),os.applyMatrix4(t.matrixWorld);const h=i.ray.origin.distanceTo(os);return h<i.near||h>i.far?null:{distance:h,point:os.clone(),object:t}}function hs(t,e,i,n,s,r,o,a,l,h,c,u){jn.fromBufferAttribute(s,h),Yn.fromBufferAttribute(s,c),Xn.fromBufferAttribute(s,u);const d=t.morphTargetInfluences;if(r&&d){Jn.set(0,0,0),ts.set(0,0,0),es.set(0,0,0);for(let t=0,e=r.length;t<e;t++){const e=d[t],i=r[t];0!==e&&(Qn.fromBufferAttribute(i,h),Kn.fromBufferAttribute(i,c),Zn.fromBufferAttribute(i,u),o?(Jn.addScaledVector(Qn,e),ts.addScaledVector(Kn,e),es.addScaledVector(Zn,e)):(Jn.addScaledVector(Qn.sub(jn),e),ts.addScaledVector(Kn.sub(Yn),e),es.addScaledVector(Zn.sub(Xn),e)))}jn.add(Jn),Yn.add(ts),Xn.add(es)}t.isSkinnedMesh&&(t.boneTransform(h,jn),t.boneTransform(c,Yn),t.boneTransform(u,Xn));const p=ls(t,e,i,n,jn,Yn,Xn,rs);if(p){a&&(is.fromBufferAttribute(a,h),ns.fromBufferAttribute(a,c),ss.fromBufferAttribute(a,u),p.uv=Tn.getUV(rs,jn,Yn,Xn,is,ns,ss,new Ue)),l&&(is.fromBufferAttribute(l,h),ns.fromBufferAttribute(l,c),ss.fromBufferAttribute(l,u),p.uv2=Tn.getUV(rs,jn,Yn,Xn,is,ns,ss,new Ue));const t={a:h,b:c,c:u,normal:new pi,materialIndex:0};Tn.getNormal(jn,Yn,Xn,t.normal),p.face=t}return p}class cs extends Vn{constructor(t=1,e=1,i=1,n=1,s=1,r=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:s,depthSegments:r};const o=this;n=Math.floor(n),s=Math.floor(s),r=Math.floor(r);const a=[],l=[],h=[],c=[];let u=0,d=0;function p(t,e,i,n,s,r,p,f,m,g,v){const _=r/m,y=p/g,b=r/2,x=p/2,S=f/2,w=m+1,C=g+1;let M=0,T=0;const k=new pi;for(let o=0;o<C;o++){const r=o*y-x;for(let a=0;a<w;a++){const u=a*_-b;k[t]=u*n,k[e]=r*s,k[i]=S,l.push(k.x,k.y,k.z),k[t]=0,k[e]=0,k[i]=f>0?1:-1,h.push(k.x,k.y,k.z),c.push(a/m),c.push(1-o/g),M+=1}}for(let o=0;o<g;o++)for(let t=0;t<m;t++){const e=u+t+w*o,i=u+t+w*(o+1),n=u+(t+1)+w*(o+1),s=u+(t+1)+w*o;a.push(e,i,s),a.push(i,n,s),T+=6}o.addGroup(d,T,v),d+=T,u+=M}p("z","y","x",-1,-1,i,e,t,r,s,0),p("z","y","x",1,-1,i,e,-t,r,s,1),p("x","z","y",1,1,t,i,e,n,r,2),p("x","z","y",1,-1,t,i,-e,n,r,3),p("x","y","z",1,-1,t,e,i,n,s,4),p("x","y","z",-1,-1,t,e,-i,n,s,5),this.setIndex(a),this.setAttribute("position",new Dn(l,3)),this.setAttribute("normal",new Dn(h,3)),this.setAttribute("uv",new Dn(c,2))}static fromJSON(t){return new cs(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function us(t){const e={};for(const i in t){e[i]={};for(const n in t[i]){const s=t[i][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[i][n]=s.clone():Array.isArray(s)?e[i][n]=s.slice():e[i][n]=s}}return e}function ds(t){const e={};for(let i=0;i<t.length;i++){const n=us(t[i]);for(const t in n)e[t]=n[t]}return e}function ps(t){const e=[];for(let i=0;i<t.length;i++)e.push(t[i].clone());return e}const fs={clone:us,merge:ds};var ms="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",gs="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class vs extends En{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ms,this.fragmentShader=gs,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=us(t.uniforms),this.uniformsGroups=ps(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n],s=i.value;s&&s.isTexture?e.uniforms[n]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[n]={type:"m4",value:s.toArray()}:e.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const n in this.extensions)!0===this.extensions[n]&&(i[n]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class _s extends mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vi,this.projectionMatrix=new Vi,this.projectionMatrixInverse=new Vi}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ys extends _s{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Re*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Pe*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Re*Math.atan(Math.tan(.5*Pe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,s,r){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Pe*this.fov)/this.zoom,i=2*e,n=this.aspect*i,s=-.5*n;const r=this.view;if(null!==this.view&&this.view.enabled){const t=r.fullWidth,o=r.fullHeight;s+=r.offsetX*n/t,e-=r.offsetY*i/o,n*=r.width/t,i*=r.height/o}const o=this.filmOffset;0!==o&&(s+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const bs=90,xs=1;class Ss extends mn{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new ys(bs,xs,t,e);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new pi(1,0,0)),this.add(n);const s=new ys(bs,xs,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new pi(-1,0,0)),this.add(s);const r=new ys(bs,xs,t,e);r.layers=this.layers,r.up.set(0,0,1),r.lookAt(new pi(0,1,0)),this.add(r);const o=new ys(bs,xs,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new pi(0,-1,0)),this.add(o);const a=new ys(bs,xs,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new pi(0,0,1)),this.add(a);const l=new ys(bs,xs,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new pi(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[n,s,r,o,a,l]=this.children,h=t.getRenderTarget(),c=t.toneMapping,u=t.xr.enabled;t.toneMapping=Y,t.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,s),t.setRenderTarget(i,2),t.render(e,r),t.setRenderTarget(i,3),t.render(e,o),t.setRenderTarget(i,4),t.render(e,a),i.texture.generateMipmaps=d,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(h),t.toneMapping=c,t.xr.enabled=u,i.texture.needsPMREMUpdate=!0}}class ws extends ai{constructor(t,e,i,n,s,r,o,a,l,h){t=void 0!==t?t:[],e=void 0!==e?e:et,super(t,e,i,n,s,r,o,a,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Cs extends hi{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];this.texture=new ws(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:dt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},n=new cs(5,5,5),s=new vs({name:"CubemapFromEquirect",uniforms:us(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:p,blending:m});s.uniforms.tEquirect.value=e;const r=new as(n,s),o=e.minFilter;e.minFilter===ft&&(e.minFilter=dt);const a=new Ss(1,10,this);return a.update(t,r),e.minFilter=o,r.geometry.dispose(),r.material.dispose(),this}clear(t,e,i,n){const s=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,i,n);t.setRenderTarget(s)}}const Ms=new pi,Ts=new pi,ks=new $e;class Es{constructor(t=new pi(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=Ms.subVectors(i,e).cross(Ts.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(Ms),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/n;return s<0||s>1?null:e.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||ks.getNormalMatrix(t),n=this.coplanarPoint(Ms).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ls=new Ii,As=new pi;class Ps{constructor(t=new Es,e=new Es,i=new Es,n=new Es,s=new Es,r=new Es){this.planes=[t,e,i,n,s,r]}set(t,e,i,n,s,r){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(s),o[5].copy(r),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],s=i[1],r=i[2],o=i[3],a=i[4],l=i[5],h=i[6],c=i[7],u=i[8],d=i[9],p=i[10],f=i[11],m=i[12],g=i[13],v=i[14],_=i[15];return e[0].setComponents(o-n,c-a,f-u,_-m).normalize(),e[1].setComponents(o+n,c+a,f+u,_+m).normalize(),e[2].setComponents(o+s,c+l,f+d,_+g).normalize(),e[3].setComponents(o-s,c-l,f-d,_-g).normalize(),e[4].setComponents(o-r,c-h,f-p,_-v).normalize(),e[5].setComponents(o+r,c+h,f+p,_+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ls.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ls)}intersectsSprite(t){return Ls.center.set(0,0,0),Ls.radius=.7071067811865476,Ls.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ls)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let s=0;s<6;s++){const t=e[s].distanceToPoint(i);if(t<n)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(As.x=n.normal.x>0?t.max.x:t.min.x,As.y=n.normal.y>0?t.max.y:t.min.y,As.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(As)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Rs(){let t=null,e=!1,i=null,n=null;function s(e,r){i(e,r),n=t.requestAnimationFrame(s)}return{start:function(){!0!==e&&null!==i&&(n=t.requestAnimationFrame(s),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function Os(t,e){const i=e.isWebGL2,n=new WeakMap;function s(e,n){const s=e.array,r=e.usage,o=t.createBuffer();let a;if(t.bindBuffer(n,o),t.bufferData(n,s,r),e.onUploadCallback(),s instanceof Float32Array)a=5126;else if(s instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(s instanceof Int16Array)a=5122;else if(s instanceof Uint32Array)a=5125;else if(s instanceof Int32Array)a=5124;else if(s instanceof Int8Array)a=5120;else if(s instanceof Uint8Array)a=5121;else{if(!(s instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+s);a=5121}return{buffer:o,type:a,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version}}function r(e,n,s){const r=n.array,o=n.updateRange;t.bindBuffer(s,e),-1===o.count?t.bufferSubData(s,0,r):(i?t.bufferSubData(s,o.offset*r.BYTES_PER_ELEMENT,r,o.offset,o.count):t.bufferSubData(s,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}function o(t){return t.isInterleavedBufferAttribute&&(t=t.data),n.get(t)}function a(e){e.isInterleavedBufferAttribute&&(e=e.data);const i=n.get(e);i&&(t.deleteBuffer(i.buffer),n.delete(e))}function l(t,e){if(t.isGLBufferAttribute){const e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const i=n.get(t);void 0===i?n.set(t,s(t,e)):i.version<t.version&&(r(i.buffer,t,e),i.version=t.version)}return{get:o,remove:a,update:l}}class Is extends Vn{constructor(t=1,e=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};const s=t/2,r=e/2,o=Math.floor(i),a=Math.floor(n),l=o+1,h=a+1,c=t/o,u=e/a,d=[],p=[],f=[],m=[];for(let g=0;g<h;g++){const t=g*u-r;for(let e=0;e<l;e++){const i=e*c-s;p.push(i,-t,0),f.push(0,0,1),m.push(e/o),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<o;t++){const e=t+l*g,i=t+l*(g+1),n=t+1+l*(g+1),s=t+1+l*g;d.push(e,i,s),d.push(i,n,s)}this.setIndex(d),this.setAttribute("position",new Dn(p,3)),this.setAttribute("normal",new Dn(f,3)),this.setAttribute("uv",new Dn(m,2))}static fromJSON(t){return new Is(t.width,t.height,t.widthSegments,t.heightSegments)}}var Ds="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",Ns="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",zs="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",qs="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",Bs="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Fs="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Us="vec3 transformed = vec3( position );",$s="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Vs="vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",Hs="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",Gs="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Ws="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",js="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Ys="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Xs="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Qs="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Ks="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Zs="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Js="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",tr="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",er="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",ir="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",nr="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",sr="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",rr="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",or="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",ar="gl_FragColor = linearToOutputTexel( gl_FragColor );",lr="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",hr="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",cr="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",ur="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",dr="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",pr="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fr="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",mr="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",gr="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",vr="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",_r="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",yr="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",br="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",xr="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",Sr="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",wr="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",Cr="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",Mr="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Tr="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",kr="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Er="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Lr="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",Ar="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Pr="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",Rr="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",Or="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Ir="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Dr="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Nr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",zr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",qr="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",Br="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Fr="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Ur="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",$r="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Vr="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Hr="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",Gr="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Wr="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",jr="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Yr="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Xr="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Qr="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Kr="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Zr="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",Jr="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",to="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",eo="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",io="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",no="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",so="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",ro="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",oo="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",ao="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",lo="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",ho="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",co="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",uo="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",po="#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",fo="#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",mo="#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",go="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",vo="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",_o="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",yo="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",bo="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",xo="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",So="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",wo="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Co="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",Mo="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",To="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",ko="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",Eo="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Lo="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Ao="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Po="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",Ro="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Oo="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const Io="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Do="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",No="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",zo="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",qo="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Bo="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Fo="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Uo="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",$o="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Vo="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Ho="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Go="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Wo="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",jo="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Yo="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Xo="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Qo="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ko="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Zo="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Jo="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ta="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",ea="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",ia="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",na="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",sa="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",ra="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",oa="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",aa="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",la="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",ha="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",ca="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ua="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",da="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",pa="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",fa={alphamap_fragment:Ds,alphamap_pars_fragment:Ns,alphatest_fragment:zs,alphatest_pars_fragment:qs,aomap_fragment:Bs,aomap_pars_fragment:Fs,begin_vertex:Us,beginnormal_vertex:$s,bsdfs:Vs,iridescence_fragment:Hs,bumpmap_pars_fragment:Gs,clipping_planes_fragment:Ws,clipping_planes_pars_fragment:js,clipping_planes_pars_vertex:Ys,clipping_planes_vertex:Xs,color_fragment:Qs,color_pars_fragment:Ks,color_pars_vertex:Zs,color_vertex:Js,common:tr,cube_uv_reflection_fragment:er,defaultnormal_vertex:ir,displacementmap_pars_vertex:nr,displacementmap_vertex:sr,emissivemap_fragment:rr,emissivemap_pars_fragment:or,encodings_fragment:ar,encodings_pars_fragment:lr,envmap_fragment:hr,envmap_common_pars_fragment:cr,envmap_pars_fragment:ur,envmap_pars_vertex:dr,envmap_physical_pars_fragment:Cr,envmap_vertex:pr,fog_vertex:fr,fog_pars_vertex:mr,fog_fragment:gr,fog_pars_fragment:vr,gradientmap_pars_fragment:_r,lightmap_fragment:yr,lightmap_pars_fragment:br,lights_lambert_fragment:xr,lights_lambert_pars_fragment:Sr,lights_pars_begin:wr,lights_toon_fragment:Mr,lights_toon_pars_fragment:Tr,lights_phong_fragment:kr,lights_phong_pars_fragment:Er,lights_physical_fragment:Lr,lights_physical_pars_fragment:Ar,lights_fragment_begin:Pr,lights_fragment_maps:Rr,lights_fragment_end:Or,logdepthbuf_fragment:Ir,logdepthbuf_pars_fragment:Dr,logdepthbuf_pars_vertex:Nr,logdepthbuf_vertex:zr,map_fragment:qr,map_pars_fragment:Br,map_particle_fragment:Fr,map_particle_pars_fragment:Ur,metalnessmap_fragment:$r,metalnessmap_pars_fragment:Vr,morphcolor_vertex:Hr,morphnormal_vertex:Gr,morphtarget_pars_vertex:Wr,morphtarget_vertex:jr,normal_fragment_begin:Yr,normal_fragment_maps:Xr,normal_pars_fragment:Qr,normal_pars_vertex:Kr,normal_vertex:Zr,normalmap_pars_fragment:Jr,clearcoat_normal_fragment_begin:to,clearcoat_normal_fragment_maps:eo,clearcoat_pars_fragment:io,iridescence_pars_fragment:no,output_fragment:so,packing:ro,premultiplied_alpha_fragment:oo,project_vertex:ao,dithering_fragment:lo,dithering_pars_fragment:ho,roughnessmap_fragment:co,roughnessmap_pars_fragment:uo,shadowmap_pars_fragment:po,shadowmap_pars_vertex:fo,shadowmap_vertex:mo,shadowmask_pars_fragment:go,skinbase_vertex:vo,skinning_pars_vertex:_o,skinning_vertex:yo,skinnormal_vertex:bo,specularmap_fragment:xo,specularmap_pars_fragment:So,tonemapping_fragment:wo,tonemapping_pars_fragment:Co,transmission_fragment:Mo,transmission_pars_fragment:To,uv_pars_fragment:ko,uv_pars_vertex:Eo,uv_vertex:Lo,uv2_pars_fragment:Ao,uv2_pars_vertex:Po,uv2_vertex:Ro,worldpos_vertex:Oo,background_vert:Io,background_frag:Do,backgroundCube_vert:No,backgroundCube_frag:zo,cube_vert:qo,cube_frag:Bo,depth_vert:Fo,depth_frag:Uo,distanceRGBA_vert:$o,distanceRGBA_frag:Vo,equirect_vert:Ho,equirect_frag:Go,linedashed_vert:Wo,linedashed_frag:jo,meshbasic_vert:Yo,meshbasic_frag:Xo,meshlambert_vert:Qo,meshlambert_frag:Ko,meshmatcap_vert:Zo,meshmatcap_frag:Jo,meshnormal_vert:ta,meshnormal_frag:ea,meshphong_vert:ia,meshphong_frag:na,meshphysical_vert:sa,meshphysical_frag:ra,meshtoon_vert:oa,meshtoon_frag:aa,points_vert:la,points_frag:ha,shadow_vert:ca,shadow_frag:ua,sprite_vert:da,sprite_frag:pa},ma={common:{diffuse:{value:new ei(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new $e},uv2Transform:{value:new $e},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ei(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ei(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new $e}},sprite:{diffuse:{value:new ei(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new $e}}},ga={basic:{uniforms:ds([ma.common,ma.specularmap,ma.envmap,ma.aomap,ma.lightmap,ma.fog]),vertexShader:fa.meshbasic_vert,fragmentShader:fa.meshbasic_frag},lambert:{uniforms:ds([ma.common,ma.specularmap,ma.envmap,ma.aomap,ma.lightmap,ma.emissivemap,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.fog,ma.lights,{emissive:{value:new ei(0)}}]),vertexShader:fa.meshlambert_vert,fragmentShader:fa.meshlambert_frag},phong:{uniforms:ds([ma.common,ma.specularmap,ma.envmap,ma.aomap,ma.lightmap,ma.emissivemap,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.fog,ma.lights,{emissive:{value:new ei(0)},specular:{value:new ei(1118481)},shininess:{value:30}}]),vertexShader:fa.meshphong_vert,fragmentShader:fa.meshphong_frag},standard:{uniforms:ds([ma.common,ma.envmap,ma.aomap,ma.lightmap,ma.emissivemap,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.roughnessmap,ma.metalnessmap,ma.fog,ma.lights,{emissive:{value:new ei(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fa.meshphysical_vert,fragmentShader:fa.meshphysical_frag},toon:{uniforms:ds([ma.common,ma.aomap,ma.lightmap,ma.emissivemap,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.gradientmap,ma.fog,ma.lights,{emissive:{value:new ei(0)}}]),vertexShader:fa.meshtoon_vert,fragmentShader:fa.meshtoon_frag},matcap:{uniforms:ds([ma.common,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.fog,{matcap:{value:null}}]),vertexShader:fa.meshmatcap_vert,fragmentShader:fa.meshmatcap_frag},points:{uniforms:ds([ma.points,ma.fog]),vertexShader:fa.points_vert,fragmentShader:fa.points_frag},dashed:{uniforms:ds([ma.common,ma.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fa.linedashed_vert,fragmentShader:fa.linedashed_frag},depth:{uniforms:ds([ma.common,ma.displacementmap]),vertexShader:fa.depth_vert,fragmentShader:fa.depth_frag},normal:{uniforms:ds([ma.common,ma.bumpmap,ma.normalmap,ma.displacementmap,{opacity:{value:1}}]),vertexShader:fa.meshnormal_vert,fragmentShader:fa.meshnormal_frag},sprite:{uniforms:ds([ma.sprite,ma.fog]),vertexShader:fa.sprite_vert,fragmentShader:fa.sprite_frag},background:{uniforms:{uvTransform:{value:new $e},t2D:{value:null}},vertexShader:fa.background_vert,fragmentShader:fa.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:fa.backgroundCube_vert,fragmentShader:fa.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fa.cube_vert,fragmentShader:fa.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fa.equirect_vert,fragmentShader:fa.equirect_frag},distanceRGBA:{uniforms:ds([ma.common,ma.displacementmap,{referencePosition:{value:new pi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fa.distanceRGBA_vert,fragmentShader:fa.distanceRGBA_frag},shadow:{uniforms:ds([ma.lights,ma.fog,{color:{value:new ei(0)},opacity:{value:1}}]),vertexShader:fa.shadow_vert,fragmentShader:fa.shadow_frag}};function va(t,e,i,n,s,r,o){const a=new ei(0);let l,h,c=!0===r?0:1,u=null,f=0,m=null;function g(n,r){let o=!1,g=!0===r.isScene?r.background:null;if(g&&g.isTexture){const t=r.backgroundBlurriness>0;g=(t?i:e).get(g)}const _=t.xr,y=_.getSession&&_.getSession();y&&"additive"===y.environmentBlendMode&&(g=null),null===g?v(a,c):g&&g.isColor&&(v(g,1),o=!0),(t.autoClear||o)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===rt)?(void 0===h&&(h=new as(new cs(1,1,1),new vs({name:"BackgroundCubeMaterial",uniforms:us(ga.backgroundCube.uniforms),vertexShader:ga.backgroundCube.vertexShader,fragmentShader:ga.backgroundCube.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(h)),h.material.uniforms.envMap.value=g,h.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=r.backgroundBlurriness,u===g&&f===g.version&&m===t.toneMapping||(h.material.needsUpdate=!0,u=g,f=g.version,m=t.toneMapping),h.layers.enableAll(),n.unshift(h,h.geometry,h.material,0,0,null)):g&&g.isTexture&&(void 0===l&&(l=new as(new Is(2,2),new vs({name:"BackgroundMaterial",uniforms:us(ga.background.uniforms),vertexShader:ga.background.vertexShader,fragmentShader:ga.background.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(l)),l.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),l.material.uniforms.uvTransform.value.copy(g.matrix),u===g&&f===g.version&&m===t.toneMapping||(l.material.needsUpdate=!0,u=g,f=g.version,m=t.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null))}function v(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,o)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),c=e,v(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,v(a,c)},render:g}}function _a(t,e,i,n){const s=t.getParameter(34921),r=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==r,a={},l=g(null);let h=l,c=!1;function u(e,n,s,r,a){let l=!1;if(o){const t=m(r,s,n);h!==t&&(h=t,p(h.object)),l=v(e,r,s,a),l&&_(e,r,s,a)}else{const t=!0===n.wireframe;h.geometry===r.id&&h.program===s.id&&h.wireframe===t||(h.geometry=r.id,h.program=s.id,h.wireframe=t,l=!0)}null!==a&&i.update(a,34963),(l||c)&&(c=!1,C(e,n,s,r),null!==a&&t.bindBuffer(34963,i.get(a).buffer))}function d(){return n.isWebGL2?t.createVertexArray():r.createVertexArrayOES()}function p(e){return n.isWebGL2?t.bindVertexArray(e):r.bindVertexArrayOES(e)}function f(e){return n.isWebGL2?t.deleteVertexArray(e):r.deleteVertexArrayOES(e)}function m(t,e,i){const n=!0===i.wireframe;let s=a[t.id];void 0===s&&(s={},a[t.id]=s);let r=s[e.id];void 0===r&&(r={},s[e.id]=r);let o=r[n];return void 0===o&&(o=g(d()),r[n]=o),o}function g(t){const e=[],i=[],n=[];for(let r=0;r<s;r++)e[r]=0,i[r]=0,n[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{},index:null}}function v(t,e,i,n){const s=h.attributes,r=e.attributes;let o=0;const a=i.getAttributes();for(const l in a){const e=a[l];if(e.location>=0){const e=s[l];let i=r[l];if(void 0===i&&("instanceMatrix"===l&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(i=t.instanceColor)),void 0===e)return!0;if(e.attribute!==i)return!0;if(i&&e.data!==i.data)return!0;o++}}return h.attributesNum!==o||h.index!==n}function _(t,e,i,n){const s={},r=e.attributes;let o=0;const a=i.getAttributes();for(const l in a){const e=a[l];if(e.location>=0){let e=r[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const i={};i.attribute=e,e&&e.data&&(i.data=e.data),s[l]=i,o++}}h.attributes=s,h.attributesNum=o,h.index=n}function y(){const t=h.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function b(t){x(t,0)}function x(i,s){const r=h.newAttributes,o=h.enabledAttributes,a=h.attributeDivisors;if(r[i]=1,0===o[i]&&(t.enableVertexAttribArray(i),o[i]=1),a[i]!==s){const r=n.isWebGL2?t:e.get("ANGLE_instanced_arrays");r[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,s),a[i]=s}}function S(){const e=h.newAttributes,i=h.enabledAttributes;for(let n=0,s=i.length;n<s;n++)i[n]!==e[n]&&(t.disableVertexAttribArray(n),i[n]=0)}function w(e,i,s,r,o,a){!0!==n.isWebGL2||5124!==s&&5125!==s?t.vertexAttribPointer(e,i,s,r,o,a):t.vertexAttribIPointer(e,i,s,o,a)}function C(s,r,o,a){if(!1===n.isWebGL2&&(s.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const l=a.attributes,h=o.getAttributes(),c=r.defaultAttributeValues;for(const e in h){const n=h[e];if(n.location>=0){let r=l[e];if(void 0===r&&("instanceMatrix"===e&&s.instanceMatrix&&(r=s.instanceMatrix),"instanceColor"===e&&s.instanceColor&&(r=s.instanceColor)),void 0!==r){const e=r.normalized,o=r.itemSize,l=i.get(r);if(void 0===l)continue;const h=l.buffer,c=l.type,u=l.bytesPerElement;if(r.isInterleavedBufferAttribute){const i=r.data,l=i.stride,d=r.offset;if(i.isInstancedInterleavedBuffer){for(let t=0;t<n.locationSize;t++)x(n.location+t,i.meshPerAttribute);!0!==s.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<n.locationSize;t++)b(n.location+t);t.bindBuffer(34962,h);for(let t=0;t<n.locationSize;t++)w(n.location+t,o/n.locationSize,c,e,l*u,(d+o/n.locationSize*t)*u)}else{if(r.isInstancedBufferAttribute){for(let t=0;t<n.locationSize;t++)x(n.location+t,r.meshPerAttribute);!0!==s.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let t=0;t<n.locationSize;t++)b(n.location+t);t.bindBuffer(34962,h);for(let t=0;t<n.locationSize;t++)w(n.location+t,o/n.locationSize,c,e,o*u,o/n.locationSize*t*u)}}else if(void 0!==c){const i=c[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(n.location,i);break;case 3:t.vertexAttrib3fv(n.location,i);break;case 4:t.vertexAttrib4fv(n.location,i);break;default:t.vertexAttrib1fv(n.location,i)}}}}S()}function M(){E();for(const t in a){const e=a[t];for(const t in e){const i=e[t];for(const t in i)f(i[t].object),delete i[t];delete e[t]}delete a[t]}}function T(t){if(void 0===a[t.id])return;const e=a[t.id];for(const i in e){const t=e[i];for(const e in t)f(t[e].object),delete t[e];delete e[i]}delete a[t.id]}function k(t){for(const e in a){const i=a[e];if(void 0===i[t.id])continue;const n=i[t.id];for(const t in n)f(n[t].object),delete n[t];delete i[t.id]}}function E(){L(),c=!0,h!==l&&(h=l,p(h.object))}function L(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:E,resetDefaultState:L,dispose:M,releaseStatesOfGeometry:T,releaseStatesOfProgram:k,initAttributes:y,enableAttribute:b,disableUnusedAttributes:S}}function ya(t,e,i,n){const s=n.isWebGL2;let r;function o(t){r=t}function a(e,n){t.drawArrays(r,e,n),i.update(n,r,1)}function l(n,o,a){if(0===a)return;let l,h;if(s)l=t,h="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](r,n,o,a),i.update(o,r,a)}this.setMode=o,this.render=a,this.renderInstances=l}function ba(t,e,i){let n;function s(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const i=e.get("EXT_texture_filter_anisotropic");n=t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==i.precision?i.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const h=o||e.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,u=t.getParameter(34930),d=t.getParameter(35660),p=t.getParameter(3379),f=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),_=t.getParameter(36349),y=d>0,b=o||e.has("OES_texture_float"),x=y&&b,S=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:h,getMaxAnisotropy:s,getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:S}}function xa(t){const e=this;let i=null,n=0,s=!1,r=!1;const o=new Es,a=new $e,l={value:null,needsUpdate:!1};function h(){l.value!==i&&(l.value=i,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,i,n,s){const r=null!==t?t.length:0;let h=null;if(0!==r){if(h=l.value,!0!==s||null===h){const e=n+4*r,s=i.matrixWorldInverse;a.getNormalMatrix(s),(null===h||h.length<e)&&(h=new Float32Array(e));for(let i=0,l=n;i!==r;++i,l+=4)o.copy(t[i]).applyMatrix4(s,a),o.normal.toArray(h,l),h[l+3]=o.constant}l.value=h,l.needsUpdate=!0}return e.numPlanes=r,e.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,r){const o=0!==t.length||e||0!==n||s;return s=e,i=c(t,r,0),n=t.length,o},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,h()},this.setState=function(e,o,a){const u=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!s||null===u||0===u.length||r&&!p)r?c(null):h();else{const t=r?0:n,e=4*t;let s=f.clippingState||null;l.value=s,s=c(u,o,e,a);for(let n=0;n!==e;++n)s[n]=i[n];f.clippingState=s,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Sa(t){let e=new WeakMap;function i(t,e){return e===nt?t.mapping=et:e===st&&(t.mapping=it),t}function n(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){const r=n.mapping;if(r===nt||r===st){if(e.has(n)){const t=e.get(n).texture;return i(t,n.mapping)}{const r=n.image;if(r&&r.height>0){const o=new Cs(r.height/2);return o.fromEquirectangularTexture(t,n),e.set(n,o),n.addEventListener("dispose",s),i(o.texture,n.mapping)}return null}}}return n}function s(t){const i=t.target;i.removeEventListener("dispose",s);const n=e.get(i);void 0!==n&&(e.delete(i),n.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}ga.physical={uniforms:ds([ga.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ei(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ei(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ei(1,1,1)},specularColorMap:{value:null}}]),vertexShader:fa.meshphysical_vert,fragmentShader:fa.meshphysical_frag};class wa extends _s{constructor(t=-1,e=1,i=1,n=-1,s=.1,r=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=s,this.far=r,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,s,r){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let s=i-t,r=i+t,o=n+e,a=n-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=t*this.view.offsetX,r=s+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(s,r,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const Ca=4,Ma=[.125,.215,.35,.446,.526,.582],Ta=20,ka=new wa,Ea=new ei;let La=null;const Aa=(1+Math.sqrt(5))/2,Pa=1/Aa,Ra=[new pi(1,1,1),new pi(-1,1,1),new pi(1,1,-1),new pi(-1,1,-1),new pi(0,Aa,Pa),new pi(0,Aa,-Pa),new pi(Pa,0,Aa),new pi(-Pa,0,Aa),new pi(Aa,Pa,0),new pi(-Aa,Pa,0)];class Oa{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){La=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,i,n,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ba(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=qa(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(La),t.scissorTest=!1,Na(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===et||t.mapping===it?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),La=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:dt,minFilter:dt,generateMipmaps:!1,type:St,format:Et,encoding:ge,depthBuffer:!1},n=Da(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Da(t,e,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ia(n)),this._blurMaterial=za(n,t,e)}return n}_compileMaterial(t){const e=new as(this._lodPlanes[0],t);this._renderer.compile(e,ka)}_sceneToCubeUV(t,e,i,n){const s=90,r=1,o=new ys(s,r,e,i),a=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],h=this._renderer,c=h.autoClear,u=h.toneMapping;h.getClearColor(Ea),h.toneMapping=Y,h.autoClear=!1;const d=new Ln({name:"PMREM.Background",side:p,depthWrite:!1,depthTest:!1}),f=new as(new cs,d);let m=!1;const g=t.background;g?g.isColor&&(d.color.copy(g),t.background=null,m=!0):(d.color.copy(Ea),m=!0);for(let p=0;p<6;p++){const e=p%3;0===e?(o.up.set(0,a[p],0),o.lookAt(l[p],0,0)):1===e?(o.up.set(0,0,a[p]),o.lookAt(0,l[p],0)):(o.up.set(0,a[p],0),o.lookAt(0,0,l[p]));const i=this._cubeSize;Na(n,e*i,p>2?i:0,i,i),h.setRenderTarget(n),m&&h.render(f,o),h.render(t,o)}f.geometry.dispose(),f.material.dispose(),h.toneMapping=u,h.autoClear=c,t.background=g}_textureToCubeUV(t,e){const i=this._renderer,n=t.mapping===et||t.mapping===it;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ba()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=qa());const s=n?this._cubemapMaterial:this._equirectMaterial,r=new as(this._lodPlanes[0],s),o=s.uniforms;o["envMap"].value=t;const a=this._cubeSize;Na(e,0,0,3*a,2*a),i.setRenderTarget(e),i.render(r,ka)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const e=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),i=Ra[(n-1)%Ra.length];this._blur(t,n-1,n,e,i)}e.autoClear=i}_blur(t,e,i,n,s){const r=this._pingPongRenderTarget;this._halfBlur(t,r,e,i,n,"latitudinal",s),this._halfBlur(r,t,i,i,n,"longitudinal",s)}_halfBlur(t,e,i,n,s,r,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==r&&"longitudinal"!==r&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,c=new as(this._lodPlanes[n],l),u=l.uniforms,d=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Ta-1),f=s/p,m=isFinite(s)?1+Math.floor(h*f):Ta;m>Ta&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Ta}`);const g=[];let v=0;for(let S=0;S<Ta;++S){const t=S/f,e=Math.exp(-t*t/2);g.push(e),0===S?v+=e:S<m&&(v+=2*e)}for(let S=0;S<g.length;S++)g[S]=g[S]/v;u["envMap"].value=t.texture,u["samples"].value=m,u["weights"].value=g,u["latitudinal"].value="latitudinal"===r,o&&(u["poleAxis"].value=o);const{_lodMax:_}=this;u["dTheta"].value=p,u["mipInt"].value=_-i;const y=this._sizeLods[n],b=3*y*(n>_-Ca?n-_+Ca:0),x=4*(this._cubeSize-y);Na(e,b,x,3*y,2*y),a.setRenderTarget(e),a.render(c,ka)}}function Ia(t){const e=[],i=[],n=[];let s=t;const r=t-Ca+1+Ma.length;for(let o=0;o<r;o++){const r=Math.pow(2,s);i.push(r);let a=1/r;o>t-Ca?a=Ma[o-t+Ca-1]:0===o&&(a=0),n.push(a);const l=1/(r-2),h=-l,c=1+l,u=[h,h,c,h,c,c,h,h,c,c,h,c],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),_=new Float32Array(m*p*d),y=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,i=t>2?0:-1,n=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];v.set(n,f*p*t),_.set(u,m*p*t);const s=[t,t,t,t,t,t];y.set(s,g*p*t)}const b=new Vn;b.setAttribute("position",new Rn(v,f)),b.setAttribute("uv",new Rn(_,m)),b.setAttribute("faceIndex",new Rn(y,g)),e.push(b),s>Ca&&s--}return{lodPlanes:e,sizeLods:i,sigmas:n}}function Da(t,e,i){const n=new hi(t,e,i);return n.texture.mapping=rt,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Na(t,e,i,n,s){t.viewport.set(e,i,n,s),t.scissor.set(e,i,n,s)}function za(t,e,i){const n=new Float32Array(Ta),s=new pi(0,1,0),r=new vs({name:"SphericalGaussianBlur",defines:{n:Ta,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:t+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Fa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1});return r}function qa(){return new vs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Fa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function Ba(){return new vs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Fa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function Fa(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Ua(t){let e=new WeakMap,i=null;function n(n){if(n&&n.isTexture){const o=n.mapping,a=o===nt||o===st,l=o===et||o===it;if(a||l){if(n.isRenderTargetTexture&&!0===n.needsPMREMUpdate){n.needsPMREMUpdate=!1;let s=e.get(n);return null===i&&(i=new Oa(t)),s=a?i.fromEquirectangular(n,s):i.fromCubemap(n,s),e.set(n,s),s.texture}if(e.has(n))return e.get(n).texture;{const o=n.image;if(a&&o&&o.height>0||l&&o&&s(o)){null===i&&(i=new Oa(t));const s=a?i.fromEquirectangular(n):i.fromCubemap(n);return e.set(n,s),n.addEventListener("dispose",r),s.texture}return null}}}return n}function s(t){let e=0;const i=6;for(let n=0;n<i;n++)void 0!==t[n]&&e++;return e===i}function r(t){const i=t.target;i.removeEventListener("dispose",r);const n=e.get(i);void 0!==n&&(e.delete(i),n.dispose())}function o(){e=new WeakMap,null!==i&&(i.dispose(),i=null)}return{get:n,dispose:o}}function $a(t){const e={};function i(i){if(void 0!==e[i])return e[i];let n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return e[i]=n,n}return{has:function(t){return null!==i(t)},init:function(t){t.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(t){const e=i(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Va(t,e,i,n){const s={},r=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const i in a.attributes)e.remove(a.attributes[i]);a.removeEventListener("dispose",o),delete s[a.id];const l=r.get(a);l&&(e.remove(l),r.delete(a)),n.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,i.memory.geometries--}function a(t,e){return!0===s[e.id]||(e.addEventListener("dispose",o),s[e.id]=!0,i.memory.geometries++),e}function l(t){const i=t.attributes;for(const s in i)e.update(i[s],34962);const n=t.morphAttributes;for(const s in n){const t=n[s];for(let i=0,n=t.length;i<n;i++)e.update(t[i],34962)}}function h(t){const i=[],n=t.index,s=t.attributes.position;let o=0;if(null!==n){const t=n.array;o=n.version;for(let e=0,n=t.length;e<n;e+=3){const n=t[e+0],s=t[e+1],r=t[e+2];i.push(n,s,s,r,r,n)}}else{const t=s.array;o=s.version;for(let e=0,n=t.length/3-1;e<n;e+=3){const t=e+0,n=e+1,s=e+2;i.push(t,n,n,s,s,t)}}const a=new(Ve(i)?In:On)(i,1);a.version=o;const l=r.get(t);l&&e.remove(l),r.set(t,a)}function c(t){const e=r.get(t);if(e){const i=t.index;null!==i&&e.version<i.version&&h(t)}else h(t);return r.get(t)}return{get:a,update:l,getWireframeAttribute:c}}function Ha(t,e,i,n){const s=n.isWebGL2;let r,o,a;function l(t){r=t}function h(t){o=t.type,a=t.bytesPerElement}function c(e,n){t.drawElements(r,n,o,e*a),i.update(n,r,1)}function u(n,l,h){if(0===h)return;let c,u;if(s)c=t,u="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](r,l,o,n*a,h),i.update(l,r,h)}this.setMode=l,this.setIndex=h,this.render=c,this.renderInstances=u}function Ga(t){const e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function n(t,e,n){switch(i.calls++,e){case 4:i.triangles+=n*(t/3);break;case 1:i.lines+=n*(t/2);break;case 3:i.lines+=n*(t-1);break;case 2:i.lines+=n*t;break;case 0:i.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function s(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:s,update:n}}function Wa(t,e){return t[0]-e[0]}function ja(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ya(t,e,i){const n={},s=new Float32Array(8),r=new WeakMap,o=new li,a=[];for(let h=0;h<8;h++)a[h]=[h,0];function l(l,h,c,u){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const n=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,s=void 0!==n?n.length:0;let a=r.get(h);if(void 0===a||a.count!==s){void 0!==a&&a.texture.dispose();const t=void 0!==h.morphAttributes.position,i=void 0!==h.morphAttributes.normal,n=void 0!==h.morphAttributes.color,l=h.morphAttributes.position||[],c=h.morphAttributes.normal||[],u=h.morphAttributes.color||[];let d=0;!0===t&&(d=1),!0===i&&(d=2),!0===n&&(d=3);let f=h.attributes.position.count*d,m=1;f>e.maxTextureSize&&(m=Math.ceil(f/e.maxTextureSize),f=e.maxTextureSize);const g=new Float32Array(f*m*4*s),v=new ci(g,f,m,s);v.type=xt,v.needsUpdate=!0;const _=4*d;for(let e=0;e<s;e++){const s=l[e],r=c[e],a=u[e],h=f*m*4*e;for(let e=0;e<s.count;e++){const l=e*_;!0===t&&(o.fromBufferAttribute(s,e),g[h+l+0]=o.x,g[h+l+1]=o.y,g[h+l+2]=o.z,g[h+l+3]=0),!0===i&&(o.fromBufferAttribute(r,e),g[h+l+4]=o.x,g[h+l+5]=o.y,g[h+l+6]=o.z,g[h+l+7]=0),!0===n&&(o.fromBufferAttribute(a,e),g[h+l+8]=o.x,g[h+l+9]=o.y,g[h+l+10]=o.z,g[h+l+11]=4===a.itemSize?o.w:1)}}function p(){v.dispose(),r.delete(h),h.removeEventListener("dispose",p)}a={count:s,texture:v,size:new Ue(f,m)},r.set(h,a),h.addEventListener("dispose",p)}let l=0;for(let t=0;t<d.length;t++)l+=d[t];const c=h.morphTargetsRelative?1:1-l;u.getUniforms().setValue(t,"morphTargetBaseInfluence",c),u.getUniforms().setValue(t,"morphTargetInfluences",d),u.getUniforms().setValue(t,"morphTargetsTexture",a.texture,i),u.getUniforms().setValue(t,"morphTargetsTextureSize",a.size)}else{const e=void 0===d?0:d.length;let i=n[h.id];if(void 0===i||i.length!==e){i=[];for(let t=0;t<e;t++)i[t]=[t,0];n[h.id]=i}for(let t=0;t<e;t++){const e=i[t];e[0]=t,e[1]=d[t]}i.sort(ja);for(let t=0;t<8;t++)t<e&&i[t][1]?(a[t][0]=i[t][0],a[t][1]=i[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(Wa);const r=h.morphAttributes.position,o=h.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=a[t],i=e[0],n=e[1];i!==Number.MAX_SAFE_INTEGER&&n?(r&&h.getAttribute("morphTarget"+t)!==r[i]&&h.setAttribute("morphTarget"+t,r[i]),o&&h.getAttribute("morphNormal"+t)!==o[i]&&h.setAttribute("morphNormal"+t,o[i]),s[t]=n,l+=n):(r&&!0===h.hasAttribute("morphTarget"+t)&&h.deleteAttribute("morphTarget"+t),o&&!0===h.hasAttribute("morphNormal"+t)&&h.deleteAttribute("morphNormal"+t),s[t]=0)}const c=h.morphTargetsRelative?1:1-l;u.getUniforms().setValue(t,"morphTargetBaseInfluence",c),u.getUniforms().setValue(t,"morphTargetInfluences",s)}}return{update:l}}function Xa(t,e,i,n){let s=new WeakMap;function r(t){const r=n.render.frame,o=t.geometry,l=e.get(t,o);return s.get(l)!==r&&(e.update(l),s.set(l,r)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",a)&&t.addEventListener("dispose",a),i.update(t.instanceMatrix,34962),null!==t.instanceColor&&i.update(t.instanceColor,34962)),l}function o(){s=new WeakMap}function a(t){const e=t.target;e.removeEventListener("dispose",a),i.remove(e.instanceMatrix),null!==e.instanceColor&&i.remove(e.instanceColor)}return{update:r,dispose:o}}const Qa=new ai,Ka=new ci,Za=new ui,Ja=new ws,tl=[],el=[],il=new Float32Array(16),nl=new Float32Array(9),sl=new Float32Array(4);function rl(t,e,i){const n=t[0];if(n<=0||n>0)return t;const s=e*i;let r=tl[s];if(void 0===r&&(r=new Float32Array(s),tl[s]=r),0!==e){n.toArray(r,0);for(let n=1,s=0;n!==e;++n)s+=i,t[n].toArray(r,s)}return r}function ol(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function al(t,e){for(let i=0,n=e.length;i<n;i++)t[i]=e[i]}function ll(t,e){let i=el[e];void 0===i&&(i=new Int32Array(e),el[e]=i);for(let n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function hl(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function cl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(ol(i,e))return;t.uniform2fv(this.addr,e),al(i,e)}}function ul(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(ol(i,e))return;t.uniform3fv(this.addr,e),al(i,e)}}function dl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(ol(i,e))return;t.uniform4fv(this.addr,e),al(i,e)}}function pl(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(ol(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),al(i,e)}else{if(ol(i,n))return;sl.set(n),t.uniformMatrix2fv(this.addr,!1,sl),al(i,n)}}function fl(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(ol(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),al(i,e)}else{if(ol(i,n))return;nl.set(n),t.uniformMatrix3fv(this.addr,!1,nl),al(i,n)}}function ml(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(ol(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),al(i,e)}else{if(ol(i,n))return;il.set(n),t.uniformMatrix4fv(this.addr,!1,il),al(i,n)}}function gl(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function vl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(ol(i,e))return;t.uniform2iv(this.addr,e),al(i,e)}}function _l(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(ol(i,e))return;t.uniform3iv(this.addr,e),al(i,e)}}function yl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(ol(i,e))return;t.uniform4iv(this.addr,e),al(i,e)}}function bl(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function xl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(ol(i,e))return;t.uniform2uiv(this.addr,e),al(i,e)}}function Sl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(ol(i,e))return;t.uniform3uiv(this.addr,e),al(i,e)}}function wl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(ol(i,e))return;t.uniform4uiv(this.addr,e),al(i,e)}}function Cl(t,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),i.setTexture2D(e||Qa,s)}function Ml(t,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),i.setTexture3D(e||Za,s)}function Tl(t,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),i.setTextureCube(e||Ja,s)}function kl(t,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),i.setTexture2DArray(e||Ka,s)}function El(t){switch(t){case 5126:return hl;case 35664:return cl;case 35665:return ul;case 35666:return dl;case 35674:return pl;case 35675:return fl;case 35676:return ml;case 5124:case 35670:return gl;case 35667:case 35671:return vl;case 35668:case 35672:return _l;case 35669:case 35673:return yl;case 5125:return bl;case 36294:return xl;case 36295:return Sl;case 36296:return wl;case 35678:case 36198:case 36298:case 36306:case 35682:return Cl;case 35679:case 36299:case 36307:return Ml;case 35680:case 36300:case 36308:case 36293:return Tl;case 36289:case 36303:case 36311:case 36292:return kl}}function Ll(t,e){t.uniform1fv(this.addr,e)}function Al(t,e){const i=rl(e,this.size,2);t.uniform2fv(this.addr,i)}function Pl(t,e){const i=rl(e,this.size,3);t.uniform3fv(this.addr,i)}function Rl(t,e){const i=rl(e,this.size,4);t.uniform4fv(this.addr,i)}function Ol(t,e){const i=rl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function Il(t,e){const i=rl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function Dl(t,e){const i=rl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function Nl(t,e){t.uniform1iv(this.addr,e)}function zl(t,e){t.uniform2iv(this.addr,e)}function ql(t,e){t.uniform3iv(this.addr,e)}function Bl(t,e){t.uniform4iv(this.addr,e)}function Fl(t,e){t.uniform1uiv(this.addr,e)}function Ul(t,e){t.uniform2uiv(this.addr,e)}function $l(t,e){t.uniform3uiv(this.addr,e)}function Vl(t,e){t.uniform4uiv(this.addr,e)}function Hl(t,e,i){const n=this.cache,s=e.length,r=ll(i,s);ol(n,r)||(t.uniform1iv(this.addr,r),al(n,r));for(let o=0;o!==s;++o)i.setTexture2D(e[o]||Qa,r[o])}function Gl(t,e,i){const n=this.cache,s=e.length,r=ll(i,s);ol(n,r)||(t.uniform1iv(this.addr,r),al(n,r));for(let o=0;o!==s;++o)i.setTexture3D(e[o]||Za,r[o])}function Wl(t,e,i){const n=this.cache,s=e.length,r=ll(i,s);ol(n,r)||(t.uniform1iv(this.addr,r),al(n,r));for(let o=0;o!==s;++o)i.setTextureCube(e[o]||Ja,r[o])}function jl(t,e,i){const n=this.cache,s=e.length,r=ll(i,s);ol(n,r)||(t.uniform1iv(this.addr,r),al(n,r));for(let o=0;o!==s;++o)i.setTexture2DArray(e[o]||Ka,r[o])}function Yl(t){switch(t){case 5126:return Ll;case 35664:return Al;case 35665:return Pl;case 35666:return Rl;case 35674:return Ol;case 35675:return Il;case 35676:return Dl;case 5124:case 35670:return Nl;case 35667:case 35671:return zl;case 35668:case 35672:return ql;case 35669:case 35673:return Bl;case 5125:return Fl;case 36294:return Ul;case 36295:return $l;case 36296:return Vl;case 35678:case 36198:case 36298:case 36306:case 35682:return Hl;case 35679:case 36299:case 36307:return Gl;case 35680:case 36300:case 36308:case 36293:return Wl;case 36289:case 36303:case 36311:case 36292:return jl}}class Xl{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=El(e.type)}}class Ql{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=Yl(e.type)}}class Kl{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const n=this.seq;for(let s=0,r=n.length;s!==r;++s){const r=n[s];r.setValue(t,e[r.id],i)}}}const Zl=/(\w+)(\])?(\[|\.)?/g;function Jl(t,e){t.seq.push(e),t.map[e.id]=e}function th(t,e,i){const n=t.name,s=n.length;Zl.lastIndex=0;while(1){const r=Zl.exec(n),o=Zl.lastIndex;let a=r[1];const l="]"===r[2],h=r[3];if(l&&(a|=0),void 0===h||"["===h&&o+2===s){Jl(i,void 0===h?new Xl(a,t,e):new Ql(a,t,e));break}{const t=i.map;let e=t[a];void 0===e&&(e=new Kl(a),Jl(i,e)),i=e}}}class eh{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){const i=t.getActiveUniform(e,n),s=t.getUniformLocation(e,i.name);th(i,s,this)}}setValue(t,e,i,n){const s=this.map[e];void 0!==s&&s.setValue(t,i,n)}setOptional(t,e,i){const n=e[i];void 0!==n&&this.setValue(t,i,n)}static upload(t,e,i,n){for(let s=0,r=e.length;s!==r;++s){const r=e[s],o=i[r.id];!1!==o.needsUpdate&&r.setValue(t,o.value,n)}}static seqWithValue(t,e){const i=[];for(let n=0,s=t.length;n!==s;++n){const s=t[n];s.id in e&&i.push(s)}return i}}function ih(t,e,i){const n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}let nh=0;function sh(t,e){const i=t.split("\n"),n=[],s=Math.max(e-6,0),r=Math.min(e+6,i.length);for(let o=s;o<r;o++){const t=o+1;n.push(`${t===e?">":" "} ${t}: ${i[o]}`)}return n.join("\n")}function rh(t){switch(t){case ge:return["Linear","( value )"];case ve:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function oh(t,e,i){const n=t.getShaderParameter(e,35713),s=t.getShaderInfoLog(e).trim();if(n&&""===s)return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const n=parseInt(r[1]);return i.toUpperCase()+"\n\n"+s+"\n\n"+sh(t.getShaderSource(e),n)}return s}function ah(t,e){const i=rh(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function lh(t,e){let i;switch(e){case X:i="Linear";break;case Q:i="Reinhard";break;case K:i="OptimizedCineon";break;case Z:i="ACESFilmic";break;case J:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function hh(t){const e=[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(dh).join("\n")}function ch(t){const e=[];for(const i in t){const n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}function uh(t,e){const i={},n=t.getProgramParameter(e,35721);for(let s=0;s<n;s++){const n=t.getActiveAttrib(e,s),r=n.name;let o=1;35674===n.type&&(o=2),35675===n.type&&(o=3),35676===n.type&&(o=4),i[r]={type:n.type,location:t.getAttribLocation(e,r),locationSize:o}}return i}function dh(t){return""!==t}function ph(t,e){const i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fh(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mh=/^[ \t]*#include +<([\w\d./]+)>/gm;function gh(t){return t.replace(mh,vh)}function vh(t,e){const i=fa[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return gh(i)}const _h=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yh(t){return t.replace(_h,bh)}function bh(t,e,i,n){let s="";for(let r=parseInt(e);r<parseInt(i);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function xh(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Sh(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===h?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===u&&(e="SHADOWMAP_TYPE_VSM"),e}function wh(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case et:case it:e="ENVMAP_TYPE_CUBE";break;case rt:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ch(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case it:e="ENVMAP_MODE_REFRACTION";break}return e}function Mh(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case G:e="ENVMAP_BLENDING_MULTIPLY";break;case W:e="ENVMAP_BLENDING_MIX";break;case j:e="ENVMAP_BLENDING_ADD";break}return e}function Th(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const i=Math.log2(e)-2,n=1/e,s=1/(3*Math.max(Math.pow(2,i),112));return{texelWidth:s,texelHeight:n,maxMip:i}}function kh(t,e,i,n){const s=t.getContext(),r=i.defines;let o=i.vertexShader,a=i.fragmentShader;const l=Sh(i),h=wh(i),c=Ch(i),u=Mh(i),d=Th(i),p=i.isWebGL2?"":hh(i),f=ch(r),m=s.createProgram();let g,v,_=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(g=[f].filter(dh).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(dh).join("\n"),v.length>0&&(v+="\n")):(g=[xh(i),"#define SHADER_NAME "+i.shaderName,f,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dh).join("\n"),v=[p,xh(i),"#define SHADER_NAME "+i.shaderName,f,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.envMap?"#define "+c:"",i.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Y?"#define TONE_MAPPING":"",i.toneMapping!==Y?fa["tonemapping_pars_fragment"]:"",i.toneMapping!==Y?lh("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",fa["encodings_pars_fragment"],ah("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(dh).join("\n")),o=gh(o),o=ph(o,i),o=fh(o,i),a=gh(a),a=ph(a,i),a=fh(a,i),o=yh(o),a=yh(a),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(_="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",i.glslVersion===ke?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===ke?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=_+g+o,b=_+v+a,x=ih(s,35633,y),S=ih(s,35632,b);if(s.attachShader(m,x),s.attachShader(m,S),void 0!==i.index0AttributeName?s.bindAttribLocation(m,0,i.index0AttributeName):!0===i.morphTargets&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m),t.debug.checkShaderErrors){const t=s.getProgramInfoLog(m).trim(),e=s.getShaderInfoLog(x).trim(),i=s.getShaderInfoLog(S).trim();let n=!0,r=!0;if(!1===s.getProgramParameter(m,35714)){n=!1;const e=oh(s,x,"vertex"),i=oh(s,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+i)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==i||(r=!1);r&&(this.diagnostics={runnable:n,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:i,prefix:v}})}let w,C;return s.deleteShader(x),s.deleteShader(S),this.getUniforms=function(){return void 0===w&&(w=new eh(s,m)),w},this.getAttributes=function(){return void 0===C&&(C=uh(s,m)),C},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.name=i.shaderName,this.id=nh++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=S,this}let Eh=0;class Lh{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),s=this._getShaderStage(i),r=this._getShaderCacheForMaterial(t);return!1===r.has(n)&&(r.add(n),n.usedTimes++),!1===r.has(s)&&(r.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return void 0===i&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return void 0===i&&(i=new Ah(t),e.set(t,i)),i}}class Ah{constructor(t){this.id=Eh++,this.code=t,this.usedTimes=0}}function Ph(t,e,i,n,s,r,o){const a=new tn,l=new Lh,h=[],c=s.isWebGL2,u=s.logarithmicDepthBuffer,d=s.vertexTextures;let m=s.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(r,a,h,_,y){const b=_.fog,x=y.geometry,S=r.isMeshStandardMaterial?_.environment:null,w=(r.isMeshStandardMaterial?i:e).get(r.envMap||S),C=w&&w.mapping===rt?w.image.height:null,M=v[r.type];null!==r.precision&&(m=s.getMaxPrecision(r.precision),m!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",m,"instead."));const T=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,k=void 0!==T?T.length:0;let E,L,A,P,R=0;if(void 0!==x.morphAttributes.position&&(R=1),void 0!==x.morphAttributes.normal&&(R=2),void 0!==x.morphAttributes.color&&(R=3),M){const t=ga[M];E=t.vertexShader,L=t.fragmentShader}else E=r.vertexShader,L=r.fragmentShader,l.update(r),A=l.getVertexShaderID(r),P=l.getFragmentShaderID(r);const O=t.getRenderTarget(),I=r.alphaTest>0,D=r.clearcoat>0,N=r.iridescence>0,z={isWebGL2:c,shaderID:M,shaderName:r.type,vertexShader:E,fragmentShader:L,defines:r.defines,customVertexShaderID:A,customFragmentShaderID:P,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:m,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:d,outputEncoding:null===O?t.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:ge,map:!!r.map,matcap:!!r.matcap,envMap:!!w,envMapMode:w&&w.mapping,envMapCubeUVHeight:C,lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===xe,tangentSpaceNormalMap:r.normalMapType===be,decodeVideoTexture:!!r.map&&!0===r.map.isVideoTexture&&r.map.encoding===ve,clearcoat:D,clearcoatMap:D&&!!r.clearcoatMap,clearcoatRoughnessMap:D&&!!r.clearcoatRoughnessMap,clearcoatNormalMap:D&&!!r.clearcoatNormalMap,iridescence:N,iridescenceMap:N&&!!r.iridescenceMap,iridescenceThicknessMap:N&&!!r.iridescenceThicknessMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,specularIntensityMap:!!r.specularIntensityMap,specularColorMap:!!r.specularColorMap,opaque:!1===r.transparent&&r.blending===g,alphaMap:!!r.alphaMap,alphaTest:I,gradientMap:!!r.gradientMap,sheen:r.sheen>0,sheenColorMap:!!r.sheenColorMap,sheenRoughnessMap:!!r.sheenRoughnessMap,transmission:r.transmission>0,transmissionMap:!!r.transmissionMap,thicknessMap:!!r.thicknessMap,combine:r.combine,vertexTangents:!!r.normalMap&&!!x.attributes.tangent,vertexColors:r.vertexColors,vertexAlphas:!0===r.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUvs:!!r.map||!!r.bumpMap||!!r.normalMap||!!r.specularMap||!!r.alphaMap||!!r.emissiveMap||!!r.roughnessMap||!!r.metalnessMap||!!r.clearcoatMap||!!r.clearcoatRoughnessMap||!!r.clearcoatNormalMap||!!r.iridescenceMap||!!r.iridescenceThicknessMap||!!r.displacementMap||!!r.transmissionMap||!!r.thicknessMap||!!r.specularIntensityMap||!!r.specularColorMap||!!r.sheenColorMap||!!r.sheenRoughnessMap,uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.iridescenceMap||r.iridescenceThicknessMap||r.transmission>0||r.transmissionMap||r.thicknessMap||r.specularIntensityMap||r.specularColorMap||r.sheen>0||r.sheenColorMap||r.sheenRoughnessMap)&&!!r.displacementMap,fog:!!b,useFog:!0===r.fog,fogExp2:b&&b.isFogExp2,flatShading:!!r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:k,morphTextureStride:R,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:Y,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,doubleSided:r.side===f,flipSided:r.side===p,useDepthPacking:!!r.depthPacking,depthPacking:r.depthPacking||0,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()};return z}function y(e){const i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.customVertexShaderID),i.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(b(i,e),x(i,e),i.push(t.outputEncoding)),i.push(e.customProgramCacheKey),i.join()}function b(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function x(t,e){a.disableAll(),e.isWebGL2&&a.enable(0),e.supportsVertexTextures&&a.enable(1),e.instancing&&a.enable(2),e.instancingColor&&a.enable(3),e.map&&a.enable(4),e.matcap&&a.enable(5),e.envMap&&a.enable(6),e.lightMap&&a.enable(7),e.aoMap&&a.enable(8),e.emissiveMap&&a.enable(9),e.bumpMap&&a.enable(10),e.normalMap&&a.enable(11),e.objectSpaceNormalMap&&a.enable(12),e.tangentSpaceNormalMap&&a.enable(13),e.clearcoat&&a.enable(14),e.clearcoatMap&&a.enable(15),e.clearcoatRoughnessMap&&a.enable(16),e.clearcoatNormalMap&&a.enable(17),e.iridescence&&a.enable(18),e.iridescenceMap&&a.enable(19),e.iridescenceThicknessMap&&a.enable(20),e.displacementMap&&a.enable(21),e.specularMap&&a.enable(22),e.roughnessMap&&a.enable(23),e.metalnessMap&&a.enable(24),e.gradientMap&&a.enable(25),e.alphaMap&&a.enable(26),e.alphaTest&&a.enable(27),e.vertexColors&&a.enable(28),e.vertexAlphas&&a.enable(29),e.vertexUvs&&a.enable(30),e.vertexTangents&&a.enable(31),e.uvsVertexOnly&&a.enable(32),t.push(a.mask),a.disableAll(),e.fog&&a.enable(0),e.useFog&&a.enable(1),e.flatShading&&a.enable(2),e.logarithmicDepthBuffer&&a.enable(3),e.skinning&&a.enable(4),e.morphTargets&&a.enable(5),e.morphNormals&&a.enable(6),e.morphColors&&a.enable(7),e.premultipliedAlpha&&a.enable(8),e.shadowMapEnabled&&a.enable(9),e.physicallyCorrectLights&&a.enable(10),e.doubleSided&&a.enable(11),e.flipSided&&a.enable(12),e.useDepthPacking&&a.enable(13),e.dithering&&a.enable(14),e.specularIntensityMap&&a.enable(15),e.specularColorMap&&a.enable(16),e.transmission&&a.enable(17),e.transmissionMap&&a.enable(18),e.thicknessMap&&a.enable(19),e.sheen&&a.enable(20),e.sheenColorMap&&a.enable(21),e.sheenRoughnessMap&&a.enable(22),e.decodeVideoTexture&&a.enable(23),e.opaque&&a.enable(24),t.push(a.mask)}function S(t){const e=v[t.type];let i;if(e){const t=ga[e];i=fs.clone(t.uniforms)}else i=t.uniforms;return i}function w(e,i){let n;for(let t=0,s=h.length;t<s;t++){const e=h[t];if(e.cacheKey===i){n=e,++n.usedTimes;break}}return void 0===n&&(n=new kh(t,i,e,r),h.push(n)),n}function C(t){if(0===--t.usedTimes){const e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}}function M(t){l.remove(t)}function T(){l.dispose()}return{getParameters:_,getProgramCacheKey:y,getUniforms:S,acquireProgram:w,releaseProgram:C,releaseShaderCache:M,programs:h,dispose:T}}function Rh(){let t=new WeakMap;function e(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i}function i(e){t.delete(e)}function n(e,i,n){t.get(e)[i]=n}function s(){t=new WeakMap}return{get:e,remove:i,update:n,dispose:s}}function Oh(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ih(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Dh(){const t=[];let e=0;const i=[],n=[],s=[];function r(){e=0,i.length=0,n.length=0,s.length=0}function o(i,n,s,r,o,a){let l=t[e];return void 0===l?(l={id:i.id,object:i,geometry:n,material:s,groupOrder:r,renderOrder:i.renderOrder,z:o,group:a},t[e]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=s,l.groupOrder=r,l.renderOrder=i.renderOrder,l.z=o,l.group=a),e++,l}function a(t,e,r,a,l,h){const c=o(t,e,r,a,l,h);r.transmission>0?n.push(c):!0===r.transparent?s.push(c):i.push(c)}function l(t,e,r,a,l,h){const c=o(t,e,r,a,l,h);r.transmission>0?n.unshift(c):!0===r.transparent?s.unshift(c):i.unshift(c)}function h(t,e){i.length>1&&i.sort(t||Oh),n.length>1&&n.sort(e||Ih),s.length>1&&s.sort(e||Ih)}function c(){for(let i=e,n=t.length;i<n;i++){const e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return{opaque:i,transmissive:n,transparent:s,init:r,push:a,unshift:l,finish:c,sort:h}}function Nh(){let t=new WeakMap;function e(e,i){const n=t.get(e);let s;return void 0===n?(s=new Dh,t.set(e,[s])):i>=n.length?(s=new Dh,n.push(s)):s=n[i],s}function i(){t=new WeakMap}return{get:e,dispose:i}}function zh(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new pi,color:new ei};break;case"SpotLight":i={position:new pi,direction:new pi,color:new ei,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new pi,color:new ei,distance:0,decay:0};break;case"HemisphereLight":i={direction:new pi,skyColor:new ei,groundColor:new ei};break;case"RectAreaLight":i={color:new ei,position:new pi,halfWidth:new pi,halfHeight:new pi};break}return t[e.id]=i,i}}}function qh(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=i,i}}}let Bh=0;function Fh(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Uh(t,e){const i=new zh,n=qh(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)s.probe.push(new pi);const r=new pi,o=new Vi,a=new Vi;function l(r,o){let a=0,l=0,h=0;for(let t=0;t<9;t++)s.probe[t].set(0,0,0);let c=0,u=0,d=0,p=0,f=0,m=0,g=0,v=0,_=0,y=0;r.sort(Fh);const b=!0!==o?Math.PI:1;for(let t=0,e=r.length;t<e;t++){const e=r[t],o=e.color,x=e.intensity,S=e.distance,w=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=o.r*x*b,l+=o.g*x*b,h+=o.b*x*b;else if(e.isLightProbe)for(let t=0;t<9;t++)s.probe[t].addScaledVector(e.sh.coefficients[t],x);else if(e.isDirectionalLight){const t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,s.directionalShadow[c]=i,s.directionalShadowMap[c]=w,s.directionalShadowMatrix[c]=e.shadow.matrix,m++}s.directional[c]=t,c++}else if(e.isSpotLight){const t=i.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(x*b),t.distance=S,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,s.spot[d]=t;const r=e.shadow;if(e.map&&(s.spotLightMap[_]=e.map,_++,r.updateMatrices(e),e.castShadow&&y++),s.spotLightMatrix[d]=r.matrix,e.castShadow){const t=n.get(e);t.shadowBias=r.bias,t.shadowNormalBias=r.normalBias,t.shadowRadius=r.radius,t.shadowMapSize=r.mapSize,s.spotShadow[d]=t,s.spotShadowMap[d]=w,v++}d++}else if(e.isRectAreaLight){const t=i.get(e);t.color.copy(o).multiplyScalar(x),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),s.rectArea[p]=t,p++}else if(e.isPointLight){const t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,i.shadowCameraNear=t.camera.near,i.shadowCameraFar=t.camera.far,s.pointShadow[u]=i,s.pointShadowMap[u]=w,s.pointShadowMatrix[u]=e.shadow.matrix,g++}s.point[u]=t,u++}else if(e.isHemisphereLight){const t=i.get(e);t.skyColor.copy(e.color).multiplyScalar(x*b),t.groundColor.copy(e.groundColor).multiplyScalar(x*b),s.hemi[f]=t,f++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(s.rectAreaLTC1=ma.LTC_FLOAT_1,s.rectAreaLTC2=ma.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=ma.LTC_HALF_1,s.rectAreaLTC2=ma.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=a,s.ambient[1]=l,s.ambient[2]=h;const x=s.hash;x.directionalLength===c&&x.pointLength===u&&x.spotLength===d&&x.rectAreaLength===p&&x.hemiLength===f&&x.numDirectionalShadows===m&&x.numPointShadows===g&&x.numSpotShadows===v&&x.numSpotMaps===_||(s.directional.length=c,s.spot.length=d,s.rectArea.length=p,s.point.length=u,s.hemi.length=f,s.directionalShadow.length=m,s.directionalShadowMap.length=m,s.pointShadow.length=g,s.pointShadowMap.length=g,s.spotShadow.length=v,s.spotShadowMap.length=v,s.directionalShadowMatrix.length=m,s.pointShadowMatrix.length=g,s.spotLightMatrix.length=v+_-y,s.spotLightMap.length=_,s.numSpotLightShadowsWithMaps=y,x.directionalLength=c,x.pointLength=u,x.spotLength=d,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,x.numSpotMaps=_,s.version=Bh++)}function h(t,e){let i=0,n=0,l=0,h=0,c=0;const u=e.matrixWorldInverse;for(let d=0,p=t.length;d<p;d++){const e=t[d];if(e.isDirectionalLight){const t=s.directional[i];t.direction.setFromMatrixPosition(e.matrixWorld),r.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(r),t.direction.transformDirection(u),i++}else if(e.isSpotLight){const t=s.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(e.matrixWorld),r.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(r),t.direction.transformDirection(u),l++}else if(e.isRectAreaLight){const t=s.rectArea[h];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),a.identity(),o.copy(e.matrixWorld),o.premultiply(u),a.extractRotation(o),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),h++}else if(e.isPointLight){const t=s.point[n];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),n++}else if(e.isHemisphereLight){const t=s.hemi[c];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(u),c++}}}return{setup:l,setupView:h,state:s}}function $h(t,e){const i=new Uh(t,e),n=[],s=[];function r(){n.length=0,s.length=0}function o(t){n.push(t)}function a(t){s.push(t)}function l(t){i.setup(n,t)}function h(t){i.setupView(n,t)}const c={lightsArray:n,shadowsArray:s,lights:i};return{init:r,state:c,setupLights:l,setupLightsView:h,pushLight:o,pushShadow:a}}function Vh(t,e){let i=new WeakMap;function n(n,s=0){const r=i.get(n);let o;return void 0===r?(o=new $h(t,e),i.set(n,[o])):s>=r.length?(o=new $h(t,e),r.push(o)):o=r[s],o}function s(){i=new WeakMap}return{get:n,dispose:s}}class Hh extends En{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Gh extends En{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new pi,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Wh="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",jh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Yh(t,e,i){let n=new Ps;const s=new Ue,r=new Ue,o=new li,a=new Hh({depthPacking:ye}),l=new Gh,c={},g=i.maxTextureSize,v={0:p,1:d,2:f},_=new vs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:Wh,fragmentShader:jh}),y=_.clone();y.defines.HORIZONTAL_PASS=1;const b=new Vn;b.setAttribute("position",new Rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new as(b,_),S=this;function w(i,n){const r=e.update(x);_.defines.VSM_SAMPLES!==i.blurSamples&&(_.defines.VSM_SAMPLES=i.blurSamples,y.defines.VSM_SAMPLES=i.blurSamples,_.needsUpdate=!0,y.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new hi(s.x,s.y)),_.uniforms.shadow_pass.value=i.map.texture,_.uniforms.resolution.value=i.mapSize,_.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(n,null,r,_,x,null),y.uniforms.shadow_pass.value=i.mapPass.texture,y.uniforms.resolution.value=i.mapSize,y.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(n,null,r,y,x,null)}function C(e,i,n,s,r,o){let h=null;const d=!0===n.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(h=void 0!==d?d:!0===n.isPointLight?l:a,t.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const t=h.uuid,e=i.uuid;let n=c[t];void 0===n&&(n={},c[t]=n);let s=n[e];void 0===s&&(s=h.clone(),n[e]=s),h=s}return h.visible=i.visible,h.wireframe=i.wireframe,h.side=o===u?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:v[i.side],h.alphaMap=i.alphaMap,h.alphaTest=i.alphaTest,h.clipShadows=i.clipShadows,h.clippingPlanes=i.clippingPlanes,h.clipIntersection=i.clipIntersection,h.displacementMap=i.displacementMap,h.displacementScale=i.displacementScale,h.displacementBias=i.displacementBias,h.wireframeLinewidth=i.wireframeLinewidth,h.linewidth=i.linewidth,!0===n.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(n.matrixWorld),h.nearDistance=s,h.farDistance=r),h}function M(i,s,r,o,a){if(!1===i.visible)return;const l=i.layers.test(s.layers);if(l&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&a===u)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld);const n=e.update(i),s=i.material;if(Array.isArray(s)){const e=n.groups;for(let l=0,h=e.length;l<h;l++){const h=e[l],c=s[h.materialIndex];if(c&&c.visible){const e=C(i,c,o,r.near,r.far,a);t.renderBufferDirect(r,null,n,e,i,h)}}}else if(s.visible){const e=C(i,s,o,r.near,r.far,a);t.renderBufferDirect(r,null,n,e,i,null)}}const h=i.children;for(let t=0,e=h.length;t<e;t++)M(h[t],s,r,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(e,i,a){if(!1===S.enabled)return;if(!1===S.autoUpdate&&!1===S.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),h=t.getActiveCubeFace(),c=t.getActiveMipmapLevel(),d=t.state;d.setBlending(m),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=e.length;p<f;p++){const l=e[p],h=l.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;s.copy(h.mapSize);const c=h.getFrameExtents();if(s.multiply(c),r.copy(h.mapSize),(s.x>g||s.y>g)&&(s.x>g&&(r.x=Math.floor(g/c.x),s.x=r.x*c.x,h.mapSize.x=r.x),s.y>g&&(r.y=Math.floor(g/c.y),s.y=r.y*c.y,h.mapSize.y=r.y)),null===h.map){const t=this.type!==u?{minFilter:ht,magFilter:ht}:{};h.map=new hi(s.x,s.y,t),h.map.texture.name=l.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const f=h.getViewportCount();for(let t=0;t<f;t++){const e=h.getViewport(t);o.set(r.x*e.x,r.y*e.y,r.x*e.z,r.y*e.w),d.viewport(o),h.updateMatrices(l,t),n=h.getFrustum(),M(i,a,h.camera,l,this.type)}!0!==h.isPointLightShadow&&this.type===u&&w(h,a),h.needsUpdate=!1}S.needsUpdate=!1,t.setRenderTarget(l,h,c)}}function Xh(t,e,i){const n=i.isWebGL2;function s(){let e=!1;const i=new li;let n=null;const s=new li(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,r,o,a){!0===a&&(e*=o,n*=o,r*=o),i.set(e,n,r,o),!1===s.equals(i)&&(t.clearColor(e,n,r,o),s.copy(i))},reset:function(){e=!1,n=null,s.set(-1,0,0,0)}}}function r(){let e=!1,i=null,n=null,s=null;return{setTest:function(t){t?Ct(2929):Mt(2929)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){switch(e){case z:t.depthFunc(512);break;case q:t.depthFunc(519);break;case B:t.depthFunc(513);break;case F:t.depthFunc(515);break;case U:t.depthFunc(514);break;case $:t.depthFunc(518);break;case V:t.depthFunc(516);break;case H:t.depthFunc(517);break;default:t.depthFunc(515)}n=e}},setLocked:function(t){e=t},setClear:function(e){s!==e&&(t.clearDepth(e),s=e)},reset:function(){e=!1,i=null,n=null,s=null}}}function h(){let e=!1,i=null,n=null,s=null,r=null,o=null,a=null,l=null,h=null;return{setTest:function(t){e||(t?Ct(2960):Mt(2960))},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&s===i&&r===o||(t.stencilFunc(e,i,o),n=e,s=i,r=o)},setOp:function(e,i,n){o===e&&a===i&&l===n||(t.stencilOp(e,i,n),o=e,a=i,l=n)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,i=null,n=null,s=null,r=null,o=null,a=null,l=null,h=null}}}const c=new s,u=new r,d=new h,G=new WeakMap,W=new WeakMap;let j={},Y={},X=new WeakMap,Q=[],K=null,Z=!1,J=null,tt=null,et=null,it=null,nt=null,st=null,rt=null,ot=!1,at=null,lt=null,ht=null,ct=null,ut=null;const dt=t.getParameter(35661);let pt=!1,ft=0;const mt=t.getParameter(7938);-1!==mt.indexOf("WebGL")?(ft=parseFloat(/^WebGL (\d)/.exec(mt)[1]),pt=ft>=1):-1!==mt.indexOf("OpenGL ES")&&(ft=parseFloat(/^OpenGL ES (\d)/.exec(mt)[1]),pt=ft>=2);let gt=null,vt={};const _t=t.getParameter(3088),yt=t.getParameter(2978),bt=(new li).fromArray(_t),xt=(new li).fromArray(yt);function St(e,i,n){const s=new Uint8Array(4),r=t.createTexture();t.bindTexture(e,r),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let o=0;o<n;o++)t.texImage2D(i+o,0,6408,1,1,0,6408,5121,s);return r}const wt={};function Ct(e){!0!==j[e]&&(t.enable(e),j[e]=!0)}function Mt(e){!1!==j[e]&&(t.disable(e),j[e]=!1)}function Tt(e,i){return Y[e]!==i&&(t.bindFramebuffer(e,i),Y[e]=i,n&&(36009===e&&(Y[36160]=i),36160===e&&(Y[36009]=i)),!0)}function kt(n,s){let r=Q,o=!1;if(n)if(r=X.get(s),void 0===r&&(r=[],X.set(s,r)),n.isWebGLMultipleRenderTargets){const t=n.texture;if(r.length!==t.length||36064!==r[0]){for(let e=0,i=t.length;e<i;e++)r[e]=36064+e;r.length=t.length,o=!0}}else 36064!==r[0]&&(r[0]=36064,o=!0);else 1029!==r[0]&&(r[0]=1029,o=!0);o&&(i.isWebGL2?t.drawBuffers(r):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(r))}function Et(e){return K!==e&&(t.useProgram(e),K=e,!0)}wt[3553]=St(3553,3553,1),wt[34067]=St(34067,34069,6),c.setClear(0,0,0,1),u.setClear(1),d.setClear(0),Ct(2929),u.setFunc(F),Ot(!1),It(a),Ct(2884),Pt(m);const Lt={[x]:32774,[S]:32778,[w]:32779};if(n)Lt[C]=32775,Lt[M]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(Lt[C]=t.MIN_EXT,Lt[M]=t.MAX_EXT)}const At={[T]:0,[k]:1,[E]:768,[A]:770,[N]:776,[I]:774,[R]:772,[L]:769,[P]:771,[D]:775,[O]:773};function Pt(e,i,n,s,r,o,a,l){if(e!==m){if(!1===Z&&(Ct(3042),Z=!0),e===b)r=r||i,o=o||n,a=a||s,i===tt&&r===nt||(t.blendEquationSeparate(Lt[i],Lt[r]),tt=i,nt=r),n===et&&s===it&&o===st&&a===rt||(t.blendFuncSeparate(At[n],At[s],At[o],At[a]),et=n,it=s,st=o,rt=a),J=e,ot=null;else if(e!==J||l!==ot){if(tt===x&&nt===x||(t.blendEquation(32774),tt=x,nt=x),l)switch(e){case g:t.blendFuncSeparate(1,771,1,771);break;case v:t.blendFunc(1,1);break;case _:t.blendFuncSeparate(0,769,0,1);break;case y:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case g:t.blendFuncSeparate(770,771,1,771);break;case v:t.blendFunc(770,1);break;case _:t.blendFuncSeparate(0,769,0,1);break;case y:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}et=null,it=null,st=null,rt=null,J=e,ot=l}}else!0===Z&&(Mt(3042),Z=!1)}function Rt(t,e){t.side===f?Mt(2884):Ct(2884);let i=t.side===p;e&&(i=!i),Ot(i),t.blending===g&&!1===t.transparent?Pt(m):Pt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),u.setFunc(t.depthFunc),u.setTest(t.depthTest),u.setMask(t.depthWrite),c.setMask(t.colorWrite);const n=t.stencilWrite;d.setTest(n),n&&(d.setMask(t.stencilWriteMask),d.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),d.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Nt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Ct(32926):Mt(32926)}function Ot(e){at!==e&&(e?t.frontFace(2304):t.frontFace(2305),at=e)}function It(e){e!==o?(Ct(2884),e!==lt&&(e===a?t.cullFace(1029):e===l?t.cullFace(1028):t.cullFace(1032))):Mt(2884),lt=e}function Dt(e){e!==ht&&(pt&&t.lineWidth(e),ht=e)}function Nt(e,i,n){e?(Ct(32823),ct===i&&ut===n||(t.polygonOffset(i,n),ct=i,ut=n)):Mt(32823)}function zt(t){t?Ct(3089):Mt(3089)}function qt(e){void 0===e&&(e=33984+dt-1),gt!==e&&(t.activeTexture(e),gt=e)}function Bt(e,i,n){void 0===n&&(n=null===gt?33984+dt-1:gt);let s=vt[n];void 0===s&&(s={type:void 0,texture:void 0},vt[n]=s),s.type===e&&s.texture===i||(gt!==n&&(t.activeTexture(n),gt=n),t.bindTexture(e,i||wt[e]),s.type=e,s.texture=i)}function Ft(){const e=vt[gt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function Ut(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function $t(){try{t.compressedTexImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Vt(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Wt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function jt(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Yt(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Xt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Qt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Kt(e){!1===bt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),bt.copy(e))}function Zt(e){!1===xt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),xt.copy(e))}function Jt(e,i){let n=W.get(i);void 0===n&&(n=new WeakMap,W.set(i,n));let s=n.get(e);void 0===s&&(s=t.getUniformBlockIndex(i,e.name),n.set(e,s))}function te(e,i){const n=W.get(i),s=n.get(e);G.get(e)!==s&&(t.uniformBlockBinding(i,s,e.__bindingPointIndex),G.set(e,s))}function ee(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===n&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),j={},gt=null,vt={},Y={},X=new WeakMap,Q=[],K=null,Z=!1,J=null,tt=null,et=null,it=null,nt=null,st=null,rt=null,ot=!1,at=null,lt=null,ht=null,ct=null,ut=null,bt.set(0,0,t.canvas.width,t.canvas.height),xt.set(0,0,t.canvas.width,t.canvas.height),c.reset(),u.reset(),d.reset()}return{buffers:{color:c,depth:u,stencil:d},enable:Ct,disable:Mt,bindFramebuffer:Tt,drawBuffers:kt,useProgram:Et,setBlending:Pt,setMaterial:Rt,setFlipSided:Ot,setCullFace:It,setLineWidth:Dt,setPolygonOffset:Nt,setScissorTest:zt,activeTexture:qt,bindTexture:Bt,unbindTexture:Ft,compressedTexImage2D:Ut,compressedTexImage3D:$t,texImage2D:Xt,texImage3D:Qt,updateUBOMapping:Jt,uniformBlockBinding:te,texStorage2D:jt,texStorage3D:Yt,texSubImage2D:Vt,texSubImage3D:Ht,compressedTexSubImage2D:Gt,compressedTexSubImage3D:Wt,scissor:Kt,viewport:Zt,reset:ee}}function Qh(t,e,i,n,s,r,o){const a=s.isWebGL2,l=s.maxTextures,h=s.maxCubemapSize,c=s.maxTextureSize,u=s.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test("undefined"===typeof navigator?"":navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(st){}function _(t,e){return v?new OffscreenCanvas(t,e):He("canvas")}function y(t,e,i,n){let s=1;if((t.width>n||t.height>n)&&(s=n/Math.max(t.width,t.height)),s<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const n=e?qe:Math.floor,r=n(s*t.width),o=n(s*t.height);void 0===m&&(m=_(r,o));const a=i?_(r,o):m;a.width=r,a.height=o;const l=a.getContext("2d");return l.drawImage(t,0,0,r,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+r+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return ze(t.width)&&ze(t.height)}function x(t){return!a&&(t.wrapS!==at||t.wrapT!==at||t.minFilter!==ht&&t.minFilter!==dt)}function S(t,e){return t.generateMipmaps&&e&&t.minFilter!==ht&&t.minFilter!==dt}function w(e){t.generateMipmap(e)}function C(i,n,s,r,o=!1){if(!1===a)return n;if(null!==i){if(void 0!==t[i])return t[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let l=n;return 6403===n&&(5126===s&&(l=33326),5131===s&&(l=33325),5121===s&&(l=33321)),33319===n&&(5126===s&&(l=33328),5131===s&&(l=33327),5121===s&&(l=33323)),6408===n&&(5126===s&&(l=34836),5131===s&&(l=34842),5121===s&&(l=r===ve&&!1===o?35907:32856),32819===s&&(l=32854),32820===s&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function M(t,e,i){return!0===S(t,i)||t.isFramebufferTexture&&t.minFilter!==ht&&t.minFilter!==dt?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function T(t){return t===ht||t===ct||t===ut?9728:9729}function k(t){const e=t.target;e.removeEventListener("dispose",k),L(e),e.isVideoTexture&&f.delete(e)}function E(t){const e=t.target;e.removeEventListener("dispose",E),P(e)}function L(t){const e=n.get(t);if(void 0===e.__webglInit)return;const i=t.source,s=g.get(i);if(s){const n=s[e.__cacheKey];n.usedTimes--,0===n.usedTimes&&A(t),0===Object.keys(s).length&&g.delete(i)}n.remove(t)}function A(e){const i=n.get(e);t.deleteTexture(i.__webglTexture);const s=e.source,r=g.get(s);delete r[i.__cacheKey],o.memory.textures--}function P(e){const i=e.texture,s=n.get(e),r=n.get(i);if(void 0!==r.__webglTexture&&(t.deleteTexture(r.__webglTexture),o.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let n=0;n<6;n++)t.deleteFramebuffer(s.__webglFramebuffer[n]),s.__webglDepthbuffer&&t.deleteRenderbuffer(s.__webglDepthbuffer[n]);else{if(t.deleteFramebuffer(s.__webglFramebuffer),s.__webglDepthbuffer&&t.deleteRenderbuffer(s.__webglDepthbuffer),s.__webglMultisampledFramebuffer&&t.deleteFramebuffer(s.__webglMultisampledFramebuffer),s.__webglColorRenderbuffer)for(let e=0;e<s.__webglColorRenderbuffer.length;e++)s.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(s.__webglColorRenderbuffer[e]);s.__webglDepthRenderbuffer&&t.deleteRenderbuffer(s.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let a=0,l=i.length;a<l;a++){const e=n.get(i[a]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),o.memory.textures--),n.remove(i[a])}n.remove(i),n.remove(e)}let R=0;function O(){R=0}function I(){const t=R;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),R+=1,t}function D(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}function N(t,e){const s=n.get(t);if(t.isVideoTexture&&it(t),!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version){const i=t.image;if(null===i)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==i.complete)return void H(s,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(3553,s.__webglTexture,33984+e)}function z(t,e){const s=n.get(t);t.version>0&&s.__version!==t.version?H(s,t,e):i.bindTexture(35866,s.__webglTexture,33984+e)}function q(t,e){const s=n.get(t);t.version>0&&s.__version!==t.version?H(s,t,e):i.bindTexture(32879,s.__webglTexture,33984+e)}function B(t,e){const s=n.get(t);t.version>0&&s.__version!==t.version?G(s,t,e):i.bindTexture(34067,s.__webglTexture,33984+e)}const F={[ot]:10497,[at]:33071,[lt]:33648},U={[ht]:9728,[ct]:9984,[ut]:9986,[dt]:9729,[pt]:9985,[ft]:9987};function $(i,r,o){if(o?(t.texParameteri(i,10242,F[r.wrapS]),t.texParameteri(i,10243,F[r.wrapT]),32879!==i&&35866!==i||t.texParameteri(i,32882,F[r.wrapR]),t.texParameteri(i,10240,U[r.magFilter]),t.texParameteri(i,10241,U[r.minFilter])):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),r.wrapS===at&&r.wrapT===at||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,T(r.magFilter)),t.texParameteri(i,10241,T(r.minFilter)),r.minFilter!==ht&&r.minFilter!==dt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(r.type===xt&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&r.type===St&&!1===e.has("OES_texture_half_float_linear"))return;(r.anisotropy>1||n.get(r).__currentAnisotropy)&&(t.texParameterf(i,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,s.getMaxAnisotropy())),n.get(r).__currentAnisotropy=r.anisotropy)}}function V(e,i){let n=!1;void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",k));const s=i.source;let r=g.get(s);void 0===r&&(r={},g.set(s,r));const a=D(i);if(a!==e.__cacheKey){void 0===r[a]&&(r[a]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,n=!0),r[a].usedTimes++;const s=r[e.__cacheKey];void 0!==s&&(r[e.__cacheKey].usedTimes--,0===s.usedTimes&&A(i)),e.__cacheKey=a,e.__webglTexture=r[a].texture}return n}function H(e,s,o){let l=3553;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=35866),s.isData3DTexture&&(l=32879);const h=V(e,s),u=s.source;i.bindTexture(l,e.__webglTexture,33984+o);const d=n.get(u);if(u.version!==d.__version||!0===h){i.activeTexture(33984+o),t.pixelStorei(37440,s.flipY),t.pixelStorei(37441,s.premultiplyAlpha),t.pixelStorei(3317,s.unpackAlignment),t.pixelStorei(37443,0);const e=x(s)&&!1===b(s.image);let n=y(s.image,e,!1,c);n=nt(s,n);const p=b(n)||a,f=r.convert(s.format,s.encoding);let m,g=r.convert(s.type),v=C(s.internalFormat,f,g,s.encoding,s.isVideoTexture);$(l,s,p);const _=s.mipmaps,T=a&&!0!==s.isVideoTexture,k=void 0===d.__version||!0===h,E=M(s,n,p);if(s.isDepthTexture)v=6402,a?v=s.type===xt?36012:s.type===bt?33190:s.type===Mt?35056:33189:s.type===xt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===Pt&&6402===v&&s.type!==_t&&s.type!==bt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=bt,g=r.convert(s.type)),s.format===Rt&&6402===v&&(v=34041,s.type!==Mt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=Mt,g=r.convert(s.type))),k&&(T?i.texStorage2D(3553,1,v,n.width,n.height):i.texImage2D(3553,0,v,n.width,n.height,0,f,g,null));else if(s.isDataTexture)if(_.length>0&&p){T&&k&&i.texStorage2D(3553,E,v,_[0].width,_[0].height);for(let t=0,e=_.length;t<e;t++)m=_[t],T?i.texSubImage2D(3553,t,0,0,m.width,m.height,f,g,m.data):i.texImage2D(3553,t,v,m.width,m.height,0,f,g,m.data);s.generateMipmaps=!1}else T?(k&&i.texStorage2D(3553,E,v,n.width,n.height),i.texSubImage2D(3553,0,0,0,n.width,n.height,f,g,n.data)):i.texImage2D(3553,0,v,n.width,n.height,0,f,g,n.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){T&&k&&i.texStorage3D(35866,E,v,_[0].width,_[0].height,n.depth);for(let t=0,e=_.length;t<e;t++)m=_[t],s.format!==Et?null!==f?T?i.compressedTexSubImage3D(35866,t,0,0,0,m.width,m.height,n.depth,f,m.data,0,0):i.compressedTexImage3D(35866,t,v,m.width,m.height,n.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?i.texSubImage3D(35866,t,0,0,0,m.width,m.height,n.depth,f,g,m.data):i.texImage3D(35866,t,v,m.width,m.height,n.depth,0,f,g,m.data)}else{T&&k&&i.texStorage2D(3553,E,v,_[0].width,_[0].height);for(let t=0,e=_.length;t<e;t++)m=_[t],s.format!==Et?null!==f?T?i.compressedTexSubImage2D(3553,t,0,0,m.width,m.height,f,m.data):i.compressedTexImage2D(3553,t,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?i.texSubImage2D(3553,t,0,0,m.width,m.height,f,g,m.data):i.texImage2D(3553,t,v,m.width,m.height,0,f,g,m.data)}else if(s.isDataArrayTexture)T?(k&&i.texStorage3D(35866,E,v,n.width,n.height,n.depth),i.texSubImage3D(35866,0,0,0,0,n.width,n.height,n.depth,f,g,n.data)):i.texImage3D(35866,0,v,n.width,n.height,n.depth,0,f,g,n.data);else if(s.isData3DTexture)T?(k&&i.texStorage3D(32879,E,v,n.width,n.height,n.depth),i.texSubImage3D(32879,0,0,0,0,n.width,n.height,n.depth,f,g,n.data)):i.texImage3D(32879,0,v,n.width,n.height,n.depth,0,f,g,n.data);else if(s.isFramebufferTexture){if(k)if(T)i.texStorage2D(3553,E,v,n.width,n.height);else{let t=n.width,e=n.height;for(let n=0;n<E;n++)i.texImage2D(3553,n,v,t,e,0,f,g,null),t>>=1,e>>=1}}else if(_.length>0&&p){T&&k&&i.texStorage2D(3553,E,v,_[0].width,_[0].height);for(let t=0,e=_.length;t<e;t++)m=_[t],T?i.texSubImage2D(3553,t,0,0,f,g,m):i.texImage2D(3553,t,v,f,g,m);s.generateMipmaps=!1}else T?(k&&i.texStorage2D(3553,E,v,n.width,n.height),i.texSubImage2D(3553,0,0,0,f,g,n)):i.texImage2D(3553,0,v,f,g,n);S(s,p)&&w(l),d.__version=u.version,s.onUpdate&&s.onUpdate(s)}e.__version=s.version}function G(e,s,o){if(6!==s.image.length)return;const l=V(e,s),c=s.source;i.bindTexture(34067,e.__webglTexture,33984+o);const u=n.get(c);if(c.version!==u.__version||!0===l){i.activeTexture(33984+o),t.pixelStorei(37440,s.flipY),t.pixelStorei(37441,s.premultiplyAlpha),t.pixelStorei(3317,s.unpackAlignment),t.pixelStorei(37443,0);const e=s.isCompressedTexture||s.image[0].isCompressedTexture,n=s.image[0]&&s.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||n?n?s.image[t].image:s.image[t]:y(s.image[t],!1,!0,h),d[t]=nt(s,d[t]);const p=d[0],f=b(p)||a,m=r.convert(s.format,s.encoding),g=r.convert(s.type),v=C(s.internalFormat,m,g,s.encoding),_=a&&!0!==s.isVideoTexture,x=void 0===u.__version||!0===l;let T,k=M(s,p,f);if($(34067,s,f),e){_&&x&&i.texStorage2D(34067,k,v,p.width,p.height);for(let t=0;t<6;t++){T=d[t].mipmaps;for(let e=0;e<T.length;e++){const n=T[e];s.format!==Et?null!==m?_?i.compressedTexSubImage2D(34069+t,e,0,0,n.width,n.height,m,n.data):i.compressedTexImage2D(34069+t,e,v,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_?i.texSubImage2D(34069+t,e,0,0,n.width,n.height,m,g,n.data):i.texImage2D(34069+t,e,v,n.width,n.height,0,m,g,n.data)}}}else{T=s.mipmaps,_&&x&&(T.length>0&&k++,i.texStorage2D(34067,k,v,d[0].width,d[0].height));for(let t=0;t<6;t++)if(n){_?i.texSubImage2D(34069+t,0,0,0,d[t].width,d[t].height,m,g,d[t].data):i.texImage2D(34069+t,0,v,d[t].width,d[t].height,0,m,g,d[t].data);for(let e=0;e<T.length;e++){const n=T[e],s=n.image[t].image;_?i.texSubImage2D(34069+t,e+1,0,0,s.width,s.height,m,g,s.data):i.texImage2D(34069+t,e+1,v,s.width,s.height,0,m,g,s.data)}}else{_?i.texSubImage2D(34069+t,0,0,0,m,g,d[t]):i.texImage2D(34069+t,0,v,m,g,d[t]);for(let e=0;e<T.length;e++){const n=T[e];_?i.texSubImage2D(34069+t,e+1,0,0,m,g,n.image[t]):i.texImage2D(34069+t,e+1,v,m,g,n.image[t])}}}S(s,f)&&w(34067),u.__version=c.version,s.onUpdate&&s.onUpdate(s)}e.__version=s.version}function W(e,s,o,a,l){const h=r.convert(o.format,o.encoding),c=r.convert(o.type),u=C(o.internalFormat,h,c,o.encoding),p=n.get(s);p.__hasExternalTextures||(32879===l||35866===l?i.texImage3D(l,0,u,s.width,s.height,s.depth,0,h,c,null):i.texImage2D(l,0,u,s.width,s.height,0,h,c,null)),i.bindFramebuffer(36160,e),et(s)?d.framebufferTexture2DMultisampleEXT(36160,a,l,n.get(o).__webglTexture,0,tt(s)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,a,l,n.get(o).__webglTexture,0),i.bindFramebuffer(36160,null)}function j(e,i,n){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer){let s=33189;if(n||et(i)){const e=i.depthTexture;e&&e.isDepthTexture&&(e.type===xt?s=36012:e.type===bt&&(s=33190));const n=tt(i);et(i)?d.renderbufferStorageMultisampleEXT(36161,n,s,i.width,i.height):t.renderbufferStorageMultisample(36161,n,s,i.width,i.height)}else t.renderbufferStorage(36161,s,i.width,i.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(i.depthBuffer&&i.stencilBuffer){const s=tt(i);n&&!1===et(i)?t.renderbufferStorageMultisample(36161,s,35056,i.width,i.height):et(i)?d.renderbufferStorageMultisampleEXT(36161,s,35056,i.width,i.height):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let s=0;s<e.length;s++){const o=e[s],a=r.convert(o.format,o.encoding),l=r.convert(o.type),h=C(o.internalFormat,a,l,o.encoding),c=tt(i);n&&!1===et(i)?t.renderbufferStorageMultisample(36161,c,h,i.width,i.height):et(i)?d.renderbufferStorageMultisampleEXT(36161,c,h,i.width,i.height):t.renderbufferStorage(36161,h,i.width,i.height)}}t.bindRenderbuffer(36161,null)}function Y(e,s){const r=s&&s.isWebGLCubeRenderTarget;if(r)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,e),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(s.depthTexture).__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),N(s.depthTexture,0);const o=n.get(s.depthTexture).__webglTexture,a=tt(s);if(s.depthTexture.format===Pt)et(s)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(s.depthTexture.format!==Rt)throw new Error("Unknown depthTexture format");et(s)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):t.framebufferTexture2D(36160,33306,3553,o,0)}}function X(e){const s=n.get(e),r=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!s.__autoAllocateDepthBuffer){if(r)throw new Error("target.depthTexture not supported in Cube render targets");Y(s.__webglFramebuffer,e)}else if(r){s.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(36160,s.__webglFramebuffer[n]),s.__webglDepthbuffer[n]=t.createRenderbuffer(),j(s.__webglDepthbuffer[n],e,!1)}else i.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=t.createRenderbuffer(),j(s.__webglDepthbuffer,e,!1);i.bindFramebuffer(36160,null)}function Q(t,e,i){const s=n.get(t);void 0!==e&&W(s.__webglFramebuffer,t,t.texture,36064,3553),void 0!==i&&X(t)}function K(e){const l=e.texture,h=n.get(e),c=n.get(l);e.addEventListener("dispose",E),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,o.memory.textures++);const u=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=b(e)||a;if(u){h.__webglFramebuffer=[];for(let e=0;e<6;e++)h.__webglFramebuffer[e]=t.createFramebuffer()}else{if(h.__webglFramebuffer=t.createFramebuffer(),d)if(s.drawBuffers){const i=e.texture;for(let e=0,s=i.length;e<s;e++){const s=n.get(i[e]);void 0===s.__webglTexture&&(s.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&e.samples>0&&!1===et(e)){const n=d?l:[l];h.__webglMultisampledFramebuffer=t.createFramebuffer(),h.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,h.__webglMultisampledFramebuffer);for(let i=0;i<n.length;i++){const s=n[i];h.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(36161,h.__webglColorRenderbuffer[i]);const o=r.convert(s.format,s.encoding),a=r.convert(s.type),l=C(s.internalFormat,o,a,s.encoding,!0===e.isXRRenderTarget),c=tt(e);t.renderbufferStorageMultisample(36161,c,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+i,36161,h.__webglColorRenderbuffer[i])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(h.__webglDepthRenderbuffer=t.createRenderbuffer(),j(h.__webglDepthRenderbuffer,e,!0)),i.bindFramebuffer(36160,null)}}if(u){i.bindTexture(34067,c.__webglTexture),$(34067,l,p);for(let t=0;t<6;t++)W(h.__webglFramebuffer[t],e,l,36064,34069+t);S(l,p)&&w(34067),i.unbindTexture()}else if(d){const t=e.texture;for(let s=0,r=t.length;s<r;s++){const r=t[s],o=n.get(r);i.bindTexture(3553,o.__webglTexture),$(3553,r,p),W(h.__webglFramebuffer,e,r,36064+s,3553),S(r,p)&&w(3553)}i.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(a?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(t,c.__webglTexture),$(t,l,p),W(h.__webglFramebuffer,e,l,36064,t),S(l,p)&&w(t),i.unbindTexture()}e.depthBuffer&&X(e)}function Z(t){const e=b(t)||a,s=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let r=0,o=s.length;r<o;r++){const o=s[r];if(S(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,s=n.get(o).__webglTexture;i.bindTexture(e,s),w(e),i.unbindTexture()}}}function J(e){if(a&&e.samples>0&&!1===et(e)){const s=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],r=e.width,o=e.height;let a=16384;const l=[],h=e.stencilBuffer?33306:36096,c=n.get(e),u=!0===e.isWebGLMultipleRenderTargets;if(u)for(let e=0;e<s.length;e++)i.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),i.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);i.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,c.__webglFramebuffer);for(let i=0;i<s.length;i++){l.push(36064+i),e.depthBuffer&&l.push(h);const d=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024)),u&&t.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[i]),!0===d&&(t.invalidateFramebuffer(36008,[h]),t.invalidateFramebuffer(36009,[h])),u){const e=n.get(s[i]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),p&&t.invalidateFramebuffer(36008,l)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),u)for(let e=0;e<s.length;e++){i.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,c.__webglColorRenderbuffer[e]);const r=n.get(s[e]).__webglTexture;i.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,r,0)}i.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}}function tt(t){return Math.min(u,t.samples)}function et(t){const i=n.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function it(t){const e=o.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}function nt(t,i){const n=t.encoding,s=t.format,r=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Ee||n!==ge&&(n===ve?!1===a?!0===e.has("EXT_sRGB")&&s===Et?(t.format=Ee,t.minFilter=dt,t.generateMipmaps=!1):i=ni.sRGBToLinear(i):s===Et&&r===mt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),i}this.allocateTextureUnit=I,this.resetTextureUnits=O,this.setTexture2D=N,this.setTexture2DArray=z,this.setTexture3D=q,this.setTextureCube=B,this.rebindTextures=Q,this.setupRenderTarget=K,this.updateRenderTargetMipmap=Z,this.updateMultisampleRenderTarget=J,this.setupDepthRenderbuffer=X,this.setupFrameBufferTexture=W,this.useMultisampledRTT=et}function Kh(t,e,i){const n=i.isWebGL2;function s(i,s=null){let r;if(i===mt)return 5121;if(i===wt)return 32819;if(i===Ct)return 32820;if(i===gt)return 5120;if(i===vt)return 5122;if(i===_t)return 5123;if(i===yt)return 5124;if(i===bt)return 5125;if(i===xt)return 5126;if(i===St)return n?5131:(r=e.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(i===Tt)return 6406;if(i===Et)return 6408;if(i===Lt)return 6409;if(i===At)return 6410;if(i===Pt)return 6402;if(i===Rt)return 34041;if(i===Ot)return 6403;if(i===kt)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(i===Ee)return r=e.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(i===It)return 36244;if(i===Dt)return 33319;if(i===Nt)return 33320;if(i===zt)return 36249;if(i===qt||i===Bt||i===Ft||i===Ut)if(s===ve){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(i===qt)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Bt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ft)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Ut)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(i===qt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Bt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ft)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Ut)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===$t||i===Vt||i===Ht||i===Gt){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(i===$t)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Vt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ht)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Gt)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Wt)return r=e.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===jt||i===Yt){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(i===jt)return s===ve?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===Yt)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(i===Xt||i===Qt||i===Kt||i===Zt||i===Jt||i===te||i===ee||i===ie||i===ne||i===se||i===re||i===oe||i===ae||i===le){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(i===Xt)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Qt)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Kt)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Zt)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Jt)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===te)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ee)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ie)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ne)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===se)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===re)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===oe)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ae)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===le)return s===ve?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===he){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(i===he)return s===ve?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}return i===Mt?n?34042:(r=e.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[i]?t[i]:null}return{convert:s}}class Zh extends ys{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Jh extends mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const tc={type:"move"};class ec{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Jh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Jh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pi),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Jh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pi),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let n=null,s=null,r=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){r=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,i);if(void 0===l.joints[r.jointName]){const t=new Jh;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[r.jointName]=t,l.add(t)}const n=l.joints[r.jointName];null!==t&&(n.matrix.fromArray(t.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.jointRadius=t.radius),n.visible=null!==t}const n=l.joints["index-finger-tip"],s=l.joints["thumb-tip"],o=n.position.distanceTo(s.position),a=.02,h=.005;l.inputState.pinching&&o>a+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=a-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),null!==s&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(n=e.getPose(t.targetRaySpace,i),null===n&&null!==s&&(n=s),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(tc)))}return null!==o&&(o.visible=null!==n),null!==a&&(a.visible=null!==s),null!==l&&(l.visible=null!==r),this}}class ic extends ai{constructor(t,e,i,n,s,r,o,a,l,h){if(h=void 0!==h?h:Pt,h!==Pt&&h!==Rt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&h===Pt&&(i=bt),void 0===i&&h===Rt&&(i=Mt),super(null,n,s,r,o,a,h,i,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==o?o:ht,this.minFilter=void 0!==a?a:ht,this.flipY=!1,this.generateMipmaps=!1}}class nc extends Le{constructor(t,e){super();const i=this;let n=null,s=1,r=null,o="local-floor",a=null,l=null,h=null,c=null,u=null,d=null;const p=e.getContextAttributes();let f=null,m=null;const g=[],v=[],_=new ys;_.layers.enable(1),_.viewport=new li;const y=new ys;y.layers.enable(2),y.viewport=new li;const b=[_,y],x=new Zh;x.layers.enable(1),x.layers.enable(2);let S=null,w=null;function C(t){const e=v.indexOf(t.inputSource);if(-1===e)return;const i=g[e];void 0!==i&&i.dispatchEvent({type:t.type,data:t.inputSource})}function M(){n.removeEventListener("select",C),n.removeEventListener("selectstart",C),n.removeEventListener("selectend",C),n.removeEventListener("squeeze",C),n.removeEventListener("squeezestart",C),n.removeEventListener("squeezeend",C),n.removeEventListener("end",M),n.removeEventListener("inputsourceschange",T);for(let t=0;t<g.length;t++){const e=v[t];null!==e&&(v[t]=null,g[t].disconnect(e))}S=null,w=null,t.setRenderTarget(f),u=null,c=null,h=null,n=null,m=null,O.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function T(t){for(let e=0;e<t.removed.length;e++){const i=t.removed[e],n=v.indexOf(i);n>=0&&(v[n]=null,g[n].dispatchEvent({type:"disconnected",data:i}))}for(let e=0;e<t.added.length;e++){const i=t.added[e];let n=v.indexOf(i);if(-1===n){for(let t=0;t<g.length;t++){if(t>=v.length){v.push(i),n=t;break}if(null===v[t]){v[t]=i,n=t;break}}if(-1===n)break}const s=g[n];s&&s.dispatchEvent({type:"connected",data:i})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new ec,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new ec,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new ec,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){s=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){o=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||r},this.setReferenceSpace=function(t){a=t},this.getBaseLayer=function(){return null!==c?c:u},this.getBinding=function(){return h},this.getFrame=function(){return d},this.getSession=function(){return n},this.setSession=async function(l){if(n=l,null!==n){if(f=t.getRenderTarget(),n.addEventListener("select",C),n.addEventListener("selectstart",C),n.addEventListener("selectend",C),n.addEventListener("squeeze",C),n.addEventListener("squeezestart",C),n.addEventListener("squeezeend",C),n.addEventListener("end",M),n.addEventListener("inputsourceschange",T),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===n.renderState.layers||!1===t.capabilities.isWebGL2){const i={antialias:void 0!==n.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};u=new XRWebGLLayer(n,e,i),n.updateRenderState({baseLayer:u}),m=new hi(u.framebufferWidth,u.framebufferHeight,{format:Et,type:mt,encoding:t.outputEncoding,stencilBuffer:p.stencil})}else{let i=null,r=null,o=null;p.depth&&(o=p.stencil?35056:33190,i=p.stencil?Rt:Pt,r=p.stencil?Mt:bt);const a={colorFormat:32856,depthFormat:o,scaleFactor:s};h=new XRWebGLBinding(n,e),c=h.createProjectionLayer(a),n.updateRenderState({layers:[c]}),m=new hi(c.textureWidth,c.textureHeight,{format:Et,type:mt,depthTexture:new ic(c.textureWidth,c.textureHeight,r,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});const l=t.properties.get(m);l.__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),a=null,r=await n.requestReferenceSpace(o),O.setContext(n),O.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};const k=new pi,E=new pi;function L(t,e,i){k.setFromMatrixPosition(e.matrixWorld),E.setFromMatrixPosition(i.matrixWorld);const n=k.distanceTo(E),s=e.projectionMatrix.elements,r=i.projectionMatrix.elements,o=s[14]/(s[10]-1),a=s[14]/(s[10]+1),l=(s[9]+1)/s[5],h=(s[9]-1)/s[5],c=(s[8]-1)/s[0],u=(r[8]+1)/r[0],d=o*c,p=o*u,f=n/(-c+u),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+f,v=a+f,_=d-m,y=p+(n-m),b=l*a/v*g,x=h*a/v*g;t.projectionMatrix.makePerspective(_,y,b,x,g,v)}function A(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===n)return;x.near=y.near=_.near=t.near,x.far=y.far=_.far=t.far,S===x.near&&w===x.far||(n.updateRenderState({depthNear:x.near,depthFar:x.far}),S=x.near,w=x.far);const e=t.parent,i=x.cameras;A(x,e);for(let n=0;n<i.length;n++)A(i[n],e);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),t.matrix.copy(x.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const s=t.children;for(let n=0,r=s.length;n<r;n++)s[n].updateMatrixWorld(!0);2===i.length?L(x,_,y):x.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let P=null;function R(e,i){if(l=i.getViewerPose(a||r),d=i,null!==l){const e=l.views;null!==u&&(t.setRenderTargetFramebuffer(m,u.framebuffer),t.setRenderTarget(m));let i=!1;e.length!==x.cameras.length&&(x.cameras.length=0,i=!0);for(let n=0;n<e.length;n++){const s=e[n];let r=null;if(null!==u)r=u.getViewport(s);else{const e=h.getViewSubImage(c,s);r=e.viewport,0===n&&(t.setRenderTargetTextures(m,e.colorTexture,c.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let o=b[n];void 0===o&&(o=new ys,o.layers.enable(n),o.viewport=new li,b[n]=o),o.matrix.fromArray(s.transform.matrix),o.projectionMatrix.fromArray(s.projectionMatrix),o.viewport.set(r.x,r.y,r.width,r.height),0===n&&x.matrix.copy(o.matrix),!0===i&&x.cameras.push(o)}}for(let t=0;t<g.length;t++){const e=v[t],n=g[t];null!==e&&void 0!==n&&n.update(e,i,a||r)}P&&P(e,i),d=null}const O=new Rs;O.setAnimationLoop(R),this.setAnimationLoop=function(t){P=t},this.dispose=function(){}}}function sc(t,e){function i(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function n(t,e,i,n,p){e.isMeshBasicMaterial||e.isMeshLambertMaterial?s(t,e):e.isMeshToonMaterial?(s(t,e),c(t,e)):e.isMeshPhongMaterial?(s(t,e),h(t,e)):e.isMeshStandardMaterial?(s(t,e),u(t,e),e.isMeshPhysicalMaterial&&d(t,e,p)):e.isMeshMatcapMaterial?(s(t,e),f(t,e)):e.isMeshDepthMaterial?s(t,e):e.isMeshDistanceMaterial?(s(t,e),m(t,e)):e.isMeshNormalMaterial?s(t,e):e.isLineBasicMaterial?(r(t,e),e.isLineDashedMaterial&&o(t,e)):e.isPointsMaterial?a(t,e,i,n):e.isSpriteMaterial?l(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function s(i,n){i.opacity.value=n.opacity,n.color&&i.diffuse.value.copy(n.color),n.emissive&&i.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(i.map.value=n.map),n.alphaMap&&(i.alphaMap.value=n.alphaMap),n.bumpMap&&(i.bumpMap.value=n.bumpMap,i.bumpScale.value=n.bumpScale,n.side===p&&(i.bumpScale.value*=-1)),n.displacementMap&&(i.displacementMap.value=n.displacementMap,i.displacementScale.value=n.displacementScale,i.displacementBias.value=n.displacementBias),n.emissiveMap&&(i.emissiveMap.value=n.emissiveMap),n.normalMap&&(i.normalMap.value=n.normalMap,i.normalScale.value.copy(n.normalScale),n.side===p&&i.normalScale.value.negate()),n.specularMap&&(i.specularMap.value=n.specularMap),n.alphaTest>0&&(i.alphaTest.value=n.alphaTest);const s=e.get(n).envMap;if(s&&(i.envMap.value=s,i.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,i.reflectivity.value=n.reflectivity,i.ior.value=n.ior,i.refractionRatio.value=n.refractionRatio),n.lightMap){i.lightMap.value=n.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;i.lightMapIntensity.value=n.lightMapIntensity*e}let r,o;n.aoMap&&(i.aoMap.value=n.aoMap,i.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.iridescenceMap?r=n.iridescenceMap:n.iridescenceThicknessMap?r=n.iridescenceThicknessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),i.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),i.uv2Transform.value.copy(o.matrix))}function r(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function o(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function a(t,e,i,n){let s;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*n,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?s=e.map:e.alphaMap&&(s=e.alphaMap),void 0!==s&&(!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uvTransform.value.copy(s.matrix))}function l(t,e){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function h(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function c(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function u(t,i){t.roughness.value=i.roughness,t.metalness.value=i.metalness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap);const n=e.get(i).envMap;n&&(t.envMapIntensity.value=i.envMapIntensity)}function d(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===p&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap)),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}function f(t,e){e.matcap&&(t.matcap.value=e.matcap)}function m(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:n}}function rc(t,e,i,n){let s={},r={},o=[];const a=i.isWebGL2?t.getParameter(35375):0;function l(t,e){const i=e.program;n.uniformBlockBinding(t,i)}function h(t,i){let o=s[t.id];void 0===o&&(f(t),o=c(t),s[t.id]=o,t.addEventListener("dispose",g));const a=i.program;n.updateUBOMapping(t,a);const l=e.render.frame;r[t.id]!==l&&(d(t),r[t.id]=l)}function c(e){const i=u();e.__bindingPointIndex=i;const n=t.createBuffer(),s=e.__size,r=e.usage;return t.bindBuffer(35345,n),t.bufferData(35345,s,r),t.bindBuffer(35345,null),t.bindBufferBase(35345,i,n),n}function u(){for(let t=0;t<a;t++)if(-1===o.indexOf(t))return o.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(e){const i=s[e.id],n=e.uniforms,r=e.__cache;t.bindBuffer(35345,i);for(let s=0,o=n.length;s<o;s++){const e=n[s];if(!0===p(e,s,r)){const i=e.value,n=e.__offset;"number"===typeof i?(e.__data[0]=i,t.bufferSubData(35345,n,e.__data)):(e.value.isMatrix3?(e.__data[0]=e.value.elements[0],e.__data[1]=e.value.elements[1],e.__data[2]=e.value.elements[2],e.__data[3]=e.value.elements[0],e.__data[4]=e.value.elements[3],e.__data[5]=e.value.elements[4],e.__data[6]=e.value.elements[5],e.__data[7]=e.value.elements[0],e.__data[8]=e.value.elements[6],e.__data[9]=e.value.elements[7],e.__data[10]=e.value.elements[8],e.__data[11]=e.value.elements[0]):i.toArray(e.__data),t.bufferSubData(35345,n,e.__data))}}t.bindBuffer(35345,null)}function p(t,e,i){const n=t.value;if(void 0===i[e])return i[e]="number"===typeof n?n:n.clone(),!0;if("number"===typeof n){if(i[e]!==n)return i[e]=n,!0}else{const t=i[e];if(!1===t.equals(n))return t.copy(n),!0}return!1}function f(t){const e=t.uniforms;let i=0;const n=16;let s=0;for(let r=0,o=e.length;r<o;r++){const t=e[r],o=m(t);if(t.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=i,r>0){s=i%n;const e=n-s;0!==s&&e-o.boundary<0&&(i+=n-s,t.__offset=i)}i+=o.storage}return s=i%n,s>0&&(i+=n-s),t.__size=i,t.__cache={},this}function m(t){const e=t.value,i={boundary:0,storage:0};return"number"===typeof e?(i.boundary=4,i.storage=4):e.isVector2?(i.boundary=8,i.storage=8):e.isVector3||e.isColor?(i.boundary=16,i.storage=12):e.isVector4?(i.boundary=16,i.storage=16):e.isMatrix3?(i.boundary=48,i.storage=48):e.isMatrix4?(i.boundary=64,i.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),i}function g(e){const i=e.target;i.removeEventListener("dispose",g);const n=o.indexOf(i.__bindingPointIndex);o.splice(n,1),t.deleteBuffer(s[i.id]),delete s[i.id],delete r[i.id]}function v(){for(const e in s)t.deleteBuffer(s[e]);o=[],s={},r={}}return{bind:l,update:h,dispose:v}}function oc(){const t=He("canvas");return t.style.display="block",t}function ac(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:oc(),i=void 0!==t.context?t.context:null,s=void 0===t.depth||t.depth,r=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let u;u=null!==i?i.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let m=null,g=null;const v=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ge,this.physicallyCorrectLights=!1,this.toneMapping=Y,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const y=this;let b=!1,x=0,S=0,w=null,C=-1,M=null;const T=new li,k=new li;let E=null,L=e.width,A=e.height,P=1,R=null,O=null;const I=new li(0,0,L,A),D=new li(0,0,L,A);let N=!1;const z=new Ps;let q=!1,B=!1,F=null;const U=new Vi,$=new Ue,V=new pi,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===w?P:1}let W,j,X,Q,K,Z,J,tt,et,it,nt,st,rt,ot,at,lt,ht,ct,ut,dt,pt,gt,vt,_t,yt=i;function bt(t,i){for(let n=0;n<t.length;n++){const s=t[n],r=e.getContext(s,i);if(null!==r)return r}return null}try{const t={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:h,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r"+n),e.addEventListener("webglcontextlost",Mt,!1),e.addEventListener("webglcontextrestored",Tt,!1),e.addEventListener("webglcontextcreationerror",kt,!1),null===yt){const e=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&e.shift(),yt=bt(e,t),null===yt)throw bt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===yt.getShaderPrecisionFormat&&(yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(jt){throw console.error("THREE.WebGLRenderer: "+jt.message),jt}function wt(){W=new $a(yt),j=new ba(yt,W,t),W.init(j),gt=new Kh(yt,W,j),X=new Xh(yt,W,j),Q=new Ga,K=new Rh,Z=new Qh(yt,W,X,K,j,gt,Q),J=new Sa(y),tt=new Ua(y),et=new Os(yt,j),vt=new _a(yt,W,et,j),it=new Va(yt,et,Q,vt),nt=new Xa(yt,it,et,Q),ut=new Ya(yt,j,Z),lt=new xa(K),st=new Ph(y,J,tt,W,j,vt,lt),rt=new sc(y,K),ot=new Nh,at=new Vh(W,j),ct=new va(y,J,tt,X,nt,u,a),ht=new Yh(y,nt,j),_t=new rc(yt,Q,j,X),dt=new ya(yt,W,Q,j),pt=new Ha(yt,W,Q,j),Q.programs=st.programs,y.capabilities=j,y.extensions=W,y.properties=K,y.renderLists=ot,y.shadowMap=ht,y.state=X,y.info=Q}wt();const Ct=new nc(y,yt);function Mt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Tt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=Q.autoReset,e=ht.enabled,i=ht.autoUpdate,n=ht.needsUpdate,s=ht.type;wt(),Q.autoReset=t,ht.enabled=e,ht.autoUpdate=i,ht.needsUpdate=n,ht.type=s}function kt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Lt(t){const e=t.target;e.removeEventListener("dispose",Lt),At(e)}function At(t){Pt(t),K.remove(t)}function Pt(t){const e=K.get(t).programs;void 0!==e&&(e.forEach((function(t){st.releaseProgram(t)})),t.isShaderMaterial&&st.releaseShaderCache(t))}this.xr=Ct,this.getContext=function(){return yt},this.getContextAttributes=function(){return yt.getContextAttributes()},this.forceContextLoss=function(){const t=W.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=W.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(t){void 0!==t&&(P=t,this.setSize(L,A,!1))},this.getSize=function(t){return t.set(L,A)},this.setSize=function(t,i,n){Ct.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=t,A=i,e.width=Math.floor(t*P),e.height=Math.floor(i*P),!1!==n&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(t){return t.set(L*P,A*P).floor()},this.setDrawingBufferSize=function(t,i,n){L=t,A=i,P=n,e.width=Math.floor(t*n),e.height=Math.floor(i*n),this.setViewport(0,0,t,i)},this.getCurrentViewport=function(t){return t.copy(T)},this.getViewport=function(t){return t.copy(I)},this.setViewport=function(t,e,i,n){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,i,n),X.viewport(T.copy(I).multiplyScalar(P).floor())},this.getScissor=function(t){return t.copy(D)},this.setScissor=function(t,e,i,n){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,i,n),X.scissor(k.copy(D).multiplyScalar(P).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(t){X.setScissorTest(N=t)},this.setOpaqueSort=function(t){R=t},this.setTransparentSort=function(t){O=t},this.getClearColor=function(t){return t.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(t=!0,e=!0,i=!0){let n=0;t&&(n|=16384),e&&(n|=256),i&&(n|=1024),yt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Mt,!1),e.removeEventListener("webglcontextrestored",Tt,!1),e.removeEventListener("webglcontextcreationerror",kt,!1),ot.dispose(),at.dispose(),K.dispose(),J.dispose(),tt.dispose(),nt.dispose(),vt.dispose(),_t.dispose(),st.dispose(),Ct.dispose(),Ct.removeEventListener("sessionstart",It),Ct.removeEventListener("sessionend",Dt),F&&(F.dispose(),F=null),Nt.stop()},this.renderBufferDirect=function(t,e,i,n,s,r){null===e&&(e=H);const o=s.isMesh&&s.matrixWorld.determinant()<0,a=Ht(t,e,i,n,s);X.setMaterial(n,o);let l=i.index;const h=i.attributes.position;if(null===l){if(void 0===h||0===h.count)return}else if(0===l.count)return;let c,u=1;!0===n.wireframe&&(l=it.getWireframeAttribute(i),u=2),vt.setup(s,n,a,i,l);let d=dt;null!==l&&(c=et.get(l),d=pt,d.setIndex(c));const p=null!==l?l.count:h.count,f=i.drawRange.start*u,m=i.drawRange.count*u,g=null!==r?r.start*u:0,v=null!==r?r.count*u:1/0,_=Math.max(f,g),y=Math.min(p,f+m,g+v)-1,b=Math.max(0,y-_+1);if(0!==b){if(s.isMesh)!0===n.wireframe?(X.setLineWidth(n.wireframeLinewidth*G()),d.setMode(1)):d.setMode(4);else if(s.isLine){let t=n.linewidth;void 0===t&&(t=1),X.setLineWidth(t*G()),s.isLineSegments?d.setMode(1):s.isLineLoop?d.setMode(2):d.setMode(3)}else s.isPoints?d.setMode(0):s.isSprite&&d.setMode(4);if(s.isInstancedMesh)d.renderInstances(_,b,s.count);else if(i.isInstancedBufferGeometry){const t=Math.min(i.instanceCount,i._maxInstanceCount);d.renderInstances(_,b,t)}else d.render(_,b)}},this.compile=function(t,e){function i(t,e,i){!0===t.transparent&&t.side===f?(t.side=p,t.needsUpdate=!0,$t(t,e,i),t.side=d,t.needsUpdate=!0,$t(t,e,i),t.side=f):$t(t,e,i)}g=at.get(t),g.init(),_.push(g),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),g.setupLights(y.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let s=0;s<n.length;s++){const r=n[s];i(r,t,e)}else i(n,t,e)})),_.pop(),g=null};let Rt=null;function Ot(t){Rt&&Rt(t)}function It(){Nt.stop()}function Dt(){Nt.start()}const Nt=new Rs;function zt(t,e,i,n){if(!1===t.visible)return;const s=t.layers.test(e.layers);if(s)if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)g.pushLight(t),t.castShadow&&g.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||z.intersectsSprite(t)){n&&V.setFromMatrixPosition(t.matrixWorld).applyMatrix4(U);const e=nt.update(t),s=t.material;s.visible&&m.push(t,e,s,i,V.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Q.render.frame&&(t.skeleton.update(),t.skeleton.frame=Q.render.frame),!t.frustumCulled||z.intersectsObject(t))){n&&V.setFromMatrixPosition(t.matrixWorld).applyMatrix4(U);const e=nt.update(t),s=t.material;if(Array.isArray(s)){const n=e.groups;for(let r=0,o=n.length;r<o;r++){const o=n[r],a=s[o.materialIndex];a&&a.visible&&m.push(t,e,a,i,V.z,o)}}else s.visible&&m.push(t,e,s,i,V.z,null)}const r=t.children;for(let o=0,a=r.length;o<a;o++)zt(r[o],e,i,n)}function qt(t,e,i,n){const s=t.opaque,r=t.transmissive,o=t.transparent;g.setupLightsView(i),r.length>0&&Bt(s,e,i),n&&X.viewport(T.copy(n)),s.length>0&&Ft(s,e,i),r.length>0&&Ft(r,e,i),o.length>0&&Ft(o,e,i),X.buffers.depth.setTest(!0),X.buffers.depth.setMask(!0),X.buffers.color.setMask(!0),X.setPolygonOffset(!1)}function Bt(t,e,i){const n=j.isWebGL2;null===F&&(F=new hi(1,1,{generateMipmaps:!0,type:W.has("EXT_color_buffer_half_float")?St:mt,minFilter:ft,samples:n&&!0===o?4:0})),y.getDrawingBufferSize($),n?F.setSize($.x,$.y):F.setSize(qe($.x),qe($.y));const s=y.getRenderTarget();y.setRenderTarget(F),y.clear();const r=y.toneMapping;y.toneMapping=Y,Ft(t,e,i),y.toneMapping=r,Z.updateMultisampleRenderTarget(F),Z.updateRenderTargetMipmap(F),y.setRenderTarget(s)}function Ft(t,e,i){const n=!0===e.isScene?e.overrideMaterial:null;for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.object,a=r.geometry,l=null===n?r.material:n,h=r.group;o.layers.test(i.layers)&&Ut(o,e,i,a,l,h)}}function Ut(t,e,i,n,s,r){t.onBeforeRender(y,e,i,n,s,r),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),s.onBeforeRender(y,e,i,n,t,r),!0===s.transparent&&s.side===f?(s.side=p,s.needsUpdate=!0,y.renderBufferDirect(i,e,n,s,t,r),s.side=d,s.needsUpdate=!0,y.renderBufferDirect(i,e,n,s,t,r),s.side=f):y.renderBufferDirect(i,e,n,s,t,r),t.onAfterRender(y,e,i,n,s,r)}function $t(t,e,i){!0!==e.isScene&&(e=H);const n=K.get(t),s=g.state.lights,r=g.state.shadowsArray,o=s.state.version,a=st.getParameters(t,s.state,r,e,i),l=st.getProgramCacheKey(a);let h=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?tt:J).get(t.envMap||n.environment),void 0===h&&(t.addEventListener("dispose",Lt),h=new Map,n.programs=h);let c=h.get(l);if(void 0!==c){if(n.currentProgram===c&&n.lightsStateVersion===o)return Vt(t,a),c}else a.uniforms=st.getUniforms(t),t.onBuild(i,a,y),t.onBeforeCompile(a,y),c=st.acquireProgram(a,l),h.set(l,c),n.uniforms=a.uniforms;const u=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=lt.uniform),Vt(t,a),n.needsLights=Wt(t),n.lightsStateVersion=o,n.needsLights&&(u.ambientLightColor.value=s.state.ambient,u.lightProbe.value=s.state.probe,u.directionalLights.value=s.state.directional,u.directionalLightShadows.value=s.state.directionalShadow,u.spotLights.value=s.state.spot,u.spotLightShadows.value=s.state.spotShadow,u.rectAreaLights.value=s.state.rectArea,u.ltc_1.value=s.state.rectAreaLTC1,u.ltc_2.value=s.state.rectAreaLTC2,u.pointLights.value=s.state.point,u.pointLightShadows.value=s.state.pointShadow,u.hemisphereLights.value=s.state.hemi,u.directionalShadowMap.value=s.state.directionalShadowMap,u.directionalShadowMatrix.value=s.state.directionalShadowMatrix,u.spotShadowMap.value=s.state.spotShadowMap,u.spotLightMatrix.value=s.state.spotLightMatrix,u.spotLightMap.value=s.state.spotLightMap,u.pointShadowMap.value=s.state.pointShadowMap,u.pointShadowMatrix.value=s.state.pointShadowMatrix);const d=c.getUniforms(),p=eh.seqWithValue(d.seq,u);return n.currentProgram=c,n.uniformsList=p,c}function Vt(t,e){const i=K.get(t);i.outputEncoding=e.outputEncoding,i.instancing=e.instancing,i.skinning=e.skinning,i.morphTargets=e.morphTargets,i.morphNormals=e.morphNormals,i.morphColors=e.morphColors,i.morphTargetsCount=e.morphTargetsCount,i.numClippingPlanes=e.numClippingPlanes,i.numIntersection=e.numClipIntersection,i.vertexAlphas=e.vertexAlphas,i.vertexTangents=e.vertexTangents,i.toneMapping=e.toneMapping}function Ht(t,e,i,n,s){!0!==e.isScene&&(e=H),Z.resetTextureUnits();const r=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===w?y.outputEncoding:!0===w.isXRRenderTarget?w.texture.encoding:ge,l=(n.isMeshStandardMaterial?tt:J).get(n.envMap||o),h=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,c=!!n.normalMap&&!!i.attributes.tangent,u=!!i.morphAttributes.position,d=!!i.morphAttributes.normal,p=!!i.morphAttributes.color,f=n.toneMapped?y.toneMapping:Y,m=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,v=void 0!==m?m.length:0,_=K.get(n),b=g.state.lights;if(!0===q&&(!0===B||t!==M)){const e=t===M&&n.id===C;lt.setState(n,t,e)}let x=!1;n.version===_.__version?_.needsLights&&_.lightsStateVersion!==b.state.version||_.outputEncoding!==a||s.isInstancedMesh&&!1===_.instancing?x=!0:s.isInstancedMesh||!0!==_.instancing?s.isSkinnedMesh&&!1===_.skinning?x=!0:s.isSkinnedMesh||!0!==_.skinning?_.envMap!==l||!0===n.fog&&_.fog!==r?x=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===lt.numPlanes&&_.numIntersection===lt.numIntersection?(_.vertexAlphas!==h||_.vertexTangents!==c||_.morphTargets!==u||_.morphNormals!==d||_.morphColors!==p||_.toneMapping!==f||!0===j.isWebGL2&&_.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,_.__version=n.version);let S=_.currentProgram;!0===x&&(S=$t(n,e,s));let T=!1,k=!1,E=!1;const L=S.getUniforms(),R=_.uniforms;if(X.useProgram(S.program)&&(T=!0,k=!0,E=!0),n.id!==C&&(C=n.id,k=!0),T||M!==t){if(L.setValue(yt,"projectionMatrix",t.projectionMatrix),j.logarithmicDepthBuffer&&L.setValue(yt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),M!==t&&(M=t,k=!0,E=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=L.map.cameraPosition;void 0!==e&&e.setValue(yt,V.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&L.setValue(yt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||s.isSkinnedMesh)&&L.setValue(yt,"viewMatrix",t.matrixWorldInverse)}if(s.isSkinnedMesh){L.setOptional(yt,s,"bindMatrix"),L.setOptional(yt,s,"bindMatrixInverse");const t=s.skeleton;t&&(j.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),L.setValue(yt,"boneTexture",t.boneTexture,Z),L.setValue(yt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=i.morphAttributes;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===j.isWebGL2)&&ut.update(s,i,n,S),(k||_.receiveShadow!==s.receiveShadow)&&(_.receiveShadow=s.receiveShadow,L.setValue(yt,"receiveShadow",s.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),k&&(L.setValue(yt,"toneMappingExposure",y.toneMappingExposure),_.needsLights&&Gt(R,E),r&&!0===n.fog&&rt.refreshFogUniforms(R,r),rt.refreshMaterialUniforms(R,n,P,A,F),eh.upload(yt,_.uniformsList,R,Z)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(eh.upload(yt,_.uniformsList,R,Z),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&L.setValue(yt,"center",s.center),L.setValue(yt,"modelViewMatrix",s.modelViewMatrix),L.setValue(yt,"normalMatrix",s.normalMatrix),L.setValue(yt,"modelMatrix",s.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const t=n.uniformsGroups;for(let e=0,i=t.length;e<i;e++)if(j.isWebGL2){const i=t[e];_t.update(i,S),_t.bind(i,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}function Gt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Wt(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Nt.setAnimationLoop(Ot),"undefined"!==typeof self&&Nt.setContext(self),this.setAnimationLoop=function(t){Rt=t,Ct.setAnimationLoop(t),null===t?Nt.stop():Nt.start()},Ct.addEventListener("sessionstart",It),Ct.addEventListener("sessionend",Dt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Ct.enabled&&!0===Ct.isPresenting&&(!0===Ct.cameraAutoUpdate&&Ct.updateCamera(e),e=Ct.getCamera()),!0===t.isScene&&t.onBeforeRender(y,t,e,w),g=at.get(t,_.length),g.init(),_.push(g),U.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),z.setFromProjectionMatrix(U),B=this.localClippingEnabled,q=lt.init(this.clippingPlanes,B,e),m=ot.get(t,v.length),m.init(),v.push(m),zt(t,e,0,y.sortObjects),m.finish(),!0===y.sortObjects&&m.sort(R,O),!0===q&&lt.beginShadows();const i=g.state.shadowsArray;if(ht.render(i,t,e),!0===q&&lt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ct.render(m,t),g.setupLights(y.physicallyCorrectLights),e.isArrayCamera){const i=e.cameras;for(let e=0,n=i.length;e<n;e++){const n=i[e];qt(m,t,n,n.viewport)}}else qt(m,t,e);null!==w&&(Z.updateMultisampleRenderTarget(w),Z.updateRenderTargetMipmap(w)),!0===t.isScene&&t.onAfterRender(y,t,e),vt.resetDefaultState(),C=-1,M=null,_.pop(),g=_.length>0?_[_.length-1]:null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(t,e,i){K.get(t.texture).__webglTexture=e,K.get(t.depthTexture).__webglTexture=i;const n=K.get(t);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===W.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const i=K.get(t);i.__webglFramebuffer=e,i.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,i=0){w=t,x=e,S=i;let n=!0,s=null,r=!1,o=!1;if(t){const i=K.get(t);void 0!==i.__useDefaultFramebuffer?(X.bindFramebuffer(36160,null),n=!1):void 0===i.__webglFramebuffer?Z.setupRenderTarget(t):i.__hasExternalTextures&&Z.rebindTextures(t,K.get(t.texture).__webglTexture,K.get(t.depthTexture).__webglTexture);const a=t.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(o=!0);const l=K.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(s=l[e],r=!0):s=j.isWebGL2&&t.samples>0&&!1===Z.useMultisampledRTT(t)?K.get(t).__webglMultisampledFramebuffer:l,T.copy(t.viewport),k.copy(t.scissor),E=t.scissorTest}else T.copy(I).multiplyScalar(P).floor(),k.copy(D).multiplyScalar(P).floor(),E=N;const a=X.bindFramebuffer(36160,s);if(a&&j.drawBuffers&&n&&X.drawBuffers(t,s),X.viewport(T),X.scissor(k),X.setScissorTest(E),r){const n=K.get(t.texture);yt.framebufferTexture2D(36160,36064,34069+e,n.__webglTexture,i)}else if(o){const n=K.get(t.texture),s=e||0;yt.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,s)}C=-1},this.readRenderTargetPixels=function(t,e,i,n,s,r,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=K.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){X.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,l=o.type;if(a!==Et&&gt.convert(a)!==yt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const h=l===St&&(W.has("EXT_color_buffer_half_float")||j.isWebGL2&&W.has("EXT_color_buffer_float"));if(l!==mt&&gt.convert(l)!==yt.getParameter(35738)&&(l!==xt||!(j.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-n&&i>=0&&i<=t.height-s&&yt.readPixels(e,i,n,s,gt.convert(a),gt.convert(l),r)}finally{const t=null!==w?K.get(w).__webglFramebuffer:null;X.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,i=0){const n=Math.pow(2,-i),s=Math.floor(e.image.width*n),r=Math.floor(e.image.height*n);Z.setTexture2D(e,0),yt.copyTexSubImage2D(3553,i,0,0,t.x,t.y,s,r),X.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n=0){const s=e.image.width,r=e.image.height,o=gt.convert(i.format),a=gt.convert(i.type);Z.setTexture2D(i,0),yt.pixelStorei(37440,i.flipY),yt.pixelStorei(37441,i.premultiplyAlpha),yt.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?yt.texSubImage2D(3553,n,t.x,t.y,s,r,o,a,e.image.data):e.isCompressedTexture?yt.compressedTexSubImage2D(3553,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):yt.texSubImage2D(3553,n,t.x,t.y,o,a,e.image),0===n&&i.generateMipmaps&&yt.generateMipmap(3553),X.unbindTexture()},this.copyTextureToTexture3D=function(t,e,i,n,s=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const r=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=gt.convert(n.format),h=gt.convert(n.type);let c;if(n.isData3DTexture)Z.setTexture3D(n,0),c=32879;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(n,0),c=35866}yt.pixelStorei(37440,n.flipY),yt.pixelStorei(37441,n.premultiplyAlpha),yt.pixelStorei(3317,n.unpackAlignment);const u=yt.getParameter(3314),d=yt.getParameter(32878),p=yt.getParameter(3316),f=yt.getParameter(3315),m=yt.getParameter(32877),g=i.isCompressedTexture?i.mipmaps[0]:i.image;yt.pixelStorei(3314,g.width),yt.pixelStorei(32878,g.height),yt.pixelStorei(3316,t.min.x),yt.pixelStorei(3315,t.min.y),yt.pixelStorei(32877,t.min.z),i.isDataTexture||i.isData3DTexture?yt.texSubImage3D(c,s,e.x,e.y,e.z,r,o,a,l,h,g.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),yt.compressedTexSubImage3D(c,s,e.x,e.y,e.z,r,o,a,l,g.data)):yt.texSubImage3D(c,s,e.x,e.y,e.z,r,o,a,l,h,g),yt.pixelStorei(3314,u),yt.pixelStorei(32878,d),yt.pixelStorei(3316,p),yt.pixelStorei(3315,f),yt.pixelStorei(32877,m),0===s&&n.generateMipmaps&&yt.generateMipmap(c),X.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?Z.setTextureCube(t,0):t.isData3DTexture?Z.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?Z.setTexture2DArray(t,0):Z.setTexture2D(t,0),X.unbindTexture()},this.resetState=function(){x=0,S=0,w=null,X.reset(),vt.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class lc extends ac{}lc.prototype.isWebGL1Renderer=!0;class hc extends mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class cc{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Te,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Oe()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let n=0,s=this.stride;n<s;n++)this.array[t+n]=e.array[i+n];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Oe()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Oe()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const uc=new pi;class dc{constructor(t,e,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)uc.fromBufferAttribute(this,e),uc.applyMatrix4(t),this.setXYZ(e,uc.x,uc.y,uc.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)uc.fromBufferAttribute(this,e),uc.applyNormalMatrix(t),this.setXYZ(e,uc.x,uc.y,uc.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)uc.fromBufferAttribute(this,e),uc.transformDirection(t),this.setXYZ(e,uc.x,uc.y,uc.z);return this}setX(t,e){return this.normalized&&(e=Fe(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Fe(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Fe(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Fe(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Be(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Be(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Be(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Be(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Fe(e,this.array),i=Fe(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Fe(e,this.array),i=Fe(i,this.array),n=Fe(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,e,i,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=Fe(e,this.array),i=Fe(i,this.array),n=Fe(n,this.array),s=Fe(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return new Rn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new dc(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class pc extends Rn{constructor(t,e,i,n=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}class fc extends En{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ei(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const mc=new pi,gc=new pi,vc=new Vi,_c=new $i,yc=new Ii;class bc extends mn{constructor(t=new Vn,e=new fc){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,i=[0];for(let t=1,n=e.count;t<n;t++)mc.fromBufferAttribute(e,t-1),gc.fromBufferAttribute(e,t),i[t]=i[t-1],i[t]+=mc.distanceTo(gc);t.setAttribute("lineDistance",new Dn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,s=t.params.Line.threshold,r=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),yc.copy(i.boundingSphere),yc.applyMatrix4(n),yc.radius+=s,!1===t.ray.intersectsSphere(yc))return;vc.copy(n).invert(),_c.copy(t.ray).applyMatrix4(vc);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new pi,h=new pi,c=new pi,u=new pi,d=this.isLineSegments?2:1,p=i.index,f=i.attributes,m=f.position;if(null!==p){const i=Math.max(0,r.start),n=Math.min(p.count,r.start+r.count);for(let s=i,r=n-1;s<r;s+=d){const i=p.getX(s),n=p.getX(s+1);l.fromBufferAttribute(m,i),h.fromBufferAttribute(m,n);const r=_c.distanceSqToSegment(l,h,u,c);if(r>a)continue;u.applyMatrix4(this.matrixWorld);const o=t.ray.origin.distanceTo(u);o<t.near||o>t.far||e.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this})}}else{const i=Math.max(0,r.start),n=Math.min(m.count,r.start+r.count);for(let s=i,r=n-1;s<r;s+=d){l.fromBufferAttribute(m,s),h.fromBufferAttribute(m,s+1);const i=_c.distanceSqToSegment(l,h,u,c);if(i>a)continue;u.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(u);n<t.near||n>t.far||e.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}}const xc=new pi,Sc=new pi;class wc extends bc{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,i=[];for(let t=0,n=e.count;t<n;t+=2)xc.fromBufferAttribute(e,t),Sc.fromBufferAttribute(e,t+1),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+xc.distanceTo(Sc);t.setAttribute("lineDistance",new Dn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Cc extends En{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ei(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Mc=new Vi,Tc=new $i,kc=new Ii,Ec=new pi;class Lc extends mn{constructor(t=new Vn,e=new Cc){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,s=t.params.Points.threshold,r=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),kc.copy(i.boundingSphere),kc.applyMatrix4(n),kc.radius+=s,!1===t.ray.intersectsSphere(kc))return;Mc.copy(n).invert(),Tc.copy(t.ray).applyMatrix4(Mc);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=i.index,h=i.attributes,c=h.position;if(null!==l){const i=Math.max(0,r.start),s=Math.min(l.count,r.start+r.count);for(let r=i,o=s;r<o;r++){const i=l.getX(r);Ec.fromBufferAttribute(c,i),Ac(Ec,i,a,n,t,e,this)}}else{const i=Math.max(0,r.start),s=Math.min(c.count,r.start+r.count);for(let r=i,o=s;r<o;r++)Ec.fromBufferAttribute(c,r),Ac(Ec,r,a,n,t,e,this)}}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}}function Ac(t,e,i,n,s,r,o){const a=Tc.distanceSqToPoint(t);if(a<i){const i=new pi;Tc.closestPointToPoint(t,i),i.applyMatrix4(n);const l=s.ray.origin.distanceTo(i);if(l<s.near||l>s.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:i,index:e,face:null,object:o})}}class Pc extends vs{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}function Rc(t,e,i){return Ic(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)}function Oc(t,e,i){return!t||!i&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Ic(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}class Dc{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,n=e[i],s=e[i-1];t:{e:{let r;i:{n:if(!(t<n)){for(let r=i+2;;){if(void 0===n){if(t<s)break n;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===r)break;if(s=n,n=e[++i],t<n)break e}r=e.length;break i}if(t>=s)break t;{const o=e[1];t<o&&(i=2,s=o);for(let r=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===r)break;if(n=s,s=e[--i-1],t>=s)break e}r=i,i=0}}while(i<r){const n=i+r>>>1;t<e[n]?r=n:i=n+1}if(n=e[i],s=e[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,n)}return this.interpolate_(i,s,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=t*n;for(let r=0;r!==n;++r)e[r]=i[s+r];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Nc extends Dc{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pe,endingEnd:pe}}intervalChanged_(t,e,i){const n=this.parameterPositions;let s=t-2,r=t+1,o=n[s],a=n[r];if(void 0===o)switch(this.getSettings_().endingStart){case fe:s=t,o=2*e-i;break;case me:s=n.length-2,o=e+n[s]-n[s+1];break;default:s=t,o=i}if(void 0===a)switch(this.getSettings_().endingEnd){case fe:r=t,a=2*i-e;break;case me:r=1,a=i+n[1]-n[0];break;default:r=t-1,a=e}const l=.5*(i-e),h=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-i),this._offsetPrev=s*h,this._offsetNext=r*h}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(i-e)/(n-e),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,_=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f;for(let b=0;b!==o;++b)s[b]=g*r[h+b]+v*r[l+b]+_*r[a+b]+y*r[c+b];return s}}class zc extends Dc{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=(i-e)/(n-e),c=1-h;for(let u=0;u!==o;++u)s[u]=r[l+u]*c+r[a+u]*h;return s}}class qc extends Dc{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}}class Bc{constructor(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Oc(e,this.TimeBufferType),this.values=Oc(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Oc(t.times,Array),values:Oc(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new qc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new zc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Nc(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ce:e=this.InterpolantFactoryMethodDiscrete;break;case ue:e=this.InterpolantFactoryMethodLinear;break;case de:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ce;case this.InterpolantFactoryMethodLinear:return ue;case this.InterpolantFactoryMethodSmooth:return de}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){const i=this.times,n=i.length;let s=0,r=n-1;while(s!==n&&i[s]<t)++s;while(-1!==r&&i[r]>e)--r;if(++r,0!==s||r!==n){s>=r&&(r=Math.max(r,1),s=r-1);const t=this.getValueSize();this.times=Rc(i,s,r),this.values=Rc(this.values,s*t,r*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,n=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let o=0;o!==s;o++){const e=i[o];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,e),t=!1;break}if(null!==r&&r>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,e,r),t=!1;break}r=e}if(void 0!==n&&Ic(n))for(let o=0,a=n.length;o!==a;++o){const e=n[o];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,e),t=!1;break}}return t}optimize(){const t=Rc(this.times),e=Rc(this.values),i=this.getValueSize(),n=this.getInterpolation()===de,s=t.length-1;let r=1;for(let o=1;o<s;++o){let s=!1;const a=t[o],l=t[o+1];if(a!==l&&(1!==o||a!==t[0]))if(n)s=!0;else{const t=o*i,n=t-i,r=t+i;for(let o=0;o!==i;++o){const i=e[t+o];if(i!==e[n+o]||i!==e[r+o]){s=!0;break}}}if(s){if(o!==r){t[r]=t[o];const n=o*i,s=r*i;for(let t=0;t!==i;++t)e[s+t]=e[n+t]}++r}}if(s>0){t[r]=t[s];for(let t=s*i,n=r*i,o=0;o!==i;++o)e[n+o]=e[t+o];++r}return r!==t.length?(this.times=Rc(t,0,r),this.values=Rc(e,0,r*i)):(this.times=t,this.values=e),this}clone(){const t=Rc(this.times,0),e=Rc(this.values,0),i=this.constructor,n=new i(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Bc.prototype.TimeBufferType=Float32Array,Bc.prototype.ValueBufferType=Float32Array,Bc.prototype.DefaultInterpolation=ue;class Fc extends Bc{}Fc.prototype.ValueTypeName="bool",Fc.prototype.ValueBufferType=Array,Fc.prototype.DefaultInterpolation=ce,Fc.prototype.InterpolantFactoryMethodLinear=void 0,Fc.prototype.InterpolantFactoryMethodSmooth=void 0;class Uc extends Bc{}Uc.prototype.ValueTypeName="color";class $c extends Bc{}$c.prototype.ValueTypeName="number";class Vc extends Dc{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=(i-e)/(n-e);let l=t*o;for(let h=l+o;l!==h;l+=4)di.slerpFlat(s,0,r,l-o,r,l,a);return s}}class Hc extends Bc{InterpolantFactoryMethodLinear(t){return new Vc(this.times,this.values,this.getValueSize(),t)}}Hc.prototype.ValueTypeName="quaternion",Hc.prototype.DefaultInterpolation=ue,Hc.prototype.InterpolantFactoryMethodSmooth=void 0;class Gc extends Bc{}Gc.prototype.ValueTypeName="string",Gc.prototype.ValueBufferType=Array,Gc.prototype.DefaultInterpolation=ce,Gc.prototype.InterpolantFactoryMethodLinear=void 0,Gc.prototype.InterpolantFactoryMethodSmooth=void 0;class Wc extends Bc{}Wc.prototype.ValueTypeName="vector";Error;class jc extends Vn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}const Yc="\\[\\]\\.:\\/",Xc=new RegExp("["+Yc+"]","g"),Qc="[^"+Yc+"]",Kc="[^"+Yc.replace("\\.","")+"]",Zc=/((?:WC+[\/:])*)/.source.replace("WC",Qc),Jc=/(WCOD+)?/.source.replace("WCOD",Kc),tu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qc),eu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qc),iu=new RegExp("^"+Zc+Jc+tu+eu+"$"),nu=["material","materials","bones","map"];class su{constructor(t,e,i){const n=i||ru.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=i.length;n!==s;++n)i[n].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class ru{constructor(t,e,i){this.path=e,this.parsedPath=i||ru.parseTrackName(e),this.node=ru.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new ru.Composite(t,e,i):new ru(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Xc,"")}static parseTrackName(t){const e=iu.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const t=i.nodeName.substring(n+1);-1!==nu.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let n=0;n<t.length;n++){const s=t[n];if(s.name===e||s.uuid===e)return s;const r=i(s.children);if(r)return r}return null},n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,n=e.propertyName;let s=e.propertyIndex;if(t||(t=ru.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===n){n=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==n){if(void 0===t[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[n]}}const r=t[n];if(void 0===r){const i=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}a=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else void 0!==r.fromArray&&void 0!==r.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(a=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=n;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ru.Composite=su,ru.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ru.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ru.prototype.GetterByBindingType=[ru.prototype._getValue_direct,ru.prototype._getValue_array,ru.prototype._getValue_arrayElement,ru.prototype._getValue_toArray],ru.prototype.SetterByBindingTypeAndVersioning=[[ru.prototype._setValue_direct,ru.prototype._setValue_direct_setNeedsUpdate,ru.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ru.prototype._setValue_array,ru.prototype._setValue_array_setNeedsUpdate,ru.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ru.prototype._setValue_arrayElement,ru.prototype._setValue_arrayElement_setNeedsUpdate,ru.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ru.prototype._setValue_fromArray,ru.prototype._setValue_fromArray_setNeedsUpdate,ru.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class ou extends cc{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class au{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Ie(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n)},"5c7d":function(t,e,i){var n,s;(function(r,o){"use strict";n=o,s="function"===typeof n?n.call(e,i,e,t):n,void 0===s||(t.exports=s)})(0,(function(){"use strict";var t=function(){},e="undefined",i=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function s(t,e){var i=t[e];if("function"===typeof i.bind)return i.bind(t);try{return Function.prototype.bind.call(i,t)}catch(n){return function(){return Function.prototype.apply.apply(i,[t,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(n){return"debug"===n&&(n="log"),typeof console!==e&&("trace"===n&&i?r:void 0!==console[n]?s(console,n):void 0!==console.log?s(console,"log"):t)}function a(e,i){for(var s=0;s<n.length;s++){var r=n[s];this[r]=s<e?t:this.methodFactory(r,e,i)}this.log=this.debug}function l(t,i,n){return function(){typeof console!==e&&(a.call(this,i,n),this[t].apply(this,arguments))}}function h(t,e,i){return o(t)||l.apply(this,arguments)}function c(t,i,s){var r,o=this;i=null==i?"WARN":i;var l="loglevel";function c(t){var i=(n[t]||"silent").toUpperCase();if(typeof window!==e&&l){try{return void(window.localStorage[l]=i)}catch(s){}try{window.document.cookie=encodeURIComponent(l)+"="+i+";"}catch(s){}}}function u(){var t;if(typeof window!==e&&l){try{t=window.localStorage[l]}catch(s){}if(typeof t===e)try{var i=window.document.cookie,n=i.indexOf(encodeURIComponent(l)+"=");-1!==n&&(t=/^([^;]+)/.exec(i.slice(n))[1])}catch(s){}return void 0===o.levels[t]&&(t=void 0),t}}function d(){if(typeof window!==e&&l){try{return void window.localStorage.removeItem(l)}catch(t){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}"string"===typeof t?l+=":"+t:"symbol"===typeof t&&(l=void 0),o.name=t,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=s||h,o.getLevel=function(){return r},o.setLevel=function(i,n){if("string"===typeof i&&void 0!==o.levels[i.toUpperCase()]&&(i=o.levels[i.toUpperCase()]),!("number"===typeof i&&i>=0&&i<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+i;if(r=i,!1!==n&&c(i),a.call(o,i,t),typeof console===e&&i<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(t){i=t,u()||o.setLevel(t,!1)},o.resetLevel=function(){o.setLevel(i,!1),d()},o.enableAll=function(t){o.setLevel(o.levels.TRACE,t)},o.disableAll=function(t){o.setLevel(o.levels.SILENT,t)};var p=u();null==p&&(p=i),o.setLevel(p,!1)}var u=new c,d={};u.getLogger=function(t){if("symbol"!==typeof t&&"string"!==typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new c(t,u.getLevel(),u.methodFactory)),e};var p=typeof window!==e?window.log:void 0;return u.noConflict=function(){return typeof window!==e&&window.log===u&&(window.log=p),u},u.getLoggers=function(){return d},u["default"]=u,u}))},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,n,s){var r,o,a=8*s-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?s-1:0,d=i?-1:1,p=t[e+u];for(u+=d,r=p&(1<<-c)-1,p>>=-c,c+=a;c>0;r=256*r+t[e+u],u+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=n;c>0;o=256*o+t[e+u],u+=d,c-=8);if(0===r)r=1-h;else{if(r===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),r-=h}return(p?-1:1)*o*Math.pow(2,r-n)},e.write=function(t,e,i,n,s,r){var o,a,l,h=8*r-s-1,c=(1<<h)-1,u=c>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:r-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),e+=o+u>=1?d/l:d*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,s),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;t[i+p]=255&a,p+=f,a/=256,s-=8);for(o=o<<s|a,h+=s;h>0;t[i+p]=255&o,p+=f,o/=256,h-=8);t[i+p-f]|=128*m}},a788:function(t,e,i){"use strict";(function(t){
/*! https://mths.be/codepointat v0.2.0 by @mathias */
String.prototype.codePointAt||function(){var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),e=function(t){if(null==this)throw TypeError();var e=String(this),i=e.length,n=t?Number(t):0;if(n!=n&&(n=0),!(n<0||n>=i)){var s,r=e.charCodeAt(n);return r>=55296&&r<=56319&&i>n+1&&(s=e.charCodeAt(n+1),s>=56320&&s<=57343)?1024*(r-55296)+s-56320+65536:r}};t?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();var n=0,s=-3;function r(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function o(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new r,this.dtree=new r}var a=new r,l=new r,h=new Uint8Array(30),c=new Uint16Array(30),u=new Uint8Array(30),d=new Uint16Array(30),p=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new r,m=new Uint8Array(320);function g(t,e,i,n){var s,r;for(s=0;s<i;++s)t[s]=0;for(s=0;s<30-i;++s)t[s+i]=s/i|0;for(r=n,s=0;s<30;++s)e[s]=r,r+=1<<t[s]}function v(t,e){var i;for(i=0;i<7;++i)t.table[i]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,i=0;i<24;++i)t.trans[i]=256+i;for(i=0;i<144;++i)t.trans[24+i]=i;for(i=0;i<8;++i)t.trans[168+i]=280+i;for(i=0;i<112;++i)t.trans[176+i]=144+i;for(i=0;i<5;++i)e.table[i]=0;for(e.table[5]=32,i=0;i<32;++i)e.trans[i]=i}var _=new Uint16Array(16);function y(t,e,i,n){var s,r;for(s=0;s<16;++s)t.table[s]=0;for(s=0;s<n;++s)t.table[e[i+s]]++;for(t.table[0]=0,r=0,s=0;s<16;++s)_[s]=r,r+=t.table[s];for(s=0;s<n;++s)e[i+s]&&(t.trans[_[e[i+s]]++]=s)}function b(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=1&t.tag;return t.tag>>>=1,e}function x(t,e,i){if(!e)return i;while(t.bitcount<24)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var n=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,n+i}function S(t,e){while(t.bitcount<24)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var i=0,n=0,s=0,r=t.tag;do{n=2*n+(1&r),r>>>=1,++s,i+=e.table[s],n-=e.table[s]}while(n>=0);return t.tag=r,t.bitcount-=s,e.trans[i+n]}function w(t,e,i){var n,s,r,o,a,l;for(n=x(t,5,257),s=x(t,5,1),r=x(t,4,4),o=0;o<19;++o)m[o]=0;for(o=0;o<r;++o){var h=x(t,3,0);m[p[o]]=h}for(y(f,m,0,19),a=0;a<n+s;){var c=S(t,f);switch(c){case 16:var u=m[a-1];for(l=x(t,2,3);l;--l)m[a++]=u;break;case 17:for(l=x(t,3,3);l;--l)m[a++]=0;break;case 18:for(l=x(t,7,11);l;--l)m[a++]=0;break;default:m[a++]=c;break}}y(e,m,0,n),y(i,m,n,s)}function C(t,e,i){while(1){var s,r,o,a,l=S(t,e);if(256===l)return n;if(l<256)t.dest[t.destLen++]=l;else for(l-=257,s=x(t,h[l],c[l]),r=S(t,i),o=t.destLen-x(t,u[r],d[r]),a=o;a<o+s;++a)t.dest[t.destLen++]=t.dest[a]}}function M(t){var e,i,r;while(t.bitcount>8)t.sourceIndex--,t.bitcount-=8;if(e=t.source[t.sourceIndex+1],e=256*e+t.source[t.sourceIndex],i=t.source[t.sourceIndex+3],i=256*i+t.source[t.sourceIndex+2],e!==(65535&~i))return s;for(t.sourceIndex+=4,r=e;r;--r)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,n}function T(t,e){var i,r,h,c=new o(t,e);do{switch(i=b(c),r=x(c,2,0),r){case 0:h=M(c);break;case 1:h=C(c,a,l);break;case 2:w(c,c.ltree,c.dtree),h=C(c,c.ltree,c.dtree);break;default:h=s}if(h!==n)throw new Error("Data error")}while(!i);return c.destLen<c.dest.length?"function"===typeof c.dest.slice?c.dest.slice(0,c.destLen):c.dest.subarray(0,c.destLen):c.dest}v(a,l),g(h,c,4,3),g(u,d,2,1),h[28]=0,c[28]=258;var k=T;function E(t,e,i,n,s){return Math.pow(1-s,3)*t+3*Math.pow(1-s,2)*s*e+3*(1-s)*Math.pow(s,2)*i+Math.pow(s,3)*n}function L(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function A(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function P(t){throw new Error(t)}function R(t,e){t||P(e)}L.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},L.prototype.addPoint=function(t,e){"number"===typeof t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),"number"===typeof e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},L.prototype.addX=function(t){this.addPoint(t,null)},L.prototype.addY=function(t){this.addPoint(null,t)},L.prototype.addBezier=function(t,e,i,n,s,r,o,a){var l=[t,e],h=[i,n],c=[s,r],u=[o,a];this.addPoint(t,e),this.addPoint(o,a);for(var d=0;d<=1;d++){var p=6*l[d]-12*h[d]+6*c[d],f=-3*l[d]+9*h[d]-9*c[d]+3*u[d],m=3*h[d]-3*l[d];if(0!==f){var g=Math.pow(p,2)-4*m*f;if(!(g<0)){var v=(-p+Math.sqrt(g))/(2*f);0<v&&v<1&&(0===d&&this.addX(E(l[d],h[d],c[d],u[d],v)),1===d&&this.addY(E(l[d],h[d],c[d],u[d],v)));var _=(-p-Math.sqrt(g))/(2*f);0<_&&_<1&&(0===d&&this.addX(E(l[d],h[d],c[d],u[d],_)),1===d&&this.addY(E(l[d],h[d],c[d],u[d],_)))}}else{if(0===p)continue;var y=-m/p;0<y&&y<1&&(0===d&&this.addX(E(l[d],h[d],c[d],u[d],y)),1===d&&this.addY(E(l[d],h[d],c[d],u[d],y)))}}},L.prototype.addQuad=function(t,e,i,n,s,r){var o=t+2/3*(i-t),a=e+2/3*(n-e),l=o+1/3*(s-t),h=a+1/3*(r-e);this.addBezier(t,e,o,a,l,h,s,r)},A.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})},A.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})},A.prototype.curveTo=A.prototype.bezierCurveTo=function(t,e,i,n,s,r){this.commands.push({type:"C",x1:t,y1:e,x2:i,y2:n,x:s,y:r})},A.prototype.quadTo=A.prototype.quadraticCurveTo=function(t,e,i,n){this.commands.push({type:"Q",x1:t,y1:e,x:i,y:n})},A.prototype.close=A.prototype.closePath=function(){this.commands.push({type:"Z"})},A.prototype.extend=function(t){if(t.commands)t=t.commands;else if(t instanceof L){var e=t;return this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),void this.close()}Array.prototype.push.apply(this.commands,t)},A.prototype.getBoundingBox=function(){for(var t=new L,e=0,i=0,n=0,s=0,r=0;r<this.commands.length;r++){var o=this.commands[r];switch(o.type){case"M":t.addPoint(o.x,o.y),e=n=o.x,i=s=o.y;break;case"L":t.addPoint(o.x,o.y),n=o.x,s=o.y;break;case"Q":t.addQuad(n,s,o.x1,o.y1,o.x,o.y),n=o.x,s=o.y;break;case"C":t.addBezier(n,s,o.x1,o.y1,o.x2,o.y2,o.x,o.y),n=o.x,s=o.y;break;case"Z":n=e,s=i;break;default:throw new Error("Unexpected path command "+o.type)}}return t.isEmpty()&&t.addPoint(0,0),t},A.prototype.draw=function(t){t.beginPath();for(var e=0;e<this.commands.length;e+=1){var i=this.commands[e];"M"===i.type?t.moveTo(i.x,i.y):"L"===i.type?t.lineTo(i.x,i.y):"C"===i.type?t.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):"Q"===i.type?t.quadraticCurveTo(i.x1,i.y1,i.x,i.y):"Z"===i.type&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())},A.prototype.toPathData=function(t){function e(e){return Math.round(e)===e?""+Math.round(e):e.toFixed(t)}function i(){for(var t=arguments,i="",n=0;n<arguments.length;n+=1){var s=t[n];s>=0&&n>0&&(i+=" "),i+=e(s)}return i}t=void 0!==t?t:2;for(var n="",s=0;s<this.commands.length;s+=1){var r=this.commands[s];"M"===r.type?n+="M"+i(r.x,r.y):"L"===r.type?n+="L"+i(r.x,r.y):"C"===r.type?n+="C"+i(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?n+="Q"+i(r.x1,r.y1,r.x,r.y):"Z"===r.type&&(n+="Z")}return n},A.prototype.toSVG=function(t){var e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&&"black"!==this.fill&&(null===this.fill?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e},A.prototype.toDOMElement=function(t){var e=this.toPathData(t),i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",e),i};var O={fail:P,argument:R,assert:R},I=32768,D=2147483648,N={},z={},q={};function B(t){return function(){return t}}z.BYTE=function(t){return O.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]},q.BYTE=B(1),z.CHAR=function(t){return[t.charCodeAt(0)]},q.CHAR=B(1),z.CHARARRAY=function(t){"undefined"===typeof t&&(t="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],i=0;i<t.length;i+=1)e[i]=t.charCodeAt(i);return e},q.CHARARRAY=function(t){return"undefined"===typeof t?0:t.length},z.USHORT=function(t){return[t>>8&255,255&t]},q.USHORT=B(2),z.SHORT=function(t){return t>=I&&(t=-(2*I-t)),[t>>8&255,255&t]},q.SHORT=B(2),z.UINT24=function(t){return[t>>16&255,t>>8&255,255&t]},q.UINT24=B(3),z.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},q.ULONG=B(4),z.LONG=function(t){return t>=D&&(t=-(2*D-t)),[t>>24&255,t>>16&255,t>>8&255,255&t]},q.LONG=B(4),z.FIXED=z.ULONG,q.FIXED=q.ULONG,z.FWORD=z.SHORT,q.FWORD=q.SHORT,z.UFWORD=z.USHORT,q.UFWORD=q.USHORT,z.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t]},q.LONGDATETIME=B(8),z.TAG=function(t){return O.argument(4===t.length,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]},q.TAG=B(4),z.Card8=z.BYTE,q.Card8=q.BYTE,z.Card16=z.USHORT,q.Card16=q.USHORT,z.OffSize=z.BYTE,q.OffSize=q.BYTE,z.SID=z.USHORT,q.SID=q.USHORT,z.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?(t-=108,[247+(t>>8),255&t]):t>=-1131&&t<=-108?(t=-t-108,[251+(t>>8),255&t]):t>=-32768&&t<=32767?z.NUMBER16(t):z.NUMBER32(t)},q.NUMBER=function(t){return z.NUMBER(t).length},z.NUMBER16=function(t){return[28,t>>8&255,255&t]},q.NUMBER16=B(3),z.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,255&t]},q.NUMBER32=B(5),z.REAL=function(t){var e=t.toString(),i=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(i){var n=parseFloat("1e"+((i[2]?+i[2]:0)+i[1].length));e=(Math.round(t*n)/n).toString()}for(var s="",r=0,o=e.length;r<o;r+=1){var a=e[r];s+="e"===a?"-"===e[++r]?"c":"b":"."===a?"a":"-"===a?"e":a}s+=1&s.length?"f":"ff";for(var l=[30],h=0,c=s.length;h<c;h+=2)l.push(parseInt(s.substr(h,2),16));return l},q.REAL=function(t){return z.REAL(t).length},z.NAME=z.CHARARRAY,q.NAME=q.CHARARRAY,z.STRING=z.CHARARRAY,q.STRING=q.CHARARRAY,N.UTF8=function(t,e,i){for(var n=[],s=i,r=0;r<s;r++,e+=1)n[r]=t.getUint8(e);return String.fromCharCode.apply(null,n)},N.UTF16=function(t,e,i){for(var n=[],s=i/2,r=0;r<s;r++,e+=2)n[r]=t.getUint16(e);return String.fromCharCode.apply(null,n)},z.UTF16=function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t.charCodeAt(i);e[e.length]=n>>8&255,e[e.length]=255&n}return e},q.UTF16=function(t){return 2*t.length};var F={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};N.MACSTRING=function(t,e,i,n){var s=F[n];if(void 0!==s){for(var r="",o=0;o<i;o++){var a=t.getUint8(e+o);r+=a<=127?String.fromCharCode(a):s[127&a]}return r}};var U,$="function"===typeof WeakMap&&new WeakMap,V=function(t){if(!U)for(var e in U={},F)U[e]=new String(e);var i=U[t];if(void 0!==i){if($){var n=$.get(i);if(void 0!==n)return n}var s=F[t];if(void 0!==s){for(var r={},o=0;o<s.length;o++)r[s.charCodeAt(o)]=o+128;return $&&$.set(i,r),r}}};function H(t){return t>=-128&&t<=127}function G(t,e,i){var n=0,s=t.length;while(e<s&&n<64&&0===t[e])++e,++n;return i.push(128|n-1),e}function W(t,e,i){var n=0,s=t.length,r=e;while(r<s&&n<64){var o=t[r];if(!H(o))break;if(0===o&&r+1<s&&0===t[r+1])break;++r,++n}i.push(n-1);for(var a=e;a<r;++a)i.push(t[a]+256&255);return r}function j(t,e,i){var n=0,s=t.length,r=e;while(r<s&&n<64){var o=t[r];if(0===o)break;if(H(o)&&r+1<s&&H(t[r+1]))break;++r,++n}i.push(64|n-1);for(var a=e;a<r;++a){var l=t[a];i.push(l+65536>>8&255,l+256&255)}return r}z.MACSTRING=function(t,e){var i=V(e);if(void 0!==i){for(var n=[],s=0;s<t.length;s++){var r=t.charCodeAt(s);if(r>=128&&(r=i[r],void 0===r))return;n[s]=r}return n}},q.MACSTRING=function(t,e){var i=z.MACSTRING(t,e);return void 0!==i?i.length:0},z.VARDELTAS=function(t){var e=0,i=[];while(e<t.length){var n=t[e];e=0===n?G(t,e,i):n>=-128&&n<=127?W(t,e,i):j(t,e,i)}return i},z.INDEX=function(t){for(var e=1,i=[e],n=[],s=0;s<t.length;s+=1){var r=z.OBJECT(t[s]);Array.prototype.push.apply(n,r),e+=r.length,i.push(e)}if(0===n.length)return[0,0];for(var o=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,z.BYTE,z.USHORT,z.UINT24,z.ULONG][a],h=0;h<i.length;h+=1){var c=l(i[h]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(z.Card16(t.length),z.OffSize(a),o,n)},q.INDEX=function(t){return z.INDEX(t).length},z.DICT=function(t){for(var e=[],i=Object.keys(t),n=i.length,s=0;s<n;s+=1){var r=parseInt(i[s],0),o=t[r];e=e.concat(z.OPERAND(o.value,o.type)),e=e.concat(z.OPERATOR(r))}return e},q.DICT=function(t){return z.DICT(t).length},z.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]},z.OPERAND=function(t,e){var i=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)O.argument(t.length===e.length,"Not enough arguments given for type"+e),i=i.concat(z.OPERAND(t[n],e[n]));else if("SID"===e)i=i.concat(z.NUMBER(t));else if("offset"===e)i=i.concat(z.NUMBER32(t));else if("number"===e)i=i.concat(z.NUMBER(t));else{if("real"!==e)throw new Error("Unknown operand type "+e);i=i.concat(z.REAL(t))}return i},z.OP=z.BYTE,q.OP=q.BYTE;var Y="function"===typeof WeakMap&&new WeakMap;function X(t,e,i){if(e.length&&("coverageFormat"!==e[0].name||1===e[0].value))for(var n=0;n<e.length;n+=1){var s=e[n];this[s.name]=s.value}if(this.tableName=t,this.fields=e,i)for(var r=Object.keys(i),o=0;o<r.length;o+=1){var a=r[o],l=i[a];void 0!==this[a]&&(this[a]=l)}}function Q(t,e,i){void 0===i&&(i=e.length);var n=new Array(e.length+1);n[0]={name:t+"Count",type:"USHORT",value:i};for(var s=0;s<e.length;s++)n[s+1]={name:t+s,type:"USHORT",value:e[s]};return n}function K(t,e,i){var n=e.length,s=new Array(n+1);s[0]={name:t+"Count",type:"USHORT",value:n};for(var r=0;r<n;r++)s[r+1]={name:t+r,type:"TABLE",value:i(e[r],r)};return s}function Z(t,e,i){var n=e.length,s=[];s[0]={name:t+"Count",type:"USHORT",value:n};for(var r=0;r<n;r++)s=s.concat(i(e[r],r));return s}function J(t){1===t.format?X.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Q("glyph",t.glyphs))):2===t.format?X.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Z("rangeRecord",t.ranges,(function(t){return[{name:"startGlyphID",type:"USHORT",value:t.start},{name:"endGlyphID",type:"USHORT",value:t.end},{name:"startCoverageIndex",type:"USHORT",value:t.index}]})))):O.assert(!1,"Coverage format must be 1 or 2.")}function tt(t){X.call(this,"scriptListTable",Z("scriptRecord",t,(function(t,e){var i=t.script,n=i.defaultLangSys;return O.assert(!!n,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+e,type:"TAG",value:t.tag},{name:"script"+e,type:"TABLE",value:new X("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new X("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(Q("featureIndex",n.featureIndexes)))}].concat(Z("langSys",i.langSysRecords,(function(t,e){var i=t.langSys;return[{name:"langSysTag"+e,type:"TAG",value:t.tag},{name:"langSys"+e,type:"TABLE",value:new X("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(Q("featureIndex",i.featureIndexes)))}]}))))}]})))}function et(t){X.call(this,"featureListTable",Z("featureRecord",t,(function(t,e){var i=t.feature;return[{name:"featureTag"+e,type:"TAG",value:t.tag},{name:"feature"+e,type:"TABLE",value:new X("featureTable",[{name:"featureParams",type:"USHORT",value:i.featureParams}].concat(Q("lookupListIndex",i.lookupListIndexes)))}]})))}function it(t,e){X.call(this,"lookupListTable",K("lookup",t,(function(t){var i=e[t.lookupType];return O.assert(!!i,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new X("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(K("subtable",t.subtables,i)))})))}z.CHARSTRING=function(t){if(Y){var e=Y.get(t);if(void 0!==e)return e}for(var i=[],n=t.length,s=0;s<n;s+=1){var r=t[s];i=i.concat(z[r.type](r.value))}return Y&&Y.set(t,i),i},q.CHARSTRING=function(t){return z.CHARSTRING(t).length},z.OBJECT=function(t){var e=z[t.type];return O.argument(void 0!==e,"No encoding function for type "+t.type),e(t.value)},q.OBJECT=function(t){var e=q[t.type];return O.argument(void 0!==e,"No sizeOf function for type "+t.type),e(t.value)},z.TABLE=function(t){for(var e=[],i=t.fields.length,n=[],s=[],r=0;r<i;r+=1){var o=t.fields[r],a=z[o.type];O.argument(void 0!==a,"No encoding function for field type "+o.type+" ("+o.name+")");var l=t[o.name];void 0===l&&(l=o.value);var h=a(l);"TABLE"===o.type?(s.push(e.length),e=e.concat([0,0]),n.push(h)):e=e.concat(h)}for(var c=0;c<n.length;c+=1){var u=s[c],d=e.length;O.argument(d<65536,"Table "+t.tableName+" too big."),e[u]=d>>8,e[u+1]=255&d,e=e.concat(n[c])}return e},q.TABLE=function(t){for(var e=0,i=t.fields.length,n=0;n<i;n+=1){var s=t.fields[n],r=q[s.type];O.argument(void 0!==r,"No sizeOf function for field type "+s.type+" ("+s.name+")");var o=t[s.name];void 0===o&&(o=s.value),e+=r(o),"TABLE"===s.type&&(e+=2)}return e},z.RECORD=z.TABLE,q.RECORD=q.TABLE,z.LITERAL=function(t){return t},q.LITERAL=function(t){return t.length},X.prototype.encode=function(){return z.TABLE(this)},X.prototype.sizeOf=function(){return q.TABLE(this)},J.prototype=Object.create(X.prototype),J.prototype.constructor=J,tt.prototype=Object.create(X.prototype),tt.prototype.constructor=tt,et.prototype=Object.create(X.prototype),et.prototype.constructor=et,it.prototype=Object.create(X.prototype),it.prototype.constructor=it;var nt={Table:X,Record:X,Coverage:J,ScriptList:tt,FeatureList:et,LookupList:it,ushortList:Q,tableList:K,recordList:Z};function st(t,e){return t.getUint8(e)}function rt(t,e){return t.getUint16(e,!1)}function ot(t,e){return t.getInt16(e,!1)}function at(t,e){return t.getUint32(e,!1)}function lt(t,e){var i=t.getInt16(e,!1),n=t.getUint16(e+2,!1);return i+n/65535}function ht(t,e){for(var i="",n=e;n<e+4;n+=1)i+=String.fromCharCode(t.getInt8(n));return i}function ct(t,e,i){for(var n=0,s=0;s<i;s+=1)n<<=8,n+=t.getUint8(e+s);return n}function ut(t,e,i){for(var n=[],s=e;s<i;s+=1)n.push(t.getUint8(s));return n}function dt(t){for(var e="",i=0;i<t.length;i+=1)e+=String.fromCharCode(t[i]);return e}var pt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ft(t,e){this.data=t,this.offset=e,this.relativeOffset=0}ft.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},ft.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},ft.prototype.parseCard8=ft.prototype.parseByte,ft.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},ft.prototype.parseCard16=ft.prototype.parseUShort,ft.prototype.parseSID=ft.prototype.parseUShort,ft.prototype.parseOffset16=ft.prototype.parseUShort,ft.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},ft.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t},ft.prototype.parseULong=function(){var t=at(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},ft.prototype.parseOffset32=ft.prototype.parseULong,ft.prototype.parseFixed=function(){var t=lt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},ft.prototype.parseString=function(t){var e=this.data,i=this.offset+this.relativeOffset,n="";this.relativeOffset+=t;for(var s=0;s<t;s++)n+=String.fromCharCode(e.getUint8(i+s));return n},ft.prototype.parseTag=function(){return this.parseString(4)},ft.prototype.parseLongDateTime=function(){var t=at(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t},ft.prototype.parseVersion=function(t){var e=rt(this.data,this.offset+this.relativeOffset),i=rt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===t&&(t=4096),e+i/t/10},ft.prototype.skip=function(t,e){void 0===e&&(e=1),this.relativeOffset+=pt[t]*e},ft.prototype.parseULongList=function(t){void 0===t&&(t=this.parseULong());for(var e=new Array(t),i=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=i.getUint32(n),n+=4;return this.relativeOffset+=4*t,e},ft.prototype.parseOffset16List=ft.prototype.parseUShortList=function(t){void 0===t&&(t=this.parseUShort());for(var e=new Array(t),i=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=i.getUint16(n),n+=2;return this.relativeOffset+=2*t,e},ft.prototype.parseShortList=function(t){for(var e=new Array(t),i=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=i.getInt16(n),n+=2;return this.relativeOffset+=2*t,e},ft.prototype.parseByteList=function(t){for(var e=new Array(t),i=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)e[s]=i.getUint8(n++);return this.relativeOffset+=t,e},ft.prototype.parseList=function(t,e){e||(e=t,t=this.parseUShort());for(var i=new Array(t),n=0;n<t;n++)i[n]=e.call(this);return i},ft.prototype.parseList32=function(t,e){e||(e=t,t=this.parseULong());for(var i=new Array(t),n=0;n<t;n++)i[n]=e.call(this);return i},ft.prototype.parseRecordList=function(t,e){e||(e=t,t=this.parseUShort());for(var i=new Array(t),n=Object.keys(e),s=0;s<t;s++){for(var r={},o=0;o<n.length;o++){var a=n[o],l=e[a];r[a]=l.call(this)}i[s]=r}return i},ft.prototype.parseRecordList32=function(t,e){e||(e=t,t=this.parseULong());for(var i=new Array(t),n=Object.keys(e),s=0;s<t;s++){for(var r={},o=0;o<n.length;o++){var a=n[o],l=e[a];r[a]=l.call(this)}i[s]=r}return i},ft.prototype.parseStruct=function(t){if("function"===typeof t)return t.call(this);for(var e=Object.keys(t),i={},n=0;n<e.length;n++){var s=e[n],r=t[s];i[s]=r.call(this)}return i},ft.prototype.parseValueRecord=function(t){if(void 0===t&&(t=this.parseUShort()),0!==t){var e={};return 1&t&&(e.xPlacement=this.parseShort()),2&t&&(e.yPlacement=this.parseShort()),4&t&&(e.xAdvance=this.parseShort()),8&t&&(e.yAdvance=this.parseShort()),16&t&&(e.xPlaDevice=void 0,this.parseShort()),32&t&&(e.yPlaDevice=void 0,this.parseShort()),64&t&&(e.xAdvDevice=void 0,this.parseShort()),128&t&&(e.yAdvDevice=void 0,this.parseShort()),e}},ft.prototype.parseValueRecordList=function(){for(var t=this.parseUShort(),e=this.parseUShort(),i=new Array(e),n=0;n<e;n++)i[n]=this.parseValueRecord(t);return i},ft.prototype.parsePointer=function(t){var e=this.parseOffset16();if(e>0)return new ft(this.data,this.offset+e).parseStruct(t)},ft.prototype.parsePointer32=function(t){var e=this.parseOffset32();if(e>0)return new ft(this.data,this.offset+e).parseStruct(t)},ft.prototype.parseListOfLists=function(t){for(var e=this.parseOffset16List(),i=e.length,n=this.relativeOffset,s=new Array(i),r=0;r<i;r++){var o=e[r];if(0!==o)if(this.relativeOffset=o,t){for(var a=this.parseOffset16List(),l=new Array(a.length),h=0;h<a.length;h++)this.relativeOffset=o+a[h],l[h]=t.call(this);s[r]=l}else s[r]=this.parseUShortList();else s[r]=void 0}return this.relativeOffset=n,s},ft.prototype.parseCoverage=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort(),i=this.parseUShort();if(1===e)return{format:1,glyphs:this.parseUShortList(i)};if(2===e){for(var n=new Array(i),s=0;s<i;s++)n[s]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.")},ft.prototype.parseClassDef=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(1===e)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===e)return{format:2,ranges:this.parseRecordList({start:ft.uShort,end:ft.uShort,classId:ft.uShort})};throw new Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")},ft.list=function(t,e){return function(){return this.parseList(t,e)}},ft.list32=function(t,e){return function(){return this.parseList32(t,e)}},ft.recordList=function(t,e){return function(){return this.parseRecordList(t,e)}},ft.recordList32=function(t,e){return function(){return this.parseRecordList32(t,e)}},ft.pointer=function(t){return function(){return this.parsePointer(t)}},ft.pointer32=function(t){return function(){return this.parsePointer32(t)}},ft.tag=ft.prototype.parseTag,ft.byte=ft.prototype.parseByte,ft.uShort=ft.offset16=ft.prototype.parseUShort,ft.uShortList=ft.prototype.parseUShortList,ft.uLong=ft.offset32=ft.prototype.parseULong,ft.uLongList=ft.prototype.parseULongList,ft.struct=ft.prototype.parseStruct,ft.coverage=ft.prototype.parseCoverage,ft.classDef=ft.prototype.parseClassDef;var mt={reserved:ft.uShort,reqFeatureIndex:ft.uShort,featureIndexes:ft.uShortList};ft.prototype.parseScriptList=function(){return this.parsePointer(ft.recordList({tag:ft.tag,script:ft.pointer({defaultLangSys:ft.pointer(mt),langSysRecords:ft.recordList({tag:ft.tag,langSys:ft.pointer(mt)})})}))||[]},ft.prototype.parseFeatureList=function(){return this.parsePointer(ft.recordList({tag:ft.tag,feature:ft.pointer({featureParams:ft.offset16,lookupListIndexes:ft.uShortList})}))||[]},ft.prototype.parseLookupList=function(t){return this.parsePointer(ft.list(ft.pointer((function(){var e=this.parseUShort();O.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var i=this.parseUShort(),n=16&i;return{lookupType:e,lookupFlag:i,subtables:this.parseList(ft.pointer(t[e])),markFilteringSet:n?this.parseUShort():void 0}}))))||[]},ft.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var t=this.parseUShort(),e=this.parseUShort();O.argument(1===t&&e<1,"GPOS/GSUB feature variations table unknown.");var i=this.parseRecordList32({conditionSetOffset:ft.offset32,featureTableSubstitutionOffset:ft.offset32});return i}))||[]};var gt={getByte:st,getCard8:st,getUShort:rt,getCard16:rt,getShort:ot,getULong:at,getFixed:lt,getTag:ht,getOffset:ct,getBytes:ut,bytesToString:dt,Parser:ft};function vt(t,e){var i;e.parseUShort(),t.length=e.parseULong(),t.language=e.parseULong(),t.groupCount=i=e.parseULong(),t.glyphIndexMap={};for(var n=0;n<i;n+=1)for(var s=e.parseULong(),r=e.parseULong(),o=e.parseULong(),a=s;a<=r;a+=1)t.glyphIndexMap[a]=o,o++}function _t(t,e,i,n,s){var r;t.length=e.parseUShort(),t.language=e.parseUShort(),t.segCount=r=e.parseUShort()>>1,e.skip("uShort",3),t.glyphIndexMap={};for(var o=new gt.Parser(i,n+s+14),a=new gt.Parser(i,n+s+16+2*r),l=new gt.Parser(i,n+s+16+4*r),h=new gt.Parser(i,n+s+16+6*r),c=n+s+16+8*r,u=0;u<r-1;u+=1)for(var d=void 0,p=o.parseUShort(),f=a.parseUShort(),m=l.parseShort(),g=h.parseUShort(),v=f;v<=p;v+=1)0!==g?(c=h.offset+h.relativeOffset-2,c+=g,c+=2*(v-f),d=gt.getUShort(i,c),0!==d&&(d=d+m&65535)):d=v+m&65535,t.glyphIndexMap[v]=d}function yt(t,e){var i={};i.version=gt.getUShort(t,e),O.argument(0===i.version,"cmap table version should be 0."),i.numTables=gt.getUShort(t,e+2);for(var n=-1,s=i.numTables-1;s>=0;s-=1){var r=gt.getUShort(t,e+4+8*s),o=gt.getUShort(t,e+4+8*s+2);if(3===r&&(0===o||1===o||10===o)||0===r&&(0===o||1===o||2===o||3===o||4===o)){n=gt.getULong(t,e+4+8*s+4);break}}if(-1===n)throw new Error("No valid cmap sub-tables found.");var a=new gt.Parser(t,e+n);if(i.format=a.parseUShort(),12===i.format)vt(i,a);else{if(4!==i.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+i.format+").");_t(i,a,t,e,n)}return i}function bt(t,e,i){t.segments.push({end:e,start:e,delta:-(e-i),offset:0,glyphIndex:i})}function xt(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function St(t){var e,i=!0;for(e=t.length-1;e>0;e-=1){var n=t.get(e);if(n.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),i=!1;break}}var s=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:i?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:i?12:20}];i||(s=s.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),s=s.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var r=new nt.Table("cmap",s);for(r.segments=[],e=0;e<t.length;e+=1){for(var o=t.get(e),a=0;a<o.unicodes.length;a+=1)bt(r,o.unicodes[a],e);r.segments=r.segments.sort((function(t,e){return t.start-e.start}))}xt(r);var l=r.segments.length,h=0,c=[],u=[],d=[],p=[],f=[],m=[];for(e=0;e<l;e+=1){var g=r.segments[e];g.end<=65535&&g.start<=65535?(c=c.concat({name:"end_"+e,type:"USHORT",value:g.end}),u=u.concat({name:"start_"+e,type:"USHORT",value:g.start}),d=d.concat({name:"idDelta_"+e,type:"SHORT",value:g.delta}),p=p.concat({name:"idRangeOffset_"+e,type:"USHORT",value:g.offset}),void 0!==g.glyphId&&(f=f.concat({name:"glyph_"+e,type:"USHORT",value:g.glyphId}))):h+=1,i||void 0===g.glyphIndex||(m=m.concat({name:"cmap12Start_"+e,type:"ULONG",value:g.start}),m=m.concat({name:"cmap12End_"+e,type:"ULONG",value:g.end}),m=m.concat({name:"cmap12Glyph_"+e,type:"ULONG",value:g.glyphIndex}))}if(r.segCountX2=2*(l-h),r.searchRange=2*Math.pow(2,Math.floor(Math.log(l-h)/Math.log(2))),r.entrySelector=Math.log(r.searchRange/2)/Math.log(2),r.rangeShift=r.segCountX2-r.searchRange,r.fields=r.fields.concat(c),r.fields.push({name:"reservedPad",type:"USHORT",value:0}),r.fields=r.fields.concat(u),r.fields=r.fields.concat(d),r.fields=r.fields.concat(p),r.fields=r.fields.concat(f),r.cmap4Length=14+2*c.length+2+2*u.length+2*d.length+2*p.length+2*f.length,!i){var v=16+4*m.length;r.cmap12Offset=20+r.cmap4Length,r.fields=r.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:v},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:m.length/3}]),r.fields=r.fields.concat(m)}return r}var wt={parse:yt,make:St},Ct=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Mt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Tt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],kt=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Et(t){this.font=t}function Lt(t){this.cmap=t}function At(t,e){this.encoding=t,this.charset=e}function Pt(t){switch(t.version){case 1:this.names=kt.slice();break;case 2:this.names=new Array(t.numberOfGlyphs);for(var e=0;e<t.numberOfGlyphs;e++)t.glyphNameIndex[e]<kt.length?this.names[e]=kt[t.glyphNameIndex[e]]:this.names[e]=t.names[t.glyphNameIndex[e]-kt.length];break;case 2.5:this.names=new Array(t.numberOfGlyphs);for(var i=0;i<t.numberOfGlyphs;i++)this.names[i]=kt[i+t.glyphNameIndex[i]];break;case 3:this.names=[];break;default:this.names=[];break}}function Rt(t){for(var e,i=t.tables.cmap.glyphIndexMap,n=Object.keys(i),s=0;s<n.length;s+=1){var r=n[s],o=i[r];e=t.glyphs.get(o),e.addUnicode(parseInt(r))}for(var a=0;a<t.glyphs.length;a+=1)e=t.glyphs.get(a),t.cffEncoding?t.isCIDFont?e.name="gid"+a:e.name=t.cffEncoding.charset[a]:t.glyphNames.names&&(e.name=t.glyphNames.glyphIndexToName(a))}function Ot(t){t._IndexToUnicodeMap={};for(var e=t.tables.cmap.glyphIndexMap,i=Object.keys(e),n=0;n<i.length;n+=1){var s=i[n],r=e[s];void 0===t._IndexToUnicodeMap[r]?t._IndexToUnicodeMap[r]={unicodes:[parseInt(s)]}:t._IndexToUnicodeMap[r].unicodes.push(parseInt(s))}}function It(t,e){e.lowMemory?Ot(t):Rt(t)}function Dt(t,e,i,n,s){t.beginPath(),t.moveTo(e,i),t.lineTo(n,s),t.stroke()}Et.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),i=this.font.glyphs;if(i)for(var n=0;n<i.length;n+=1)for(var s=i.get(n),r=0;r<s.unicodes.length;r+=1)if(s.unicodes[r]===e)return n;return null},Lt.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.codePointAt(0)]||0},At.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),i=this.encoding[e];return this.charset.indexOf(i)},Pt.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)},Pt.prototype.glyphIndexToName=function(t){return this.names[t]};var Nt={line:Dt};function zt(t,e){var i=e||new A;return{configurable:!0,get:function(){return"function"===typeof i&&(i=i()),i},set:function(t){i=t}}}function qt(t){this.bindConstructorValues(t)}function Bt(t,e,i){Object.defineProperty(t,e,{get:function(){return t.path,t[i]},set:function(e){t[i]=e},enumerable:!0,configurable:!0})}function Ft(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(var i=0;i<e.length;i++){var n=e[i];n.path.unitsPerEm=t.unitsPerEm,this.glyphs[i]=n}this.length=e&&e.length||0}function Ut(t,e){return new qt({index:e,font:t})}function $t(t,e,i,n,s,r){return function(){var o=new qt({index:e,font:t});return o.path=function(){i(o,n,s);var e=r(t.glyphs,o);return e.unitsPerEm=t.unitsPerEm,e},Bt(o,"xMin","_xMin"),Bt(o,"xMax","_xMax"),Bt(o,"yMin","_yMin"),Bt(o,"yMax","_yMax"),o}}function Vt(t,e,i,n){return function(){var s=new qt({index:e,font:t});return s.path=function(){var e=i(t,s,n);return e.unitsPerEm=t.unitsPerEm,e},s}}qt.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||void 0!==t.unicode?[t.unicode]:[],"xMin"in t&&(this.xMin=t.xMin),"yMin"in t&&(this.yMin=t.yMin),"xMax"in t&&(this.xMax=t.xMax),"yMax"in t&&(this.yMax=t.yMax),"advanceWidth"in t&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",zt(this,t.path))},qt.prototype.addUnicode=function(t){0===this.unicodes.length&&(this.unicode=t),this.unicodes.push(t)},qt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},qt.prototype.getPath=function(t,e,i,n,s){var r,o;t=void 0!==t?t:0,e=void 0!==e?e:0,i=void 0!==i?i:72,n||(n={});var a=n.xScale,l=n.yScale;if(n.hinting&&s&&s.hinting&&(o=this.path&&s.hinting.exec(this,i)),o)r=s.hinting.getCommands(o),t=Math.round(t),e=Math.round(e),a=l=1;else{r=this.path.commands;var h=1/(this.path.unitsPerEm||1e3)*i;void 0===a&&(a=h),void 0===l&&(l=h)}for(var c=new A,u=0;u<r.length;u+=1){var d=r[u];"M"===d.type?c.moveTo(t+d.x*a,e+-d.y*l):"L"===d.type?c.lineTo(t+d.x*a,e+-d.y*l):"Q"===d.type?c.quadraticCurveTo(t+d.x1*a,e+-d.y1*l,t+d.x*a,e+-d.y*l):"C"===d.type?c.curveTo(t+d.x1*a,e+-d.y1*l,t+d.x2*a,e+-d.y2*l,t+d.x*a,e+-d.y*l):"Z"===d.type&&c.closePath()}return c},qt.prototype.getContours=function(){if(void 0===this.points)return[];for(var t=[],e=[],i=0;i<this.points.length;i+=1){var n=this.points[i];e.push(n),n.lastPointOfContour&&(t.push(e),e=[])}return O.argument(0===e.length,"There are still points left in the current contour."),t},qt.prototype.getMetrics=function(){for(var t=this.path.commands,e=[],i=[],n=0;n<t.length;n+=1){var s=t[n];"Z"!==s.type&&(e.push(s.x),i.push(s.y)),"Q"!==s.type&&"C"!==s.type||(e.push(s.x1),i.push(s.y1)),"C"===s.type&&(e.push(s.x2),i.push(s.y2))}var r={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,i),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,i),leftSideBearing:this.leftSideBearing};return isFinite(r.xMin)||(r.xMin=0),isFinite(r.xMax)||(r.xMax=this.advanceWidth),isFinite(r.yMin)||(r.yMin=0),isFinite(r.yMax)||(r.yMax=0),r.rightSideBearing=this.advanceWidth-r.leftSideBearing-(r.xMax-r.xMin),r},qt.prototype.draw=function(t,e,i,n,s){this.getPath(e,i,n,s).draw(t)},qt.prototype.drawPoints=function(t,e,i,n){function s(e,i,n,s){t.beginPath();for(var r=0;r<e.length;r+=1)t.moveTo(i+e[r].x*s,n+e[r].y*s),t.arc(i+e[r].x*s,n+e[r].y*s,2,0,2*Math.PI,!1);t.closePath(),t.fill()}e=void 0!==e?e:0,i=void 0!==i?i:0,n=void 0!==n?n:24;for(var r=1/this.path.unitsPerEm*n,o=[],a=[],l=this.path,h=0;h<l.commands.length;h+=1){var c=l.commands[h];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&a.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&a.push({x:c.x2,y:-c.y2})}t.fillStyle="blue",s(o,e,i,r),t.fillStyle="red",s(a,e,i,r)},qt.prototype.drawMetrics=function(t,e,i,n){var s;e=void 0!==e?e:0,i=void 0!==i?i:0,n=void 0!==n?n:24,s=1/this.path.unitsPerEm*n,t.lineWidth=1,t.strokeStyle="black",Nt.line(t,e,-1e4,e,1e4),Nt.line(t,-1e4,i,1e4,i);var r=this.xMin||0,o=this.yMin||0,a=this.xMax||0,l=this.yMax||0,h=this.advanceWidth||0;t.strokeStyle="blue",Nt.line(t,e+r*s,-1e4,e+r*s,1e4),Nt.line(t,e+a*s,-1e4,e+a*s,1e4),Nt.line(t,-1e4,i+-o*s,1e4,i+-o*s),Nt.line(t,-1e4,i+-l*s,1e4,i+-l*s),t.strokeStyle="green",Nt.line(t,e+h*s,-1e4,e+h*s,1e4)},Ft.prototype.get=function(t){if(void 0===this.glyphs[t]){this.font._push(t),"function"===typeof this.glyphs[t]&&(this.glyphs[t]=this.glyphs[t]());var e=this.glyphs[t],i=this.font._IndexToUnicodeMap[t];if(i)for(var n=0;n<i.unicodes.length;n++)e.addUnicode(i.unicodes[n]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+t:e.name=this.font.cffEncoding.charset[t]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(t)),this.glyphs[t].advanceWidth=this.font._hmtxTableData[t].advanceWidth,this.glyphs[t].leftSideBearing=this.font._hmtxTableData[t].leftSideBearing}else"function"===typeof this.glyphs[t]&&(this.glyphs[t]=this.glyphs[t]());return this.glyphs[t]},Ft.prototype.push=function(t,e){this.glyphs[t]=e,this.length++};var Ht={GlyphSet:Ft,glyphLoader:Ut,ttfGlyphLoader:$t,cffGlyphLoader:Vt};function Gt(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i+=1)if(!Gt(t[i],e[i]))return!1;return!0}return!1}function Wt(t){var e;return e=t.length<1240?107:t.length<33900?1131:32768,e}function jt(t,e,i){var n,s,r=[],o=[],a=gt.getCard16(t,e);if(0!==a){var l=gt.getByte(t,e+2);n=e+(a+1)*l+2;for(var h=e+3,c=0;c<a+1;c+=1)r.push(gt.getOffset(t,h,l)),h+=l;s=n+r[a]}else s=e+2;for(var u=0;u<r.length-1;u+=1){var d=gt.getBytes(t,n+r[u],n+r[u+1]);i&&(d=i(d)),o.push(d)}return{objects:o,startOffset:e,endOffset:s}}function Yt(t,e){var i,n,s=[],r=gt.getCard16(t,e);if(0!==r){var o=gt.getByte(t,e+2);i=e+(r+1)*o+2;for(var a=e+3,l=0;l<r+1;l+=1)s.push(gt.getOffset(t,a,o)),a+=o;n=i+s[r]}else n=e+2;return{offsets:s,startOffset:e,endOffset:n}}function Xt(t,e,i,n,s){var r=gt.getCard16(i,n),o=0;if(0!==r){var a=gt.getByte(i,n+2);o=n+(r+1)*a+2}var l=gt.getBytes(i,o+e[t],o+e[t+1]);return s&&(l=s(l)),l}function Qt(t){var e="",i=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];while(1){var s=t.parseByte(),r=s>>4,o=15&s;if(r===i)break;if(e+=n[r],o===i)break;e+=n[o]}return parseFloat(e)}function Kt(t,e){var i,n,s,r;if(28===e)return i=t.parseByte(),n=t.parseByte(),i<<8|n;if(29===e)return i=t.parseByte(),n=t.parseByte(),s=t.parseByte(),r=t.parseByte(),i<<24|n<<16|s<<8|r;if(30===e)return Qt(t);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return i=t.parseByte(),256*(e-247)+i+108;if(e>=251&&e<=254)return i=t.parseByte(),256*-(e-251)-i-108;throw new Error("Invalid b0 "+e)}function Zt(t){for(var e={},i=0;i<t.length;i+=1){var n=t[i][0],s=t[i][1],r=void 0;if(r=1===s.length?s[0]:s,e.hasOwnProperty(n)&&!isNaN(e[n]))throw new Error("Object "+e+" already has key "+n);e[n]=r}return e}function Jt(t,e,i){e=void 0!==e?e:0;var n=new gt.Parser(t,e),s=[],r=[];i=void 0!==i?i:t.length;while(n.relativeOffset<i){var o=n.parseByte();o<=21?(12===o&&(o=1200+n.parseByte()),s.push([o,r]),r=[]):r.push(Kt(n,o))}return Zt(s)}function te(t,e){return e=e<=390?Ct[e]:t[e-391],e}function ee(t,e,i){for(var n,s={},r=0;r<e.length;r+=1){var o=e[r];if(Array.isArray(o.type)){var a=[];a.length=o.type.length;for(var l=0;l<o.type.length;l++)n=void 0!==t[o.op]?t[o.op][l]:void 0,void 0===n&&(n=void 0!==o.value&&void 0!==o.value[l]?o.value[l]:null),"SID"===o.type[l]&&(n=te(i,n)),a[l]=n;s[o.name]=a}else n=t[o.op],void 0===n&&(n=void 0!==o.value?o.value:null),"SID"===o.type&&(n=te(i,n)),s[o.name]=n}return s}function ie(t,e){var i={};return i.formatMajor=gt.getCard8(t,e),i.formatMinor=gt.getCard8(t,e+1),i.size=gt.getCard8(t,e+2),i.offsetSize=gt.getCard8(t,e+3),i.startOffset=e,i.endOffset=e+4,i}var ne=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],se=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function re(t,e){var i=Jt(t,0,t.byteLength);return ee(i,ne,e)}function oe(t,e,i,n){var s=Jt(t,e,i);return ee(s,se,n)}function ae(t,e,i,n){for(var s=[],r=0;r<i.length;r+=1){var o=new DataView(new Uint8Array(i[r]).buffer),a=re(o,n);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],h=a.private[1];if(0!==l&&0!==h){var c=oe(t,h+e,l,n);if(a._defaultWidthX=c.defaultWidthX,a._nominalWidthX=c.nominalWidthX,0!==c.subrs){var u=h+c.subrs,d=jt(t,u+e);a._subrs=d.objects,a._subrsBias=Wt(a._subrs)}a._privateDict=c}s.push(a)}return s}function le(t,e,i,n){var s,r,o=new gt.Parser(t,e);i-=1;var a=[".notdef"],l=o.parseCard8();if(0===l)for(var h=0;h<i;h+=1)s=o.parseSID(),a.push(te(n,s));else if(1===l)while(a.length<=i){s=o.parseSID(),r=o.parseCard8();for(var c=0;c<=r;c+=1)a.push(te(n,s)),s+=1}else{if(2!==l)throw new Error("Unknown charset format "+l);while(a.length<=i){s=o.parseSID(),r=o.parseCard16();for(var u=0;u<=r;u+=1)a.push(te(n,s)),s+=1}}return a}function he(t,e,i){var n,s={},r=new gt.Parser(t,e),o=r.parseCard8();if(0===o)for(var a=r.parseCard8(),l=0;l<a;l+=1)n=r.parseCard8(),s[n]=l;else{if(1!==o)throw new Error("Unknown encoding format "+o);var h=r.parseCard8();n=1;for(var c=0;c<h;c+=1)for(var u=r.parseCard8(),d=r.parseCard8(),p=u;p<=u+d;p+=1)s[p]=n,n+=1}return new At(s,i)}function ce(t,e,i){var n,s,r,o,a,l,h,c,u=new A,d=[],p=0,f=!1,m=!1,g=0,v=0;if(t.isCIDFont){var _=t.tables.cff.topDict._fdSelect[e.index],y=t.tables.cff.topDict._fdArray[_];a=y._subrs,l=y._subrsBias,h=y._defaultWidthX,c=y._nominalWidthX}else a=t.tables.cff.topDict._subrs,l=t.tables.cff.topDict._subrsBias,h=t.tables.cff.topDict._defaultWidthX,c=t.tables.cff.topDict._nominalWidthX;var b=h;function x(t,e){m&&u.closePath(),u.moveTo(t,e),m=!0}function S(){var t;t=d.length%2!==0,t&&!f&&(b=d.shift()+c),p+=d.length>>1,d.length=0,f=!0}function w(i){var h,_,y,C,M,T,k,E,L,A,P,R,O=0;while(O<i.length){var I=i[O];switch(O+=1,I){case 1:S();break;case 3:S();break;case 4:d.length>1&&!f&&(b=d.shift()+c,f=!0),v+=d.pop(),x(g,v);break;case 5:while(d.length>0)g+=d.shift(),v+=d.shift(),u.lineTo(g,v);break;case 6:while(d.length>0){if(g+=d.shift(),u.lineTo(g,v),0===d.length)break;v+=d.shift(),u.lineTo(g,v)}break;case 7:while(d.length>0){if(v+=d.shift(),u.lineTo(g,v),0===d.length)break;g+=d.shift(),u.lineTo(g,v)}break;case 8:while(d.length>0)n=g+d.shift(),s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),g=r+d.shift(),v=o+d.shift(),u.curveTo(n,s,r,o,g,v);break;case 10:M=d.pop()+l,T=a[M],T&&w(T);break;case 11:return;case 12:switch(I=i[O],O+=1,I){case 35:n=g+d.shift(),s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),k=r+d.shift(),E=o+d.shift(),L=k+d.shift(),A=E+d.shift(),P=L+d.shift(),R=A+d.shift(),g=P+d.shift(),v=R+d.shift(),d.shift(),u.curveTo(n,s,r,o,k,E),u.curveTo(L,A,P,R,g,v);break;case 34:n=g+d.shift(),s=v,r=n+d.shift(),o=s+d.shift(),k=r+d.shift(),E=o,L=k+d.shift(),A=o,P=L+d.shift(),R=v,g=P+d.shift(),u.curveTo(n,s,r,o,k,E),u.curveTo(L,A,P,R,g,v);break;case 36:n=g+d.shift(),s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),k=r+d.shift(),E=o,L=k+d.shift(),A=o,P=L+d.shift(),R=A+d.shift(),g=P+d.shift(),u.curveTo(n,s,r,o,k,E),u.curveTo(L,A,P,R,g,v);break;case 37:n=g+d.shift(),s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),k=r+d.shift(),E=o+d.shift(),L=k+d.shift(),A=E+d.shift(),P=L+d.shift(),R=A+d.shift(),Math.abs(P-g)>Math.abs(R-v)?g=P+d.shift():v=R+d.shift(),u.curveTo(n,s,r,o,k,E),u.curveTo(L,A,P,R,g,v);break;default:console.log("Glyph "+e.index+": unknown operator 1200"+I),d.length=0}break;case 14:d.length>0&&!f&&(b=d.shift()+c,f=!0),m&&(u.closePath(),m=!1);break;case 18:S();break;case 19:case 20:S(),O+=p+7>>3;break;case 21:d.length>2&&!f&&(b=d.shift()+c,f=!0),v+=d.pop(),g+=d.pop(),x(g,v);break;case 22:d.length>1&&!f&&(b=d.shift()+c,f=!0),g+=d.pop(),x(g,v);break;case 23:S();break;case 24:while(d.length>2)n=g+d.shift(),s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),g=r+d.shift(),v=o+d.shift(),u.curveTo(n,s,r,o,g,v);g+=d.shift(),v+=d.shift(),u.lineTo(g,v);break;case 25:while(d.length>6)g+=d.shift(),v+=d.shift(),u.lineTo(g,v);n=g+d.shift(),s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),g=r+d.shift(),v=o+d.shift(),u.curveTo(n,s,r,o,g,v);break;case 26:d.length%2&&(g+=d.shift());while(d.length>0)n=g,s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),g=r,v=o+d.shift(),u.curveTo(n,s,r,o,g,v);break;case 27:d.length%2&&(v+=d.shift());while(d.length>0)n=g+d.shift(),s=v,r=n+d.shift(),o=s+d.shift(),g=r+d.shift(),v=o,u.curveTo(n,s,r,o,g,v);break;case 28:h=i[O],_=i[O+1],d.push((h<<24|_<<16)>>16),O+=2;break;case 29:M=d.pop()+t.gsubrsBias,T=t.gsubrs[M],T&&w(T);break;case 30:while(d.length>0){if(n=g,s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),g=r+d.shift(),v=o+(1===d.length?d.shift():0),u.curveTo(n,s,r,o,g,v),0===d.length)break;n=g+d.shift(),s=v,r=n+d.shift(),o=s+d.shift(),v=o+d.shift(),g=r+(1===d.length?d.shift():0),u.curveTo(n,s,r,o,g,v)}break;case 31:while(d.length>0){if(n=g+d.shift(),s=v,r=n+d.shift(),o=s+d.shift(),v=o+d.shift(),g=r+(1===d.length?d.shift():0),u.curveTo(n,s,r,o,g,v),0===d.length)break;n=g,s=v+d.shift(),r=n+d.shift(),o=s+d.shift(),g=r+d.shift(),v=o+(1===d.length?d.shift():0),u.curveTo(n,s,r,o,g,v)}break;default:I<32?console.log("Glyph "+e.index+": unknown operator "+I):I<247?d.push(I-139):I<251?(h=i[O],O+=1,d.push(256*(I-247)+h+108)):I<255?(h=i[O],O+=1,d.push(256*-(I-251)-h-108)):(h=i[O],_=i[O+1],y=i[O+2],C=i[O+3],O+=4,d.push((h<<24|_<<16|y<<8|C)/65536))}}}return w(i),e.advanceWidth=b,u}function ue(t,e,i,n){var s,r=[],o=new gt.Parser(t,e),a=o.parseCard8();if(0===a)for(var l=0;l<i;l++){if(s=o.parseCard8(),s>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+n+")");r.push(s)}else{if(3!==a)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);var h,c=o.parseCard16(),u=o.parseCard16();if(0!==u)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+u);for(var d=0;d<c;d++){if(s=o.parseCard8(),h=o.parseCard16(),s>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+n+")");if(h>i)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;u<h;u++)r.push(s);u=h}if(h!==i)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}return r}function de(t,e,i,n){i.tables.cff={};var s=ie(t,e),r=jt(t,s.endOffset,gt.bytesToString),o=jt(t,r.endOffset),a=jt(t,o.endOffset,gt.bytesToString),l=jt(t,a.endOffset);i.gsubrs=l.objects,i.gsubrsBias=Wt(i.gsubrs);var h=ae(t,e,o.objects,a.objects);if(1!==h.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+h.length);var c=h[0];if(i.tables.cff.topDict=c,c._privateDict&&(i.defaultWidthX=c._privateDict.defaultWidthX,i.nominalWidthX=c._privateDict.nominalWidthX),void 0!==c.ros[0]&&void 0!==c.ros[1]&&(i.isCIDFont=!0),i.isCIDFont){var u=c.fdArray,d=c.fdSelect;if(0===u||0===d)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");u+=e;var p=jt(t,u),f=ae(t,e,p.objects,a.objects);c._fdArray=f,d+=e,c._fdSelect=ue(t,d,i.numGlyphs,f.length)}var m,g=e+c.private[1],v=oe(t,g,c.private[0],a.objects);if(i.defaultWidthX=v.defaultWidthX,i.nominalWidthX=v.nominalWidthX,0!==v.subrs){var _=g+v.subrs,y=jt(t,_);i.subrs=y.objects,i.subrsBias=Wt(i.subrs)}else i.subrs=[],i.subrsBias=0;n.lowMemory?(m=Yt(t,e+c.charStrings),i.nGlyphs=m.offsets.length):(m=jt(t,e+c.charStrings),i.nGlyphs=m.objects.length);var b=le(t,e+c.charset,i.nGlyphs,a.objects);if(0===c.encoding?i.cffEncoding=new At(Mt,b):1===c.encoding?i.cffEncoding=new At(Tt,b):i.cffEncoding=he(t,e+c.encoding,b),i.encoding=i.encoding||i.cffEncoding,i.glyphs=new Ht.GlyphSet(i),n.lowMemory)i._push=function(n){var s=Xt(n,m.offsets,t,e+c.charStrings);i.glyphs.push(n,Ht.cffGlyphLoader(i,n,ce,s))};else for(var x=0;x<i.nGlyphs;x+=1){var S=m.objects[x];i.glyphs.push(x,Ht.cffGlyphLoader(i,x,ce,S))}}function pe(t,e){var i,n=Ct.indexOf(t);return n>=0&&(i=n),n=e.indexOf(t),n>=0?i=n+Ct.length:(i=Ct.length+e.length,e.push(t)),i}function fe(){return new nt.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function me(t){var e=new nt.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var i=0;i<t.length;i+=1)e.names.push({name:"name_"+i,type:"NAME",value:t[i]});return e}function ge(t,e,i){for(var n={},s=0;s<t.length;s+=1){var r=t[s],o=e[r.name];void 0===o||Gt(o,r.value)||("SID"===r.type&&(o=pe(o,i)),n[r.op]={name:r.name,type:r.type,value:o})}return n}function ve(t,e){var i=new nt.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return i.dict=ge(ne,t,e),i}function _e(t){var e=new nt.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function ye(t){var e=new nt.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var i=0;i<t.length;i+=1)e.strings.push({name:"string_"+i,type:"STRING",value:t[i]});return e}function be(){return new nt.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function xe(t,e){for(var i=new nt.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<t.length;n+=1){var s=t[n],r=pe(s,e);i.fields.push({name:"glyph_"+n,type:"SID",value:r})}return i}function Se(t){var e=[],i=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var n=0,s=0,r=0;r<i.commands.length;r+=1){var o=void 0,a=void 0,l=i.commands[r];if("Q"===l.type){var h=1/3,c=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(h*n+c*l.x1),y1:Math.round(h*s+c*l.y1),x2:Math.round(h*l.x+c*l.x1),y2:Math.round(h*l.y+c*l.y1)}}if("M"===l.type)o=Math.round(l.x-n),a=Math.round(l.y-s),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(l.x),s=Math.round(l.y);else if("L"===l.type)o=Math.round(l.x-n),a=Math.round(l.y-s),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),n=Math.round(l.x),s=Math.round(l.y);else if("C"===l.type){var u=Math.round(l.x1-n),d=Math.round(l.y1-s),p=Math.round(l.x2-l.x1),f=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:u}),e.push({name:"dy1",type:"NUMBER",value:d}),e.push({name:"dx2",type:"NUMBER",value:p}),e.push({name:"dy2",type:"NUMBER",value:f}),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(l.x),s=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function we(t){for(var e=new nt.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),i=0;i<t.length;i+=1){var n=t.get(i),s=Se(n);e.charStrings.push({name:n.name,type:"CHARSTRING",value:s})}return e}function Ce(t,e){var i=new nt.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return i.dict=ge(se,t,e),i}function Me(t,e){for(var i,n=new nt.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),s=1/e.unitsPerEm,r={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[s,0,0,s,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o={},a=[],l=1;l<t.length;l+=1)i=t.get(l),a.push(i.name);var h=[];n.header=fe(),n.nameIndex=me([e.postScriptName]);var c=ve(r,h);n.topDictIndex=_e(c),n.globalSubrIndex=be(),n.charsets=xe(a,h),n.charStringsIndex=we(t),n.privateDict=Ce(o,h),n.stringIndex=ye(h);var u=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return r.charset=u,r.encoding=0,r.charStrings=r.charset+n.charsets.sizeOf(),r.private[1]=r.charStrings+n.charStringsIndex.sizeOf(),c=ve(r,h),n.topDictIndex=_e(c),n}var Te={parse:de,make:Me};function ke(t,e){var i={},n=new gt.Parser(t,e);return i.version=n.parseVersion(),i.fontRevision=Math.round(1e3*n.parseFixed())/1e3,i.checkSumAdjustment=n.parseULong(),i.magicNumber=n.parseULong(),O.argument(1594834165===i.magicNumber,"Font header has wrong magic number."),i.flags=n.parseUShort(),i.unitsPerEm=n.parseUShort(),i.created=n.parseLongDateTime(),i.modified=n.parseLongDateTime(),i.xMin=n.parseShort(),i.yMin=n.parseShort(),i.xMax=n.parseShort(),i.yMax=n.parseShort(),i.macStyle=n.parseUShort(),i.lowestRecPPEM=n.parseUShort(),i.fontDirectionHint=n.parseShort(),i.indexToLocFormat=n.parseShort(),i.glyphDataFormat=n.parseShort(),i}function Ee(t){var e=Math.round((new Date).getTime()/1e3)+2082844800,i=e;return t.createdTimestamp&&(i=t.createdTimestamp+2082844800),new nt.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:i},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var Le={parse:ke,make:Ee};function Ae(t,e){var i={},n=new gt.Parser(t,e);return i.version=n.parseVersion(),i.ascender=n.parseShort(),i.descender=n.parseShort(),i.lineGap=n.parseShort(),i.advanceWidthMax=n.parseUShort(),i.minLeftSideBearing=n.parseShort(),i.minRightSideBearing=n.parseShort(),i.xMaxExtent=n.parseShort(),i.caretSlopeRise=n.parseShort(),i.caretSlopeRun=n.parseShort(),i.caretOffset=n.parseShort(),n.relativeOffset+=8,i.metricDataFormat=n.parseShort(),i.numberOfHMetrics=n.parseUShort(),i}function Pe(t){return new nt.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var Re={parse:Ae,make:Pe};function Oe(t,e,i,n,s){for(var r,o,a=new gt.Parser(t,e),l=0;l<n;l+=1){l<i&&(r=a.parseUShort(),o=a.parseShort());var h=s.get(l);h.advanceWidth=r,h.leftSideBearing=o}}function Ie(t,e,i,n,s){var r,o;t._hmtxTableData={};for(var a=new gt.Parser(e,i),l=0;l<s;l+=1)l<n&&(r=a.parseUShort(),o=a.parseShort()),t._hmtxTableData[l]={advanceWidth:r,leftSideBearing:o}}function De(t,e,i,n,s,r,o){o.lowMemory?Ie(t,e,i,n,s):Oe(e,i,n,s,r)}function Ne(t){for(var e=new nt.Table("hmtx",[]),i=0;i<t.length;i+=1){var n=t.get(i),s=n.advanceWidth||0,r=n.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+i,type:"USHORT",value:s}),e.fields.push({name:"leftSideBearing_"+i,type:"SHORT",value:r})}return e}var ze={parse:De,make:Ne};function qe(t){for(var e=new nt.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),i="",n=12+4*t.length,s=0;s<t.length;++s){var r=i.indexOf(t[s]);r<0&&(r=i.length,i+=t[s]),e.fields.push({name:"offset "+s,type:"USHORT",value:n+r}),e.fields.push({name:"length "+s,type:"USHORT",value:t[s].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:i}),e}function Be(t,e){var i=new gt.Parser(t,e),n=i.parseULong();O.argument(1===n,"Unsupported ltag table version."),i.skip("uLong",1);for(var s=i.parseULong(),r=[],o=0;o<s;o++){for(var a="",l=e+i.parseUShort(),h=i.parseUShort(),c=l;c<l+h;++c)a+=String.fromCharCode(t.getInt8(c));r.push(a)}return r}var Fe={make:qe,parse:Be};function Ue(t,e){var i={},n=new gt.Parser(t,e);return i.version=n.parseVersion(),i.numGlyphs=n.parseUShort(),1===i.version&&(i.maxPoints=n.parseUShort(),i.maxContours=n.parseUShort(),i.maxCompositePoints=n.parseUShort(),i.maxCompositeContours=n.parseUShort(),i.maxZones=n.parseUShort(),i.maxTwilightPoints=n.parseUShort(),i.maxStorage=n.parseUShort(),i.maxFunctionDefs=n.parseUShort(),i.maxInstructionDefs=n.parseUShort(),i.maxStackElements=n.parseUShort(),i.maxSizeOfInstructions=n.parseUShort(),i.maxComponentElements=n.parseUShort(),i.maxComponentDepth=n.parseUShort()),i}function $e(t){return new nt.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var Ve={parse:Ue,make:$e},He=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ge={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},We={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},je={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Ye(t,e,i){switch(t){case 0:if(65535===e)return"und";if(i)return i[e];break;case 1:return Ge[e];case 3:return je[e]}}var Xe="utf-16",Qe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ke={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Ze(t,e,i){switch(t){case 0:return Xe;case 1:return Ke[i]||Qe[e];case 3:if(1===e||10===e)return Xe;break}}function Je(t,e,i){for(var n={},s=new gt.Parser(t,e),r=s.parseUShort(),o=s.parseUShort(),a=s.offset+s.parseUShort(),l=0;l<o;l++){var h=s.parseUShort(),c=s.parseUShort(),u=s.parseUShort(),d=s.parseUShort(),p=He[d]||d,f=s.parseUShort(),m=s.parseUShort(),g=Ye(h,u,i),v=Ze(h,c,u);if(void 0!==v&&void 0!==g){var _=void 0;if(_=v===Xe?N.UTF16(t,a+m,f):N.MACSTRING(t,a+m,f,v),_){var y=n[p];void 0===y&&(y=n[p]={}),y[g]=_}}}return 1===r&&s.parseUShort(),n}function ti(t){var e={};for(var i in t)e[t[i]]=parseInt(i);return e}function ei(t,e,i,n,s,r){return new nt.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:i},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:s},{name:"offset",type:"USHORT",value:r}])}function ii(t,e){var i=t.length,n=e.length-i+1;t:for(var s=0;s<n;s++)for(;s<n;s++){for(var r=0;r<i;r++)if(e[s+r]!==t[r])continue t;return s}return-1}function ni(t,e){var i=ii(t,e);if(i<0){i=e.length;for(var n=0,s=t.length;n<s;++n)e.push(t[n])}return i}function si(t,e){var i,n=[],s={},r=ti(He);for(var o in t){var a=r[o];if(void 0===a&&(a=o),i=parseInt(a),isNaN(i))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');s[i]=t[o],n.push(i)}for(var l=ti(Ge),h=ti(je),c=[],u=[],d=0;d<n.length;d++){i=n[d];var p=s[i];for(var f in p){var m=p[f],g=1,v=l[f],_=We[v],y=Ze(g,_,v),b=z.MACSTRING(m,y);void 0===b&&(g=0,v=e.indexOf(f),v<0&&(v=e.length,e.push(f)),_=4,b=z.UTF16(m));var x=ni(b,u);c.push(ei(g,_,v,i,b.length,x));var S=h[f];if(void 0!==S){var w=z.UTF16(m),C=ni(w,u);c.push(ei(3,1,S,i,w.length,C))}}}c.sort((function(t,e){return t.platformID-e.platformID||t.encodingID-e.encodingID||t.languageID-e.languageID||t.nameID-e.nameID}));for(var M=new nt.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),T=0;T<c.length;T++)M.fields.push({name:"record_"+T,type:"RECORD",value:c[T]});return M.fields.push({name:"strings",type:"LITERAL",value:u}),M}var ri={parse:Je,make:si},oi=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function ai(t){for(var e=0;e<oi.length;e+=1){var i=oi[e];if(t>=i.begin&&t<i.end)return e}return-1}function li(t,e){var i={},n=new gt.Parser(t,e);i.version=n.parseUShort(),i.xAvgCharWidth=n.parseShort(),i.usWeightClass=n.parseUShort(),i.usWidthClass=n.parseUShort(),i.fsType=n.parseUShort(),i.ySubscriptXSize=n.parseShort(),i.ySubscriptYSize=n.parseShort(),i.ySubscriptXOffset=n.parseShort(),i.ySubscriptYOffset=n.parseShort(),i.ySuperscriptXSize=n.parseShort(),i.ySuperscriptYSize=n.parseShort(),i.ySuperscriptXOffset=n.parseShort(),i.ySuperscriptYOffset=n.parseShort(),i.yStrikeoutSize=n.parseShort(),i.yStrikeoutPosition=n.parseShort(),i.sFamilyClass=n.parseShort(),i.panose=[];for(var s=0;s<10;s++)i.panose[s]=n.parseByte();return i.ulUnicodeRange1=n.parseULong(),i.ulUnicodeRange2=n.parseULong(),i.ulUnicodeRange3=n.parseULong(),i.ulUnicodeRange4=n.parseULong(),i.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),i.fsSelection=n.parseUShort(),i.usFirstCharIndex=n.parseUShort(),i.usLastCharIndex=n.parseUShort(),i.sTypoAscender=n.parseShort(),i.sTypoDescender=n.parseShort(),i.sTypoLineGap=n.parseShort(),i.usWinAscent=n.parseUShort(),i.usWinDescent=n.parseUShort(),i.version>=1&&(i.ulCodePageRange1=n.parseULong(),i.ulCodePageRange2=n.parseULong()),i.version>=2&&(i.sxHeight=n.parseShort(),i.sCapHeight=n.parseShort(),i.usDefaultChar=n.parseUShort(),i.usBreakChar=n.parseUShort(),i.usMaxContent=n.parseUShort()),i}function hi(t){return new nt.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var ci={parse:li,make:hi,unicodeRanges:oi,getUnicodeRange:ai};function ui(t,e){var i={},n=new gt.Parser(t,e);switch(i.version=n.parseVersion(),i.italicAngle=n.parseFixed(),i.underlinePosition=n.parseShort(),i.underlineThickness=n.parseShort(),i.isFixedPitch=n.parseULong(),i.minMemType42=n.parseULong(),i.maxMemType42=n.parseULong(),i.minMemType1=n.parseULong(),i.maxMemType1=n.parseULong(),i.version){case 1:i.names=kt.slice();break;case 2:i.numberOfGlyphs=n.parseUShort(),i.glyphNameIndex=new Array(i.numberOfGlyphs);for(var s=0;s<i.numberOfGlyphs;s++)i.glyphNameIndex[s]=n.parseUShort();i.names=[];for(var r=0;r<i.numberOfGlyphs;r++)if(i.glyphNameIndex[r]>=kt.length){var o=n.parseChar();i.names.push(n.parseString(o))}break;case 2.5:i.numberOfGlyphs=n.parseUShort(),i.offset=new Array(i.numberOfGlyphs);for(var a=0;a<i.numberOfGlyphs;a++)i.offset[a]=n.parseChar();break}return i}function di(){return new nt.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var pi={parse:ui,make:di},fi=new Array(9);fi[1]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();return 1===e?{substFormat:1,coverage:this.parsePointer(ft.coverage),deltaGlyphId:this.parseUShort()}:2===e?{substFormat:2,coverage:this.parsePointer(ft.coverage),substitute:this.parseOffset16List()}:void O.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")},fi[2]=function(){var t=this.parseUShort();return O.argument(1===t,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),sequences:this.parseListOfLists()}},fi[3]=function(){var t=this.parseUShort();return O.argument(1===t,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),alternateSets:this.parseListOfLists()}},fi[4]=function(){var t=this.parseUShort();return O.argument(1===t,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var mi={sequenceIndex:ft.uShort,lookupListIndex:ft.uShort};function gi(t,e){e=e||0;var i=new ft(t,e),n=i.parseVersion(1);return O.argument(1===n||1.1===n,"Unsupported GSUB table version."),1===n?{version:n,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(fi)}:{version:n,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(fi),variations:i.parseFeatureVariationsList()}}fi[5]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(1===e)return{substFormat:e,coverage:this.parsePointer(ft.coverage),ruleSets:this.parseListOfLists((function(){var t=this.parseUShort(),e=this.parseUShort();return{input:this.parseUShortList(t-1),lookupRecords:this.parseRecordList(e,mi)}}))};if(2===e)return{substFormat:e,coverage:this.parsePointer(ft.coverage),classDef:this.parsePointer(ft.classDef),classSets:this.parseListOfLists((function(){var t=this.parseUShort(),e=this.parseUShort();return{classes:this.parseUShortList(t-1),lookupRecords:this.parseRecordList(e,mi)}}))};if(3===e){var i=this.parseUShort(),n=this.parseUShort();return{substFormat:e,coverages:this.parseList(i,ft.pointer(ft.coverage)),lookupRecords:this.parseRecordList(n,mi)}}O.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},fi[6]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();return 1===e?{substFormat:1,coverage:this.parsePointer(ft.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(mi)}}))}:2===e?{substFormat:2,coverage:this.parsePointer(ft.coverage),backtrackClassDef:this.parsePointer(ft.classDef),inputClassDef:this.parsePointer(ft.classDef),lookaheadClassDef:this.parsePointer(ft.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(mi)}}))}:3===e?{substFormat:3,backtrackCoverage:this.parseList(ft.pointer(ft.coverage)),inputCoverage:this.parseList(ft.pointer(ft.coverage)),lookaheadCoverage:this.parseList(ft.pointer(ft.coverage)),lookupRecords:this.parseRecordList(mi)}:void O.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},fi[7]=function(){var t=this.parseUShort();O.argument(1===t,"GSUB Extension Substitution subtable identifier-format must be 1");var e=this.parseUShort(),i=new ft(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:e,extension:fi[e].call(i)}},fi[8]=function(){var t=this.parseUShort();return O.argument(1===t,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ft.coverage),backtrackCoverage:this.parseList(ft.pointer(ft.coverage)),lookaheadCoverage:this.parseList(ft.pointer(ft.coverage)),substitutes:this.parseUShortList()}};var vi=new Array(9);function _i(t){return new nt.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new nt.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new nt.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new nt.LookupList(t.lookups,vi)}])}vi[1]=function(t){return 1===t.substFormat?new nt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nt.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new nt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new nt.Coverage(t.coverage)}].concat(nt.ushortList("substitute",t.substitute)))},vi[2]=function(t){return O.assert(1===t.substFormat,"Lookup type 2 substFormat must be 1."),new nt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nt.Coverage(t.coverage)}].concat(nt.tableList("seqSet",t.sequences,(function(t){return new nt.Table("sequenceSetTable",nt.ushortList("sequence",t))}))))},vi[3]=function(t){return O.assert(1===t.substFormat,"Lookup type 3 substFormat must be 1."),new nt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nt.Coverage(t.coverage)}].concat(nt.tableList("altSet",t.alternateSets,(function(t){return new nt.Table("alternateSetTable",nt.ushortList("alternate",t))}))))},vi[4]=function(t){return O.assert(1===t.substFormat,"Lookup type 4 substFormat must be 1."),new nt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nt.Coverage(t.coverage)}].concat(nt.tableList("ligSet",t.ligatureSets,(function(t){return new nt.Table("ligatureSetTable",nt.tableList("ligature",t,(function(t){return new nt.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:t.ligGlyph}].concat(nt.ushortList("component",t.components,t.components.length+1)))})))}))))},vi[6]=function(t){if(1===t.substFormat){var e=new nt.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:t.substFormat},{name:"coverage",type:"TABLE",value:new nt.Coverage(t.coverage)}].concat(nt.tableList("chainRuleSet",t.chainRuleSets,(function(t){return new nt.Table("chainRuleSetTable",nt.tableList("chainRule",t,(function(t){var e=nt.ushortList("backtrackGlyph",t.backtrack,t.backtrack.length).concat(nt.ushortList("inputGlyph",t.input,t.input.length+1)).concat(nt.ushortList("lookaheadGlyph",t.lookahead,t.lookahead.length)).concat(nt.ushortList("substitution",[],t.lookupRecords.length));return t.lookupRecords.forEach((function(t,i){e=e.concat({name:"sequenceIndex"+i,type:"USHORT",value:t.sequenceIndex}).concat({name:"lookupListIndex"+i,type:"USHORT",value:t.lookupListIndex})})),new nt.Table("chainRuleTable",e)})))}))));return e}if(2===t.substFormat)O.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===t.substFormat){var i=[{name:"substFormat",type:"USHORT",value:t.substFormat}];i.push({name:"backtrackGlyphCount",type:"USHORT",value:t.backtrackCoverage.length}),t.backtrackCoverage.forEach((function(t,e){i.push({name:"backtrackCoverage"+e,type:"TABLE",value:new nt.Coverage(t)})})),i.push({name:"inputGlyphCount",type:"USHORT",value:t.inputCoverage.length}),t.inputCoverage.forEach((function(t,e){i.push({name:"inputCoverage"+e,type:"TABLE",value:new nt.Coverage(t)})})),i.push({name:"lookaheadGlyphCount",type:"USHORT",value:t.lookaheadCoverage.length}),t.lookaheadCoverage.forEach((function(t,e){i.push({name:"lookaheadCoverage"+e,type:"TABLE",value:new nt.Coverage(t)})})),i.push({name:"substitutionCount",type:"USHORT",value:t.lookupRecords.length}),t.lookupRecords.forEach((function(t,e){i=i.concat({name:"sequenceIndex"+e,type:"USHORT",value:t.sequenceIndex}).concat({name:"lookupListIndex"+e,type:"USHORT",value:t.lookupListIndex})}));var n=new nt.Table("chainContextTable",i);return n}O.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var yi={parse:gi,make:_i};function bi(t,e){var i=new gt.Parser(t,e),n=i.parseULong();O.argument(1===n,"Unsupported META table version."),i.parseULong(),i.parseULong();for(var s=i.parseULong(),r={},o=0;o<s;o++){var a=i.parseTag(),l=i.parseULong(),h=i.parseULong(),c=N.UTF8(t,e+l,h);r[a]=c}return r}function xi(t){var e=Object.keys(t).length,i="",n=16+12*e,s=new nt.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:e}]);for(var r in t){var o=i.length;i+=t[r],s.fields.push({name:"tag "+r,type:"TAG",value:r}),s.fields.push({name:"offset "+r,type:"ULONG",value:n+o}),s.fields.push({name:"length "+r,type:"ULONG",value:t[r].length})}return s.fields.push({name:"stringPool",type:"CHARARRAY",value:i}),s}var Si={parse:bi,make:xi};function wi(t){return Math.log(t)/Math.log(2)|0}function Ci(t){while(t.length%4!==0)t.push(0);for(var e=0,i=0;i<t.length;i+=4)e+=(t[i]<<24)+(t[i+1]<<16)+(t[i+2]<<8)+t[i+3];return e%=Math.pow(2,32),e}function Mi(t,e,i,n){return new nt.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==t?t:""},{name:"checkSum",type:"ULONG",value:void 0!==e?e:0},{name:"offset",type:"ULONG",value:void 0!==i?i:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function Ti(t){var e=new nt.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;var i=Math.pow(2,wi(e.numTables));e.searchRange=16*i,e.entrySelector=wi(i),e.rangeShift=16*e.numTables-e.searchRange;var n=[],s=[],r=e.sizeOf()+Mi().sizeOf()*e.numTables;while(r%4!==0)r+=1,s.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<t.length;o+=1){var a=t[o];O.argument(4===a.tableName.length,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),h=Mi(a.tableName,Ci(a.encode()),r,l);n.push({name:h.tag+" Table Record",type:"RECORD",value:h}),s.push({name:a.tableName+" table",type:"RECORD",value:a}),r+=l,O.argument(!isNaN(r),"Something went wrong calculating the offset.");while(r%4!==0)r+=1,s.push({name:"padding",type:"BYTE",value:0})}return n.sort((function(t,e){return t.value.tag>e.value.tag?1:-1})),e.fields=e.fields.concat(n),e.fields=e.fields.concat(s),e}function ki(t,e,i){for(var n=0;n<e.length;n+=1){var s=t.charToGlyphIndex(e[n]);if(s>0){var r=t.glyphs.get(s);return r.getMetrics()}}return i}function Ei(t){for(var e=0,i=0;i<t.length;i+=1)e+=t[i];return e/t.length}function Li(t){for(var e,i=[],n=[],s=[],r=[],o=[],a=[],l=[],h=0,c=0,u=0,d=0,p=0,f=0;f<t.glyphs.length;f+=1){var m=t.glyphs.get(f),g=0|m.unicode;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+f+"): advanceWidth is not a number.");(e>g||void 0===e)&&g>0&&(e=g),h<g&&(h=g);var v=ci.getUnicodeRange(g);if(v<32)c|=1<<v;else if(v<64)u|=1<<v-32;else if(v<96)d|=1<<v-64;else{if(!(v<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<v-96}if(".notdef"!==m.name){var _=m.getMetrics();i.push(_.xMin),n.push(_.yMin),s.push(_.xMax),r.push(_.yMax),a.push(_.leftSideBearing),l.push(_.rightSideBearing),o.push(m.advanceWidth)}}var y={xMin:Math.min.apply(null,i),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,s),yMax:Math.max.apply(null,r),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:Ei(o),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,l)};y.ascender=t.ascender,y.descender=t.descender;var b=Le.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp}),x=Re.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:t.glyphs.length}),S=Ve.make(t.glyphs.length),w=ci.make(Object.assign({xAvgCharWidth:Math.round(y.advanceWidthAvg),usFirstCharIndex:e,usLastCharIndex:h,ulUnicodeRange1:c,ulUnicodeRange2:u,ulUnicodeRange3:d,ulUnicodeRange4:p,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:ki(t,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:ki(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0},t.tables.os2)),C=ze.make(t.glyphs),M=wt.make(t.glyphs),T=t.getEnglishName("fontFamily"),k=t.getEnglishName("fontSubfamily"),E=T+" "+k,L=t.getEnglishName("postScriptName");L||(L=T.replace(/\s/g,"")+"-"+k);var A={};for(var P in t.names)A[P]=t.names[P];A.uniqueID||(A.uniqueID={en:t.getEnglishName("manufacturer")+":"+E}),A.postScriptName||(A.postScriptName={en:L}),A.preferredFamily||(A.preferredFamily=t.names.fontFamily),A.preferredSubfamily||(A.preferredSubfamily=t.names.fontSubfamily);var R=[],O=ri.make(A,R),I=R.length>0?Fe.make(R):void 0,D=pi.make(),N=Te.make(t.glyphs,{version:t.getEnglishName("version"),fullName:E,familyName:T,weightName:k,postScriptName:L,unitsPerEm:t.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),z=t.metas&&Object.keys(t.metas).length>0?Si.make(t.metas):void 0,q=[b,x,S,w,O,M,D,N,C];I&&q.push(I),t.tables.gsub&&q.push(yi.make(t.tables.gsub)),z&&q.push(z);for(var B=Ti(q),F=B.encode(),U=Ci(F),$=B.fields,V=!1,H=0;H<$.length;H+=1)if("head table"===$[H].name){$[H].value.checkSumAdjustment=2981146554-U,V=!0;break}if(!V)throw new Error("Could not find head table with checkSum to adjust.");return B}var Ai={make:Ti,fontToTable:Li,computeCheckSum:Ci};function Pi(t,e){var i=0,n=t.length-1;while(i<=n){var s=i+n>>>1,r=t[s].tag;if(r===e)return s;r<e?i=s+1:n=s-1}return-i-1}function Ri(t,e){var i=0,n=t.length-1;while(i<=n){var s=i+n>>>1,r=t[s];if(r===e)return s;r<e?i=s+1:n=s-1}return-i-1}function Oi(t,e){var i,n=0,s=t.length-1;while(n<=s){var r=n+s>>>1;i=t[r];var o=i.start;if(o===e)return i;o<e?n=r+1:s=r-1}if(n>0)return i=t[n-1],e>i.end?0:i}function Ii(t,e){this.font=t,this.tableName=e}function Di(t){Ii.call(this,t,"gpos")}function Ni(t){Ii.call(this,t,"gsub")}function zi(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function qi(t,e,i){for(var n=t.subtables,s=0;s<n.length;s++){var r=n[s];if(r.substFormat===e)return r}if(i)return n.push(i),i}function Bi(){return"undefined"!==typeof window}function Fi(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n<t.length;++n)i[n]=t[n];return e}function Ui(e){for(var i=new t(e.byteLength),n=new Uint8Array(e),s=0;s<i.length;++s)i[s]=n[s];return i}function $i(t,e){if(!t)throw e}function Vi(t,e,i,n,s){var r;return(e&n)>0?(r=t.parseByte(),0===(e&s)&&(r=-r),r=i+r):r=(e&s)>0?i:i+t.parseShort(),r}function Hi(t,e,i){var n,s,r=new gt.Parser(e,i);if(t.numberOfContours=r.parseShort(),t._xMin=r.parseShort(),t._yMin=r.parseShort(),t._xMax=r.parseShort(),t._yMax=r.parseShort(),t.numberOfContours>0){for(var o=t.endPointIndices=[],a=0;a<t.numberOfContours;a+=1)o.push(r.parseUShort());t.instructionLength=r.parseUShort(),t.instructions=[];for(var l=0;l<t.instructionLength;l+=1)t.instructions.push(r.parseByte());var h=o[o.length-1]+1;n=[];for(var c=0;c<h;c+=1)if(s=r.parseByte(),n.push(s),(8&s)>0)for(var u=r.parseByte(),d=0;d<u;d+=1)n.push(s),c+=1;if(O.argument(n.length===h,"Bad flags."),o.length>0){var p,f=[];if(h>0){for(var m=0;m<h;m+=1)s=n[m],p={},p.onCurve=!!(1&s),p.lastPointOfContour=o.indexOf(m)>=0,f.push(p);for(var g=0,v=0;v<h;v+=1)s=n[v],p=f[v],p.x=Vi(r,s,g,2,16),g=p.x;for(var _=0,y=0;y<h;y+=1)s=n[y],p=f[y],p.y=Vi(r,s,_,4,32),_=p.y}t.points=f}else t.points=[]}else if(0===t.numberOfContours)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];var b=!0;while(b){n=r.parseUShort();var x={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&n)>0?(2&n)>0?(x.dx=r.parseShort(),x.dy=r.parseShort()):x.matchedPoints=[r.parseUShort(),r.parseUShort()]:(2&n)>0?(x.dx=r.parseChar(),x.dy=r.parseChar()):x.matchedPoints=[r.parseByte(),r.parseByte()],(8&n)>0?x.xScale=x.yScale=r.parseF2Dot14():(64&n)>0?(x.xScale=r.parseF2Dot14(),x.yScale=r.parseF2Dot14()):(128&n)>0&&(x.xScale=r.parseF2Dot14(),x.scale01=r.parseF2Dot14(),x.scale10=r.parseF2Dot14(),x.yScale=r.parseF2Dot14()),t.components.push(x),b=!!(32&n)}if(256&n){t.instructionLength=r.parseUShort(),t.instructions=[];for(var S=0;S<t.instructionLength;S+=1)t.instructions.push(r.parseByte())}}}function Gi(t,e){for(var i=[],n=0;n<t.length;n+=1){var s=t[n],r={x:e.xScale*s.x+e.scale01*s.y+e.dx,y:e.scale10*s.x+e.yScale*s.y+e.dy,onCurve:s.onCurve,lastPointOfContour:s.lastPointOfContour};i.push(r)}return i}function Wi(t){for(var e=[],i=[],n=0;n<t.length;n+=1){var s=t[n];i.push(s),s.lastPointOfContour&&(e.push(i),i=[])}return O.argument(0===i.length,"There are still points left in the current contour."),e}function ji(t){var e=new A;if(!t)return e;for(var i=Wi(t),n=0;n<i.length;++n){var s=i[n],r=null,o=s[s.length-1],a=s[0];if(o.onCurve)e.moveTo(o.x,o.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:.5*(o.x+a.x),y:.5*(o.y+a.y)};e.moveTo(l.x,l.y)}for(var h=0;h<s.length;++h)if(r=o,o=a,a=s[(h+1)%s.length],o.onCurve)e.lineTo(o.x,o.y);else{var c=a;r.onCurve||{x:.5*(o.x+r.x),y:.5*(o.y+r.y)},a.onCurve||(c={x:.5*(o.x+a.x),y:.5*(o.y+a.y)}),e.quadraticCurveTo(o.x,o.y,c.x,c.y)}e.closePath()}return e}function Yi(t,e){if(e.isComposite)for(var i=0;i<e.components.length;i+=1){var n=e.components[i],s=t.get(n.glyphIndex);if(s.getPath(),s.points){var r=void 0;if(void 0===n.matchedPoints)r=Gi(s.points,n);else{if(n.matchedPoints[0]>e.points.length-1||n.matchedPoints[1]>s.points.length-1)throw Error("Matched points out of range in "+e.name);var o=e.points[n.matchedPoints[0]],a=s.points[n.matchedPoints[1]],l={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};a=Gi([a],l)[0],l.dx=o.x-a.x,l.dy=o.y-a.y,r=Gi(s.points,l)}e.points=e.points.concat(r)}}return ji(e.points)}function Xi(t,e,i,n){for(var s=new Ht.GlyphSet(n),r=0;r<i.length-1;r+=1){var o=i[r],a=i[r+1];o!==a?s.push(r,Ht.ttfGlyphLoader(n,r,Hi,t,e+o,Yi)):s.push(r,Ht.glyphLoader(n,r))}return s}function Qi(t,e,i,n){var s=new Ht.GlyphSet(n);return n._push=function(r){var o=i[r],a=i[r+1];o!==a?s.push(r,Ht.ttfGlyphLoader(n,r,Hi,t,e+o,Yi)):s.push(r,Ht.glyphLoader(n,r))},s}function Ki(t,e,i,n,s){return s.lowMemory?Qi(t,e,i,n):Xi(t,e,i,n)}Ii.prototype={searchTag:Pi,binSearch:Ri,getTable:function(t){var e=this.font.tables[this.tableName];return!e&&t&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var t=this.getTable();return t?t.scripts.map((function(t){return t.tag})):[]},getDefaultScriptName:function(){var t=this.getTable();if(t){for(var e=!1,i=0;i<t.scripts.length;i++){var n=t.scripts[i].tag;if("DFLT"===n)return n;"latn"===n&&(e=!0)}return e?"latn":void 0}},getScriptTable:function(t,e){var i=this.getTable(e);if(i){t=t||"DFLT";var n=i.scripts,s=Pi(i.scripts,t);if(s>=0)return n[s].script;if(e){var r={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-s,0,r),r.script}}},getLangSysTable:function(t,e,i){var n=this.getScriptTable(t,i);if(n){if(!e||"dflt"===e||"DFLT"===e)return n.defaultLangSys;var s=Pi(n.langSysRecords,e);if(s>=0)return n.langSysRecords[s].langSys;if(i){var r={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return n.langSysRecords.splice(-1-s,0,r),r.langSys}}},getFeatureTable:function(t,e,i,n){var s=this.getLangSysTable(t,e,n);if(s){for(var r,o=s.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if(r=a[o[l]],r.tag===i)return r.feature;if(n){var h=a.length;return O.assert(0===h||i>=a[h-1].tag,"Features must be added in alphabetical order."),r={tag:i,feature:{params:0,lookupListIndexes:[]}},a.push(r),o.push(h),r.feature}}},getLookupTables:function(t,e,i,n,s){var r=this.getFeatureTable(t,e,i,s),o=[];if(r){for(var a,l=r.lookupListIndexes,h=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)a=h[l[c]],a.lookupType===n&&o.push(a);if(0===o.length&&s){a={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var u=h.length;return h.push(a),l.push(u),[a]}}return o},getGlyphClass:function(t,e){switch(t.format){case 1:return t.startGlyph<=e&&e<t.startGlyph+t.classes.length?t.classes[e-t.startGlyph]:0;case 2:var i=Oi(t.ranges,e);return i?i.classId:0}},getCoverageIndex:function(t,e){switch(t.format){case 1:var i=Ri(t.glyphs,e);return i>=0?i:-1;case 2:var n=Oi(t.ranges,e);return n?n.index+e-n.start:-1}},expandCoverage:function(t){if(1===t.format)return t.glyphs;for(var e=[],i=t.ranges,n=0;n<i.length;n++)for(var s=i[n],r=s.start,o=s.end,a=r;a<=o;a++)e.push(a);return e}},Di.prototype=Ii.prototype,Di.prototype.init=function(){var t=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(t)},Di.prototype.getKerningValue=function(t,e,i){for(var n=0;n<t.length;n++)for(var s=t[n].subtables,r=0;r<s.length;r++){var o=s[r],a=this.getCoverageIndex(o.coverage,e);if(!(a<0))switch(o.posFormat){case 1:for(var l=o.pairSets[a],h=0;h<l.length;h++){var c=l[h];if(c.secondGlyph===i)return c.value1&&c.value1.xAdvance||0}break;case 2:var u=this.getGlyphClass(o.classDef1,e),d=this.getGlyphClass(o.classDef2,i),p=o.classRecords[u][d];return p.value1&&p.value1.xAdvance||0}}return 0},Di.prototype.getKerningTables=function(t,e){if(this.font.tables.gpos)return this.getLookupTables(t,e,"kern",2)},Ni.prototype=Ii.prototype,Ni.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Ni.prototype.getSingle=function(t,e,i){for(var n=[],s=this.getLookupTables(e,i,t,1),r=0;r<s.length;r++)for(var o=s[r].subtables,a=0;a<o.length;a++){var l=o[a],h=this.expandCoverage(l.coverage),c=void 0;if(1===l.substFormat){var u=l.deltaGlyphId;for(c=0;c<h.length;c++){var d=h[c];n.push({sub:d,by:d+u})}}else{var p=l.substitute;for(c=0;c<h.length;c++)n.push({sub:h[c],by:p[c]})}}return n},Ni.prototype.getMultiple=function(t,e,i){for(var n=[],s=this.getLookupTables(e,i,t,2),r=0;r<s.length;r++)for(var o=s[r].subtables,a=0;a<o.length;a++){var l=o[a],h=this.expandCoverage(l.coverage),c=void 0;for(c=0;c<h.length;c++){var u=h[c],d=l.sequences[c];n.push({sub:u,by:d})}}return n},Ni.prototype.getAlternates=function(t,e,i){for(var n=[],s=this.getLookupTables(e,i,t,3),r=0;r<s.length;r++)for(var o=s[r].subtables,a=0;a<o.length;a++)for(var l=o[a],h=this.expandCoverage(l.coverage),c=l.alternateSets,u=0;u<h.length;u++)n.push({sub:h[u],by:c[u]});return n},Ni.prototype.getLigatures=function(t,e,i){for(var n=[],s=this.getLookupTables(e,i,t,4),r=0;r<s.length;r++)for(var o=s[r].subtables,a=0;a<o.length;a++)for(var l=o[a],h=this.expandCoverage(l.coverage),c=l.ligatureSets,u=0;u<h.length;u++)for(var d=h[u],p=c[u],f=0;f<p.length;f++){var m=p[f];n.push({sub:[d].concat(m.components),by:m.ligGlyph})}return n},Ni.prototype.addSingle=function(t,e,i,n){var s=this.getLookupTables(i,n,t,1,!0)[0],r=qi(s,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});O.assert(1===r.coverage.format,"Single: unable to modify coverage table format "+r.coverage.format);var o=e.sub,a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.substitute.splice(a,0,0)),r.substitute[a]=e.by},Ni.prototype.addMultiple=function(t,e,i,n){O.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');var s=this.getLookupTables(i,n,t,2,!0)[0],r=qi(s,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});O.assert(1===r.coverage.format,"Multiple: unable to modify coverage table format "+r.coverage.format);var o=e.sub,a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.sequences.splice(a,0,0)),r.sequences[a]=e.by},Ni.prototype.addAlternate=function(t,e,i,n){var s=this.getLookupTables(i,n,t,3,!0)[0],r=qi(s,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});O.assert(1===r.coverage.format,"Alternate: unable to modify coverage table format "+r.coverage.format);var o=e.sub,a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.alternateSets.splice(a,0,0)),r.alternateSets[a]=e.by},Ni.prototype.addLigature=function(t,e,i,n){var s=this.getLookupTables(i,n,t,4,!0)[0],r=s.subtables[0];r||(r={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},s.subtables[0]=r),O.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format);var o=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},h=this.binSearch(r.coverage.glyphs,o);if(h>=0){for(var c=r.ligatureSets[h],u=0;u<c.length;u++)if(zi(c[u].components,a))return;c.push(l)}else h=-1-h,r.coverage.glyphs.splice(h,0,o),r.ligatureSets.splice(h,0,[l])},Ni.prototype.getFeature=function(t,e,i){if(/ss\d\d/.test(t))return this.getSingle(t,e,i);switch(t){case"aalt":case"salt":return this.getSingle(t,e,i).concat(this.getAlternates(t,e,i));case"dlig":case"liga":case"rlig":return this.getLigatures(t,e,i);case"ccmp":return this.getMultiple(t,e,i).concat(this.getLigatures(t,e,i));case"stch":return this.getMultiple(t,e,i)}},Ni.prototype.add=function(t,e,i,n){if(/ss\d\d/.test(t))return this.addSingle(t,e,i,n);switch(t){case"aalt":case"salt":return"number"===typeof e.by?this.addSingle(t,e,i,n):this.addAlternate(t,e,i,n);case"dlig":case"liga":case"rlig":return this.addLigature(t,e,i,n);case"ccmp":return e.by instanceof Array?this.addMultiple(t,e,i,n):this.addLigature(t,e,i,n)}};var Zi,Ji,tn,en,nn={getPath:ji,parse:Ki};function sn(t){this.font=t,this.getCommands=function(t){return nn.getPath(t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function rn(t){return t}function on(t){return Math.sign(t)*Math.round(Math.abs(t))}function an(t){return Math.sign(t)*Math.round(Math.abs(2*t))/2}function ln(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function hn(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function cn(t){return Math.sign(t)*Math.floor(Math.abs(t))}var un=function(t){var e=this.srPeriod,i=this.srPhase,n=this.srThreshold,s=1;return t<0&&(t=-t,s=-1),t+=n-i,t=Math.trunc(t/e)*e,t+=i,t<0?i*s:t*s},dn={x:1,y:0,axis:"x",distance:function(t,e,i,n){return(i?t.xo:t.x)-(n?e.xo:e.x)},interpolate:function(t,e,i,n){var s,r,o,a,l,h,c;if(!n||n===this)return s=t.xo-e.xo,r=t.xo-i.xo,l=e.x-e.xo,h=i.x-i.xo,o=Math.abs(s),a=Math.abs(r),c=o+a,0===c?void(t.x=t.xo+(l+h)/2):void(t.x=t.xo+(l*a+h*o)/c);s=n.distance(t,e,!0,!0),r=n.distance(t,i,!0,!0),l=n.distance(e,e,!1,!0),h=n.distance(i,i,!1,!0),o=Math.abs(s),a=Math.abs(r),c=o+a,0!==c?dn.setRelative(t,t,(l*a+h*o)/c,n,!0):dn.setRelative(t,t,(l+h)/2,n,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,e,i,n,s){if(n&&n!==this){var r=s?e.xo:e.x,o=s?e.yo:e.y,a=r+i*n.x,l=o+i*n.y;t.x=a+(t.y-l)/n.normalSlope}else t.x=(s?e.xo:e.x)+i},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},pn={x:0,y:1,axis:"y",distance:function(t,e,i,n){return(i?t.yo:t.y)-(n?e.yo:e.y)},interpolate:function(t,e,i,n){var s,r,o,a,l,h,c;if(!n||n===this)return s=t.yo-e.yo,r=t.yo-i.yo,l=e.y-e.yo,h=i.y-i.yo,o=Math.abs(s),a=Math.abs(r),c=o+a,0===c?void(t.y=t.yo+(l+h)/2):void(t.y=t.yo+(l*a+h*o)/c);s=n.distance(t,e,!0,!0),r=n.distance(t,i,!0,!0),l=n.distance(e,e,!1,!0),h=n.distance(i,i,!1,!0),o=Math.abs(s),a=Math.abs(r),c=o+a,0!==c?pn.setRelative(t,t,(l*a+h*o)/c,n,!0):pn.setRelative(t,t,(l+h)/2,n,!0)},normalSlope:0,setRelative:function(t,e,i,n,s){if(n&&n!==this){var r=s?e.xo:e.x,o=s?e.yo:e.y,a=r+i*n.x,l=o+i*n.y;t.y=l+n.normalSlope*(t.x-a)}else t.y=(s?e.yo:e.y)+i},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};function fn(t,e){this.x=t,this.y=e,this.axis=void 0,this.slope=e/t,this.normalSlope=-t/e,Object.freeze(this)}function mn(t,e){var i=Math.sqrt(t*t+e*e);return t/=i,e/=i,1===t&&0===e?dn:0===t&&1===e?pn:new fn(t,e)}function gn(t,e,i,n){this.x=this.xo=Math.round(64*t)/64,this.y=this.yo=Math.round(64*e)/64,this.lastPointOfContour=i,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(dn),Object.freeze(pn),fn.prototype.distance=function(t,e,i,n){return this.x*dn.distance(t,e,i,n)+this.y*pn.distance(t,e,i,n)},fn.prototype.interpolate=function(t,e,i,n){var s,r,o,a,l,h,c;o=n.distance(t,e,!0,!0),a=n.distance(t,i,!0,!0),s=n.distance(e,e,!1,!0),r=n.distance(i,i,!1,!0),l=Math.abs(o),h=Math.abs(a),c=l+h,0!==c?this.setRelative(t,t,(s*h+r*l)/c,n,!0):this.setRelative(t,t,(s+r)/2,n,!0)},fn.prototype.setRelative=function(t,e,i,n,s){n=n||this;var r=s?e.xo:e.x,o=s?e.yo:e.y,a=r+i*n.x,l=o+i*n.y,h=n.normalSlope,c=this.slope,u=t.x,d=t.y;t.x=(c*u-h*a+l-d)/(c-h),t.y=c*(t.x-u)+d},fn.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0},gn.prototype.nextTouched=function(t){var e=this.nextPointOnContour;while(!t.touched(e)&&e!==this)e=e.nextPointOnContour;return e},gn.prototype.prevTouched=function(t){var e=this.prevPointOnContour;while(!t.touched(e)&&e!==this)e=e.prevPointOnContour;return e};var vn=Object.freeze(new gn(0,0)),_n={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function yn(t,e){switch(this.env=t,this.stack=[],this.prog=e,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=dn,this.round=on}}function bn(t){for(var e=t.tZone=new Array(t.gZone.length),i=0;i<e.length;i++)e[i]=new gn(0,0)}function xn(t,e){var i,n=t.prog,s=t.ip,r=1;do{if(i=n[++s],88===i)r++;else if(89===i)r--;else if(64===i)s+=n[s+1]+1;else if(65===i)s+=2*n[s+1]+1;else if(i>=176&&i<=183)s+=i-176+1;else if(i>=184&&i<=191)s+=2*(i-184+1);else if(e&&1===r&&27===i)break}while(r>0);t.ip=s}function Sn(t,e){exports.DEBUG&&console.log(e.step,"SVTCA["+t.axis+"]"),e.fv=e.pv=e.dpv=t}function wn(t,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+t.axis+"]"),e.pv=e.dpv=t}function Cn(t,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+t.axis+"]"),e.fv=t}function Mn(t,e){var i,n,s=e.stack,r=s.pop(),o=s.pop(),a=e.z2[r],l=e.z1[o];exports.DEBUG&&console.log("SPVTL["+t+"]",r,o),t?(i=a.y-l.y,n=l.x-a.x):(i=l.x-a.x,n=l.y-a.y),e.pv=e.dpv=mn(i,n)}function Tn(t,e){var i,n,s=e.stack,r=s.pop(),o=s.pop(),a=e.z2[r],l=e.z1[o];exports.DEBUG&&console.log("SFVTL["+t+"]",r,o),t?(i=a.y-l.y,n=l.x-a.x):(i=l.x-a.x,n=l.y-a.y),e.fv=mn(i,n)}function kn(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",i,n),t.pv=t.dpv=mn(n,i)}function En(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",i,n),t.fv=mn(n,i)}function Ln(t){var e=t.stack,i=t.pv;exports.DEBUG&&console.log(t.step,"GPV[]"),e.push(16384*i.x),e.push(16384*i.y)}function An(t){var e=t.stack,i=t.fv;exports.DEBUG&&console.log(t.step,"GFV[]"),e.push(16384*i.x),e.push(16384*i.y)}function Pn(t){t.fv=t.pv,exports.DEBUG&&console.log(t.step,"SFVTPV[]")}function Rn(t){var e=t.stack,i=e.pop(),n=e.pop(),s=e.pop(),r=e.pop(),o=e.pop(),a=t.z0,l=t.z1,h=a[i],c=a[n],u=l[s],d=l[r],p=t.z2[o];exports.DEBUG&&console.log("ISECT[], ",i,n,s,r,o);var f=h.x,m=h.y,g=c.x,v=c.y,_=u.x,y=u.y,b=d.x,x=d.y,S=(f-g)*(y-x)-(m-v)*(_-b),w=f*v-m*g,C=_*x-y*b;p.x=(w*(_-b)-C*(f-g))/S,p.y=(w*(y-x)-C*(m-v))/S}function On(t){t.rp0=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)}function In(t){t.rp1=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)}function Dn(t){t.rp2=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)}function Nn(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP0[]",e),t.zp0=e,e){case 0:t.tZone||bn(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function zn(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP1[]",e),t.zp1=e,e){case 0:t.tZone||bn(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function qn(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP2[]",e),t.zp2=e,e){case 0:t.tZone||bn(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function Bn(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZPS[]",e),t.zp0=t.zp1=t.zp2=e,e){case 0:t.tZone||bn(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function Fn(t){t.loop=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)}function Un(t){exports.DEBUG&&console.log(t.step,"RTG[]"),t.round=on}function $n(t){exports.DEBUG&&console.log(t.step,"RTHG[]"),t.round=ln}function Vn(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SMD[]",e),t.minDis=e/64}function Hn(t){exports.DEBUG&&console.log(t.step,"ELSE[]"),xn(t,!1)}function Gn(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"JMPR[]",e),t.ip+=e-1}function Wn(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCVTCI[]",e),t.cvCutIn=e/64}function jn(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DUP[]"),e.push(e[e.length-1])}function Yn(t){exports.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function Xn(t){exports.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0}function Qn(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"SWAP[]"),e.push(i),e.push(n)}function Kn(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DEPTH[]"),e.push(e.length)}function Zn(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"LOOPCALL[]",i,n);var s=t.ip,r=t.prog;t.prog=t.funcs[i];for(var o=0;o<n;o++)Ji(t),exports.DEBUG&&console.log(++t.step,o+1<n?"next loopcall":"done loopcall",o);t.ip=s,t.prog=r}function Jn(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"CALL[]",e);var i=t.ip,n=t.prog;t.prog=t.funcs[e],Ji(t),t.ip=i,t.prog=n,exports.DEBUG&&console.log(++t.step,"returning from",e)}function ts(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"CINDEX[]",i),e.push(e[e.length-i])}function es(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"MINDEX[]",i),e.push(e.splice(e.length-i,1)[0])}function is(t){if("fpgm"!==t.env)throw new Error("FDEF not allowed here");var e=t.stack,i=t.prog,n=t.ip,s=e.pop(),r=n;exports.DEBUG&&console.log(t.step,"FDEF[]",s);while(45!==i[++n]);t.ip=n,t.funcs[s]=i.slice(r+1,n)}function ns(t,e){var i=e.stack.pop(),n=e.z0[i],s=e.fv,r=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+t+"]",i);var o=r.distance(n,vn);t&&(o=e.round(o)),s.setRelative(n,vn,o,r),s.touch(n),e.rp0=e.rp1=i}function ss(t,e){var i,n,s,r=e.z2,o=r.length-2;exports.DEBUG&&console.log(e.step,"IUP["+t.axis+"]");for(var a=0;a<o;a++)i=r[a],t.touched(i)||(n=i.prevTouched(t),n!==i&&(s=i.nextTouched(t),n===s&&t.setRelative(i,i,t.distance(n,n,!1,!0),t,!0),t.interpolate(i,n,s,t)))}function rs(t,e){var i=e.stack,n=t?e.rp1:e.rp2,s=(t?e.z0:e.z1)[n],r=e.fv,o=e.pv,a=e.loop,l=e.z2;while(a--){var h=i.pop(),c=l[h],u=o.distance(s,s,!1,!0);r.setRelative(c,c,u,o),r.touch(c),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",h)}e.loop=1}function os(t,e){var i=e.stack,n=t?e.rp1:e.rp2,s=(t?e.z0:e.z1)[n],r=e.fv,o=e.pv,a=i.pop(),l=e.z2[e.contours[a]],h=l;exports.DEBUG&&console.log(e.step,"SHC["+t+"]",a);var c=o.distance(s,s,!1,!0);do{h!==s&&r.setRelative(h,h,c,o),h=h.nextPointOnContour}while(h!==l)}function as(t,e){var i,n,s=e.stack,r=t?e.rp1:e.rp2,o=(t?e.z0:e.z1)[r],a=e.fv,l=e.pv,h=s.pop();switch(exports.DEBUG&&console.log(e.step,"SHZ["+t+"]",h),h){case 0:i=e.tZone;break;case 1:i=e.gZone;break;default:throw new Error("Invalid zone")}for(var c=l.distance(o,o,!1,!0),u=i.length-2,d=0;d<u;d++)n=i[d],a.setRelative(n,n,c,l)}function ls(t){var e=t.stack,i=t.loop,n=t.fv,s=e.pop()/64,r=t.z2;while(i--){var o=e.pop(),a=r[o];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"SHPIX[]",o,s),n.setRelative(a,a,s),n.touch(a)}t.loop=1}function hs(t){var e=t.stack,i=t.rp1,n=t.rp2,s=t.loop,r=t.z0[i],o=t.z1[n],a=t.fv,l=t.dpv,h=t.z2;while(s--){var c=e.pop(),u=h[c];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"IP[]",c,i,"<->",n),a.interpolate(u,r,o,l),a.touch(u)}t.loop=1}function cs(t,e){var i=e.stack,n=i.pop()/64,s=i.pop(),r=e.z1[s],o=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(r,o,n,l),a.touch(r),exports.DEBUG&&console.log(e.step,"MSIRP["+t+"]",n,s),e.rp1=e.rp0,e.rp2=s,t&&(e.rp0=s)}function us(t){var e=t.stack,i=t.rp0,n=t.z0[i],s=t.loop,r=t.fv,o=t.pv,a=t.z1;while(s--){var l=e.pop(),h=a[l];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"ALIGNRP[]",l),r.setRelative(h,n,0,o),r.touch(h)}t.loop=1}function ds(t){exports.DEBUG&&console.log(t.step,"RTDG[]"),t.round=an}function ps(t,e){var i=e.stack,n=i.pop(),s=i.pop(),r=e.z0[s],o=e.fv,a=e.pv,l=e.cvt[n];exports.DEBUG&&console.log(e.step,"MIAP["+t+"]",n,"(",l,")",s);var h=a.distance(r,vn);t&&(Math.abs(h-l)<e.cvCutIn&&(h=l),h=e.round(h)),o.setRelative(r,vn,h,a),0===e.zp0&&(r.xo=r.x,r.yo=r.y),o.touch(r),e.rp0=e.rp1=s}function fs(t){var e=t.prog,i=t.ip,n=t.stack,s=e[++i];exports.DEBUG&&console.log(t.step,"NPUSHB[]",s);for(var r=0;r<s;r++)n.push(e[++i]);t.ip=i}function ms(t){var e=t.ip,i=t.prog,n=t.stack,s=i[++e];exports.DEBUG&&console.log(t.step,"NPUSHW[]",s);for(var r=0;r<s;r++){var o=i[++e]<<8|i[++e];32768&o&&(o=-(1+(65535^o))),n.push(o)}t.ip=e}function gs(t){var e=t.stack,i=t.store;i||(i=t.store=[]);var n=e.pop(),s=e.pop();exports.DEBUG&&console.log(t.step,"WS",n,s),i[s]=n}function vs(t){var e=t.stack,i=t.store,n=e.pop();exports.DEBUG&&console.log(t.step,"RS",n);var s=i&&i[n]||0;e.push(s)}function _s(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"WCVTP",i,n),t.cvt[n]=i/64}function ys(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"RCVT",i),e.push(64*t.cvt[i])}function bs(t,e){var i=e.stack,n=i.pop(),s=e.z2[n];exports.DEBUG&&console.log(e.step,"GC["+t+"]",n),i.push(64*e.dpv.distance(s,vn,t,!1))}function xs(t,e){var i=e.stack,n=i.pop(),s=i.pop(),r=e.z1[n],o=e.z0[s],a=e.dpv.distance(o,r,t,t);exports.DEBUG&&console.log(e.step,"MD["+t+"]",n,s,"->",a),e.stack.push(Math.round(64*a))}function Ss(t){exports.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)}function ws(t){exports.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0}function Cs(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"LT[]",i,n),e.push(n<i?1:0)}function Ms(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"LTEQ[]",i,n),e.push(n<=i?1:0)}function Ts(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"GT[]",i,n),e.push(n>i?1:0)}function ks(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"GTEQ[]",i,n),e.push(n>=i?1:0)}function Es(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"EQ[]",i,n),e.push(i===n?1:0)}function Ls(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"NEQ[]",i,n),e.push(i!==n?1:0)}function As(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"ODD[]",i),e.push(Math.trunc(i)%2?1:0)}function Ps(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"EVEN[]",i),e.push(Math.trunc(i)%2?0:1)}function Rs(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"IF[]",e),e||(xn(t,!0),exports.DEBUG&&console.log(t.step,"EIF[]"))}function Os(t){exports.DEBUG&&console.log(t.step,"EIF[]")}function Is(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"AND[]",i,n),e.push(i&&n?1:0)}function Ds(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"OR[]",i,n),e.push(i||n?1:0)}function Ns(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"NOT[]",i),e.push(i?0:1)}function zs(t,e){var i=e.stack,n=i.pop(),s=e.fv,r=e.pv,o=e.ppem,a=e.deltaBase+16*(t-1),l=e.deltaShift,h=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+t+"]",n,i);for(var c=0;c<n;c++){var u=i.pop(),d=i.pop(),p=a+((240&d)>>4);if(p===o){var f=(15&d)-8;f>=0&&f++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",u,"by",f*l);var m=h[u];s.setRelative(m,m,f*l,r)}}}function qs(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"SDB[]",i),t.deltaBase=i}function Bs(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"SDS[]",i),t.deltaShift=Math.pow(.5,i)}function Fs(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"ADD[]",i,n),e.push(n+i)}function Us(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"SUB[]",i,n),e.push(n-i)}function $s(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"DIV[]",i,n),e.push(64*n/i)}function Vs(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"MUL[]",i,n),e.push(n*i/64)}function Hs(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"ABS[]",i),e.push(Math.abs(i))}function Gs(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"NEG[]",i),e.push(-i)}function Ws(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"FLOOR[]",i),e.push(64*Math.floor(i/64))}function js(t){var e=t.stack,i=e.pop();exports.DEBUG&&console.log(t.step,"CEILING[]",i),e.push(64*Math.ceil(i/64))}function Ys(t,e){var i=e.stack,n=i.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),i.push(64*e.round(n/64))}function Xs(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"WCVTF[]",i,n),t.cvt[n]=i*t.ppem/t.font.unitsPerEm}function Qs(t,e){var i=e.stack,n=i.pop(),s=e.ppem,r=e.deltaBase+16*(t-1),o=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+t+"]",n,i);for(var a=0;a<n;a++){var l=i.pop(),h=i.pop(),c=r+((240&h)>>4);if(c===s){var u=(15&h)-8;u>=0&&u++;var d=u*o;exports.DEBUG&&console.log(e.step,"DELTACFIX",l,"by",d),e.cvt[l]+=d}}}function Ks(t){var e,i=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SROUND[]",i),t.round=un,192&i){case 0:e=.5;break;case 64:e=1;break;case 128:e=2;break;default:throw new Error("invalid SROUND value")}switch(t.srPeriod=e,48&i){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*e;break;case 32:t.srPhase=.5*e;break;case 48:t.srPhase=.75*e;break;default:throw new Error("invalid SROUND value")}i&=15,t.srThreshold=0===i?0:(i/8-.5)*e}function Zs(t){var e,i=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"S45ROUND[]",i),t.round=un,192&i){case 0:e=Math.sqrt(2)/2;break;case 64:e=Math.sqrt(2);break;case 128:e=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(t.srPeriod=e,48&i){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*e;break;case 32:t.srPhase=.5*e;break;case 48:t.srPhase=.75*e;break;default:throw new Error("invalid S45ROUND value")}i&=15,t.srThreshold=0===i?0:(i/8-.5)*e}function Js(t){exports.DEBUG&&console.log(t.step,"ROFF[]"),t.round=rn}function tr(t){exports.DEBUG&&console.log(t.step,"RUTG[]"),t.round=hn}function er(t){exports.DEBUG&&console.log(t.step,"RDTG[]"),t.round=cn}function ir(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANCTRL[]",e)}function nr(t,e){var i,n,s=e.stack,r=s.pop(),o=s.pop(),a=e.z2[r],l=e.z1[o];exports.DEBUG&&console.log(e.step,"SDPVTL["+t+"]",r,o),t?(i=a.y-l.y,n=l.x-a.x):(i=l.x-a.x,n=l.y-a.y),e.dpv=mn(i,n)}function sr(t){var e=t.stack,i=e.pop(),n=0;exports.DEBUG&&console.log(t.step,"GETINFO[]",i),1&i&&(n=35),32&i&&(n|=4096),e.push(n)}function rr(t){var e=t.stack,i=e.pop(),n=e.pop(),s=e.pop();exports.DEBUG&&console.log(t.step,"ROLL[]"),e.push(n),e.push(i),e.push(s)}function or(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"MAX[]",i,n),e.push(Math.max(n,i))}function ar(t){var e=t.stack,i=e.pop(),n=e.pop();exports.DEBUG&&console.log(t.step,"MIN[]",i,n),e.push(Math.min(n,i))}function lr(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANTYPE[]",e)}function hr(t){var e=t.stack.pop(),i=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"INSTCTRL[]",e,i),e){case 1:return void(t.inhibitGridFit=!!i);case 2:return void(t.ignoreCvt=!!i);default:throw new Error("invalid INSTCTRL[] selector")}}function cr(t,e){var i=e.stack,n=e.prog,s=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+t+"]");for(var r=0;r<t;r++)i.push(n[++s]);e.ip=s}function ur(t,e){var i=e.ip,n=e.prog,s=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+t+"]");for(var r=0;r<t;r++){var o=n[++i]<<8|n[++i];32768&o&&(o=-(1+(65535^o))),s.push(o)}e.ip=i}function dr(t,e,i,n,s,r){var o,a,l,h,c=r.stack,u=t&&c.pop(),d=c.pop(),p=r.rp0,f=r.z0[p],m=r.z1[d],g=r.minDis,v=r.fv,_=r.dpv;a=o=_.distance(m,f,!0,!0),l=a>=0?1:-1,a=Math.abs(a),t&&(h=r.cvt[u],n&&Math.abs(a-h)<r.cvCutIn&&(a=h)),i&&a<g&&(a=g),n&&(a=r.round(a)),v.setRelative(m,f,l*a,_),v.touch(m),exports.DEBUG&&console.log(r.step,(t?"MIRP[":"MDRP[")+(e?"M":"m")+(i?">":"_")+(n?"R":"_")+(0===s?"Gr":1===s?"Bl":2===s?"Wh":"")+"]",t?u+"("+r.cvt[u]+","+h+")":"",d,"(d =",o,"->",l*a,")"),r.rp1=r.rp0,r.rp2=d,e&&(r.rp0=d)}function pr(t){this.char=t,this.state={},this.activeState=null}function fr(t,e,i){this.contextName=i,this.startIndex=t,this.endOffset=e}function mr(t,e,i){this.contextName=t,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=i}function gr(t,e){this.context=t,this.index=e,this.length=t.length,this.current=t[e],this.backtrack=t.slice(0,e),this.lookahead=t.slice(e+1)}function vr(t){this.eventId=t,this.subscribers=[]}function _r(t){var e=this,i=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];i.forEach((function(t){Object.defineProperty(e.events,t,{value:new vr(t)})})),t&&i.forEach((function(i){var n=t[i];"function"===typeof n&&e.events[i].subscribe(n)}));var n=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];n.forEach((function(t){e.events[t].subscribe(e.updateContextsRanges)}))}function yr(t){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],_r.call(this,t)}function br(t){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(t)}function xr(t){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(t)}function Sr(t){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(t)}function wr(t){return/[A-z]/.test(t)}function Cr(t){return/\s/.test(t)}function Mr(t){this.font=t,this.features={}}function Tr(t){this.id=t.id,this.tag=t.tag,this.substitution=t.substitution}function kr(t,e){if(!t)return-1;switch(e.format){case 1:return e.glyphs.indexOf(t);case 2:for(var i=e.ranges,n=0;n<i.length;n++){var s=i[n];if(t>=s.start&&t<=s.end){var r=t-s.start;return s.index+r}}break;default:return-1}return-1}function Er(t,e){var i=kr(t,e.coverage);return-1===i?null:t+e.deltaGlyphId}function Lr(t,e){var i=kr(t,e.coverage);return-1===i?null:e.substitute[i]}function Ar(t,e){for(var i=[],n=0;n<t.length;n++){var s=t[n],r=e.current;r=Array.isArray(r)?r[0]:r;var o=kr(r,s);-1!==o&&i.push(o)}return i.length!==t.length?-1:i}function Pr(t,e){var i=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(t.context.length<i)return[];var n=Ar(e.inputCoverage,t);if(-1===n)return[];var s=e.inputCoverage.length-1;if(t.lookahead.length<e.lookaheadCoverage.length)return[];var r=t.lookahead.slice(s);while(r.length&&Sr(r[0].char))r.shift();var o=new gr(r,0),a=Ar(e.lookaheadCoverage,o),l=[].concat(t.backtrack);l.reverse();while(l.length&&Sr(l[0].char))l.shift();if(l.length<e.backtrackCoverage.length)return[];var h=new gr(l,0),c=Ar(e.backtrackCoverage,h),u=n.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&c.length===e.backtrackCoverage.length,d=[];if(u)for(var p=0;p<e.lookupRecords.length;p++)for(var f=e.lookupRecords[p],m=f.lookupListIndex,g=this.getLookupByIndex(m),v=0;v<g.subtables.length;v++){var _=g.subtables[v],y=this.getLookupMethod(g,_),b=this.getSubstitutionType(g,_);if("12"===b)for(var x=0;x<n.length;x++){var S=t.get(x),w=y(S);w&&d.push(w)}}return d}function Rr(t,e){var i,n=t.current,s=kr(n,e.coverage);if(-1===s)return null;for(var r=e.ligatureSets[s],o=0;o<r.length;o++){i=r[o];for(var a=0;a<i.components.length;a++){var l=t.lookahead[a],h=i.components[a];if(l!==h)break;if(a===i.components.length-1)return i}}return null}function Or(t,e){var i=kr(t,e.coverage);return-1===i?null:e.sequences[i]}function Ir(t){var e=t.current,i=t.get(-1);return null===i&&br(e)||!br(i)&&br(e)}function Dr(t){var e=t.get(1);return null===e||!br(e)}sn.prototype.exec=function(t,e){if("number"!==typeof e)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var i=this.font,n=this._prepState;if(!n||n.ppem!==e){var s=this._fpgmState;if(!s){yn.prototype=_n,s=this._fpgmState=new yn("fpgm",i.tables.fpgm),s.funcs=[],s.font=i,exports.DEBUG&&(console.log("---EXEC FPGM---"),s.step=-1);try{Ji(s)}catch(h){return console.log("Hinting error in FPGM:"+h),void(this._errorState=3)}}yn.prototype=s,n=this._prepState=new yn("prep",i.tables.prep),n.ppem=e;var r=i.tables.cvt;if(r)for(var o=n.cvt=new Array(r.length),a=e/i.unitsPerEm,l=0;l<r.length;l++)o[l]=r[l]*a;else n.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),n.step=-1);try{Ji(n)}catch(h){this._errorState<2&&console.log("Hinting error in PREP:"+h),this._errorState=2}}if(!(this._errorState>1))try{return tn(t,n)}catch(h){return this._errorState<1&&(console.log("Hinting error:"+h),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},tn=function(t,e){var i,n,s,r=e.ppem/e.font.unitsPerEm,o=r,a=t.components;if(yn.prototype=e,a){var l=e.font;n=[],i=[];for(var h=0;h<a.length;h++){var c=a[h],u=l.glyphs.get(c.glyphIndex);s=new yn("glyf",u.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+h+"---"),s.step=-1),en(u,s,r,o);for(var d=Math.round(c.dx*r),p=Math.round(c.dy*o),f=s.gZone,m=s.contours,g=0;g<f.length;g++){var v=f[g];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+d,v.yo=v.y=v.y+p}var _=n.length;n.push.apply(n,f);for(var y=0;y<m.length;y++)i.push(m[y]+_)}t.instructions&&!s.inhibitGridFit&&(s=new yn("glyf",t.instructions),s.gZone=s.z0=s.z1=s.z2=n,s.contours=i,n.push(new gn(0,0),new gn(Math.round(t.advanceWidth*r),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),s.step=-1),Ji(s),n.length-=2)}else s=new yn("glyf",t.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),s.step=-1),en(t,s,r,o),n=s.gZone;return n},en=function(t,e,i,n){for(var s,r,o,a=t.points||[],l=a.length,h=e.gZone=e.z0=e.z1=e.z2=[],c=e.contours=[],u=0;u<l;u++)s=a[u],h[u]=new gn(s.x*i,s.y*n,s.lastPointOfContour,s.onCurve);for(var d=0;d<l;d++)s=h[d],r||(r=s,c.push(d)),s.lastPointOfContour?(s.nextPointOnContour=r,r.prevPointOnContour=s,r=void 0):(o=h[d+1],s.nextPointOnContour=o,o.prevPointOnContour=s);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var p=0;p<l;p++)console.log(p,h[p].x,h[p].y)}if(h.push(new gn(0,0),new gn(Math.round(t.advanceWidth*i),0)),Ji(e),h.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var f=0;f<l;f++)console.log(f,h[f].x,h[f].y)}}},Ji=function(t){var e=t.prog;if(e){var i,n=e.length;for(t.ip=0;t.ip<n;t.ip++){if(exports.DEBUG&&t.step++,i=Zi[e[t.ip]],!i)throw new Error("unknown instruction: 0x"+Number(e[t.ip]).toString(16));i(t)}}},Zi=[Sn.bind(void 0,pn),Sn.bind(void 0,dn),wn.bind(void 0,pn),wn.bind(void 0,dn),Cn.bind(void 0,pn),Cn.bind(void 0,dn),Mn.bind(void 0,0),Mn.bind(void 0,1),Tn.bind(void 0,0),Tn.bind(void 0,1),kn,En,Ln,An,Pn,Rn,On,In,Dn,Nn,zn,qn,Bn,Fn,Un,$n,Vn,Hn,Gn,Wn,void 0,void 0,jn,Yn,Xn,Qn,Kn,ts,es,void 0,void 0,void 0,Zn,Jn,is,void 0,ns.bind(void 0,0),ns.bind(void 0,1),ss.bind(void 0,pn),ss.bind(void 0,dn),rs.bind(void 0,0),rs.bind(void 0,1),os.bind(void 0,0),os.bind(void 0,1),as.bind(void 0,0),as.bind(void 0,1),ls,hs,cs.bind(void 0,0),cs.bind(void 0,1),us,ds,ps.bind(void 0,0),ps.bind(void 0,1),fs,ms,gs,vs,_s,ys,bs.bind(void 0,0),bs.bind(void 0,1),void 0,xs.bind(void 0,0),xs.bind(void 0,1),Ss,void 0,ws,void 0,void 0,Cs,Ms,Ts,ks,Es,Ls,As,Ps,Rs,Os,Is,Ds,Ns,zs.bind(void 0,1),qs,Bs,Fs,Us,$s,Vs,Hs,Gs,Ws,js,Ys.bind(void 0,0),Ys.bind(void 0,1),Ys.bind(void 0,2),Ys.bind(void 0,3),void 0,void 0,void 0,void 0,Xs,zs.bind(void 0,2),zs.bind(void 0,3),Qs.bind(void 0,1),Qs.bind(void 0,2),Qs.bind(void 0,3),Ks,Zs,void 0,void 0,Js,void 0,tr,er,Yn,Yn,void 0,void 0,void 0,void 0,void 0,ir,nr.bind(void 0,0),nr.bind(void 0,1),sr,void 0,rr,or,ar,lr,hr,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,cr.bind(void 0,1),cr.bind(void 0,2),cr.bind(void 0,3),cr.bind(void 0,4),cr.bind(void 0,5),cr.bind(void 0,6),cr.bind(void 0,7),cr.bind(void 0,8),ur.bind(void 0,1),ur.bind(void 0,2),ur.bind(void 0,3),ur.bind(void 0,4),ur.bind(void 0,5),ur.bind(void 0,6),ur.bind(void 0,7),ur.bind(void 0,8),dr.bind(void 0,0,0,0,0,0),dr.bind(void 0,0,0,0,0,1),dr.bind(void 0,0,0,0,0,2),dr.bind(void 0,0,0,0,0,3),dr.bind(void 0,0,0,0,1,0),dr.bind(void 0,0,0,0,1,1),dr.bind(void 0,0,0,0,1,2),dr.bind(void 0,0,0,0,1,3),dr.bind(void 0,0,0,1,0,0),dr.bind(void 0,0,0,1,0,1),dr.bind(void 0,0,0,1,0,2),dr.bind(void 0,0,0,1,0,3),dr.bind(void 0,0,0,1,1,0),dr.bind(void 0,0,0,1,1,1),dr.bind(void 0,0,0,1,1,2),dr.bind(void 0,0,0,1,1,3),dr.bind(void 0,0,1,0,0,0),dr.bind(void 0,0,1,0,0,1),dr.bind(void 0,0,1,0,0,2),dr.bind(void 0,0,1,0,0,3),dr.bind(void 0,0,1,0,1,0),dr.bind(void 0,0,1,0,1,1),dr.bind(void 0,0,1,0,1,2),dr.bind(void 0,0,1,0,1,3),dr.bind(void 0,0,1,1,0,0),dr.bind(void 0,0,1,1,0,1),dr.bind(void 0,0,1,1,0,2),dr.bind(void 0,0,1,1,0,3),dr.bind(void 0,0,1,1,1,0),dr.bind(void 0,0,1,1,1,1),dr.bind(void 0,0,1,1,1,2),dr.bind(void 0,0,1,1,1,3),dr.bind(void 0,1,0,0,0,0),dr.bind(void 0,1,0,0,0,1),dr.bind(void 0,1,0,0,0,2),dr.bind(void 0,1,0,0,0,3),dr.bind(void 0,1,0,0,1,0),dr.bind(void 0,1,0,0,1,1),dr.bind(void 0,1,0,0,1,2),dr.bind(void 0,1,0,0,1,3),dr.bind(void 0,1,0,1,0,0),dr.bind(void 0,1,0,1,0,1),dr.bind(void 0,1,0,1,0,2),dr.bind(void 0,1,0,1,0,3),dr.bind(void 0,1,0,1,1,0),dr.bind(void 0,1,0,1,1,1),dr.bind(void 0,1,0,1,1,2),dr.bind(void 0,1,0,1,1,3),dr.bind(void 0,1,1,0,0,0),dr.bind(void 0,1,1,0,0,1),dr.bind(void 0,1,1,0,0,2),dr.bind(void 0,1,1,0,0,3),dr.bind(void 0,1,1,0,1,0),dr.bind(void 0,1,1,0,1,1),dr.bind(void 0,1,1,0,1,2),dr.bind(void 0,1,1,0,1,3),dr.bind(void 0,1,1,1,0,0),dr.bind(void 0,1,1,1,0,1),dr.bind(void 0,1,1,1,0,2),dr.bind(void 0,1,1,1,0,3),dr.bind(void 0,1,1,1,1,0),dr.bind(void 0,1,1,1,1,1),dr.bind(void 0,1,1,1,1,2),dr.bind(void 0,1,1,1,1,3)],pr.prototype.setState=function(t,e){return this.state[t]=e,this.activeState={key:t,value:this.state[t]},this.activeState},pr.prototype.getState=function(t){return this.state[t]||null},yr.prototype.inboundIndex=function(t){return t>=0&&t<this.tokens.length},yr.prototype.composeRUD=function(t){var e=this,i=!0,n=t.map((function(t){return e[t[0]].apply(e,t.slice(1).concat(i))})),s=function(t){return"object"===typeof t&&t.hasOwnProperty("FAIL")};if(n.every(s))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:n.filter(s)};this.dispatch("composeRUD",[n.filter((function(t){return!s(t)}))])},yr.prototype.replaceRange=function(t,e,i,n){e=null!==e?e:this.tokens.length;var s=i.every((function(t){return t instanceof pr}));if(!isNaN(t)&&this.inboundIndex(t)&&s){var r=this.tokens.splice.apply(this.tokens,[t,e].concat(i));return n||this.dispatch("replaceToken",[t,e,i]),[r,i]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},yr.prototype.replaceToken=function(t,e,i){if(!isNaN(t)&&this.inboundIndex(t)&&e instanceof pr){var n=this.tokens.splice(t,1,e);return i||this.dispatch("replaceToken",[t,e]),[n[0],e]}return{FAIL:"replaceToken: invalid token or index."}},yr.prototype.removeRange=function(t,e,i){e=isNaN(e)?this.tokens.length:e;var n=this.tokens.splice(t,e);return i||this.dispatch("removeRange",[n,t,e]),n},yr.prototype.removeToken=function(t,e){if(!isNaN(t)&&this.inboundIndex(t)){var i=this.tokens.splice(t,1);return e||this.dispatch("removeToken",[i,t]),i}return{FAIL:"removeToken: invalid token index."}},yr.prototype.insertToken=function(t,e,i){var n=t.every((function(t){return t instanceof pr}));return n?(this.tokens.splice.apply(this.tokens,[e,0].concat(t)),i||this.dispatch("insertToken",[t,e]),t):{FAIL:"insertToken: invalid token(s)."}},yr.prototype.registerModifier=function(t,e,i){this.events.newToken.subscribe((function(n,s){var r=[n,s],o=null===e||!0===e.apply(this,r),a=[n,s];if(o){var l=i.apply(this,a);n.setState(t,l)}})),this.registeredModifiers.push(t)},vr.prototype.subscribe=function(t){return"function"===typeof t?this.subscribers.push(t)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},vr.prototype.unsubscribe=function(t){this.subscribers.splice(t,1)},gr.prototype.setCurrentIndex=function(t){this.index=t,this.current=this.context[t],this.backtrack=this.context.slice(0,t),this.lookahead=this.context.slice(t+1)},gr.prototype.get=function(t){switch(!0){case 0===t:return this.current;case t<0&&Math.abs(t)<=this.backtrack.length:return this.backtrack.slice(t)[0];case t>0&&t<=this.lookahead.length:return this.lookahead[t-1];default:return null}},yr.prototype.rangeToText=function(t){if(t instanceof fr)return this.getRangeTokens(t).map((function(t){return t.char})).join("")},yr.prototype.getText=function(){return this.tokens.map((function(t){return t.char})).join("")},yr.prototype.getContext=function(t){var e=this.registeredContexts[t];return e||null},yr.prototype.on=function(t,e){var i=this.events[t];return i?i.subscribe(e):null},yr.prototype.dispatch=function(t,e){var i=this,n=this.events[t];n instanceof vr&&n.subscribers.forEach((function(t){t.apply(i,e||[])}))},yr.prototype.registerContextChecker=function(t,e,i){if(this.getContext(t))return{FAIL:"context name '"+t+"' is already registered."};if("function"!==typeof e)return{FAIL:"missing context start check."};if("function"!==typeof i)return{FAIL:"missing context end check."};var n=new mr(t,e,i);return this.registeredContexts[t]=n,this.contextCheckers.push(n),n},yr.prototype.getRangeTokens=function(t){var e=t.startIndex+t.endOffset;return[].concat(this.tokens.slice(t.startIndex,e))},yr.prototype.getContextRanges=function(t){var e=this.getContext(t);return e?e.ranges:{FAIL:"context checker '"+t+"' is not registered."}},yr.prototype.resetContextsRanges=function(){var t=this.registeredContexts;for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];i.ranges=[]}},yr.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var t=this.tokens.map((function(t){return t.char})),e=0;e<t.length;e++){var i=new gr(t,e);this.runContextCheck(i)}this.dispatch("updateContextsRanges",[this.registeredContexts])},yr.prototype.setEndOffset=function(t,e){var i=this.getContext(e).openRange.startIndex,n=new fr(i,t,e),s=this.getContext(e).ranges;return n.rangeId=e+"."+s.length,s.push(n),this.getContext(e).openRange=null,n},yr.prototype.runContextCheck=function(t){var e=this,i=t.index;this.contextCheckers.forEach((function(n){var s=n.contextName,r=e.getContext(s).openRange;if(!r&&n.checkStart(t)&&(r=new fr(i,null,s),e.getContext(s).openRange=r,e.dispatch("contextStart",[s,i])),r&&n.checkEnd(t)){var o=i-r.startIndex+1,a=e.setEndOffset(o,s);e.dispatch("contextEnd",[s,a])}}))},yr.prototype.tokenize=function(t){this.tokens=[],this.resetContextsRanges();var e=Array.from(t);this.dispatch("start");for(var i=0;i<e.length;i++){var n=e[i],s=new gr(e,i);this.dispatch("next",[s]),this.runContextCheck(s);var r=new pr(n);this.tokens.push(r),this.dispatch("newToken",[r,s])}return this.dispatch("end",[this.tokens]),this.tokens},Mr.prototype.getDefaultScriptFeaturesIndexes=function(){for(var t=this.font.tables.gsub.scripts,e=0;e<t.length;e++){var i=t[e];if("DFLT"===i.tag)return i.script.defaultLangSys.featureIndexes}return[]},Mr.prototype.getScriptFeaturesIndexes=function(t){var e=this.font.tables;if(!e.gsub)return[];if(!t)return this.getDefaultScriptFeaturesIndexes();for(var i=this.font.tables.gsub.scripts,n=0;n<i.length;n++){var s=i[n];if(s.tag===t&&s.script.defaultLangSys)return s.script.defaultLangSys.featureIndexes;var r=s.langSysRecords;if(r)for(var o=0;o<r.length;o++){var a=r[o];if(a.tag===t){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()},Mr.prototype.mapTagsToFeatures=function(t,e){for(var i={},n=0;n<t.length;n++){var s=t[n].tag,r=t[n].feature;i[s]=r}this.features[e].tags=i},Mr.prototype.getScriptFeatures=function(t){var e=this.features[t];if(this.features.hasOwnProperty(t))return e;var i=this.getScriptFeaturesIndexes(t);if(!i)return null;var n=this.font.tables.gsub;return e=i.map((function(t){return n.features[t]})),this.features[t]=e,this.mapTagsToFeatures(e,t),e},Mr.prototype.getSubstitutionType=function(t,e){var i=t.lookupType.toString(),n=e.substFormat.toString();return i+n},Mr.prototype.getLookupMethod=function(t,e){var i=this,n=this.getSubstitutionType(t,e);switch(n){case"11":return function(t){return Er.apply(i,[t,e])};case"12":return function(t){return Lr.apply(i,[t,e])};case"63":return function(t){return Pr.apply(i,[t,e])};case"41":return function(t){return Rr.apply(i,[t,e])};case"21":return function(t){return Or.apply(i,[t,e])};default:throw new Error("lookupType: "+t.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}},Mr.prototype.lookupFeature=function(t){var e=t.contextParams,i=e.index,n=this.getFeature({tag:t.tag,script:t.script});if(!n)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+t.tag+"' for script '"+t.script+"'.");for(var s=this.getFeatureLookups(n),r=[].concat(e.context),o=0;o<s.length;o++)for(var a=s[o],l=this.getLookupSubtables(a),h=0;h<l.length;h++){var c=l[h],u=this.getSubstitutionType(a,c),d=this.getLookupMethod(a,c),p=void 0;switch(u){case"11":p=d(e.current),p&&r.splice(i,1,new Tr({id:11,tag:t.tag,substitution:p}));break;case"12":p=d(e.current),p&&r.splice(i,1,new Tr({id:12,tag:t.tag,substitution:p}));break;case"63":p=d(e),Array.isArray(p)&&p.length&&r.splice(i,1,new Tr({id:63,tag:t.tag,substitution:p}));break;case"41":p=d(e),p&&r.splice(i,1,new Tr({id:41,tag:t.tag,substitution:p}));break;case"21":p=d(e.current),p&&r.splice(i,1,new Tr({id:21,tag:t.tag,substitution:p}));break}e=new gr(r,i),Array.isArray(p)&&!p.length||(p=null)}return r.length?r:null},Mr.prototype.supports=function(t){if(!t.script)return!1;this.getScriptFeatures(t.script);var e=this.features.hasOwnProperty(t.script);if(!t.tag)return e;var i=this.features[t.script].some((function(e){return e.tag===t.tag}));return e&&i},Mr.prototype.getLookupSubtables=function(t){return t.subtables||null},Mr.prototype.getLookupByIndex=function(t){var e=this.font.tables.gsub.lookups;return e[t]||null},Mr.prototype.getFeatureLookups=function(t){return t.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Mr.prototype.getFeature=function(t){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(t.script)||this.getScriptFeatures(t.script);var e=this.features[t.script];return e?e.tags[t.tag]?this.features[t.script].tags[t.tag]:null:{FAIL:"No feature for script "+t.script}};var Nr={startCheck:Ir,endCheck:Dr};function zr(t){var e=t.current,i=t.get(-1);return(br(e)||Sr(e))&&!br(i)}function qr(t){var e=t.get(1);switch(!0){case null===e:return!0;case!br(e)&&!Sr(e):var i=Cr(e);if(!i)return!0;if(i){var n=!1;if(n=t.lookahead.some((function(t){return br(t)||Sr(t)})),!n)return!0}break;default:return!1}}var Br={startCheck:zr,endCheck:qr};function Fr(t,e,i){e[i].setState(t.tag,t.substitution)}function Ur(t,e,i){e[i].setState(t.tag,t.substitution)}function $r(t,e,i){t.substitution.forEach((function(n,s){var r=e[i+s];r.setState(t.tag,n)}))}function Vr(t,e,i){var n=e[i];n.setState(t.tag,t.substitution.ligGlyph);for(var s=t.substitution.components.length,r=0;r<s;r++)n=e[i+r+1],n.setState("deleted",!0)}var Hr={11:Fr,12:Ur,63:$r,41:Vr};function Gr(t,e,i){t instanceof Tr&&Hr[t.id]&&Hr[t.id](t,e,i)}function Wr(t){for(var e=[].concat(t.backtrack),i=e.length-1;i>=0;i--){var n=e[i],s=xr(n),r=Sr(n);if(!s&&!r)return!0;if(s)return!1}return!1}function jr(t){if(xr(t.current))return!1;for(var e=0;e<t.lookahead.length;e++){var i=t.lookahead[e],n=Sr(i);if(!n)return!0}return!1}function Yr(t){var e=this,i="arab",n=this.featuresTags[i],s=this.tokenizer.getRangeTokens(t);if(1!==s.length){var r=new gr(s.map((function(t){return t.getState("glyphIndex")})),0),o=new gr(s.map((function(t){return t.char})),0);s.forEach((function(t,a){if(!Sr(t.char)){r.setCurrentIndex(a),o.setCurrentIndex(a);var l,h=0;switch(Wr(o)&&(h|=1),jr(o)&&(h|=2),h){case 1:l="fina";break;case 2:l="init";break;case 3:l="medi";break}if(-1!==n.indexOf(l)){var c=e.query.lookupFeature({tag:l,script:i,contextParams:r});if(c instanceof Error)return console.info(c.message);c.forEach((function(t,e){t instanceof Tr&&(Gr(t,s,e),r.context[e]=t.substitution)}))}}}))}}function Xr(t,e){var i=t.map((function(t){return t.activeState.value}));return new gr(i,e||0)}function Qr(t){var e=this,i="arab",n=this.tokenizer.getRangeTokens(t),s=Xr(n);s.context.forEach((function(t,r){s.setCurrentIndex(r);var o=e.query.lookupFeature({tag:"rlig",script:i,contextParams:s});o.length&&(o.forEach((function(t){return Gr(t,n,r)})),s=Xr(n))}))}function Kr(t){var e=t.current,i=t.get(-1);return null===i&&wr(e)||!wr(i)&&wr(e)}function Zr(t){var e=t.get(1);return null===e||!wr(e)}var Jr={startCheck:Kr,endCheck:Zr};function to(t,e){var i=t.map((function(t){return t.activeState.value}));return new gr(i,e||0)}function eo(t){var e=this,i="latn",n=this.tokenizer.getRangeTokens(t),s=to(n);s.context.forEach((function(t,r){s.setCurrentIndex(r);var o=e.query.lookupFeature({tag:"liga",script:i,contextParams:s});o.length&&(o.forEach((function(t){return Gr(t,n,r)})),s=to(n))}))}function io(t){this.baseDir=t||"ltr",this.tokenizer=new yr,this.featuresTags={}}function no(t){var e=this.contextChecks[t+"Check"];return this.tokenizer.registerContextChecker(t,e.startCheck,e.endCheck)}function so(){return no.call(this,"latinWord"),no.call(this,"arabicWord"),no.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function ro(){var t=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach((function(e){var i=t.tokenizer.getRangeTokens(e);t.tokenizer.replaceRange(e.startIndex,e.endOffset,i.reverse())}))}function oo(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function ao(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){oo.call(this);var i=this.tokenizer.getContextRanges("arabicWord");i.forEach((function(e){Yr.call(t,e)}))}}function lo(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){var i=this.featuresTags[e];if(-1!==i.indexOf("rlig")){oo.call(this);var n=this.tokenizer.getContextRanges("arabicWord");n.forEach((function(e){Qr.call(t,e)}))}}}function ho(){var t=this,e="latn";if(this.featuresTags.hasOwnProperty(e)){var i=this.featuresTags[e];if(-1!==i.indexOf("liga")){oo.call(this);var n=this.tokenizer.getContextRanges("latinWord");n.forEach((function(e){eo.call(t,e)}))}}}function co(t){t=t||{},t.tables=t.tables||{},t.empty||($i(t.familyName,"When creating a new Font object, familyName is required."),$i(t.styleName,"When creating a new Font object, styleName is required."),$i(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),$i(t.ascender,"When creating a new Font object, ascender is required."),$i(t.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||(t.familyName+t.styleName).replace(/\s/g,"")},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables=Object.assign(t.tables,{os2:Object.assign({usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR},t.tables.os2)})),this.supported=!0,this.glyphs=new Ht.GlyphSet(this,t.glyphs||[]),this.encoding=new Et(this),this.position=new Di(this),this.substitution=new Ni(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new sn(this):void 0}})}function uo(t,e){var i=JSON.stringify(t),n=256;for(var s in e){var r=parseInt(s);if(r&&!(r<256)){if(JSON.stringify(e[s])===i)return r;n<=r&&(n=r+1)}}return e[n]=t,n}function po(t,e,i){var n=uo(e.name,i);return[{name:"tag_"+t,type:"TAG",value:e.tag},{name:"minValue_"+t,type:"FIXED",value:e.minValue<<16},{name:"defaultValue_"+t,type:"FIXED",value:e.defaultValue<<16},{name:"maxValue_"+t,type:"FIXED",value:e.maxValue<<16},{name:"flags_"+t,type:"USHORT",value:0},{name:"nameID_"+t,type:"USHORT",value:n}]}function fo(t,e,i){var n={},s=new gt.Parser(t,e);return n.tag=s.parseTag(),n.minValue=s.parseFixed(),n.defaultValue=s.parseFixed(),n.maxValue=s.parseFixed(),s.skip("uShort",1),n.name=i[s.parseUShort()]||{},n}function mo(t,e,i,n){for(var s=uo(e.name,n),r=[{name:"nameID_"+t,type:"USHORT",value:s},{name:"flags_"+t,type:"USHORT",value:0}],o=0;o<i.length;++o){var a=i[o].tag;r.push({name:"axis_"+t+" "+a,type:"FIXED",value:e.coordinates[a]<<16})}return r}function go(t,e,i,n){var s={},r=new gt.Parser(t,e);s.name=n[r.parseUShort()]||{},r.skip("uShort",1),s.coordinates={};for(var o=0;o<i.length;++o)s.coordinates[i[o].tag]=r.parseFixed();return s}function vo(t,e){var i=new nt.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*t.axes.length}]);i.offsetToData=i.sizeOf();for(var n=0;n<t.axes.length;n++)i.fields=i.fields.concat(po(n,t.axes[n],e));for(var s=0;s<t.instances.length;s++)i.fields=i.fields.concat(mo(s,t.instances[s],t.axes,e));return i}function _o(t,e,i){var n=new gt.Parser(t,e),s=n.parseULong();O.argument(65536===s,"Unsupported fvar table version.");var r=n.parseOffset16();n.skip("uShort",1);for(var o=n.parseUShort(),a=n.parseUShort(),l=n.parseUShort(),h=n.parseUShort(),c=[],u=0;u<o;u++)c.push(fo(t,e+r+u*a,i));for(var d=[],p=e+r+o*a,f=0;f<l;f++)d.push(go(t,p+f*h,c,i));return{axes:c,instances:d}}io.prototype.setText=function(t){this.text=t},io.prototype.contextChecks={latinWordCheck:Jr,arabicWordCheck:Nr,arabicSentenceCheck:Br},io.prototype.registerFeatures=function(t,e){var i=this,n=e.filter((function(e){return i.query.supports({script:t,tag:e})}));this.featuresTags.hasOwnProperty(t)?this.featuresTags[t]=this.featuresTags[t].concat(n):this.featuresTags[t]=n},io.prototype.applyFeatures=function(t,e){if(!t)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Mr(t));for(var i=0;i<e.length;i++){var n=e[i];this.query.supports({script:n.script})&&this.registerFeatures(n.script,n.tags)}},io.prototype.registerModifier=function(t,e,i){this.tokenizer.registerModifier(t,e,i)},io.prototype.checkContextReady=function(t){return!!this.tokenizer.getContext(t)},io.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(ao.call(this),lo.call(this)),this.checkContextReady("latinWord")&&ho.call(this),this.checkContextReady("arabicSentence")&&ro.call(this)},io.prototype.processText=function(t){this.text&&this.text===t||(this.setText(t),so.call(this),this.applyFeaturesToContexts())},io.prototype.getBidiText=function(t){return this.processText(t),this.tokenizer.getText()},io.prototype.getTextGlyphs=function(t){this.processText(t);for(var e=[],i=0;i<this.tokenizer.tokens.length;i++){var n=this.tokenizer.tokens[i];if(!n.state.deleted){var s=n.activeState.value;e.push(Array.isArray(s)?s[0]:s)}}return e},co.prototype.hasChar=function(t){return null!==this.encoding.charToGlyphIndex(t)},co.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)},co.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),i=this.glyphs.get(e);return i||(i=this.glyphs.get(0)),i},co.prototype.updateFeatures=function(t){return this.defaultRenderOptions.features.map((function(e){return"latn"===e.script?{script:"latn",tags:e.tags.filter((function(e){return t[e]}))}:e}))},co.prototype.stringToGlyphs=function(t,e){var i=this,n=new io,s=function(t){return i.charToGlyphIndex(t.char)};n.registerModifier("glyphIndex",null,s);var r=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;n.applyFeatures(this,r);for(var o=n.getTextGlyphs(t),a=o.length,l=new Array(a),h=this.glyphs.get(0),c=0;c<a;c+=1)l[c]=this.glyphs.get(o[c])||h;return l},co.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)},co.prototype.nameToGlyph=function(t){var e=this.nameToGlyphIndex(t),i=this.glyphs.get(e);return i||(i=this.glyphs.get(0)),i},co.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""},co.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var i=this.position.defaultKerningTables;return i?this.position.getKerningValue(i,t,e):this.kerningPairs[t+","+e]||0},co.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},co.prototype.forEachGlyph=function(t,e,i,n,s,r){e=void 0!==e?e:0,i=void 0!==i?i:0,n=void 0!==n?n:72,s=Object.assign({},this.defaultRenderOptions,s);var o,a=1/this.unitsPerEm*n,l=this.stringToGlyphs(t,s);if(s.kerning){var h=s.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(h,s.language)}for(var c=0;c<l.length;c+=1){var u=l[c];if(r.call(this,u,e,i,n,s),u.advanceWidth&&(e+=u.advanceWidth*a),s.kerning&&c<l.length-1){var d=o?this.position.getKerningValue(o,u.index,l[c+1].index):this.getKerningValue(u,l[c+1]);e+=d*a}s.letterSpacing?e+=s.letterSpacing*n:s.tracking&&(e+=s.tracking/1e3*n)}return e},co.prototype.getPath=function(t,e,i,n,s){var r=new A;return this.forEachGlyph(t,e,i,n,s,(function(t,e,i,n){var o=t.getPath(e,i,n,s,this);r.extend(o)})),r},co.prototype.getPaths=function(t,e,i,n,s){var r=[];return this.forEachGlyph(t,e,i,n,s,(function(t,e,i,n){var o=t.getPath(e,i,n,s,this);r.push(o)})),r},co.prototype.getAdvanceWidth=function(t,e,i){return this.forEachGlyph(t,0,0,e,i,(function(){}))},co.prototype.draw=function(t,e,i,n,s,r){this.getPath(e,i,n,s,r).draw(t)},co.prototype.drawPoints=function(t,e,i,n,s,r){this.forEachGlyph(e,i,n,s,r,(function(e,i,n,s){e.drawPoints(t,i,n,s)}))},co.prototype.drawMetrics=function(t,e,i,n,s,r){this.forEachGlyph(e,i,n,s,r,(function(e,i,n,s){e.drawMetrics(t,i,n,s)}))},co.prototype.getEnglishName=function(t){var e=this.names[t];if(e)return e.en},co.prototype.validate=function(){var t=this;function e(t,e){}function i(i){var n=t.getEnglishName(i);e(n&&n.trim().length>0)}i("fontFamily"),i("weightName"),i("manufacturer"),i("copyright"),i("version"),e(this.unitsPerEm>0)},co.prototype.toTables=function(){return Ai.fontToTable(this)},co.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},co.prototype.toArrayBuffer=function(){for(var t=this.toTables(),e=t.encode(),i=new ArrayBuffer(e.length),n=new Uint8Array(i),s=0;s<e.length;s++)n[s]=e[s];return i},co.prototype.download=function(t){var e=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");t=t||e.replace(/\s/g,"")+"-"+n+".otf";var s=this.toArrayBuffer();if(Bi())if(window.URL=window.URL||window.webkitURL,window.URL){var r=new DataView(s),o=new Blob([r],{type:"font/opentype"}),a=document.createElement("a");a.href=window.URL.createObjectURL(o),a.download=t;var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!1),a.dispatchEvent(l)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var h=i(0),c=Ui(s);h.writeFileSync(t,c)}},co.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},co.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},co.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var yo={make:vo,parse:_o},bo=function(){return{coverage:this.parsePointer(ft.coverage),attachPoints:this.parseList(ft.pointer(ft.uShortList))}},xo=function(){var t=this.parseUShort();return O.argument(1===t||2===t||3===t,"Unsupported CaretValue table version."),1===t?{coordinate:this.parseShort()}:2===t?{pointindex:this.parseShort()}:3===t?{coordinate:this.parseShort()}:void 0},So=function(){return this.parseList(ft.pointer(xo))},wo=function(){return{coverage:this.parsePointer(ft.coverage),ligGlyphs:this.parseList(ft.pointer(So))}},Co=function(){return this.parseUShort(),this.parseList(ft.pointer(ft.coverage))};function Mo(t,e){e=e||0;var i=new ft(t,e),n=i.parseVersion(1);O.argument(1===n||1.2===n||1.3===n,"Unsupported GDEF table version.");var s={version:n,classDef:i.parsePointer(ft.classDef),attachList:i.parsePointer(bo),ligCaretList:i.parsePointer(wo),markAttachClassDef:i.parsePointer(ft.classDef)};return n>=1.2&&(s.markGlyphSets=i.parsePointer(Co)),s}var To={parse:Mo},ko=new Array(10);function Eo(t,e){e=e||0;var i=new ft(t,e),n=i.parseVersion(1);return O.argument(1===n||1.1===n,"Unsupported GPOS table version "+n),1===n?{version:n,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(ko)}:{version:n,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(ko),variations:i.parseFeatureVariationsList()}}ko[1]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();return 1===e?{posFormat:1,coverage:this.parsePointer(ft.coverage),value:this.parseValueRecord()}:2===e?{posFormat:2,coverage:this.parsePointer(ft.coverage),values:this.parseValueRecordList()}:void O.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ko[2]=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();O.assert(1===e||2===e,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var i=this.parsePointer(ft.coverage),n=this.parseUShort(),s=this.parseUShort();if(1===e)return{posFormat:e,coverage:i,valueFormat1:n,valueFormat2:s,pairSets:this.parseList(ft.pointer(ft.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(n),value2:this.parseValueRecord(s)}}))))};if(2===e){var r=this.parsePointer(ft.classDef),o=this.parsePointer(ft.classDef),a=this.parseUShort(),l=this.parseUShort();return{posFormat:e,coverage:i,valueFormat1:n,valueFormat2:s,classDef1:r,classDef2:o,class1Count:a,class2Count:l,classRecords:this.parseList(a,ft.list(l,(function(){return{value1:this.parseValueRecord(n),value2:this.parseValueRecord(s)}})))}}},ko[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ko[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ko[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ko[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ko[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ko[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ko[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Lo=new Array(10);function Ao(t){return new nt.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new nt.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new nt.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new nt.LookupList(t.lookups,Lo)}])}var Po={parse:Eo,make:Ao};function Ro(t){var e={};t.skip("uShort");var i=t.parseUShort();O.argument(0===i,"Unsupported kern sub-table version."),t.skip("uShort",2);var n=t.parseUShort();t.skip("uShort",3);for(var s=0;s<n;s+=1){var r=t.parseUShort(),o=t.parseUShort(),a=t.parseShort();e[r+","+o]=a}return e}function Oo(t){var e={};t.skip("uShort");var i=t.parseULong();i>1&&console.warn("Only the first kern subtable is supported."),t.skip("uLong");var n=t.parseUShort(),s=255&n;if(t.skip("uShort"),0===s){var r=t.parseUShort();t.skip("uShort",3);for(var o=0;o<r;o+=1){var a=t.parseUShort(),l=t.parseUShort(),h=t.parseShort();e[a+","+l]=h}}return e}function Io(t,e){var i=new gt.Parser(t,e),n=i.parseUShort();if(0===n)return Ro(i);if(1===n)return Oo(i);throw new Error("Unsupported kern table version ("+n+").")}var Do={parse:Io};function No(t,e,i,n){for(var s=new gt.Parser(t,e),r=n?s.parseUShort:s.parseULong,o=[],a=0;a<i+1;a+=1){var l=r.call(s);n&&(l*=2),o.push(l)}return o}var zo={parse:No};function qo(t,e){var n=i(0);n.readFile(t,(function(t,i){if(t)return e(t.message);e(null,Fi(i))}))}function Bo(t,e){var i=new XMLHttpRequest;i.open("get",t,!0),i.responseType="arraybuffer",i.onload=function(){return i.response?e(null,i.response):e("Font could not be loaded: "+i.statusText)},i.onerror=function(){e("Font could not be loaded")},i.send()}function Fo(t,e){for(var i=[],n=12,s=0;s<e;s+=1){var r=gt.getTag(t,n),o=gt.getULong(t,n+4),a=gt.getULong(t,n+8),l=gt.getULong(t,n+12);i.push({tag:r,checksum:o,offset:a,length:l,compression:!1}),n+=16}return i}function Uo(t,e){for(var i=[],n=44,s=0;s<e;s+=1){var r=gt.getTag(t,n),o=gt.getULong(t,n+4),a=gt.getULong(t,n+8),l=gt.getULong(t,n+12),h=void 0;h=a<l&&"WOFF",i.push({tag:r,offset:o,compression:h,compressedLength:a,length:l}),n+=20}return i}function $o(t,e){if("WOFF"===e.compression){var i=new Uint8Array(t.buffer,e.offset+2,e.compressedLength-2),n=new Uint8Array(e.length);if(k(i,n),n.byteLength!==e.length)throw new Error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length");var s=new DataView(n.buffer,0);return{data:s,offset:0}}return{data:t,offset:e.offset}}function Vo(t,e){var i,n;e=void 0===e||null===e?{}:e;var s,r,o,a,l,h,c,u,d,p,f,m,g,v=new co({empty:!0}),_=new DataView(t,0),y=[],b=gt.getTag(_,0);if(b===String.fromCharCode(0,1,0,0)||"true"===b||"typ1"===b)v.outlinesFormat="truetype",s=gt.getUShort(_,4),y=Fo(_,s);else if("OTTO"===b)v.outlinesFormat="cff",s=gt.getUShort(_,4),y=Fo(_,s);else{if("wOFF"!==b)throw new Error("Unsupported OpenType signature "+b);var x=gt.getTag(_,4);if(x===String.fromCharCode(0,1,0,0))v.outlinesFormat="truetype";else{if("OTTO"!==x)throw new Error("Unsupported OpenType flavor "+b);v.outlinesFormat="cff"}s=gt.getUShort(_,12),y=Uo(_,s)}for(var S=0;S<s;S+=1){var w=y[S],C=void 0;switch(w.tag){case"cmap":C=$o(_,w),v.tables.cmap=wt.parse(C.data,C.offset),v.encoding=new Lt(v.tables.cmap);break;case"cvt ":C=$o(_,w),g=new gt.Parser(C.data,C.offset),v.tables.cvt=g.parseShortList(w.length/2);break;case"fvar":o=w;break;case"fpgm":C=$o(_,w),g=new gt.Parser(C.data,C.offset),v.tables.fpgm=g.parseByteList(w.length);break;case"head":C=$o(_,w),v.tables.head=Le.parse(C.data,C.offset),v.unitsPerEm=v.tables.head.unitsPerEm,i=v.tables.head.indexToLocFormat;break;case"hhea":C=$o(_,w),v.tables.hhea=Re.parse(C.data,C.offset),v.ascender=v.tables.hhea.ascender,v.descender=v.tables.hhea.descender,v.numberOfHMetrics=v.tables.hhea.numberOfHMetrics;break;case"hmtx":u=w;break;case"ltag":C=$o(_,w),n=Fe.parse(C.data,C.offset);break;case"maxp":C=$o(_,w),v.tables.maxp=Ve.parse(C.data,C.offset),v.numGlyphs=v.tables.maxp.numGlyphs;break;case"name":f=w;break;case"OS/2":C=$o(_,w),v.tables.os2=ci.parse(C.data,C.offset);break;case"post":C=$o(_,w),v.tables.post=pi.parse(C.data,C.offset),v.glyphNames=new Pt(v.tables.post);break;case"prep":C=$o(_,w),g=new gt.Parser(C.data,C.offset),v.tables.prep=g.parseByteList(w.length);break;case"glyf":a=w;break;case"loca":p=w;break;case"CFF ":r=w;break;case"kern":d=w;break;case"GDEF":l=w;break;case"GPOS":h=w;break;case"GSUB":c=w;break;case"meta":m=w;break}}var M=$o(_,f);if(v.tables.name=ri.parse(M.data,M.offset,n),v.names=v.tables.name,a&&p){var T=0===i,k=$o(_,p),E=zo.parse(k.data,k.offset,v.numGlyphs,T),L=$o(_,a);v.glyphs=nn.parse(L.data,L.offset,E,v,e)}else{if(!r)throw new Error("Font doesn't contain TrueType or CFF outlines.");var A=$o(_,r);Te.parse(A.data,A.offset,v,e)}var P=$o(_,u);if(ze.parse(v,P.data,P.offset,v.numberOfHMetrics,v.numGlyphs,v.glyphs,e),It(v,e),d){var R=$o(_,d);v.kerningPairs=Do.parse(R.data,R.offset)}else v.kerningPairs={};if(l){var O=$o(_,l);v.tables.gdef=To.parse(O.data,O.offset)}if(h){var I=$o(_,h);v.tables.gpos=Po.parse(I.data,I.offset),v.position.init()}if(c){var D=$o(_,c);v.tables.gsub=yi.parse(D.data,D.offset)}if(o){var N=$o(_,o);v.tables.fvar=yo.parse(N.data,N.offset,v.names)}if(m){var z=$o(_,m);v.tables.meta=Si.parse(z.data,z.offset),v.metas=v.tables.meta}return v}function Ho(t,e,i){i=void 0===i||null===i?{}:i;var n="undefined"===typeof window,s=n&&!i.isUrl?qo:Bo;return new Promise((function(n,r){s(t,(function(t,s){if(t){if(e)return e(t);r(t)}var o;try{o=Vo(s,i)}catch(a){if(e)return e(a,null);r(a)}if(e)return e(null,o);n(o)}))}))}function Go(t,e){var n=i(0),s=n.readFileSync(t);return Vo(Fi(s),e)}var Wo=Object.freeze({__proto__:null,Font:co,Glyph:qt,Path:A,BoundingBox:L,_parse:gt,parse:Vo,load:Ho,loadSync:Go});e["a"]=Wo}).call(this,i("b639").Buffer)},b639:function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i("1fb5"),s=i("9152"),r=i("e3db");function o(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function a(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=h.prototype):(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!h.TYPED_ARRAY_SUPPORT&&!(this instanceof h))return new h(t,e,i);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return c(this,t,e,i)}function c(t,e,i,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?g(t,e,i,n):"string"===typeof e?f(t,e,i):v(t,e)}function u(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e,i,n){return u(e),e<=0?l(t,e):void 0!==i?"string"===typeof n?l(t,e).fill(i,n):l(t,e).fill(i):l(t,e)}function p(t,e){if(u(e),t=l(t,e<0?0:0|_(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function f(t,e,i){if("string"===typeof i&&""!==i||(i="utf8"),!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|b(e,i);t=l(t,n);var s=t.write(e,i);return s!==n&&(t=t.slice(0,s)),t}function m(t,e){var i=e.length<0?0:0|_(e.length);t=l(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function g(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),h.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=h.prototype):t=m(t,e),t}function v(t,e){if(h.isBuffer(e)){var i=0|_(e.length);return t=l(t,i),0===t.length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?l(t,0):m(t,e);if("Buffer"===e.type&&r(e.data))return m(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),h.alloc(+t)}function b(t,e){if(h.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(t).length;default:if(n)return Q(t).length;e=(""+e).toLowerCase(),n=!0}}function x(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,e>>>=0,i<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return z(this,e,i);case"utf8":case"utf-8":return R(this,e,i);case"ascii":return D(this,e,i);case"latin1":case"binary":return N(this,e,i);case"base64":return P(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function S(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function w(t,e,i,n,s){if(0===t.length)return-1;if("string"===typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=s?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(s)return-1;i=t.length-1}else if(i<0){if(!s)return-1;i=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:C(t,e,i,n,s);if("number"===typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):C(t,[e],i,n,s);throw new TypeError("val must be string, number or Buffer")}function C(t,e,i,n,s){var r,o=1,a=t.length,l=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,l/=2,i/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(s){var c=-1;for(r=i;r<a;r++)if(h(t,r)===h(e,-1===c?0:r-c)){if(-1===c&&(c=r),r-c+1===l)return c*o}else-1!==c&&(r-=r-c),c=-1}else for(i+l>a&&(i=a-l),r=i;r>=0;r--){for(var u=!0,d=0;d<l;d++)if(h(t,r+d)!==h(e,d)){u=!1;break}if(u)return r}return-1}function M(t,e,i,n){i=Number(i)||0;var s=t.length-i;n?(n=Number(n),n>s&&(n=s)):n=s;var r=e.length;if(r%2!==0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[i+o]=a}return o}function T(t,e,i,n){return tt(Q(e,t.length-i),t,i,n)}function k(t,e,i,n){return tt(K(e),t,i,n)}function E(t,e,i,n){return k(t,e,i,n)}function L(t,e,i,n){return tt(J(e),t,i,n)}function A(t,e,i,n){return tt(Z(e,t.length-i),t,i,n)}function P(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function R(t,e,i){i=Math.min(t.length,i);var n=[],s=e;while(s<i){var r,o,a,l,h=t[s],c=null,u=h>239?4:h>223?3:h>191?2:1;if(s+u<=i)switch(u){case 1:h<128&&(c=h);break;case 2:r=t[s+1],128===(192&r)&&(l=(31&h)<<6|63&r,l>127&&(c=l));break;case 3:r=t[s+1],o=t[s+2],128===(192&r)&&128===(192&o)&&(l=(15&h)<<12|(63&r)<<6|63&o,l>2047&&(l<55296||l>57343)&&(c=l));break;case 4:r=t[s+1],o=t[s+2],a=t[s+3],128===(192&r)&&128===(192&o)&&128===(192&a)&&(l=(15&h)<<18|(63&r)<<12|(63&o)<<6|63&a,l>65535&&l<1114112&&(c=l))}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),s+=u}return I(n)}e.Buffer=h,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:o(),e.kMaxLength=a(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return c(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return d(null,t,e,i)},h.allocUnsafe=function(t){return p(null,t)},h.allocUnsafeSlow=function(t){return p(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,s=0,r=Math.min(i,n);s<r;++s)if(t[s]!==e[s]){i=t[s],n=e[s];break}return i<n?-1:n<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=h.allocUnsafe(e),s=0;for(i=0;i<t.length;++i){var o=t[i];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,s),s+=o.length}return n},h.byteLength=b,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)S(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)S(this,e,e+3),S(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)S(this,e,e+7),S(this,e+1,e+6),S(this,e+2,e+5),S(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):x.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,n,s){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),e<0||i>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=i)return 0;if(n>=s)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,s>>>=0,this===t)return 0;for(var r=s-n,o=i-e,a=Math.min(r,o),l=this.slice(n,s),c=t.slice(e,i),u=0;u<a;++u)if(l[u]!==c[u]){r=l[u],o=c[u];break}return r<o?-1:o<r?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return w(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return w(this,t,e,i,!1)},h.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"===typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return M(this,t,e,i);case"utf8":case"utf-8":return T(this,t,e,i);case"ascii":return k(this,t,e,i);case"latin1":case"binary":return E(this,t,e,i);case"base64":return L(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function I(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var i="",n=0;while(n<e)i+=String.fromCharCode.apply(String,t.slice(n,n+=O));return i}function D(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;s<i;++s)n+=String.fromCharCode(127&t[s]);return n}function N(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;s<i;++s)n+=String.fromCharCode(t[s]);return n}function z(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var s="",r=e;r<i;++r)s+=X(t[r]);return s}function q(t,e,i){for(var n=t.slice(e,i),s="",r=0;r<n.length;r+=2)s+=String.fromCharCode(n[r]+256*n[r+1]);return s}function B(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,i,n,s,r){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<r)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function U(t,e,i,n){e<0&&(e=65535+e+1);for(var s=0,r=Math.min(t.length-i,2);s<r;++s)t[i+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function $(t,e,i,n){e<0&&(e=4294967295+e+1);for(var s=0,r=Math.min(t.length-i,4);s<r;++s)t[i+s]=e>>>8*(n?s:3-s)&255}function V(t,e,i,n,s,r){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function H(t,e,i,n,r){return r||V(t,e,i,4,34028234663852886e22,-34028234663852886e22),s.write(t,e,i,n,23,4),i+4}function G(t,e,i,n,r){return r||V(t,e,i,8,17976931348623157e292,-17976931348623157e292),s.write(t,e,i,n,52,8),i+8}h.prototype.slice=function(t,e){var i,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=h.prototype;else{var s=e-t;i=new h(s,void 0);for(var r=0;r<s;++r)i[r]=this[r+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=this[t],s=1,r=0;while(++r<e&&(s*=256))n+=this[t+r]*s;return n},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=this[t+--e],s=1;while(e>0&&(s*=256))n+=this[t+--e]*s;return n},h.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=this[t],s=1,r=0;while(++r<e&&(s*=256))n+=this[t+r]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=e,s=1,r=this[t+--n];while(n>0&&(s*=256))r+=this[t+--n]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*e)),r},h.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),s.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),s.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),s.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),s.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,n){if(t=+t,e|=0,i|=0,!n){var s=Math.pow(2,8*i)-1;F(this,t,e,i,s,0)}var r=1,o=0;this[e]=255&t;while(++o<i&&(r*=256))this[e+o]=t/r&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,n){if(t=+t,e|=0,i|=0,!n){var s=Math.pow(2,8*i)-1;F(this,t,e,i,s,0)}var r=i-1,o=1;this[e+r]=255&t;while(--r>=0&&(o*=256))this[e+r]=t/o&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):$(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);F(this,t,e,i,s-1,-s)}var r=0,o=1,a=0;this[e]=255&t;while(++r<i&&(o*=256))t<0&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},h.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);F(this,t,e,i,s-1,-s)}var r=i-1,o=1,a=0;this[e+r]=255&t;while(--r>=0&&(o*=256))t<0&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):$(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return H(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return H(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return G(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return G(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var s,r=n-i;if(this===t&&i<e&&e<n)for(s=r-1;s>=0;--s)t[s+e]=this[s+i];else if(r<1e3||!h.TYPED_ARRAY_SUPPORT)for(s=0;s<r;++s)t[s+e]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+r),e);return r},h.prototype.fill=function(t,e,i,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,i=this.length):"string"===typeof i&&(n=i,i=this.length),1===t.length){var s=t.charCodeAt(0);s<256&&(t=s)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var r;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"===typeof t)for(r=e;r<i;++r)this[r]=t;else{var o=h.isBuffer(t)?t:Q(new h(t,n).toString()),a=o.length;for(r=0;r<i-e;++r)this[r+e]=o[r%a]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function j(t){if(t=Y(t).replace(W,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function Q(t,e){var i;e=e||1/0;for(var n=t.length,s=null,r=[],o=0;o<n;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&r.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&r.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function K(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function Z(t,e){for(var i,n,s,r=[],o=0;o<t.length;++o){if((e-=2)<0)break;i=t.charCodeAt(o),n=i>>8,s=i%256,r.push(s),r.push(n)}return r}function J(t){return n.toByteArray(j(t))}function tt(t,e,i,n){for(var s=0;s<n;++s){if(s+i>=e.length||s>=t.length)break;e[s+i]=t[s]}return s}function et(t){return t!==t}}).call(this,i("c8ba"))},c0a8:function(t){t.exports=JSON.parse('{"a":"1.22.1"}')},c686:function(t,e,i){"use strict";i.d(e,"a",(function(){return _i}));var n={};function s(t){this._pointer=0,this._data=t,this._eof=!1}function r(t,e){return t<=9?e:t>=10&&t<=59?parseFloat(e.trim()):t>=60&&t<=99?parseInt(e.trim()):t>=100&&t<=109?e:t>=110&&t<=149?parseFloat(e.trim()):t>=160&&t<=179?parseInt(e.trim()):t>=210&&t<=239?parseFloat(e.trim()):t>=270&&t<=289?parseInt(e.trim()):t>=290&&t<=299?o(e.trim()):t>=300&&t<=369?e:t>=370&&t<=389?parseInt(e.trim()):t>=390&&t<=399?e:t>=400&&t<=409?parseInt(e.trim()):t>=410&&t<=419?e:t>=420&&t<=429?parseInt(e.trim()):t>=430&&t<=439?e:t>=440&&t<=459?parseInt(e.trim()):t>=460&&t<=469?parseFloat(e.trim()):t>=470&&t<=481||999===t||t>=1e3&&t<=1009?e:t>=1010&&t<=1059?parseFloat(e.trim()):t>=1060&&t<=1071?parseInt(e.trim()):(console.log("WARNING: Group code does not have a defined type: %j",{code:t,value:e}),e)}function o(t){if("0"===t)return!1;if("1"===t)return!0;throw TypeError("String '"+t+"' cannot be cast to Boolean type")}i.r(n),i.d(n,"ArcCurve",(function(){return kt})),i.d(n,"CatmullRomCurve3",(function(){return Ot})),i.d(n,"CubicBezierCurve",(function(){return Ht})),i.d(n,"CubicBezierCurve3",(function(){return Gt})),i.d(n,"EllipseCurve",(function(){return Tt})),i.d(n,"LineCurve",(function(){return Mt})),i.d(n,"LineCurve3",(function(){return Wt})),i.d(n,"QuadraticBezierCurve",(function(){return jt})),i.d(n,"QuadraticBezierCurve3",(function(){return Yt})),i.d(n,"SplineCurve",(function(){return Xt})),s.prototype.next=function(){var t;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return t={code:parseInt(this._data[this._pointer])},this._pointer++,t.value=r(t.code,this._data[this._pointer]),this._pointer++,0===t.code&&"EOF"===t.value&&(this._eof=!0),this.lastReadGroup=t,t},s.prototype.peek=function(){if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);var t={code:parseInt(this._data[this._pointer])};return t.value=r(t.code,this._data[this._pointer+1]),t},s.prototype.rewind=function(t){t=t||1,this._pointer=this._pointer-2*t},s.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},s.prototype.isEOF=function(){return this._eof};var a=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];function l(t){return a[t]}function c(t){var e={};t.rewind();var i=t.next(),n=i.code;if(e.x=i.value,n+=10,i=t.next(),i.code!==n)throw new Error("Expected code for point value to be "+n+" but got "+i.code+".");return e.y=i.value,n+=10,i=t.next(),i.code!==n?(t.rewind(),e):(e.z=i.value,e)}function u(t){t.rewind();let e=t.next();if(101!==e.code)throw new Error("Bad call for skipEmbeddedObject()");do{e=t.next()}while(0!==e.code);t.rewind()}function d(t,e){switch(e.code){case 0:t.type=e.value;break;case 5:t.handle=e.value;break;case 6:t.lineType=e.value;break;case 8:t.layer=e.value;break;case 48:t.lineTypeScale=e.value;break;case 60:t.visible=0===e.value;break;case 62:t.colorIndex=e.value,t.color=l(Math.abs(e.value));break;case 67:t.inPaperSpace=0!==e.value;break;case 100:break;case 330:t.ownerHandle=e.value;break;case 347:t.materialObjectHandle=e.value;break;case 370:t.lineweight=e.value;break;case 420:t.color=e.value;break;case 1e3:t.extendedData=t.extendedData||{},t.extendedData.customStrings=t.extendedData.customStrings||[],t.extendedData.customStrings.push(e.value);break;case 1001:t.extendedData=t.extendedData||{},t.extendedData.applicationName=e.value;break;default:return!1}return!0}function p(){}function f(t,e){var i,n=[],s=!1,r=!1,o=4;for(i=0;i<=o;i++){var a={};while("EOF"!==e){if(0===e.code||r)break;switch(e.code){case 10:case 11:case 12:case 13:if(s){r=!0;continue}a.x=e.value,s=!0;break;case 20:case 21:case 22:case 23:a.y=e.value;break;case 30:case 31:case 32:case 33:a.z=e.value;break;default:return n}e=t.next()}n.push(a),s=!1,r=!1}return t.rewind(),n}function m(){}function g(){}function v(){}function _(){}function y(){}function b(){}function x(){}function S(){}function w(t,e){if(!t||t<=0)throw Error("n must be greater than 0 verticies");var i,n=[],s=!1,r=!1,o=e.lastReadGroup;for(i=0;i<t;i++){var a={};while("EOF"!==o){if(0===o.code||r)break;switch(o.code){case 10:if(s){r=!0;continue}a.x=o.value,s=!0;break;case 20:a.y=o.value;break;case 30:a.z=o.value;break;case 40:a.startWidth=o.value;break;case 41:a.endWidth=o.value;break;case 42:0!=o.value&&(a.bulge=o.value);break;default:return s&&n.push(a),e.rewind(),n}o=e.next()}n.push(a),s=!1,r=!1}return e.rewind(),n}function C(){}function M(){}function T(){}function k(){}function E(t,e){var i=new T,n=[];while(!t.isEOF())if(0===e.code)if("VERTEX"===e.value)n.push(i.parseEntity(t,e)),e=t.lastReadGroup;else if("SEQEND"===e.value){L(t,e);break}return n}function L(t,e){var i={type:e.value};e=t.next();while("EOF"!=e){if(0==e.code)break;d(i,e),e=t.next()}return i}function A(){}function P(){}function R(){}p.ForEntityName="3DFACE",p.prototype.parseEntity=function(t,e){var i={type:e.value,vertices:[]};e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 70:i.shape=1===(1&e.value),i.hasContinuousLinetypePattern=128===(128&e.value);break;case 10:i.vertices=f(t,e),e=t.lastReadGroup;break;default:d(i,e);break}e=t.next()}return i},m.ForEntityName="ARC",m.prototype.parseEntity=function(t,e){var i;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.center=c(t);break;case 40:i.radius=e.value;break;case 50:i.startAngle=Math.PI/180*e.value;break;case 51:i.endAngle=Math.PI/180*e.value,i.angleLength=i.endAngle-i.startAngle;break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},g.ForEntityName="ATTDEF",g.prototype.parseEntity=function(t,e){var i={type:e.value,scale:1,textStyle:"STANDARD"};e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 1:i.text=e.value;break;case 2:i.tag=e.value;break;case 3:i.prompt=e.value;break;case 7:i.textStyle=e.value;break;case 10:i.startPoint=c(t);break;case 11:i.endPoint=c(t);break;case 39:i.thickness=e.value;break;case 40:i.textHeight=e.value;break;case 41:i.scale=e.value;break;case 50:i.rotation=e.value;break;case 51:i.obliqueAngle=e.value;break;case 70:i.invisible=!!(1&e.value),i.constant=!!(2&e.value),i.verificationRequired=!!(4&e.value),i.preset=!!(8&e.value);break;case 71:i.backwards=!!(2&e.value),i.mirrored=!!(4&e.value);break;case 72:i.horizontalJustification=e.value;break;case 73:i.fieldLength=e.value;break;case 74:i.verticalJustification=e.value;break;case 100:break;case 101:u(t);break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},v.ForEntityName="CIRCLE",v.prototype.parseEntity=function(t,e){var i,n;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.center=c(t);break;case 40:i.radius=e.value;break;case 50:i.startAngle=Math.PI/180*e.value;break;case 51:n=Math.PI/180*e.value,n<i.startAngle?i.angleLength=n+2*Math.PI-i.startAngle:i.angleLength=n-i.startAngle,i.endAngle=n;break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},_.ForEntityName="DIMENSION",_.prototype.parseEntity=function(t,e){var i;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 2:i.block=e.value;break;case 10:i.anchorPoint=c(t);break;case 11:i.middleOfText=c(t);break;case 12:i.insertionPoint=c(t);break;case 13:i.linearOrAngularPoint1=c(t);break;case 14:i.linearOrAngularPoint2=c(t);break;case 15:i.diameterOrRadiusPoint=c(t);break;case 16:i.arcPoint=c(t);break;case 70:i.dimensionType=e.value;break;case 71:i.attachmentPoint=e.value;break;case 42:i.actualMeasurement=e.value;break;case 1:i.text=e.value;break;case 50:i.angle=e.value;break;default:d(i,e);break}e=t.next()}return i},y.ForEntityName="ELLIPSE",y.prototype.parseEntity=function(t,e){var i;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.center=c(t);break;case 11:i.majorAxisEndPoint=c(t);break;case 40:i.axisRatio=e.value;break;case 41:i.startAngle=e.value;break;case 42:i.endAngle=e.value;break;case 2:i.name=e.value;break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},b.ForEntityName="INSERT",b.prototype.parseEntity=function(t,e){var i;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 2:i.name=e.value;break;case 41:i.xScale=e.value;break;case 42:i.yScale=e.value;break;case 43:i.zScale=e.value;break;case 10:i.position=c(t);break;case 50:i.rotation=e.value;break;case 70:i.columnCount=e.value;break;case 71:i.rowCount=e.value;break;case 44:i.columnSpacing=e.value;break;case 45:i.rowSpacing=e.value;break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},x.ForEntityName="LINE",x.prototype.parseEntity=function(t,e){var i={type:e.value,vertices:[]};e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.vertices.unshift(c(t));break;case 11:i.vertices.push(c(t));break;case 210:i.extrusionDirection=c(t);break;case 100:break;default:d(i,e);break}e=t.next()}return i},S.ForEntityName="LWPOLYLINE",S.prototype.parseEntity=function(t,e){var i={type:e.value,vertices:[]},n=0;e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 38:i.elevation=e.value;break;case 39:i.depth=e.value;break;case 70:i.shape=1===(1&e.value),i.hasContinuousLinetypePattern=128===(128&e.value);break;case 90:n=e.value;break;case 10:i.vertices=w(n,t);break;case 43:0!==e.value&&(i.width=e.value);break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},C.ForEntityName="MTEXT",C.prototype.parseEntity=function(t,e){var i={type:e.value};e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 3:case 1:i.text?i.text+=e.value:i.text=e.value;break;case 10:i.position=c(t);break;case 11:i.direction=c(t);break;case 40:i.height=e.value;break;case 41:i.width=e.value;break;case 44:i.lineSpacing=e.value;break;case 50:i.rotation=e.value;break;case 71:i.attachmentPoint=e.value;break;case 72:i.drawingDirection=e.value;break;case 101:u(t);break;default:d(i,e);break}e=t.next()}return i},M.ForEntityName="POINT",M.prototype.parseEntity=function(t,e){var i;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.position=c(t);break;case 39:i.thickness=e.value;break;case 210:i.extrusionDirection=c(t);break;case 100:break;default:d(i,e);break}e=t.next()}return i},T.ForEntityName="VERTEX",T.prototype.parseEntity=function(t,e){var i={type:e.value};e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.x=e.value;break;case 20:i.y=e.value;break;case 30:i.z=e.value;break;case 40:break;case 41:break;case 42:0!=e.value&&(i.bulge=e.value);break;case 70:i.curveFittingVertex=0!==(1&e.value),i.curveFitTangent=0!==(2&e.value),i.splineVertex=0!==(8&e.value),i.splineControlPoint=0!==(16&e.value),i.threeDPolylineVertex=0!==(32&e.value),i.threeDPolylineMesh=0!==(64&e.value),i.polyfaceMeshVertex=0!==(128&e.value);break;case 50:break;case 71:i.faceA=e.value;break;case 72:i.faceB=e.value;break;case 73:i.faceC=e.value;break;case 74:i.faceD=e.value;break;default:d(i,e);break}e=t.next()}return i},k.ForEntityName="POLYLINE",k.prototype.parseEntity=function(t,e){var i={type:e.value,vertices:[]};e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:break;case 20:break;case 30:break;case 39:i.thickness=e.value;break;case 40:break;case 41:break;case 70:i.shape=0!==(1&e.value),i.includesCurveFitVertices=0!==(2&e.value),i.includesSplineFitVertices=0!==(4&e.value),i.is3dPolyline=0!==(8&e.value),i.is3dPolygonMesh=0!==(16&e.value),i.is3dPolygonMeshClosed=0!==(32&e.value),i.isPolyfaceMesh=0!==(64&e.value),i.hasContinuousLinetypePattern=0!==(128&e.value);break;case 71:break;case 72:break;case 73:break;case 74:break;case 75:break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i.vertices=E(t,e),i},A.ForEntityName="SOLID",A.prototype.parseEntity=function(t,e){var i;i={type:e.value},i.points=[],e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.points[0]=c(t);break;case 11:i.points[1]=c(t);break;case 12:i.points[2]=c(t);break;case 13:i.points[3]=c(t);break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},P.ForEntityName="SPLINE",P.prototype.parseEntity=function(t,e){var i;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.controlPoints||(i.controlPoints=[]),i.controlPoints.push(c(t));break;case 11:i.fitPoints||(i.fitPoints=[]),i.fitPoints.push(c(t));break;case 12:i.startTangent=c(t);break;case 13:i.endTangent=c(t);break;case 40:i.knotValues||(i.knotValues=[]),i.knotValues.push(e.value);break;case 70:0!=(1&e.value)&&(i.closed=!0),0!=(2&e.value)&&(i.periodic=!0),0!=(4&e.value)&&(i.rational=!0),0!=(8&e.value)&&(i.planar=!0),0!=(16&e.value)&&(i.planar=!0,i.linear=!0);break;case 71:i.degreeOfSplineCurve=e.value;break;case 72:i.numberOfKnots=e.value;break;case 73:i.numberOfControlPoints=e.value;break;case 74:i.numberOfFitPoints=e.value;break;case 210:i.extrusionDirection=c(t);break;default:d(i,e);break}e=t.next()}return i},R.ForEntityName="TEXT",R.prototype.parseEntity=function(t,e){var i;i={type:e.value},e=t.next();while("EOF"!==e){if(0===e.code)break;switch(e.code){case 10:i.startPoint=c(t);break;case 11:i.endPoint=c(t);break;case 40:i.textHeight=e.value;break;case 41:i.xScale=e.value;break;case 50:i.rotation=e.value;break;case 1:i.text=e.value;break;case 72:i.halign=e.value;break;case 73:i.valign=e.value;break;default:d(i,e);break}e=t.next()}return i};var O=i("5c7d"),I=i.n(O);function D(t){t.registerEntityHandler(p),t.registerEntityHandler(m),t.registerEntityHandler(g),t.registerEntityHandler(v),t.registerEntityHandler(_),t.registerEntityHandler(y),t.registerEntityHandler(b),t.registerEntityHandler(x),t.registerEntityHandler(S),t.registerEntityHandler(C),t.registerEntityHandler(M),t.registerEntityHandler(k),t.registerEntityHandler(A),t.registerEntityHandler(P),t.registerEntityHandler(R)}function N(){this._entityHandlers={},D(this)}function z(t){I.a.debug("unhandled group "+q(t))}function q(t){return t.code+":"+t.value}function B(t){return a[t]}I.a.setLevel("error"),N.prototype.parse=function(t,e){throw new Error("read() not implemented. Use readSync()")},N.prototype.registerEntityHandler=function(t){var e=new t;this._entityHandlers[t.ForEntityName]=e},N.prototype.parseSync=function(t){return"string"===typeof t?this._parse(t):(console.error("Cannot read dxf source of type `"+typeof t),null)},N.prototype.parseStream=function(t,e){var i="",n=this;function s(t){i+=t}function r(){try{var t=n._parse(i)}catch(s){return e(s)}e(null,t)}function o(t){e(t)}t.on("data",s),t.on("end",r),t.on("error",o)},N.prototype._parse=function(t){var e,i,n={},r=0,o=t.split(/\r\n|\r|\n/g);if(e=new s(o),!e.hasNext())throw Error("Empty file");var a=this,l=function(){i=e.next();while(!e.isEOF())if(0===i.code&&"SECTION"===i.value){if(i=e.next(),2!==i.code){console.error("Unexpected code %s after 0:SECTION",q(i)),i=e.next();continue}"HEADER"===i.value?(I.a.debug("> HEADER"),n.header=c(),I.a.debug("<")):"BLOCKS"===i.value?(I.a.debug("> BLOCKS"),n.blocks=u(),I.a.debug("<")):"ENTITIES"===i.value?(I.a.debug("> ENTITIES"),n.entities=b(!1),I.a.debug("<")):"TABLES"===i.value?(I.a.debug("> TABLES"),n.tables=p(),I.a.debug("<")):"EOF"===i.value?I.a.debug("EOF"):I.a.warn("Skipping section '%s'",i.value)}else i=e.next()},h=function(t,e){return i.code===t&&i.value===e},c=function(){var t=null,n=null,s={};i=e.next();while(1){if(h(0,"ENDSEC")){t&&(s[t]=n);break}9===i.code?(t&&(s[t]=n),t=i.value):10===i.code?n={x:i.value}:20===i.code?n.y=i.value:30===i.code?n.z=i.value:n=i.value,i=e.next()}return i=e.next(),s},u=function(){var t,n={};i=e.next();while("EOF"!==i.value){if(h(0,"ENDSEC"))break;h(0,"BLOCK")?(I.a.debug("block {"),t=d(),I.a.debug("}"),S(t),t.name?n[t.name]=t:I.a.error('block with handle "'+t.handle+'" is missing a name.')):(z(i),i=e.next())}return n},d=function(){var t={};i=e.next();while("EOF"!==i.value){switch(i.code){case 1:t.xrefPath=i.value,i=e.next();break;case 2:t.name=i.value,i=e.next();break;case 3:t.name2=i.value,i=e.next();break;case 5:t.handle=i.value,i=e.next();break;case 8:t.layer=i.value,i=e.next();break;case 10:t.position=x(),i=e.next();break;case 67:t.paperSpace=!(!i.value||1!=i.value),i=e.next();break;case 70:0!=i.value&&(t.type=i.value),i=e.next();break;case 100:i=e.next();break;case 330:t.ownerHandle=i.value,i=e.next();break;case 0:if("ENDBLK"==i.value)break;t.entities=b(!0);break;default:z(i),i=e.next()}if(h(0,"ENDBLK")){i=e.next();break}}return t},p=function(){var t={};i=e.next();while("EOF"!==i.value){if(h(0,"ENDSEC"))break;if(h(0,"TABLE")){i=e.next();var n=y[i.value];n?(I.a.debug(i.value+" Table {"),t[y[i.value].tableName]=m(),I.a.debug("}")):I.a.debug("Unhandled Table "+i.value)}else i=e.next()}return i=e.next(),t};const f="ENDTAB";var m=function(){var t,n=y[i.value],s={},r=0;i=e.next();while(!h(0,f))switch(i.code){case 5:s.handle=i.value,i=e.next();break;case 330:s.ownerHandle=i.value,i=e.next();break;case 100:"AcDbSymbolTable"===i.value||z(i),i=e.next();break;case 70:r=i.value,i=e.next();break;case 0:i.value===n.dxfSymbolName?s[n.tableRecordsProperty]=n.parseTableRecords():(z(i),i=e.next());break;default:z(i),i=e.next()}var o=s[n.tableRecordsProperty];return o&&(o.constructor===Array?t=o.length:"object"===typeof o&&(t=Object.keys(o).length),r!==t&&I.a.warn("Parsed "+t+" "+n.dxfSymbolName+"'s but expected "+r)),i=e.next(),s},g=function(){var t=[],n={};I.a.debug("ViewPort {"),i=e.next();while(!h(0,f))switch(i.code){case 2:n.name=i.value,i=e.next();break;case 10:n.lowerLeftCorner=x(),i=e.next();break;case 11:n.upperRightCorner=x(),i=e.next();break;case 12:n.center=x(),i=e.next();break;case 13:n.snapBasePoint=x(),i=e.next();break;case 14:n.snapSpacing=x(),i=e.next();break;case 15:n.gridSpacing=x(),i=e.next();break;case 16:n.viewDirectionFromTarget=x(),i=e.next();break;case 17:n.viewTarget=x(),i=e.next();break;case 42:n.lensLength=i.value,i=e.next();break;case 43:n.frontClippingPlane=i.value,i=e.next();break;case 44:n.backClippingPlane=i.value,i=e.next();break;case 45:n.viewHeight=i.value,i=e.next();break;case 50:n.snapRotationAngle=i.value,i=e.next();break;case 51:n.viewTwistAngle=i.value,i=e.next();break;case 79:n.orthographicType=i.value,i=e.next();break;case 110:n.ucsOrigin=x(),i=e.next();break;case 111:n.ucsXAxis=x(),i=e.next();break;case 112:n.ucsYAxis=x(),i=e.next();break;case 110:n.ucsOrigin=x(),i=e.next();break;case 281:n.renderMode=i.value,i=e.next();break;case 281:n.defaultLightingType=i.value,i=e.next();break;case 292:n.defaultLightingOn=i.value,i=e.next();break;case 330:n.ownerHandle=i.value,i=e.next();break;case 63:case 421:case 431:n.ambientColor=i.value,i=e.next();break;case 0:"VPORT"===i.value&&(I.a.debug("}"),t.push(n),I.a.debug("ViewPort {"),n={},i=e.next());break;default:z(i),i=e.next();break}return I.a.debug("}"),t.push(n),t},v=function(){var t,n,s={},r={};I.a.debug("LType {"),i=e.next();while(!h(0,"ENDTAB"))switch(i.code){case 2:r.name=i.value,t=i.value,i=e.next();break;case 3:r.description=i.value,i=e.next();break;case 73:n=i.value,n>0&&(r.pattern=[]),i=e.next();break;case 40:r.patternLength=i.value,i=e.next();break;case 49:r.pattern.push(i.value),i=e.next();break;case 0:I.a.debug("}"),n>0&&n!==r.pattern.length&&I.a.warn("lengths do not match on LTYPE pattern"),s[t]=r,r={},I.a.debug("LType {"),i=e.next();break;default:i=e.next()}return I.a.debug("}"),s[t]=r,s},_=function(){var t,n={},s={};I.a.debug("Layer {"),i=e.next();while(!h(0,"ENDTAB"))switch(i.code){case 2:s.name=i.value,t=i.value,i=e.next();break;case 62:s.visible=i.value>=0,s.colorIndex=Math.abs(i.value),s.color=B(s.colorIndex),i=e.next();break;case 70:s.frozen=0!==(1&i.value)||0!==(2&i.value),i=e.next();break;case 420:s.color=i.value,i=e.next();break;case 0:"LAYER"===i.value&&(I.a.debug("}"),n[t]=s,I.a.debug("Layer {"),s={},t=void 0,i=e.next());break;default:z(i),i=e.next();break}return I.a.debug("}"),n[t]=s,n},y={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:g},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:v},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:_}},b=function(t){var n=[],s=t?"ENDBLK":"ENDSEC";t||(i=e.next());while(1)if(0===i.code){if(i.value===s)break;var r,o=a._entityHandlers[i.value];if(null==o){I.a.warn("Unhandled entity "+i.value),i=e.next();continue}I.a.debug(i.value+" {"),r=o.parseEntity(e,i),i=e.lastReadGroup,I.a.debug("}"),S(r),n.push(r)}else i=e.next();return"ENDSEC"==s&&(i=e.next()),n},x=function(){var t={},n=i.code;if(t.x=i.value,n+=10,i=e.next(),i.code!=n)throw new Error("Expected code for point value to be "+n+" but got "+i.code+".");return t.y=i.value,n+=10,i=e.next(),i.code!=n?(e.rewind(),t):(t.z=i.value,t)},S=function(t){if(!t)throw new TypeError("entity cannot be undefined or null");t.handle||(t.handle=r++)};return l(),n};class F{constructor(t){this.url=t}async Fetch(t=null){const e=await fetch(this.url),i=+e.headers.get("Content-Length"),n=e.body.getReader();let s=0,r="",o=new TextDecoder("utf-8");while(1){const{done:e,value:a}=await n.read();if(e){r+=o.decode(new ArrayBuffer(0),{stream:!1});break}r+=o.decode(a,{stream:!0}),s+=a.length,null!==t&&t("fetch",s,i)}null!==t&&t("parse",0,null);const a=new N;return a.parseSync(r)}}var U=i("5a89");class ${constructor(t,e,i,n,s){this.layerName=null!==t&&void 0!==t?t:null,this.blockName=null!==e&&void 0!==e?e:null,this.geometryType=null!==i&&void 0!==i?i:null,this.color=n,this.lineType=null!==s&&void 0!==s?s:null}Compare(t){let e=V(this.layerName,t.layerName);return 0!==e?e:(e=V(this.blockName,t.blockName),0!==e?e:(e=V(this.geometryType,t.geometryType),0!==e?e:(e=V(this.color,t.color),0!==e?e:V(this.lineType,t.lineType))))}IsIndexed(){return this.geometryType===$.GeometryType.INDEXED_LINES||this.geometryType===$.GeometryType.INDEXED_TRIANGLES}IsInstanced(){return this.geometryType===$.GeometryType.BLOCK_INSTANCE||this.geometryType===$.GeometryType.POINT_INSTANCE}}function V(t,e){return null===t?null===e?0:-1:null===e?1:t<e?-1:t>e?1:0}$.GeometryType=Object.freeze({POINTS:0,LINES:1,INDEXED_LINES:2,TRIANGLES:3,INDEXED_TRIANGLES:4,BLOCK_INSTANCE:5,POINT_INSTANCE:6});class H{constructor(t,e=16){this.type=t,this.capacity=e,this.size=0,this.buffer=new(W(t))(e)}GetSize(){return this.size}Push(t){this._CheckGrow();const e=this.size;return this.buffer[e]=t,this.size++,e}Get(t){if(t>=this.size)throw new Error(`Index out of range: ${t}/${this.size}`);return this.buffer[t]}CopyTo(t,e,i=0,n=-1){-1===n&&(n=this.size-i);const s=new(W(this.type))(this.buffer.buffer,i,n);t.set(s,e)}_CheckGrow(){if(this.size<this.capacity)return;this.capacity*=2;const t=new(W(this.type))(this.capacity);t.set(this.buffer),this.buffer=t}}const G={INT8:0,UINT8:1,UINT8_CLAMPED:2,INT16:3,UINT16:4,INT32:5,UINT32:6,INT64:7,UINT64:8,FLOAT32:9,FLOAT64:10};function W(t){switch(t){case G.INT8:return Int8Array;case G.UINT8:return Uint8Array;case G.UINT8_CLAMPED:return Uint8ClampedArray;case G.INT16:return Int16Array;case G.UINT16:return Uint16Array;case G.INT32:return Int32Array;case G.UINT32:return Uint32Array;case G.FLOAT32:return Float32Array;case G.FLOAT64:return Float64Array;default:throw new Error("Unrecognized native type: "+t)}}const j=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];Math.PI,Math.PI;function Y(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,s=j[255&t]+j[t>>8&255]+j[t>>16&255]+j[t>>24&255]+"-"+j[255&e]+j[e>>8&255]+"-"+j[e>>16&15|64]+j[e>>24&255]+"-"+j[63&i|128]+j[i>>8&255]+"-"+j[i>>16&255]+j[i>>24&255]+j[255&n]+j[n>>8&255]+j[n>>16&255]+j[n>>24&255];return s.toLowerCase()}function X(t,e,i){return Math.max(e,Math.min(i,t))}function Q(t,e){return(t%e+e)%e}function K(t,e,i){return(1-i)*t+i*e}const Z="srgb",J="srgb-linear";function tt(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function et(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const it={[Z]:{[J]:tt},[J]:{[Z]:et}},nt={legacyMode:!0,get workingColorSpace(){return J},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,i){if(this.legacyMode||e===i||!e||!i)return t;if(it[e]&&void 0!==it[e][i]){const n=it[e][i];return t.r=n(t.r),t.g=n(t.g),t.b=n(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},st={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},rt={r:0,g:0,b:0},ot={h:0,s:0,l:0},at={h:0,s:0,l:0};function lt(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function ht(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class ct{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Z){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,nt.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=J){return this.r=t,this.g=e,this.b=i,nt.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=J){if(t=Q(t,1),e=X(e,0,1),i=X(i,0,1),0===e)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,s=2*i-n;this.r=lt(s,n,t+1/3),this.g=lt(s,n,t),this.b=lt(s,n,t-1/3)}return nt.toWorkingColorSpace(this,n),this}setStyle(t,e=Z){function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const s=n[1],r=n[2];switch(s){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,nt.toWorkingColorSpace(this,e),i(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,nt.toWorkingColorSpace(this,e),i(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,s=parseFloat(t[2])/100,r=parseFloat(t[3])/100;return i(t[4]),this.setHSL(n,s,r,e)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],i=t.length;if(3===i)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,nt.toWorkingColorSpace(this,e),this;if(6===i)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,nt.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=Z){const i=st[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=tt(t.r),this.g=tt(t.g),this.b=tt(t.b),this}copyLinearToSRGB(t){return this.r=et(t.r),this.g=et(t.g),this.b=et(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Z){return nt.fromWorkingColorSpace(ht(this,rt),t),X(255*rt.r,0,255)<<16^X(255*rt.g,0,255)<<8^X(255*rt.b,0,255)<<0}getHexString(t=Z){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=J){nt.fromWorkingColorSpace(ht(this,rt),e);const i=rt.r,n=rt.g,s=rt.b,r=Math.max(i,n,s),o=Math.min(i,n,s);let a,l;const h=(o+r)/2;if(o===r)a=0,l=0;else{const t=r-o;switch(l=h<=.5?t/(r+o):t/(2-r-o),r){case i:a=(n-s)/t+(n<s?6:0);break;case n:a=(s-i)/t+2;break;case s:a=(i-n)/t+4;break}a/=6}return t.h=a,t.s=l,t.l=h,t}getRGB(t,e=J){return nt.fromWorkingColorSpace(ht(this,rt),e),t.r=rt.r,t.g=rt.g,t.b=rt.b,t}getStyle(t=Z){return nt.fromWorkingColorSpace(ht(this,rt),t),t!==Z?`color(${t} ${rt.r} ${rt.g} ${rt.b})`:`rgb(${255*rt.r|0},${255*rt.g|0},${255*rt.b|0})`}offsetHSL(t,e,i){return this.getHSL(ot),ot.h+=t,ot.s+=e,ot.l+=i,this.setHSL(ot.h,ot.s,ot.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(ot),t.getHSL(at);const i=K(ot.h,at.h,e),n=K(ot.s,at.s,e),s=K(ot.l,at.l,e);return this.setHSL(i,n,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}ct.NAMES=st;class ut{constructor(t=0,e=0){ut.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),s=this.x-t.x,r=this.y-t.y;return this.x=s*i-r*n+t.x,this.y=s*n+r*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dt{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,s,r,o){let a=i[n+0],l=i[n+1],h=i[n+2],c=i[n+3];const u=s[r+0],d=s[r+1],p=s[r+2],f=s[r+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(c!==f||a!==u||l!==d||h!==p){let t=1-o;const e=a*u+l*d+h*p+c*f,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const s=Math.sqrt(n),r=Math.atan2(s,e*i);t=Math.sin(t*r)/s,o=Math.sin(o*r)/s}const s=o*i;if(a=a*t+u*s,l=l*t+d*s,h=h*t+p*s,c=c*t+f*s,t===1-o){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,i,n,s,r){const o=i[n],a=i[n+1],l=i[n+2],h=i[n+3],c=s[r],u=s[r+1],d=s[r+2],p=s[r+3];return t[e]=o*p+h*c+a*d-l*u,t[e+1]=a*p+h*u+l*c-o*d,t[e+2]=l*p+h*d+o*u-a*c,t[e+3]=h*p-o*c-a*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,n=t._y,s=t._z,r=t._order,o=Math.cos,a=Math.sin,l=o(i/2),h=o(n/2),c=o(s/2),u=a(i/2),d=a(n/2),p=a(s/2);switch(r){case"XYZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"YXZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"ZXY":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"ZYX":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"YZX":this._x=u*h*c+l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c-u*d*p;break;case"XZY":this._x=u*h*c-l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],s=e[8],r=e[1],o=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=i+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(s-l)*t,this._z=(r-n)*t}else if(i>o&&i>c){const t=2*Math.sqrt(1+i-o-c);this._w=(h-a)/t,this._x=.25*t,this._y=(n+r)/t,this._z=(s+l)/t}else if(o>c){const t=2*Math.sqrt(1+o-i-c);this._w=(s-l)/t,this._x=(n+r)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-i-o);this._w=(r-n)/t,this._x=(s+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(X(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,s=t._z,r=t._w,o=e._x,a=e._y,l=e._z,h=e._w;return this._x=i*h+r*o+n*l-s*a,this._y=n*h+r*a+s*o-i*l,this._z=s*h+r*l+i*a-n*o,this._w=r*h-i*o-n*a-s*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,n=this._y,s=this._z,r=this._w;let o=r*t._w+i*t._x+n*t._y+s*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=r,this._x=i,this._y=n,this._z=s,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*r+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=r*c+this._w*u,this._x=i*c+this._x*u,this._y=n*c+this._y*u,this._z=s*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(s),i*Math.cos(s),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pt{constructor(t=0,e=0,i=0){pt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(mt.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(mt.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*n,this.y=s[1]*e+s[4]*i+s[7]*n,this.z=s[2]*e+s[5]*i+s[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,s=t.elements,r=1/(s[3]*e+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*n+s[12])*r,this.y=(s[1]*e+s[5]*i+s[9]*n+s[13])*r,this.z=(s[2]*e+s[6]*i+s[10]*n+s[14])*r,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,s=t.x,r=t.y,o=t.z,a=t.w,l=a*e+r*n-o*i,h=a*i+o*e-s*n,c=a*n+s*i-r*e,u=-s*e-r*i-o*n;return this.x=l*a+u*-s+h*-o-c*-r,this.y=h*a+u*-r+c*-s-l*-o,this.z=c*a+u*-o+l*-r-h*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n,this.y=s[1]*e+s[5]*i+s[9]*n,this.z=s[2]*e+s[6]*i+s[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,s=t.z,r=e.x,o=e.y,a=e.z;return this.x=n*a-s*o,this.y=s*r-i*a,this.z=i*o-n*r,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return ft.copy(this).projectOnVector(t),this.sub(ft)}reflect(t){return this.sub(ft.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(X(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ft=new pt,mt=new dt;class gt{constructor(){gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,s,r,o,a,l,h,c,u,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=s,g[5]=r,g[9]=o,g[13]=a,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new gt).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/vt.setFromMatrixColumn(t,0).length(),s=1/vt.setFromMatrixColumn(t,1).length(),r=1/vt.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,n=t.y,s=t.z,r=Math.cos(i),o=Math.sin(i),a=Math.cos(n),l=Math.sin(n),h=Math.cos(s),c=Math.sin(s);if("XYZ"===t.order){const t=r*h,i=r*c,n=o*h,s=o*c;e[0]=a*h,e[4]=-a*c,e[8]=l,e[1]=i+n*l,e[5]=t-s*l,e[9]=-o*a,e[2]=s-t*l,e[6]=n+i*l,e[10]=r*a}else if("YXZ"===t.order){const t=a*h,i=a*c,n=l*h,s=l*c;e[0]=t+s*o,e[4]=n*o-i,e[8]=r*l,e[1]=r*c,e[5]=r*h,e[9]=-o,e[2]=i*o-n,e[6]=s+t*o,e[10]=r*a}else if("ZXY"===t.order){const t=a*h,i=a*c,n=l*h,s=l*c;e[0]=t-s*o,e[4]=-r*c,e[8]=n+i*o,e[1]=i+n*o,e[5]=r*h,e[9]=s-t*o,e[2]=-r*l,e[6]=o,e[10]=r*a}else if("ZYX"===t.order){const t=r*h,i=r*c,n=o*h,s=o*c;e[0]=a*h,e[4]=n*l-i,e[8]=t*l+s,e[1]=a*c,e[5]=s*l+t,e[9]=i*l-n,e[2]=-l,e[6]=o*a,e[10]=r*a}else if("YZX"===t.order){const t=r*a,i=r*l,n=o*a,s=o*l;e[0]=a*h,e[4]=s-t*c,e[8]=n*c+i,e[1]=c,e[5]=r*h,e[9]=-o*h,e[2]=-l*h,e[6]=i*c+n,e[10]=t-s*c}else if("XZY"===t.order){const t=r*a,i=r*l,n=o*a,s=o*l;e[0]=a*h,e[4]=-c,e[8]=l*h,e[1]=t*c+s,e[5]=r*h,e[9]=i*c-n,e[2]=n*c-i,e[6]=o*h,e[10]=s*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(yt,t,bt)}lookAt(t,e,i){const n=this.elements;return wt.subVectors(t,e),0===wt.lengthSq()&&(wt.z=1),wt.normalize(),xt.crossVectors(i,wt),0===xt.lengthSq()&&(1===Math.abs(i.z)?wt.x+=1e-4:wt.z+=1e-4,wt.normalize(),xt.crossVectors(i,wt)),xt.normalize(),St.crossVectors(wt,xt),n[0]=xt.x,n[4]=St.x,n[8]=wt.x,n[1]=xt.y,n[5]=St.y,n[9]=wt.y,n[2]=xt.z,n[6]=St.z,n[10]=wt.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,s=this.elements,r=i[0],o=i[4],a=i[8],l=i[12],h=i[1],c=i[5],u=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],_=i[7],y=i[11],b=i[15],x=n[0],S=n[4],w=n[8],C=n[12],M=n[1],T=n[5],k=n[9],E=n[13],L=n[2],A=n[6],P=n[10],R=n[14],O=n[3],I=n[7],D=n[11],N=n[15];return s[0]=r*x+o*M+a*L+l*O,s[4]=r*S+o*T+a*A+l*I,s[8]=r*w+o*k+a*P+l*D,s[12]=r*C+o*E+a*R+l*N,s[1]=h*x+c*M+u*L+d*O,s[5]=h*S+c*T+u*A+d*I,s[9]=h*w+c*k+u*P+d*D,s[13]=h*C+c*E+u*R+d*N,s[2]=p*x+f*M+m*L+g*O,s[6]=p*S+f*T+m*A+g*I,s[10]=p*w+f*k+m*P+g*D,s[14]=p*C+f*E+m*R+g*N,s[3]=v*x+_*M+y*L+b*O,s[7]=v*S+_*T+y*A+b*I,s[11]=v*w+_*k+y*P+b*D,s[15]=v*C+_*E+y*R+b*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],s=t[12],r=t[1],o=t[5],a=t[9],l=t[13],h=t[2],c=t[6],u=t[10],d=t[14],p=t[3],f=t[7],m=t[11],g=t[15];return p*(+s*a*c-n*l*c-s*o*u+i*l*u+n*o*d-i*a*d)+f*(+e*a*d-e*l*u+s*r*u-n*r*d+n*l*h-s*a*h)+m*(+e*l*c-e*o*d-s*r*c+i*r*d+s*o*h-i*l*h)+g*(-n*o*h-e*a*c+e*o*u+n*r*c-i*r*u+i*a*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=c*m*l-f*u*l+f*a*d-o*m*d-c*a*g+o*u*g,_=p*u*l-h*m*l-p*a*d+r*m*d+h*a*g-r*u*g,y=h*f*l-p*c*l+p*o*d-r*f*d-h*o*g+r*c*g,b=p*c*a-h*f*a-p*o*u+r*f*u+h*o*m-r*c*m,x=e*v+i*_+n*y+s*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return t[0]=v*S,t[1]=(f*u*s-c*m*s-f*n*d+i*m*d+c*n*g-i*u*g)*S,t[2]=(o*m*s-f*a*s+f*n*l-i*m*l-o*n*g+i*a*g)*S,t[3]=(c*a*s-o*u*s-c*n*l+i*u*l+o*n*d-i*a*d)*S,t[4]=_*S,t[5]=(h*m*s-p*u*s+p*n*d-e*m*d-h*n*g+e*u*g)*S,t[6]=(p*a*s-r*m*s-p*n*l+e*m*l+r*n*g-e*a*g)*S,t[7]=(r*u*s-h*a*s+h*n*l-e*u*l-r*n*d+e*a*d)*S,t[8]=y*S,t[9]=(p*c*s-h*f*s-p*i*d+e*f*d+h*i*g-e*c*g)*S,t[10]=(r*f*s-p*o*s+p*i*l-e*f*l-r*i*g+e*o*g)*S,t[11]=(h*o*s-r*c*s-h*i*l+e*c*l+r*i*d-e*o*d)*S,t[12]=b*S,t[13]=(h*f*n-p*c*n+p*i*u-e*f*u-h*i*m+e*c*m)*S,t[14]=(p*o*n-r*f*n-p*i*a+e*f*a+r*i*m-e*o*m)*S,t[15]=(r*c*n-h*o*n+h*i*a-e*c*a-r*i*u+e*o*u)*S,this}scale(t){const e=this.elements,i=t.x,n=t.y,s=t.z;return e[0]*=i,e[4]*=n,e[8]*=s,e[1]*=i,e[5]*=n,e[9]*=s,e[2]*=i,e[6]*=n,e[10]*=s,e[3]*=i,e[7]*=n,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),s=1-i,r=t.x,o=t.y,a=t.z,l=s*r,h=s*o;return this.set(l*r+i,l*o-n*a,l*a+n*o,0,l*o+n*a,h*o+i,h*a-n*r,0,l*a-n*o,h*a+n*r,s*a*a+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,s,r){return this.set(1,i,s,0,t,1,r,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,s=e._x,r=e._y,o=e._z,a=e._w,l=s+s,h=r+r,c=o+o,u=s*l,d=s*h,p=s*c,f=r*h,m=r*c,g=o*c,v=a*l,_=a*h,y=a*c,b=i.x,x=i.y,S=i.z;return n[0]=(1-(f+g))*b,n[1]=(d+y)*b,n[2]=(p-_)*b,n[3]=0,n[4]=(d-y)*x,n[5]=(1-(u+g))*x,n[6]=(m+v)*x,n[7]=0,n[8]=(p+_)*S,n[9]=(m-v)*S,n[10]=(1-(u+f))*S,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let s=vt.set(n[0],n[1],n[2]).length();const r=vt.set(n[4],n[5],n[6]).length(),o=vt.set(n[8],n[9],n[10]).length(),a=this.determinant();a<0&&(s=-s),t.x=n[12],t.y=n[13],t.z=n[14],_t.copy(this);const l=1/s,h=1/r,c=1/o;return _t.elements[0]*=l,_t.elements[1]*=l,_t.elements[2]*=l,_t.elements[4]*=h,_t.elements[5]*=h,_t.elements[6]*=h,_t.elements[8]*=c,_t.elements[9]*=c,_t.elements[10]*=c,e.setFromRotationMatrix(_t),i.x=s,i.y=r,i.z=o,this}makePerspective(t,e,i,n,s,r){const o=this.elements,a=2*s/(e-t),l=2*s/(i-n),h=(e+t)/(e-t),c=(i+n)/(i-n),u=-(r+s)/(r-s),d=-2*r*s/(r-s);return o[0]=a,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,i,n,s,r){const o=this.elements,a=1/(e-t),l=1/(i-n),h=1/(r-s),c=(e+t)*a,u=(i+n)*l,d=(r+s)*h;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const vt=new pt,_t=new gt,yt=new pt(0,0,0),bt=new pt(1,1,1),xt=new pt,St=new pt,wt=new pt;class Ct{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,n=this.getPoint(0),s=0;e.push(0);for(let r=1;r<=t;r++)i=this.getPoint(r/t),s+=i.distanceTo(n),e.push(s),n=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let n=0;const s=i.length;let r;r=e||t*i[s-1];let o,a=0,l=s-1;while(a<=l)if(n=Math.floor(a+(l-a)/2),o=i[n]-r,o<0)a=n+1;else{if(!(o>0)){l=n;break}l=n-1}if(n=l,i[n]===r)return n/(s-1);const h=i[n],c=i[n+1],u=c-h,d=(r-h)/u,p=(n+d)/(s-1);return p}getTangent(t,e){const i=1e-4;let n=t-i,s=t+i;n<0&&(n=0),s>1&&(s=1);const r=this.getPoint(n),o=this.getPoint(s),a=e||(r.isVector2?new ut:new pt);return a.copy(o).sub(r).normalize(),a}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new pt,n=[],s=[],r=[],o=new pt,a=new gt;for(let d=0;d<=t;d++){const e=d/t;n[d]=this.getTangentAt(e,new pt)}s[0]=new pt,r[0]=new pt;let l=Number.MAX_VALUE;const h=Math.abs(n[0].x),c=Math.abs(n[0].y),u=Math.abs(n[0].z);h<=l&&(l=h,i.set(1,0,0)),c<=l&&(l=c,i.set(0,1,0)),u<=l&&i.set(0,0,1),o.crossVectors(n[0],i).normalize(),s[0].crossVectors(n[0],o),r[0].crossVectors(n[0],s[0]);for(let d=1;d<=t;d++){if(s[d]=s[d-1].clone(),r[d]=r[d-1].clone(),o.crossVectors(n[d-1],n[d]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(X(n[d-1].dot(n[d]),-1,1));s[d].applyMatrix4(a.makeRotationAxis(o,t))}r[d].crossVectors(n[d],s[d])}if(!0===e){let e=Math.acos(X(s[0].dot(s[t]),-1,1));e/=t,n[0].dot(o.crossVectors(s[0],s[t]))>0&&(e=-e);for(let i=1;i<=t;i++)s[i].applyMatrix4(a.makeRotationAxis(n[i],e*i)),r[i].crossVectors(n[i],s[i])}return{tangents:n,normals:s,binormals:r}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Mt extends Ct{constructor(t=new ut,e=new ut){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new ut){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new ut;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Tt extends Ct{constructor(t=0,e=0,i=1,n=1,s=0,r=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=s,this.aEndAngle=r,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const i=e||new ut,n=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;while(s<0)s+=n;while(s>n)s-=n;s<Number.EPSILON&&(s=r?0:n),!0!==this.aClockwise||r||(s===n?s=-n:s-=n);const o=this.aStartAngle+t*s;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=a-this.aX,n=l-this.aY;a=i*t-n*e+this.aX,l=i*e+n*t+this.aY}return i.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class kt extends Tt{constructor(t,e,i,n,s,r){super(t,e,i,i,n,s,r),this.isArcCurve=!0,this.type="ArcCurve"}}function Et(){let t=0,e=0,i=0,n=0;function s(s,r,o,a){t=s,e=o,i=-3*s+3*r-2*o-a,n=2*s-2*r+o+a}return{initCatmullRom:function(t,e,i,n,r){s(e,i,r*(i-t),r*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,r,o,a){let l=(e-t)/r-(i-t)/(r+o)+(i-e)/o,h=(i-e)/o-(n-e)/(o+a)+(n-i)/a;l*=o,h*=o,s(e,i,l,h)},calc:function(s){const r=s*s,o=r*s;return t+e*s+i*r+n*o}}}const Lt=new pt,At=new Et,Pt=new Et,Rt=new Et;class Ot extends Ct{constructor(t=[],e=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=n}getPoint(t,e=new pt){const i=e,n=this.points,s=n.length,r=(s-(this.closed?0:1))*t;let o,a,l=Math.floor(r),h=r-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===h&&l===s-1&&(l=s-2,h=1),this.closed||l>0?o=n[(l-1)%s]:(Lt.subVectors(n[0],n[1]).add(n[0]),o=Lt);const c=n[l%s],u=n[(l+1)%s];if(this.closed||l+2<s?a=n[(l+2)%s]:(Lt.subVectors(n[s-1],n[s-2]).add(n[s-1]),a=Lt),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(c),t),i=Math.pow(c.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(a),t);i<1e-4&&(i=1),e<1e-4&&(e=i),n<1e-4&&(n=i),At.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,e,i,n),Pt.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,e,i,n),Rt.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,e,i,n)}else"catmullrom"===this.curveType&&(At.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),Pt.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),Rt.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return i.set(At.calc(h),Pt.calc(h),Rt.calc(h)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new pt).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function It(t,e,i,n,s){const r=.5*(n-e),o=.5*(s-i),a=t*t,l=t*a;return(2*i-2*n+r+o)*l+(-3*i+3*n-2*r-o)*a+r*t+i}function Dt(t,e){const i=1-t;return i*i*e}function Nt(t,e){return 2*(1-t)*t*e}function zt(t,e){return t*t*e}function qt(t,e,i,n){return Dt(t,e)+Nt(t,i)+zt(t,n)}function Bt(t,e){const i=1-t;return i*i*i*e}function Ft(t,e){const i=1-t;return 3*i*i*t*e}function Ut(t,e){return 3*(1-t)*t*t*e}function $t(t,e){return t*t*t*e}function Vt(t,e,i,n,s){return Bt(t,e)+Ft(t,i)+Ut(t,n)+$t(t,s)}class Ht extends Ct{constructor(t=new ut,e=new ut,i=new ut,n=new ut){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new ut){const i=e,n=this.v0,s=this.v1,r=this.v2,o=this.v3;return i.set(Vt(t,n.x,s.x,r.x,o.x),Vt(t,n.y,s.y,r.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Gt extends Ct{constructor(t=new pt,e=new pt,i=new pt,n=new pt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new pt){const i=e,n=this.v0,s=this.v1,r=this.v2,o=this.v3;return i.set(Vt(t,n.x,s.x,r.x,o.x),Vt(t,n.y,s.y,r.y,o.y),Vt(t,n.z,s.z,r.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Wt extends Ct{constructor(t=new pt,e=new pt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new pt){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class jt extends Ct{constructor(t=new ut,e=new ut,i=new ut){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new ut){const i=e,n=this.v0,s=this.v1,r=this.v2;return i.set(qt(t,n.x,s.x,r.x),qt(t,n.y,s.y,r.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Yt extends Ct{constructor(t=new pt,e=new pt,i=new pt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new pt){const i=e,n=this.v0,s=this.v1,r=this.v2;return i.set(qt(t,n.x,s.x,r.x),qt(t,n.y,s.y,r.y),qt(t,n.z,s.z,r.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Xt extends Ct{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new ut){const i=e,n=this.points,s=(n.length-1)*t,r=Math.floor(s),o=s-r,a=n[0===r?r:r-1],l=n[r],h=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return i.set(It(o,a.x,l.x,h.x,c.x),It(o,a.y,l.y,h.y,c.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new ut).fromArray(i))}return this}}class Qt extends Ct{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Mt(e,t))}getPoint(t,e){const i=t*this.getLength(),n=this.getCurveLengths();let s=0;while(s<n.length){if(n[s]>=i){const t=n[s]-i,r=this.curves[s],o=r.getLength(),a=0===o?0:1-t/o;return r.getPointAt(a,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let n=0,s=this.curves;n<s.length;n++){const r=s[n],o=r.isEllipseCurve?2*t:r.isLineCurve||r.isLineCurve3?1:r.isSplineCurve?t*r.points.length:t,a=r.getPoints(o);for(let t=0;t<a.length;t++){const n=a[t];i&&i.equals(n)||(e.push(n),i=n)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push((new n[i.type]).fromJSON(i))}return this}}class Kt extends Qt{constructor(t){super(),this.type="Path",this.currentPoint=new ut,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new Mt(this.currentPoint.clone(),new ut(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,n){const s=new jt(this.currentPoint.clone(),new ut(t,e),new ut(i,n));return this.curves.push(s),this.currentPoint.set(i,n),this}bezierCurveTo(t,e,i,n,s,r){const o=new Ht(this.currentPoint.clone(),new ut(t,e),new ut(i,n),new ut(s,r));return this.curves.push(o),this.currentPoint.set(s,r),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new Xt(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,n,s,r){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,i,n,s,r),this}absarc(t,e,i,n,s,r){return this.absellipse(t,e,i,i,n,s,r),this}ellipse(t,e,i,n,s,r,o,a){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+l,e+h,i,n,s,r,o,a),this}absellipse(t,e,i,n,s,r,o,a){const l=new Tt(t,e,i,n,s,r,o,a);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Zt extends Kt{constructor(t){super(t),this.uuid=Y(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push((new Kt).fromJSON(i))}return this}}const Jt={triangulate:function(t,e,i=2){const n=e&&e.length,s=n?e[0]*i:t.length;let r=te(t,0,s,i,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,h,c,u,d,p;if(n&&(r=ae(t,e,r,i)),t.length>80*i){a=h=t[0],l=c=t[1];for(let e=i;e<s;e+=i)u=t[e],d=t[e+1],u<a&&(a=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);p=Math.max(h-a,c-l),p=0!==p?32767/p:0}return ie(r,o,i,a,l,p,0),o}};function te(t,e,i,n,s){let r,o;if(s===Ae(t,e,i,n)>0)for(r=e;r<i;r+=n)o=ke(r,t[r],t[r+1],o);else for(r=i-n;r>=e;r-=n)o=ke(r,t[r],t[r+1],o);return o&&ye(o,o.next)&&(Ee(o),o=o.next),o}function ee(t,e){if(!t)return t;e||(e=t);let i,n=t;do{if(i=!1,n.steiner||!ye(n,n.next)&&0!==_e(n.prev,n,n.next))n=n.next;else{if(Ee(n),n=e=n.prev,n===n.next)break;i=!0}}while(i||n!==e);return e}function ie(t,e,i,n,s,r,o){if(!t)return;!o&&r&&de(t,n,s,r);let a,l,h=t;while(t.prev!==t.next)if(a=t.prev,l=t.next,r?se(t,n,s,r):ne(t))e.push(a.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),Ee(t),t=l.next,h=l.next;else if(t=l,t===h){o?1===o?(t=re(ee(t),e,i),ie(t,e,i,n,s,r,2)):2===o&&oe(t,e,i,n,s,r):ie(ee(t),e,i,n,s,r,1);break}}function ne(t){const e=t.prev,i=t,n=t.next;if(_e(e,i,n)>=0)return!1;const s=e.x,r=i.x,o=n.x,a=e.y,l=i.y,h=n.y,c=s<r?s<o?s:o:r<o?r:o,u=a<l?a<h?a:h:l<h?l:h,d=s>r?s>o?s:o:r>o?r:o,p=a>l?a>h?a:h:l>h?l:h;let f=n.next;while(f!==e){if(f.x>=c&&f.x<=d&&f.y>=u&&f.y<=p&&ge(s,a,r,l,o,h,f.x,f.y)&&_e(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function se(t,e,i,n){const s=t.prev,r=t,o=t.next;if(_e(s,r,o)>=0)return!1;const a=s.x,l=r.x,h=o.x,c=s.y,u=r.y,d=o.y,p=a<l?a<h?a:h:l<h?l:h,f=c<u?c<d?c:d:u<d?u:d,m=a>l?a>h?a:h:l>h?l:h,g=c>u?c>d?c:d:u>d?u:d,v=fe(p,f,e,i,n),_=fe(m,g,e,i,n);let y=t.prevZ,b=t.nextZ;while(y&&y.z>=v&&b&&b.z<=_){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==s&&y!==o&&ge(a,c,l,u,h,d,y.x,y.y)&&_e(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==s&&b!==o&&ge(a,c,l,u,h,d,b.x,b.y)&&_e(b.prev,b,b.next)>=0)return!1;b=b.nextZ}while(y&&y.z>=v){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==s&&y!==o&&ge(a,c,l,u,h,d,y.x,y.y)&&_e(y.prev,y,y.next)>=0)return!1;y=y.prevZ}while(b&&b.z<=_){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==s&&b!==o&&ge(a,c,l,u,h,d,b.x,b.y)&&_e(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function re(t,e,i){let n=t;do{const s=n.prev,r=n.next.next;!ye(s,r)&&be(s,n,n.next,r)&&Ce(s,r)&&Ce(r,s)&&(e.push(s.i/i|0),e.push(n.i/i|0),e.push(r.i/i|0),Ee(n),Ee(n.next),n=t=r),n=n.next}while(n!==t);return ee(n)}function oe(t,e,i,n,s,r){let o=t;do{let t=o.next.next;while(t!==o.prev){if(o.i!==t.i&&ve(o,t)){let a=Te(o,t);return o=ee(o,o.next),a=ee(a,a.next),ie(o,e,i,n,s,r,0),void ie(a,e,i,n,s,r,0)}t=t.next}o=o.next}while(o!==t)}function ae(t,e,i,n){const s=[];let r,o,a,l,h;for(r=0,o=e.length;r<o;r++)a=e[r]*n,l=r<o-1?e[r+1]*n:t.length,h=te(t,a,l,n,!1),h===h.next&&(h.steiner=!0),s.push(me(h));for(s.sort(le),r=0;r<s.length;r++)i=he(s[r],i);return i}function le(t,e){return t.x-e.x}function he(t,e){const i=ce(t,e);if(!i)return e;const n=Te(i,t);return ee(n,n.next),ee(i,i.next)}function ce(t,e){let i,n=e,s=-1/0;const r=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const t=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>s&&(s=t,i=n.x<n.next.x?n:n.next,t===r))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,h=i.y;let c,u=1/0;n=i;do{r>=n.x&&n.x>=l&&r!==n.x&&ge(o<h?r:s,o,l,h,o<h?s:r,o,n.x,n.y)&&(c=Math.abs(o-n.y)/(r-n.x),Ce(n,t)&&(c<u||c===u&&(n.x>i.x||n.x===i.x&&ue(i,n)))&&(i=n,u=c)),n=n.next}while(n!==a);return i}function ue(t,e){return _e(t.prev,t,e.prev)<0&&_e(e.next,t,t.next)<0}function de(t,e,i,n){let s=t;do{0===s.z&&(s.z=fe(s.x,s.y,e,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,pe(s)}function pe(t){let e,i,n,s,r,o,a,l,h=1;do{i=t,t=null,r=null,o=0;while(i){for(o++,n=i,a=0,e=0;e<h;e++)if(a++,n=n.nextZ,!n)break;l=h;while(a>0||l>0&&n)0!==a&&(0===l||!n||i.z<=n.z)?(s=i,i=i.nextZ,a--):(s=n,n=n.nextZ,l--),r?r.nextZ=s:t=s,s.prevZ=r,r=s;i=n}r.nextZ=null,h*=2}while(o>1);return t}function fe(t,e,i,n,s){return t=(t-i)*s|0,e=(e-n)*s|0,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function me(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function ge(t,e,i,n,s,r,o,a){return(s-o)*(e-a)>=(t-o)*(r-a)&&(t-o)*(n-a)>=(i-o)*(e-a)&&(i-o)*(r-a)>=(s-o)*(n-a)}function ve(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!we(t,e)&&(Ce(t,e)&&Ce(e,t)&&Me(t,e)&&(_e(t.prev,t,e.prev)||_e(t,e.prev,e))||ye(t,e)&&_e(t.prev,t,t.next)>0&&_e(e.prev,e,e.next)>0)}function _e(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function ye(t,e){return t.x===e.x&&t.y===e.y}function be(t,e,i,n){const s=Se(_e(t,e,i)),r=Se(_e(t,e,n)),o=Se(_e(i,n,t)),a=Se(_e(i,n,e));return s!==r&&o!==a||(!(0!==s||!xe(t,i,e))||(!(0!==r||!xe(t,n,e))||(!(0!==o||!xe(i,t,n))||!(0!==a||!xe(i,e,n)))))}function xe(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Se(t){return t>0?1:t<0?-1:0}function we(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&be(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function Ce(t,e){return _e(t.prev,t,t.next)<0?_e(t,e,t.next)>=0&&_e(t,t.prev,e)>=0:_e(t,e,t.prev)<0||_e(t,t.next,e)<0}function Me(t,e){let i=t,n=!1;const s=(t.x+e.x)/2,r=(t.y+e.y)/2;do{i.y>r!==i.next.y>r&&i.next.y!==i.y&&s<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function Te(t,e){const i=new Le(t.i,t.x,t.y),n=new Le(e.i,e.x,e.y),s=t.next,r=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,n.next=i,i.prev=n,r.next=n,n.prev=r,n}function ke(t,e,i,n){const s=new Le(t,e,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Ee(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Le(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ae(t,e,i,n){let s=0;for(let r=e,o=i-n;r<i;r+=n)s+=(t[o]-t[r])*(t[r+1]+t[o+1]),o=r;return s}class Pe{static area(t){const e=t.length;let i=0;for(let n=e-1,s=0;s<e;n=s++)i+=t[n].x*t[s].y-t[s].x*t[n].y;return.5*i}static isClockWise(t){return Pe.area(t)<0}static triangulateShape(t,e){const i=[],n=[],s=[];Re(t),Oe(i,t);let r=t.length;e.forEach(Re);for(let a=0;a<e.length;a++)n.push(r),r+=e[a].length,Oe(i,e[a]);const o=Jt.triangulate(i,n);for(let a=0;a<o.length;a+=3)s.push(o.slice(a,a+3));return s}}function Re(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Oe(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class Ie{constructor(){this.type="ShapePath",this.color=new ct,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Kt,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this}bezierCurveTo(t,e,i,n,s,r){return this.currentPath.bezierCurveTo(t,e,i,n,s,r),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],s=new Zt;s.curves=n.curves,e.push(s)}return e}function i(t,e){const i=e.length;let n=!1;for(let s=i-1,r=0;r<i;s=r++){let i=e[s],o=e[r],a=o.x-i.x,l=o.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=e[r],a=-a,o=e[s],l=-l),t.y<i.y||t.y>o.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{const e=l*(t.x-i.x)-a*(t.y-i.y);if(0===e)return!0;if(e<0)continue;n=!n}}else{if(t.y!==i.y)continue;if(o.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=o.x)return!0}}return n}const n=Pe.isClockWise,s=this.subPaths;if(0===s.length)return[];let r,o,a;const l=[];if(1===s.length)return o=s[0],a=new Zt,a.curves=o.curves,l.push(a),l;let h=!n(s[0].getPoints());h=t?!h:h;const c=[],u=[];let d,p,f=[],m=0;u[m]=void 0,f[m]=[];for(let g=0,v=s.length;g<v;g++)o=s[g],d=o.getPoints(),r=n(d),r=t?!r:r,r?(!h&&u[m]&&m++,u[m]={s:new Zt,p:d},u[m].s.curves=o.curves,h&&m++,f[m]=[]):f[m].push({h:o,p:d[0]});if(!u[0])return e(s);if(u.length>1){let t=!1,e=0;for(let i=0,n=u.length;i<n;i++)c[i]=[];for(let n=0,s=u.length;n<s;n++){const s=f[n];for(let r=0;r<s.length;r++){const o=s[r];let a=!0;for(let s=0;s<u.length;s++)i(o.p,u[s].p)&&(n!==s&&e++,a?(a=!1,c[s].push(o)):t=!0);a&&c[n].push(o)}}e>0&&!1===t&&(f=c)}for(let g=0,v=u.length;g<v;g++){a=u[g].s,l.push(a),p=f[g];for(let t=0,e=p.length;t<e;t++)a.holes.push(p[t].h)}return l}}const De=Object.freeze({TEXT:0,ESCAPE:1,SKIP_FORMAT:2,PARAGRAPH1:3,PARAGRAPH2:4,PARAGRAPH3:5}),Ne=Object.freeze({TEXT:0,SCOPE:1,PARAGRAPH:2,NON_BREAKING_SPACE:3,PARAGRAPH_ALIGNMENT:4}),ze=new Set(["L","l","O","o","K","k","P","X","~"]),qe=new Set(["f","F","p","Q","H","W","S","A","C","T"]),Be=new Set(["\\","{","}"]);class Fe{constructor(){this.entities=[]}Parse(t){const e=t.length;let i=0,n=De.TEXT,s=[],r=this.entities,o=0;const a=this;function l(){n===De.TEXT&&i!==o&&(r.push({type:Ne.TEXT,content:t.slice(i,o)}),i=o)}function h(t){r.push({type:t})}function c(){const t={type:Ne.SCOPE,content:[]};r.push(t),r=t.content,s.push(t)}function u(){0!==s.length&&(s.pop(),r=0===s.length?a.entities:s[s.length-1].content)}for(;o<e;o++){const e=t.charAt(o);switch(n){case De.TEXT:if("{"===e){l(),c(),i=o+1;continue}if("}"===e){l(),u(),i=o+1;continue}if("\\"===e){l(),n=De.ESCAPE;continue}continue;case De.ESCAPE:if(ze.has(e)){switch(e){case"P":h(Ne.PARAGRAPH);break;case"~":h(Ne.NON_BREAKING_SPACE);break}n=De.TEXT,i=o+1;continue}if(qe.has(e)){switch(e){case"p":n=De.PARAGRAPH1;continue}n=De.SKIP_FORMAT;continue}i=Be.has(e)?o:o-1,n=De.TEXT;continue;case De.PARAGRAPH1:n="x"===e?De.PARAGRAPH2:De.SKIP_FORMAT;continue;case De.PARAGRAPH2:n="q"===e?De.PARAGRAPH3:De.SKIP_FORMAT;continue;case De.PARAGRAPH3:r.push({type:Ne.PARAGRAPH_ALIGNMENT,alignment:e}),n=De.SKIP_FORMAT;continue;case De.SKIP_FORMAT:";"===e&&(i=o+1,n=De.TEXT);continue;default:throw new Error("Unhandled state")}}l()}GetContent(){return this.entities}*GetText(){function*t(e){for(const i of e)i.type===Ne.TEXT?yield i.content:i.type===Ne.SCOPE&&(yield*t(i.content))}yield*t(this.GetContent())}}Fe.EntityType=Ne;class Ue{constructor(t,e=null){this.fontFetchers=t,this.fonts=[],this.options=Object.create(ei.DefaultOptions),e&&Object.assign(this.options,e),this.shapes=new Map,this.stubShapeLoaded=!1,this.stubShape=null}async FetchFonts(t){if(!this.stubShapeLoaded){this.stubShapeLoaded=!0;for(const t of Array.from(this.options.fallbackChar))if(await this.FetchFonts(t)){this.stubShape=this._CreateCharShape(t);break}}let e=!1;for(const i of t){if(i.codePointAt(0)<32)continue;let t=!1;for(const e of this.fonts)if(e.HasChar(i)){t=!0;break}if(!t){if(!this.fontFetchers)return!1;while(this.fontFetchers.length>0){const e=this.fontFetchers.shift(),n=await this._FetchFont(e);if(this.fonts.push(n),n.HasChar(i)){t=!0;break}}t||(e=!0)}}return!e}get canRender(){return null!==this.fonts&&this.fonts.length>0}*Render({text:t,startPos:e,endPos:i,rotation:n=0,widthFactor:s=1,hAlign:r=0,vAlign:o=0,color:a,layer:l=null,fontSize:h}){const c=new Ye(h);for(const u of t){const t=this._GetCharShape(u);t&&c.PushChar(u,t)}yield*c.Render(e,i,n,s,r,o,a,l)}*RenderMText({formattedText:t,position:e,fontSize:i,width:n=null,rotation:s=0,direction:r=null,attachment:o,lineSpacing:a=1,color:l,layer:h=null}){const c=new je(i,this._GetCharShape.bind(this));c.FeedText(t),yield*c.Render(e,n,s,r,o,a,l,h)}_GetCharShape(t){let e=this.shapes.get(t);return e||(e=this._CreateCharShape(t),this.shapes.set(t,e),e)}_CreateCharShape(t){for(const e of this.fonts){const i=e.GetCharPath(t);if(i)return new $e(e,i,this.options)}return this.stubShape}async _FetchFont(t){return new Ve(await t())}}Ue.DefaultOptions={curveSubdivision:2,fallbackChar:"�?"};class $e{constructor(t,e,i){if(this.font=t,this.advance=e.advance,this.bounds=e.bounds,e.path){const t=e.path.toShapes(!1);this.vertices=[],this.indices=[];for(const e of t){const t=e.extractPoints(i.curveSubdivision);if(!Pe.isClockWise(t.shape)){t.shape=t.shape.reverse();for(const e of t.holes)Pe.isClockWise(e)&&(t.holes[h]=e.reverse())}const s=Pe.triangulateShape(t.shape,t.holes),r=this,o=this.vertices.length;function n(t){for(const e of t)r.vertices.push(e)}n(t.shape);for(const e of t.holes)n(e);for(const e of s)for(const t of e)this.indices.push(o+t)}}else this.vertices=null}GetVertices(t,e){return this.vertices.map(i=>i.clone().multiplyScalar(e).add(t))}}class Ve{constructor(t){this.data=t,this.charMap=new Map;for(const e of Object.values(t.glyphs.glyphs))void 0!==e.unicode&&this.charMap.set(String.fromCodePoint(e.unicode),e);this.scale=100/(72*(this.data.unitsPerEm||2048))}HasChar(t){return this.charMap.has(t)}GetCharPath(t){const e=this.charMap.get(t);if(!e)return null;const i=this.scale,n=new Ie;for(const s of e.path.commands)switch(s.type){case"M":n.moveTo(s.x*i,s.y*i);break;case"L":n.lineTo(s.x*i,s.y*i);break;case"Q":n.quadraticCurveTo(s.x1*i,s.y1*i,s.x*i,s.y*i);break;case"C":n.bezierCurveTo(s.x1*i,s.y1*i,s.x2*i,s.y2*i,s.x*i,s.y*i);break}return{advance:e.advanceWidth*i,path:n,bounds:{xMin:e.xMin*i,xMax:e.xMax*i,yMin:e.yMin*i,yMax:e.yMax*i}}}GetKerning(t,e){const i=this.data.charToGlyphIndex(t);if(0===i)return 0;const n=this.data.charToGlyphIndex(t);return 0===n?0:this.data.getKerningValue(i,n)*this.scale}}const He=Object.freeze({LEFT:0,CENTER:1,RIGHT:2,ALIGNED:3,MIDDLE:4,FIT:5}),Ge=Object.freeze({BASELINE:0,BOTTOM:1,MIDDLE:2,TOP:3}),We=Object.freeze({TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,MIDDLE_LEFT:4,MIDDLE_CENTER:5,MIDDLE_RIGHT:6,BOTTOM_LEFT:7,BOTTOM_CENTER:8,BOTTOM_RIGHT:9});class je{constructor(t,e){this.fontSize=t,this.charShapeProvider=e,this.curParagraph=new je.Paragraph(this),this.paragraphs=[this.curParagraph],this.spaceShape=e(" ")}FeedText(t){function*e(t){for(const i of t)i.type===Fe.EntityType.SCOPE?yield*e(i.content):yield i}let i=null;for(const n of e(t))switch(n.type){case Fe.EntityType.TEXT:for(const e of n.content)" "===e?this.curParagraph.FeedSpace():this.curParagraph.FeedChar(e);break;case Fe.EntityType.PARAGRAPH:this.curParagraph=new je.Paragraph(this),this.curParagraph.SetAlignment(i),this.paragraphs.push(this.curParagraph);break;case Fe.EntityType.NON_BREAKING_SPACE:this.curParagraph.FeedChar(" ");break;case Fe.EntityType.PARAGRAPH_ALIGNMENT:let t=null;switch(n.alignment){case"l":t=je.Paragraph.Alignment.LEFT;break;case"c":t=je.Paragraph.Alignment.CENTER;break;case"r":t=je.Paragraph.Alignment.RIGHT;break;case"d":t=je.Paragraph.Alignment.JUSTIFY;break;case"j":t=null;break}this.curParagraph.SetAlignment(t),i=t;break}}*Render(t,e,i,n,s,r,o,a){for(const f of this.paragraphs)f.BuildLines(e);if(null===e||0===e){e=0;for(const t of this.paragraphs){const i=t.GetMaxLineWidth();i>e&&(e=i)}}let l=je.Paragraph.Alignment.LEFT;switch(s){case We.TOP_CENTER:case We.MIDDLE_CENTER:case We.BOTTOM_CENTER:l=je.Paragraph.Alignment.CENTER;break;case We.TOP_RIGHT:case We.MIDDLE_RIGHT:case We.BOTTOM_RIGHT:l=je.Paragraph.Alignment.RIGHT;break}for(const f of this.paragraphs)f.ApplyAlignment(e,l);null!==n&&(i=180*Math.atan2(n.y,n.x)/Math.PI);const h=5*r*this.fontSize/3;let c=0;for(const f of this.paragraphs)null===f.lines?c++:c+=f.lines.length;c*=h;let u=new U["v"];switch(s){case We.TOP_LEFT:break;case We.TOP_CENTER:u.x=e/2;break;case We.TOP_RIGHT:u.x=e;break;case We.MIDDLE_LEFT:u.y=-c/2;break;case We.MIDDLE_CENTER:u.x=e/2,u.y=-c/2;break;case We.MIDDLE_RIGHT:u.x=e,u.y=-c/2;break;case We.BOTTOM_LEFT:u.y=-c;break;case We.BOTTOM_CENTER:u.x=e/2,u.y=-c;break;case We.BOTTOM_RIGHT:u.x=e,u.y=-c;break;default:throw new Error("Unhandled alignment")}const d=(new U["m"]).translate(-u.x,-u.y).rotate(-i*Math.PI/180).translate(t.x,t.y);let p=-this.fontSize;for(const f of this.paragraphs)if(null!==f.lines)for(const t of f.lines){for(let e=t.startChunkIdx;e<t.startChunkIdx+t.numChunks;e++){const n=f.chunks[e];let s=n.position;0!==e&&e===t.startChunkIdx||(s+=n.GetSpacingWidth());const r=new U["v"](s,p);r.applyMatrix3(d),n.block&&(yield*n.block.Render(r,null,i,null,He.LEFT,Ge.BASELINE,o,a))}p-=h}else p-=h}}je.Paragraph=class{constructor(t){this.textBox=t,this.chunks=[],this.curChunk=null,this.alignment=null,this.lines=null}FeedChar(t){const e=this.textBox.charShapeProvider(t);null!==e&&(null===this.curChunk&&this._AddChunk(),this.curChunk.PushChar(t,e))}FeedSpace(){null!==this.curChunk&&null===this.curChunk.lastChar||this._AddChunk(),this.curChunk.PushSpace()}SetAlignment(t){this.alignment=t}BuildLines(t){if(null===this.curChunk)return;this.lines=[];let e=0,i=0,n=0;const s=()=>{this.lines.push(new je.Paragraph.Line(this,e,i-e,n)),e=i,n=0};for(;i<this.chunks.length;i++){const r=this.chunks[i],o=r.GetWidth(0===e||i!==e);null!==t&&0!==t&&0!==n&&n+o>t&&s(),r.position=n,n+=o}e!==i&&0!==n&&s()}GetMaxLineWidth(){if(null===this.lines)return 0;let t=0;for(const e of this.lines)e.width>t&&(t=e.width);return t}ApplyAlignment(t,e){if(this.lines)for(const i of this.lines)i.ApplyAlignment(t,e)}_AddChunk(){this.curChunk=new je.Paragraph.Chunk(this,this.textBox.fontSize,this.curChunk),this.chunks.push(this.curChunk)}},je.Paragraph.Alignment=Object.freeze({LEFT:0,CENTER:1,RIGHT:2,JUSTIFY:3}),je.Paragraph.Chunk=class{constructor(t,e,i){this.paragraph=t,this.fontSize=e,this.prevChunk=i,this.lastChar=null,this.lastShape=null,this.leadingSpaces=0,this.spaceStartKerning=null,this.spaceEndKerning=null,this.block=null,this.position=null}PushSpace(){if(this.block)throw new Error("Illegal operation");this.leadingSpaces++}PushChar(t,e){null===this.spaceStartKerning&&(0===this.leadingSpaces?(this.spaceStartKerning=0,this.spaceEndKerning=0):(this.prevChunk&&this.prevChunk.lastShape&&this.prevChunk.fontSize===this.fontSize&&this.prevChunk.lastShape.font===this.paragraph.textBox.spaceShape.font?this.spaceStartKerning=this.prevChunk.lastShape.font.GetKerning(this.prevChunk.lastChar," "):this.spaceStartKerning=0,e.font===this.paragraph.textBox.spaceShape.font?this.spaceEndKerning=e.font.GetKerning(" ",t):this.spaceEndKerning=0)),null===this.block&&(this.block=new Ye(this.fontSize)),this.block.PushChar(t,e),this.lastChar=t,this.lastShape=e}GetSpacingWidth(){return(this.leadingSpaces*this.paragraph.textBox.spaceShape.advance+this.spaceStartKerning+this.spaceEndKerning)*this.fontSize}GetWidth(t){if(null===this.block)return 0;let e=this.block.GetCurrentPosition();return t&&(e+=this.GetSpacingWidth()),e}},je.Paragraph.Line=class{constructor(t,e,i,n){this.paragraph=t,this.startChunkIdx=e,this.numChunks=i,this.width=n}ApplyAlignment(t,e){var i;let n=null!==(i=this.paragraph.alignment)&&void 0!==i?i:e;switch(n){case je.Paragraph.Alignment.LEFT:break;case je.Paragraph.Alignment.CENTER:{const e=(t-this.width)/2;this.ForEachChunk(t=>t.position+=e);break}case je.Paragraph.Alignment.RIGHT:{const e=t-this.width;this.ForEachChunk(t=>t.position+=e);break}case je.Paragraph.Alignment.JUSTIFY:{const e=t-this.width;if(e<=0||1===this.numChunks)break;const i=e/(this.numChunks-1);let n=0;this.ForEachChunk(t=>{t.position+=n,n+=i});break}default:throw new Error("Unhandled alignment: "+this.paragraph.alignment)}}ForEachChunk(t){for(let e=0;e<this.numChunks;e++)t(this.paragraph.chunks[this.startChunkIdx+e])}};class Ye{constructor(t){this.fontSize=t,this.glyphs=[],this.bounds=null,this.curX=0,this.prevChar=null,this.prevFont=null}PushChar(t,e){let i;i=null!==this.prevChar&&this.prevFont===e.font?this.prevFont.GetKerning(this.prevChar,t):0;const n=this.curX+i*this.fontSize;let s;if(e.vertices){s=e.GetVertices({x:n,y:0},this.fontSize);const t=n+e.bounds.xMin*this.fontSize,i=n+e.bounds.xMax*this.fontSize,r=e.bounds.yMin*this.fontSize,o=e.bounds.yMax*this.fontSize;null===this.bounds?this.bounds={xMin:t,xMax:i,yMin:r,yMax:o}:(t<this.bounds.xMin&&(this.bounds.xMin=t),r<this.bounds.yMin&&(this.bounds.yMin=r),i>this.bounds.xMax&&(this.bounds.xMax=i),o>this.bounds.yMax&&(this.bounds.yMax=o))}else s=null;this.curX=n+e.advance*this.fontSize,this.glyphs.push({shape:e,vertices:s}),this.prevChar=t,this.prevFont=e.font}GetCurrentPosition(){return this.curX}*Render(t,e,i,n,s,r,o,a){var l,h,c,u;if(null===this.bounds)return;e=null!==(l=e)&&void 0!==l?l:t,i?i*=-Math.PI/180:i=0,n=null!==(h=n)&&void 0!==h?h:1,s=null!==(c=s)&&void 0!==c?c:He.LEFT,r=null!==(u=r)&&void 0!==u?u:Ge.BASELINE;let d=new U["v"],p=new U["v"](n,1),f=s===He.LEFT&&r===Ge.BASELINE||s===He.FIT||s===He.ALIGNED?new U["v"](t.x,t.y):new U["v"](e.x,e.y);const m=()=>{const i=e.x-t.x;return i<2*Number.MIN_VALUE?n:i/(this.bounds.xMax-this.bounds.xMin)},g=()=>-Math.atan2(e.y-t.y,e.x-t.x);switch(s){case He.LEFT:d.x=this.bounds.xMin;break;case He.CENTER:d.x=(this.bounds.xMax-this.bounds.xMin)/2;break;case He.RIGHT:d.x=this.bounds.xMax;break;case He.MIDDLE:d.x=(this.bounds.xMax-this.bounds.xMin)/2,d.y=(this.bounds.yMax-this.bounds.yMin)/2;break;case He.ALIGNED:{const t=m();p.x=t,p.y=t,i=g();break}case He.FIT:p.x=m(),i=g();break;default:console.warn("Unrecognized hAlign value: "+s)}switch(r){case Ge.BASELINE:break;case Ge.BOTTOM:d.y=this.bounds.yMin;break;case Ge.MIDDLE:d.y=(this.bounds.yMax-this.bounds.yMin)/2;break;case Ge.TOP:d.y=this.bounds.yMax;break;default:console.warn("Unrecognized vAlign value: "+r)}const v=(new U["m"]).translate(-d.x,-d.y).scale(p.x,p.y).rotate(i).translate(f.x,f.y);for(const _ of this.glyphs)if(_.vertices){for(const t of _.vertices)t.applyMatrix3(v);yield new ai({type:ai.Type.TRIANGLES,vertices:_.vertices,indices:_.shape.indices,layer:a,color:o})}}}const Xe=function(t){var e=function(t){var i=e.m[t];if(i.mod)return i.mod.exports;var n=i.mod={exports:{}};return i(n,n.exports),n.exports};return e.m={},e.m["./treebase"]=function(t,e){function i(){}function n(t){this._tree=t,this._ancestors=[],this._cursor=null}i.prototype.clear=function(){this._root=null,this.size=0},i.prototype.find=function(t){var e=this._root;while(null!==e){var i=this._comparator(t,e.data);if(0===i)return e.data;e=e.get_child(i>0)}return null},i.prototype.findIter=function(t){var e=this._root,i=this.iterator();while(null!==e){var n=this._comparator(t,e.data);if(0===n)return i._cursor=e,i;i._ancestors.push(e),e=e.get_child(n>0)}return null},i.prototype.lowerBound=function(t){var e=this._root,i=this.iterator(),n=this._comparator;while(null!==e){var s=n(t,e.data);if(0===s)return i._cursor=e,i;i._ancestors.push(e),e=e.get_child(s>0)}for(var r=i._ancestors.length-1;r>=0;--r)if(e=i._ancestors[r],n(t,e.data)<0)return i._cursor=e,i._ancestors.length=r,i;return i._ancestors.length=0,i},i.prototype.upperBound=function(t){var e=this.lowerBound(t),i=this._comparator;while(null!==e.data()&&0===i(e.data(),t))e.next();return e},i.prototype.min=function(){var t=this._root;if(null===t)return null;while(null!==t.left)t=t.left;return t.data},i.prototype.max=function(){var t=this._root;if(null===t)return null;while(null!==t.right)t=t.right;return t.data},i.prototype.iterator=function(){return new n(this)},i.prototype.each=function(t){var e,i=this.iterator();while(null!==(e=i.next()))t(e)},i.prototype.reach=function(t){var e,i=this.iterator();while(null!==(e=i.prev()))t(e)},n.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},n.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},n.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},n.prototype._minNode=function(t){while(null!==t.left)this._ancestors.push(t),t=t.left;this._cursor=t},n.prototype._maxNode=function(t){while(null!==t.right)this._ancestors.push(t),t=t.right;this._cursor=t},t.exports=i},e.m["__main__"]=function(t,i){var n=e("./treebase");function s(t){this.data=t,this.left=null,this.right=null,this.red=!0}function r(t){this._root=null,this._comparator=t,this.size=0}function o(t){return null!==t&&t.red}function a(t,e){var i=t.get_child(!e);return t.set_child(!e,i.get_child(e)),i.set_child(e,t),t.red=!0,i.red=!1,i}function l(t,e){return t.set_child(!e,a(t.get_child(!e),!e)),a(t,e)}s.prototype.get_child=function(t){return t?this.right:this.left},s.prototype.set_child=function(t,e){t?this.right=e:this.left=e},r.prototype=new n,r.prototype.insert=function(t){var e=!1;if(null===this._root)this._root=new s(t),e=!0,this.size++;else{var i=new s(void 0),n=0,r=0,h=null,c=i,u=null,d=this._root;c.right=this._root;while(1){if(null===d?(d=new s(t),u.set_child(n,d),e=!0,this.size++):o(d.left)&&o(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1),o(d)&&o(u)){var p=c.right===h;d===u.get_child(r)?c.set_child(p,a(h,!r)):c.set_child(p,l(h,!r))}var f=this._comparator(d.data,t);if(0===f)break;r=n,n=f<0,null!==h&&(c=h),h=u,u=d,d=d.get_child(n)}this._root=i.right}return this._root.red=!1,e},r.prototype.remove=function(t){if(null===this._root)return!1;var e=new s(void 0),i=e;i.right=this._root;var n=null,r=null,h=null,c=1;while(null!==i.get_child(c)){var u=c;r=n,n=i,i=i.get_child(c);var d=this._comparator(t,i.data);if(c=d>0,0===d&&(h=i),!o(i)&&!o(i.get_child(c)))if(o(i.get_child(!c))){var p=a(i,c);n.set_child(u,p),n=p}else if(!o(i.get_child(!c))){var f=n.get_child(!u);if(null!==f)if(o(f.get_child(!u))||o(f.get_child(u))){var m=r.right===n;o(f.get_child(u))?r.set_child(m,l(n,u)):o(f.get_child(!u))&&r.set_child(m,a(n,u));var g=r.get_child(m);g.red=!0,i.red=!0,g.left.red=!1,g.right.red=!1}else n.red=!1,f.red=!0,i.red=!0}}return null!==h&&(h.data=i.data,n.set_child(n.right===i,i.get_child(null===i.left)),this.size--),this._root=e.right,null!==this._root&&(this._root.red=!1),null!==h},t.exports=r},e("__main__")}(self),Qe=65536,Ke=15*Math.PI/180,Ze="__point_shape",Je=1024,ti=4;class ei{constructor(t){this.options=Object.create(ei.DefaultOptions),t&&Object.assign(this.options,t.sceneOptions),this.origin=null,this.batches=new Xe((t,e)=>t.key.Compare(e.key)),this.layers=new Map,this.blocks=new Map,this.bounds=null,this.pointShapeBlock=null,this.numBlocksFlattened=0}async Build(t,e){const i=t.header||{};if(this.angBase=i["$ANGBASE"]||0,this.angDir=i["$ANGDIR"]||0,this.pdMode=i["$PDMODE"]||0,this.pdSize=i["$PDSIZE"]||0,t.tables&&t.tables.layer)for(const[,n]of Object.entries(t.tables.layer.layers))this.layers.set(n.name,n);if(t.blocks)for(const[,n]of Object.entries(t.blocks))this.blocks.set(n.name,new ni(n));this.textRenderer=new Ue(e,this.options.textOptions),this.hasMissingChars=!1,await this._FetchFonts(t);for(const n of t.entities)if("INSERT"===n.type){const t=this.blocks.get(n.name);null===t||void 0===t||t.RegisterInsert(n)}for(const n of this.blocks.values()){if(n.data.hasOwnProperty("entities")){const t=n.DefinitionContext();for(const e of n.data.entities)this._ProcessDxfEntity(e,t)}n.SetFlatten()&&this.numBlocksFlattened++}console.log(this.numBlocksFlattened+" blocks flattened");for(const n of t.entities)this._ProcessDxfEntity(n);this.scene=this._BuildScene(),delete this.batches,delete this.layers,delete this.blocks,delete this.textRenderer}async _FetchFonts(t){const e=async t=>{let e;if("TEXT"===t.type)e=await this.textRenderer.FetchFonts(t.text);else{if("MTEXT"!==t.type)throw new Error("Bad entity type");{const i=new Fe;i.Parse(t.text);for(const t of i.GetText())if(!await this.textRenderer.FetchFonts(t)){e=!1;break}e=!0}}return e||(this.hasMissingChars=!0),e};for(const i of t.entities)if(("TEXT"===i.type||"MTEXT"===i.type)&&!await e(i))return;for(const i of this.blocks.values())if(i.data.hasOwnProperty("entities"))for(const t of i.data.entities)if(("TEXT"===t.type||"MTEXT"===t.type)&&!await e(t))return}_ProcessDxfEntity(t,e=null){let i;switch(t.type){case"LINE":i=this._DecomposeLine(t,e);break;case"POLYLINE":case"LWPOLYLINE":i=this._DecomposePolyline(t,e);break;case"ARC":i=this._DecomposeArc(t,e);break;case"CIRCLE":i=this._DecomposeCircle(t,e);break;case"ELLIPSE":i=this._DecomposeEllipse(t,e);break;case"POINT":i=this._DecomposePoint(t,e);break;case"SPLINE":i=this._DecomposeSpline(t,e);break;case"INSERT":return void this._ProcessInsert(t,e);case"TEXT":i=this._DecomposeText(t,e);break;case"MTEXT":i=this._DecomposeMText(t,e);break;case"3DFACE":i=this._Decompose3DFace(t,e);break;case"SOLID":i=this._DecomposeSolid(t,e);break;default:return void console.log("Unhandled entity type: "+t.type)}for(const n of i)this._ProcessEntity(n,e)}_ProcessEntity(t,e=null){switch(t.type){case ai.Type.POINTS:this._ProcessPoints(t,e);break;case ai.Type.LINE_SEGMENTS:this._ProcessLineSegments(t,e);break;case ai.Type.POLYLINE:this._ProcessPolyline(t,e);break;case ai.Type.TRIANGLES:this._ProcessTriangles(t,e);break;default:throw new Error("Unhandled entity type: "+t.type)}}_GetLineType(t,e=null,i=null){return 0}_IsPlainLine(t){return!Boolean(t.startWidth||t.endWidth)}*_DecomposeLine(t,e){if(2!==t.vertices.length)return;const i=this._GetEntityLayer(t,e),n=this._GetEntityColor(t,e);yield new ai({type:ai.Type.LINE_SEGMENTS,vertices:t.vertices,layer:i,color:n,lineType:this._GetLineType(t,t.vertices[0])})}_GenerateBulgeVertices(t,e,i,n){const s=4*Math.atan(n),r=Math.abs(s);if(r<this.options.arcTessellationAngle)return void t.push(i);const o=s/2,a=Math.sin(o),l=Math.cos(o),h={x:i.x-e.x,y:i.y-e.y},c=h.x*h.x+h.y*h.y;if(c<2*Number.MIN_VALUE)return;const u=Math.sqrt(c);let d=u/2/a;h.x/=u,h.y/=u;const p={x:(h.x*a-h.y*l)*d+e.x,y:(h.x*l+h.y*a)*d+e.y};let f=Math.floor(r/this.options.arcTessellationAngle);if(f<this.options.minArcTessellationSubdivisions&&(f=this.options.minArcTessellationSubdivisions),f>1){const i=Math.atan2(e.y-p.y,e.x-p.x),n=s/f;s<0&&(d=-d);for(let e=1;e<f;e++){const s=i+e*n,r={x:p.x+d*Math.cos(s),y:p.y+d*Math.sin(s)};t.push(r)}}t.push(i)}_GenerateArcVertices({vertices:t,center:e,radius:i,startAngle:n=null,endAngle:s=null,tessellationAngle:r=null,yRadius:o=null,transform:a=null}){if(!e||!i)return;r||(r=this.options.arcTessellationAngle),null===o&&(o=i),void 0===n||null===n?n=0:n+=this.angBase;let l=!1;if(void 0===s||null===s?(s=n+2*Math.PI,l=!0):s+=this.angBase,this.angDir){const t=n;n=s,s=t}while(s<=n)s+=2*Math.PI;const h=s-n;let c=Math.floor(h/r);0===c&&(c=1);const u=h/c;for(let d=0;d<=c;d++){if(d===c&&l)break;const s=n+d*u,r=new U["v"](i*Math.cos(s),o*Math.sin(s));r.add(e),a&&r.applyMatrix3(a),t.push(r)}}*_DecomposeArc(t,e){const i=this._GetEntityColor(t,e),n=this._GetEntityLayer(t,e),s=this._GetLineType(t,null,e),r=[];this._GenerateArcVertices({vertices:r,center:t.center,radius:t.radius,startAngle:t.startAngle,endAngle:t.endAngle,transform:this._GetEntityExtrusionTransform(t)}),yield new ai({type:ai.Type.POLYLINE,vertices:r,layer:n,color:i,lineType:s,shape:void 0===t.endAngle})}*_DecomposeCircle(t,e){const i=this._GetEntityColor(t,e),n=this._GetEntityLayer(t,e),s=this._GetLineType(t,null,e),r=[];this._GenerateArcVertices({vertices:r,center:t.center,radius:t.radius,transform:this._GetEntityExtrusionTransform(t)}),yield new ai({type:ai.Type.POLYLINE,vertices:r,layer:n,color:i,lineType:s,shape:!0})}*_DecomposeEllipse(t,e){const i=this._GetEntityColor(t,e),n=this._GetEntityLayer(t,e),s=this._GetLineType(t,null,e),r=[],o=Math.sqrt(t.majorAxisEndPoint.x*t.majorAxisEndPoint.x+t.majorAxisEndPoint.y*t.majorAxisEndPoint.y),a=o*t.axisRatio,l=Math.atan2(t.majorAxisEndPoint.y,t.majorAxisEndPoint.x);if(this._GenerateArcVertices({vertices:r,center:t.center,radius:o,startAngle:t.startAngle,endAngle:t.endAngle,yRadius:a,transform:this._GetEntityExtrusionTransform(t)}),0!==l){const e=Math.cos(l),i=Math.sin(l);for(const n of r){const s=n.x-t.center.x,r=n.y-t.center.y;n.x=s*e-r*i+t.center.x,n.y=s*i+r*e+t.center.y}}yield new ai({type:ai.Type.POLYLINE,vertices:r,layer:n,color:i,lineType:s,shape:void 0===t.endAngle})}*_DecomposePoint(t,e){if(this.pdMode===hi.NONE)return;if(this.pdMode!==hi.DOT&&this.pdSize<=0)return;const i=this._GetEntityColor(t,e),n=this._GetEntityLayer(t,e),s=this.pdMode&hi.MARK_MASK,r=0!==(this.pdMode&hi.SHAPE_MASK);if(r){const e=new $(n,Ze,$.GeometryType.POINT_INSTANCE,i,0),s=this._GetBatch(e);return s.PushVertex(this._TransformVertex(t.position)),void this._CreatePointShapeBlock()}if(s===hi.DOT)return void(yield new ai({type:ai.Type.POINTS,vertices:[t.position],layer:n,color:i,lineType:null}));const o=[];this._CreatePointMarker(o,s,t.position),yield new ai({type:ai.Type.LINE_SEGMENTS,vertices:o,layer:n,color:i,lineType:null})}_CreatePointMarker(t,e,i=null){const n=this;function s(e,s){var r,o;t.push({x:(null!==(r=null===i||void 0===i?void 0:i.x)&&void 0!==r?r:0)+e*n.pdSize*.5,y:(null!==(o=null===i||void 0===i?void 0:i.y)&&void 0!==o?o:0)+s*n.pdSize*.5})}switch(e){case hi.PLUS:s(0,1.5),s(0,-1.5),s(-1.5,0),s(1.5,0);break;case hi.CROSS:s(-1,1),s(1,-1),s(1,1),s(-1,-1);break;case hi.TICK:s(0,1),s(0,0);break;default:console.warn("Unsupported point display type: "+e)}}_CreatePointShapeBlock(){if(this.pointShapeBlock)return;this.pointShapeBlock=new ni({name:Ze,position:{x:0,y:0}}),this.pointShapeBlock.offset=new U["v"](0,0);const t=this.pointShapeBlock.DefinitionContext(),e=this.pdMode&hi.MARK_MASK;if(e!==hi.DOT&&e!==hi.NONE){const i=[];this._CreatePointMarker(i,e);const n=new ai({type:ai.Type.LINE_SEGMENTS,vertices:i,color:ci.BY_BLOCK});this._ProcessEntity(n,t)}if(this.pdMode&hi.SQUARE){const e=.5*this.pdSize,i=[{x:-e,y:e},{x:e,y:e},{x:e,y:-e},{x:-e,y:-e}],n=new ai({type:ai.Type.POLYLINE,vertices:i,color:ci.BY_BLOCK,shape:!0});this._ProcessEntity(n,t)}if(this.pdMode&hi.CIRCLE){const e=[];this._GenerateArcVertices({vertices:e,center:{x:0,y:0},radius:.5*this.pdSize,tessellationAngle:Ke});const i=new ai({type:ai.Type.POLYLINE,vertices:e,color:ci.BY_BLOCK,shape:!0});this._ProcessEntity(i,t)}}*_Decompose3DFace(t,e){yield*this._DecomposeFace(t,t.vertices,e,this.options.wireframeMesh)}*_DecomposeSolid(t,e){yield*this._DecomposeFace(t,t.points,e,!1,this._GetEntityExtrusionTransform(t))}*_DecomposeFace(t,e,i,n,s=null){const r=this._GetEntityLayer(t,i),o=this._GetEntityColor(t,i);function a(t,e,i){const n=(new U["v"]).subVectors(e,t),s=(new U["v"]).subVectors(i,t),r=Math.abs(n.cross(s));return r>Number.EPSILON}const l=new U["v"](e[0].x,e[0].y),h=new U["v"](e[1].x,e[1].y),c=new U["v"](e[2].x,e[2].y);let u=null,d=a(l,h,c),p=!1;if(e.length>3&&(u=new U["v"](e[3].x,e[3].y),p=a(h,u,c),s&&u.applyMatrix3(s)),s&&(l.applyMatrix3(s),h.applyMatrix3(s),c.applyMatrix3(s)),d||p)if(n){const t=[];d&&!p&&t.push(l,h,c),!d&&p?t.push(h,u,c):t.push(l,h,u,c),yield new ai({type:ai.Type.POLYLINE,vertices:t,layer:r,color:o,shape:!0})}else{const t=[],e=[];d&&(t.push(l,h,c),e.push(0,1,2)),p&&(d?e.push(1,2,3):(t.push(h,c),e.push(0,1,2)),t.push(u)),yield new ai({type:ai.Type.TRIANGLES,vertices:t,indices:e,layer:r,color:o})}}*_DecomposeText(t,e){if(!this.textRenderer.canRender)return;const i=this._GetEntityLayer(t,e),n=this._GetEntityColor(t,e);yield*this.textRenderer.Render({text:t.text,fontSize:t.textHeight,startPos:t.startPoint,endPos:t.endPoint,rotation:t.rotation,hAlign:t.halign,vAlign:t.valign,widthFactor:t.xScale,color:n,layer:i})}*_DecomposeMText(t,e){if(!this.textRenderer.canRender)return;const i=this._GetEntityLayer(t,e),n=this._GetEntityColor(t,e),s=new Fe;s.Parse(t.text),yield*this.textRenderer.RenderMText({formattedText:s.GetContent(),fontSize:t.height,position:t.position,rotation:t.rotation,direction:t.direction,attachment:t.attachmentPoint,lineSpacing:t.lineSpacing,width:t.width,color:n,layer:i})}_ProcessInsert(t,e=null){if(e){if(e.name===t.name)return void console.warn("Recursive block reference: "+e.name);const i=this.blocks.get(t.name);i||console.warn("Unresolved nested block reference: "+t.name);const n=e.NestedBlockContext(i,t);if(i.data.entities)for(const t of i.data.entities)this._ProcessDxfEntity(t,n);return}const i=this.blocks.get(t.name);if(null===i)return void console.warn("Unresolved block reference in INSERT: "+t.name);if(!i.HasGeometry())return;const n=this._GetEntityLayer(t,null),s=this._GetEntityColor(t,null),r=this._GetLineType(t,null,null),o=i.InstantiationContext().GetInsertionTransform(t),a=i.bounds;if(this._UpdateBounds(new U["v"](a.minX,a.minY).applyMatrix3(o)),this._UpdateBounds(new U["v"](a.maxX,a.maxY).applyMatrix3(o)),this._UpdateBounds(new U["v"](a.minX,a.maxY).applyMatrix3(o)),this._UpdateBounds(new U["v"](a.maxX,a.minY).applyMatrix3(o)),o.translate(-this.origin.x,-this.origin.y),i.flatten)for(const l of i.batches)this._FlattenBatch(l,n,s,r,o);else{const e=new $(n,t.name,$.GeometryType.BLOCK_INSTANCE,s,r),i=this._GetBatch(e);i.PushInstanceTransform(o)}}_FlattenBatch(t,e,i,n,s){const r=this.layers.get(e);let o,a=0;if(t.key.color===ci.BY_BLOCK)o=i;else if(t.key.color===ci.BY_LAYER){var l;o=null!==(l=null===r||void 0===r?void 0:r.color)&&void 0!==l?l:0}else o=t.key.color;const h=new $(e,null,t.key.geometryType,o,a),c=this._GetBatch(h);c.Merge(t,s)}*_GenerateShapedPolyline(t,e,i,n,s){yield new ai({type:ai.Type.POLYLINE,vertices:t,layer:e,color:i,lineType:n,shape:s})}_MirrorEntityVertices(t,e=null){var i;if(!t.extrusionDirection||t.extrusionDirection.z>=0)return null!==(i=e)&&void 0!==i?i:t.vertices;e&&e!==t.vertices||(e=t.vertices.slice());const n=e.length;for(let s=0;s<n;s++){const t=e[s],i={x:-t.x};for(const e in t)t.hasOwnProperty(e)&&"x"!==e&&(i[e]=t[e]);e[s]=i}return e}*_DecomposePolyline(t,e=null){let i,n;if(t.includesCurveFitVertices||t.includesSplineFitVertices?(i=t.vertices.filter(t=>t.splineVertex||t.curveFittingVertex),n=i.length):(i=t.vertices,n=t.vertices.length),n<2)return;i=this._MirrorEntityVertices(t,i);const s=this._GetEntityColor(t,e),r=this._GetEntityLayer(t,e),o=this;let a=0,l=this._IsPlainLine(i[0]),h=this._GetLineType(t,i[0],e),c=null;function*u(e){if(e===a)return;let u=!1,d=c;e===n&&0===a?(u=!0,null===d&&(d=i)):e===n-1&&0===a?null===d&&(d=i):e===n?null===d&&(d=i.slice(a,e),d.push(i[0])):null===d&&(d=i.slice(a,e+1)),l?yield new ai({type:ai.Type.POLYLINE,vertices:d,layer:r,color:s,lineType:h,shape:u}):yield*o._GenerateShapedPolyline(d,r,s,h,u),a=e,e!==n&&(l=o._IsPlainLine(i[e]),h=o._GetLineType(t,i[e])),c=null}for(let d=1;d<=n;d++){const e=i[d-1];let s;if(d===n){if(!t.shape){yield*u(d-1);break}s=i[0]}else s=i[d];if(Boolean(e.bulge)&&l?(null===c&&(c=i.slice(a,d)),this._GenerateBulgeVertices(c,e,s,e.bulge)):null!==c&&c.push(s),d===n){yield*u(d);break}const r=this._IsPlainLine(s),o=this._GetLineType(t,s);(r!==l||l&&o!==h)&&(yield*u(d))}}*_DecomposeSpline(t,e=null){const i=this._GetEntityColor(t,e),n=this._GetEntityLayer(t,e),s=this._GetLineType(t,null,e),r=t.controlPoints.map(t=>[t.x,t.y]),o=[],a=r.length*ti,l=1/a;for(let h=0;h<=a;h++){const e=this._InterpolateSpline(h*l,t.degreeOfSplineCurve,r,t.knotValues);o.push({x:e[0],y:e[1]})}yield new ai({type:ai.Type.POLYLINE,vertices:o,layer:n,color:i,lineType:s})}_InterpolateSpline(t,e,i,n=null,s=null){let r,o,a,l;const h=i.length,c=i[0].length;if(e<1)throw new Error("Degree must be at least 1 (linear)");if(e>h-1)throw new Error("Degree must be less than or equal to point count - 1");if(!s)for(s=[],r=0;r<h;r++)s[r]=1;if(n){if(n.length!==h+e+1)throw new Error("Bad knot vector length")}else for(n=[],r=0;r<h+e+1;r++)n[r]=r;const u=[e,n.length-1-e],d=n[u[0]],p=n[u[1]];for(t=t*(p-d)+d,t<d?t=d:t>p&&(t=p),a=u[0];a<u[1];a++)if(t>=n[a]&&t<=n[a+1])break;const f=[];for(r=0;r<h;r++){for(f[r]=[],o=0;o<c;o++)f[r][o]=i[r][o]*s[r];f[r][c]=s[r]}let m;for(l=1;l<=e+1;l++)for(r=a;r>a-e-1+l;r--)for(m=(t-n[r])/(n[r+e+1-l]-n[r]),o=0;o<c+1;o++)f[r][o]=(1-m)*f[r-1][o]+m*f[r][o];const g=[];for(r=0;r<c;r++)g[r]=f[a][r]/f[a][c];return g}_ProcessPoints(t,e=null){const i=new $(t.layer,null===e||void 0===e?void 0:e.name,$.GeometryType.POINTS,t.color,0),n=this._GetBatch(i);for(const s of t.vertices)n.PushVertex(this._TransformVertex(s,e))}_ProcessLineSegments(t,e=null){if(t.vertices.length%2!==0)throw Error("Even number of vertices expected");const i=new $(t.layer,null===e||void 0===e?void 0:e.name,$.GeometryType.LINES,t.color,t.lineType),n=this._GetBatch(i);for(const s of t.vertices)n.PushVertex(this._TransformVertex(s,e))}_ProcessPolyline(t,e=null){if(t.vertices.length<2)return;const i=t.vertices.length;if(i<=3){const n=new $(t.layer,null===e||void 0===e?void 0:e.name,$.GeometryType.LINES,t.color,t.lineType),s=this._GetBatch(n);let r=null;for(const i of t.vertices)null!==r&&(s.PushVertex(this._TransformVertex(r,e)),s.PushVertex(this._TransformVertex(i,e))),r=i;return void(t.shape&&i>2&&(s.PushVertex(this._TransformVertex(t.vertices[i-1],e)),s.PushVertex(this._TransformVertex(t.vertices[0],e))))}const n=new $(t.layer,null===e||void 0===e?void 0:e.name,$.GeometryType.INDEXED_LINES,t.color,t.lineType),s=this._GetBatch(n);for(const r of t._IterateLineChunks()){const t=s.PushChunk(r.verticesCount);for(const i of r.vertices)t.PushVertex(this._TransformVertex(i,e));for(const e of r.indices)t.PushIndex(e);t.Finish()}}_ProcessTriangles(t,e=null){if(t.vertices.length<3)return;if(t.indices.length%3!==0)return void console.error("Unexpected size of indices array: "+t.indices.length);const i=new $(t.layer,null===e||void 0===e?void 0:e.name,$.GeometryType.INDEXED_TRIANGLES,t.color,0),n=this._GetBatch(i),s=n.PushChunk(t.vertices.length);for(const r of t.vertices)s.PushVertex(this._TransformVertex(r,e));for(const r of t.indices)s.PushIndex(r);s.Finish()}_GetEntityColor(t,e=null){let i=ci.BY_LAYER;if(0===t.colorIndex?i=ci.BY_BLOCK:256===t.colorIndex?i=ci.BY_LAYER:t.hasOwnProperty("color")&&(i=t.color),e)return i;if(i!==ci.BY_LAYER&&i!==ci.BY_BLOCK)return i;if(t.hasOwnProperty("layer")){const e=this.layers.get(t.layer);if(e)return e.color}return 0}_GetEntityLayer(t,e=null){return e?null:t.hasOwnProperty("layer")?t.layer:"0"}_GetEntityExtrusionTransform(t){return t.hasOwnProperty("extrusionDirection")?t.extrusionDirection.z>0?null:(new U["m"]).scale(-1,1):null}_GetBatch(t){let e=this.batches.find({key:t});if(null!==e)return e;if(e=new ii(t),this.batches.insert(e),null!==t.blockName&&!t.IsInstanced()){const i=this.blocks.get(t.blockName);i&&i.batches.push(e)}return e}_TransformVertex(t,e=null){return e?e.TransformVertex(t):(this._UpdateBounds(t),{x:t.x-this.origin.x,y:t.y-this.origin.y})}_UpdateBounds(t){null===this.bounds?this.bounds={minX:t.x,maxX:t.x,minY:t.y,maxY:t.y}:(t.x<this.bounds.minX?this.bounds.minX=t.x:t.x>this.bounds.maxX&&(this.bounds.maxX=t.x),t.y<this.bounds.minY?this.bounds.minY=t.y:t.y>this.bounds.maxY&&(this.bounds.maxY=t.y)),null===this.origin&&(this.origin={x:t.x,y:t.y})}_BuildScene(){let t=0,e=0,i=0;this.batches.each(n=>{t+=n.GetVerticesBufferSize(),e+=n.GetIndicesBufferSize(),i+=n.GetTransformsSize()});const n={vertices:new ArrayBuffer(t),indices:new ArrayBuffer(e),transforms:new ArrayBuffer(i),batches:[],layers:[],origin:this.origin,bounds:this.bounds,hasMissingChars:this.hasMissingChars},s={vertices:new Float32Array(n.vertices),verticesOffset:0,indices:new Uint16Array(n.indices),indicesOffset:0,transforms:new Float32Array(n.transforms),transformsOffset:0};this.batches.each(t=>{n.batches.push(t.Serialize(s))});for(const r of this.layers.values())n.layers.push({name:r.name,color:r.color});return n.pointShapeHasDot=(this.pdMode&hi.MARK_MASK)===hi.DOT,n}}class ii{constructor(t){this.key=t,t.IsIndexed()?this.chunks=[]:t.geometryType===$.GeometryType.BLOCK_INSTANCE?this.transforms=new H(G.FLOAT32):this.vertices=new H(G.FLOAT32)}PushVertex(t){const e=this.vertices.Push(t.x);return this.vertices.Push(t.y),e}PushInstanceTransform(t){for(let e=0;e<2;e++)for(let i=0;i<3;i++)this.transforms.Push(t.elements[3*i+e])}PushChunk(t){if(t>Qe)throw new Error("Vertices count exceeds chunk limit: "+t);let e=null,i=0;for(const n of this.chunks){const s=Qe-n.vertices.GetSize()/2;s<t||(null===e||s<i)&&(e=n,i=s)}return null===e&&(e=this._NewChunk(t)),new oi(e,t)}Merge(t,e=null){if(this.key.geometryType!==t.key.geometryType)throw new Error(`Rendering batch merging geometry type mismatch: ${this.key.geometryType} !== ${t.key.geometryType}`);if(this.key.IsInstanced())throw new Error("Attempted to merge instanced batch");if(this.key.IsIndexed())for(const i of t.chunks){const t=i.vertices.size,n=this.PushChunk(t/2);for(let r=0;r<t;r+=2){const t=new U["v"](i.vertices.Get(r),i.vertices.Get(r+1));e&&t.applyMatrix3(e),n.PushVertex(t)}const s=i.indices.size;for(let e=0;e<s;e++)n.PushIndex(i.indices.Get(e));n.Finish()}else{const i=t.vertices.size;for(let n=0;n<i;n+=2){const i=new U["v"](t.vertices.Get(n),t.vertices.Get(n+1));e&&i.applyMatrix3(e),this.PushVertex(i)}}}GetVerticesBufferSize(){if(this.key.IsIndexed()){let t=0;for(const e of this.chunks)t+=e.vertices.GetSize();return t*Float32Array.BYTES_PER_ELEMENT}return this.key.geometryType===$.GeometryType.BLOCK_INSTANCE?0:this.vertices.GetSize()*Float32Array.BYTES_PER_ELEMENT}GetIndicesBufferSize(){if(this.key.IsIndexed()){let t=0;for(const e of this.chunks)t+=e.indices.GetSize();return t*Uint16Array.BYTES_PER_ELEMENT}return 0}GetTransformsSize(){return this.key.geometryType===$.GeometryType.BLOCK_INSTANCE?this.transforms.GetSize()*Float32Array.BYTES_PER_ELEMENT:0}Serialize(t){if(this.key.IsIndexed()){const e={key:this.key,chunks:[]};for(const i of this.chunks)e.chunks.push(i.Serialize(t));return e}if(this.key.geometryType===$.GeometryType.BLOCK_INSTANCE){const e=this.transforms.GetSize(),i={key:this.key,transformsOffset:t.transformsOffset,transformsSize:e};return this.transforms.CopyTo(t.transforms,t.transformsOffset),t.transformsOffset+=e,i}{const e=this.vertices.GetSize(),i={key:this.key,verticesOffset:t.verticesOffset,verticesSize:e};return this.vertices.CopyTo(t.vertices,t.verticesOffset),t.verticesOffset+=e,i}}_NewChunk(t){const e=new ri(t);return this.chunks.push(e),e}}class ni{constructor(t){this.data=t,this.useCount=0,this.nestedUseCount=0,this.verticesCount=0,this.offset=null,this.batches=[],this.flatten=!1,this.bounds=null}SetFlatten(){return!!this.HasGeometry()&&(this.flatten=1===this.useCount||this.useCount*this.verticesCount<=Je,this.flatten)}HasGeometry(){return null!==this.offset}RegisterInsert(t){this.useCount++}RegisterNestedUse(t){this.nestedUseCount++}DefinitionContext(){return new si(this,si.Type.DEFINITION)}InstantiationContext(){return new si(this,si.Type.INSTANTIATION)}UpdateBounds(t){null===this.bounds?this.bounds={minX:t.x,maxX:t.x,minY:t.y,maxY:t.y}:(t.x<this.bounds.minX?this.bounds.minX=t.x:t.x>this.bounds.maxX&&(this.bounds.maxX=t.x),t.y<this.bounds.minY?this.bounds.minY=t.y:t.y>this.bounds.maxY&&(this.bounds.maxY=t.y))}}class si{constructor(t,e){this.block=t,this.type=e,this.origin=this.block.data.position,this.transform=new U["m"]}get name(){return this.block.data.name}TransformVertex(t){const e=new U["v"](t.x,t.y).applyMatrix3(this.transform);if(this.type!==si.Type.DEFINITION&&this.type!==si.Type.NESTED_DEFINITION)throw new Error("Unexpected transform type");if(this.block.verticesCount++,null===this.block.offset){this.block.offset=e;const t=new U["v"];return this.block.UpdateBounds(t),t}return e.sub(this.block.offset),this.block.UpdateBounds(e),e}GetInsertionTransform(t){const e=(new U["m"]).translate(-this.origin.x,-this.origin.y),i=t.yScale||1,n=t.xScale||1,s=-(t.rotation||0)*Math.PI/180;let r=t.position.x;const o=t.position.y;if(e.scale(n,i),e.rotate(s),e.translate(r,o),t.extrusionDirection&&t.extrusionDirection.z<0&&e.scale(-1,1),this.type!==si.Type.INSTANTIATION)return e;const a=(new U["m"]).translate(this.block.offset.x,this.block.offset.y);return e.multiply(a)}NestedBlockContext(t,e){t.RegisterNestedUse(this.block);const i=new si(t,si.Type.NESTED_DEFINITION),n=i.GetInsertionTransform(e),s=new si(this.block,si.Type.NESTED_DEFINITION);return s.transform=(new U["m"]).multiplyMatrices(this.transform,n),s}}si.Type=Object.freeze({DEFINITION:0,NESTED_DEFINITION:1,INSTANTIATION:2});class ri{constructor(t){t<16&&(t=16),this.indices=new H(G.UINT16,2*t),this.vertices=new H(G.FLOAT32,2*t)}Serialize(t){const e={};{const i=this.vertices.GetSize();e.verticesOffset=t.verticesOffset,e.verticesSize=i,this.vertices.CopyTo(t.vertices,t.verticesOffset),t.verticesOffset+=i}{const i=this.indices.GetSize();e.indicesOffset=t.indicesOffset,e.indicesSize=i,this.indices.CopyTo(t.indices,t.indicesOffset),t.indicesOffset+=i}return e}}class oi{constructor(t,e){this.chunk=t,this.verticesCount=e,this.verticesOffset=this.chunk.vertices.GetSize()/2,this.numVerticesPushed=0}PushVertex(t){if(this.numVerticesPushed===this.verticesCount)throw new Error;this.chunk.vertices.Push(t.x),this.chunk.vertices.Push(t.y),this.numVerticesPushed++}PushIndex(t){if(t<0||t>=this.verticesCount)throw new Error(`Index out of range: ${t}/${this.verticesCount}`);this.chunk.indices.Push(t+this.verticesOffset)}Finish(){if(this.numVerticesPushed!==this.verticesCount)throw new Error(`Not all vertices pushed: ${this.numVerticesPushed}/${this.verticesCount}`)}}class ai{constructor({type:t,vertices:e,indices:i=null,layer:n=null,color:s,lineType:r=0,shape:o=!1}){this.type=t,this.vertices=e,this.indices=i,this.layer=n,this.color=s,this.lineType=r,this.shape=o}*_IterateVertices(t,e){for(let i=t;i<t+e;i++)yield this.vertices[i]}*_IterateLineChunks(){const t=this.vertices.length;if(t<2)return;const e=this;for(let i=0;i<=t;i+=Qe){let n,s,r,o,a=t-i;if(a>Qe?(a=Qe,n=!1):n=!0,n&&this.shape&&i>0&&a===Qe&&(n=!1),i===t&&!this.shape)break;a<2?(s=1===a&&this.shape?function*(){yield this.vertices[i],yield this.vertices[0]}():1===a?function*(){yield this.vertices[i-1],yield this.vertices[i]}():function*(){yield this.vertices[t-1],yield this.vertices[0]}(),r=li(2,!1),o=2):n&&this.shape&&i>0&&a<Qe?(s=function*(){yield*e._IterateVertices(i,a),yield this.vertices[0]}(),r=li(a+1,!1),o=a+1):(s=this._IterateVertices(i,a),r=li(a,n&&0===i&&this.shape),o=a),yield{verticesCount:o,vertices:s,indices:r}}}}function*li(t,e){for(let i=0;i<t-1;i++)yield i,yield i+1;e&&t>2&&(yield t-1,yield 0)}ai.Type=Object.freeze({POINTS:0,LINE_SEGMENTS:1,POLYLINE:2,TRIANGLES:3});const hi=Object.freeze({DOT:0,NONE:1,PLUS:2,CROSS:3,TICK:4,MARK_MASK:15,CIRCLE:32,SQUARE:64,SHAPE_MASK:240}),ci=Object.freeze({BY_LAYER:-1,BY_BLOCK:-2});ei.DefaultOptions={arcTessellationAngle:10/180*Math.PI,minArcTessellationSubdivisions:8,wireframeMesh:!1,textOptions:Ue.DefaultOptions};var ui=i("a788");const di="DxfWorkerMsg";class pi{constructor(t,e=!1){this.worker=t,e?t.onmessage=this._ProcessRequest.bind(this):t&&(t.addEventListener("message",this._ProcessResponse.bind(this),!1),t.addEventListener("error",this._OnError.bind(this),!1),this.reqSeq=1,this.requests=new Map,this.progressCbk=null)}async Load(t,e,i,n){return this.worker?this._SendRequest(pi.WorkerMsg.LOAD,{url:t,fonts:e,options:this._CloneOptions(i)},n):this._Load(t,e,i,n)}async Destroy(t=!1){this.worker&&(t||await this._SendRequest(pi.WorkerMsg.DESTROY),this.worker.terminate())}async _ProcessRequest(t){const e=t.data;if(e.signature!==di)return void console.log("Message with bad signature",e);const i={seq:e.seq,type:e.type,signature:di},n=[];try{i.data=await this._ProcessRequestMessage(e.type,e.data,n,e.seq)}catch(s){console.error(s),i.error=String(s)}this.worker.postMessage(i,n),e.type===pi.WorkerMsg.DESTROY&&(this.worker.onmessage=null,this.worker.close(),this.worker=null)}async _ProcessRequestMessage(t,e,i,n){switch(t){case pi.WorkerMsg.LOAD:{const t=await this._Load(e.url,e.fonts,e.options,(t,e,i)=>this._SendProgress(n,t,e,i));return i.push(t.vertices),i.push(t.indices),i.push(t.transforms),t}case pi.WorkerMsg.DESTROY:return null;default:throw"Unknown message type: "+t}}async _ProcessResponse(t){const e=t.data;if(e.signature!==di)return void console.log("Message with bad signature",e);const i=e.seq,n=this.requests.get(i);if(!n)return void console.error("Unmatched message sequence: ",i);const s=e.data;e.type===pi.WorkerMsg.PROGRESS&&n.progressCbk?n.progressCbk(s.phase,s.size,s.totalSize):(this.requests.delete(i),e.hasOwnProperty("error")?n.SetError(e.error):n.SetResponse(s))}async _OnError(t){console.error("DxfWorker worker error",t);const e=Array.from(this.requests.values);this.requests.clear(),e.forEach(e=>e.SetError(t))}async _SendRequest(t,e=null,i=null){const n=this.reqSeq++,s=new pi.Request(n,i);return this.requests.set(n,s),this.worker.postMessage({seq:n,type:t,data:e,signature:di}),await s.GetResponse()}_SendProgress(t,e,i,n){this.worker.postMessage({seq:t,type:pi.WorkerMsg.PROGRESS,data:{phase:e,size:i,totalSize:n},signature:di})}async _Load(t,e,i,n){let s;s=e?this._CreateFontFetchers(e,n):[];const r=await new F(t).Fetch(n);n&&n("prepare",0,null);const o=new ei(i);return await o.Build(r,s),o.scene}_CreateFontFetchers(t,e){function i(t){return async function(){e&&e("font",0,null);const i=await fetch(t).then(t=>t.arrayBuffer());return e&&e("prepare",0,null),ui["a"].parse(i)}}const n=[];for(const s of t)n.push(i(s));return n}_CloneOptions(t){if(Array.isArray(t))return t.map(t=>this._CloneOptions(t));if("object"===typeof t&&null!==t){const e={};for(const i in t)e[i]=this._CloneOptions(t[i]);return e}return t}}pi.WorkerMsg={LOAD:"LOAD",PROGRESS:"PROGRESS",DESTROY:"DESTROY"},pi.Request=class{constructor(t,e){this.seq=t,this.progressCbk=e,this.promise=new Promise((t,e)=>{this._Resolve=t,this._Reject=e})}async GetResponse(){return await this.promise}SetResponse(t){this._Resolve(t)}SetError(t){this._Reject(t)}};class fi{constructor(t,e,i,n){this.instanceType=t,this.geometryType=null!==e&&void 0!==e?e:null,this.color=i,this.lineType=null!==n&&void 0!==n?n:null}Compare(t){let e=V(this.instanceType,t.instanceType);return 0!==e?e:(e=V(this.geometryType,t.geometryType),0!==e?e:(e=V(this.color,t.color),0!==e?e:V(this.lineType,t.lineType)))}}const mi=function(t,e){void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new U["w"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:U["l"].ROTATE,MIDDLE:U["l"].DOLLY,RIGHT:U["l"].PAN},this.touches={ONE:U["u"].ROTATE,TWO:U["u"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.listenToKeyEvents=function(t){t.addEventListener("keydown",at),this._domElementKeyEvents=t},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(n),i.update(),a=o.NONE},this.update=function(){var e=new U["w"],s=(new U["q"]).setFromUnitVectors(t.up,new U["w"](0,1,0)),r=s.clone().invert(),f=new U["w"],m=new U["q"],g=2*Math.PI;return function(){var t=i.object.position;e.copy(t).sub(i.target),e.applyQuaternion(s),h.setFromVector3(e),i.autoRotate&&a===o.NONE&&M(w()),i.enableDamping?(h.theta+=c.theta*i.dampingFactor,h.phi+=c.phi*i.dampingFactor):(h.theta+=c.theta,h.phi+=c.phi);var v=i.minAzimuthAngle,_=i.maxAzimuthAngle;return isFinite(v)&&isFinite(_)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),_<-Math.PI?_+=g:_>Math.PI&&(_-=g),h.theta=v<=_?Math.max(v,Math.min(_,h.theta)):h.theta>(v+_)/2?Math.max(v,h.theta):Math.min(_,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=u,h.radius=Math.max(i.minDistance,Math.min(i.maxDistance,h.radius)),!0===i.enableDamping?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),e.setFromSpherical(h),e.applyQuaternion(r),t.copy(i.target).add(e),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),u=1,!!(p||f.distanceToSquared(i.object.position)>l||8*(1-m.dot(i.object.quaternion))>l)&&(i.dispatchEvent(n),f.copy(i.object.position),m.copy(i.object.quaternion),p=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ut),i.domElement.removeEventListener("pointerdown",tt),i.domElement.removeEventListener("wheel",ot),i.domElement.removeEventListener("touchstart",lt),i.domElement.removeEventListener("touchend",ct),i.domElement.removeEventListener("touchmove",ht),i.domElement.ownerDocument.removeEventListener("pointermove",et),i.domElement.ownerDocument.removeEventListener("pointerup",it),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",at)};var i=this,n={type:"change"},s={type:"start"},r={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=o.NONE,l=1e-6,h=new U["t"],c=new U["t"],u=1,d=new U["w"],p=!1,f=new U["v"],m=new U["v"],g=new U["v"],v=new U["v"],_=new U["v"],y=new U["v"],b=new U["v"],x=new U["v"],S=new U["v"];function w(){return 2*Math.PI/60/60*i.autoRotateSpeed}function C(){return Math.pow(.95,i.zoomSpeed)}function M(t){c.theta-=t}function T(t){c.phi-=t}var k=function(){var t=new U["w"];return function(e,i){t.setFromMatrixColumn(i,0),t.multiplyScalar(-e),d.add(t)}}(),E=function(){var t=new U["w"];return function(e,n){!0===i.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(i.object.up,t)),t.multiplyScalar(e),d.add(t)}}(),L=function(){var t=new U["w"];return function(e,n){var s=i.domElement;if(i.object.isPerspectiveCamera){var r=i.object.position;t.copy(r).sub(i.target);var o=t.length();o*=Math.tan(i.object.fov/2*Math.PI/180),k(2*e*o/s.clientHeight,i.object.matrix),E(2*n*o/s.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(k(e*(i.object.right-i.object.left)/i.object.zoom/s.clientWidth,i.object.matrix),E(n*(i.object.top-i.object.bottom)/i.object.zoom/s.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function A(t,e){const n=(e.x-i.domElement.width/2)*(t-1)/t,s=(e.y-i.domElement.height/2)*(t-1)/t;L(-n,-s)}function P(t,e){if(i.object.isPerspectiveCamera)u/=t;else if(i.object.isOrthographicCamera){const n=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*t));A(n/i.object.zoom,e),i.object.zoom=n,i.object.updateProjectionMatrix(),p=!0}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1}function R(t,e){if(i.object.isPerspectiveCamera)u*=t;else if(i.object.isOrthographicCamera){const n=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/t));A(n/i.object.zoom,e),i.object.zoom=n,i.object.updateProjectionMatrix(),p=!0}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1}function O(t){f.set(t.clientX,t.clientY)}function I(t){b.set(t.clientX,t.clientY)}function D(t){v.set(t.clientX,t.clientY)}function N(t){m.set(t.clientX,t.clientY),g.subVectors(m,f).multiplyScalar(i.rotateSpeed);var e=i.domElement;M(2*Math.PI*g.x/e.clientHeight),T(2*Math.PI*g.y/e.clientHeight),f.copy(m),i.update()}function z(t){x.set(t.clientX,t.clientY),S.subVectors(x,b),S.y>0?P(C()):S.y<0&&R(C()),b.copy(x),i.update()}function q(t){_.set(t.clientX,t.clientY),y.subVectors(_,v).multiplyScalar(i.panSpeed),L(y.x,y.y),v.copy(_),i.update()}function B(){}function F(t){const e=i.domElement.getBoundingClientRect(),n=new U["v"](t.clientX-e.left,t.clientY-e.top);t.deltaY<0?R(C(),n):t.deltaY>0&&P(C(),n),i.update()}function $(t){var e=!1;switch(t.keyCode){case i.keys.UP:L(0,i.keyPanSpeed),e=!0;break;case i.keys.BOTTOM:L(0,-i.keyPanSpeed),e=!0;break;case i.keys.LEFT:L(i.keyPanSpeed,0),e=!0;break;case i.keys.RIGHT:L(-i.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),i.update())}function V(t){if(1==t.touches.length)f.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY);f.set(e,i)}}function H(t){if(1==t.touches.length)v.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY);v.set(e,i)}}function G(t){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(e*e+i*i);b.set(0,n)}function W(t){i.enableZoom&&G(t),i.enablePan&&H(t)}function j(t){i.enableZoom&&G(t),i.enableRotate&&V(t)}function Y(t){if(1==t.touches.length)m.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);m.set(e,n)}g.subVectors(m,f).multiplyScalar(i.rotateSpeed);var s=i.domElement;M(2*Math.PI*g.x/s.clientHeight),T(2*Math.PI*g.y/s.clientHeight),f.copy(m)}function X(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}y.subVectors(_,v).multiplyScalar(i.panSpeed),L(y.x,y.y),v.copy(_)}function Q(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,s=Math.sqrt(e*e+n*n);x.set(0,s),S.set(0,Math.pow(x.y/b.y,i.zoomSpeed)),P(S.y),b.copy(x)}function K(t){i.enableZoom&&Q(t),i.enablePan&&X(t)}function Z(t){i.enableZoom&&Q(t),i.enableRotate&&Y(t)}function J(){}function tt(t){if(!1!==i.enabled)switch(t.pointerType){case"mouse":case"pen":nt(t);break}}function et(t){if(!1!==i.enabled)switch(t.pointerType){case"mouse":case"pen":st(t);break}}function it(t){switch(t.pointerType){case"mouse":case"pen":rt(t);break}}function nt(t){var e;switch(t.preventDefault(),i.domElement.focus?i.domElement.focus():window.focus(),t.button){case 0:e=i.mouseButtons.LEFT;break;case 1:e=i.mouseButtons.MIDDLE;break;case 2:e=i.mouseButtons.RIGHT;break;default:e=-1}switch(e){case U["l"].DOLLY:if(!1===i.enableZoom)return;I(t),a=o.DOLLY;break;case U["l"].ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enablePan)return;D(t),a=o.PAN}else{if(!1===i.enableRotate)return;O(t),a=o.ROTATE}break;case U["l"].PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enableRotate)return;O(t),a=o.ROTATE}else{if(!1===i.enablePan)return;D(t),a=o.PAN}break;default:a=o.NONE}a!==o.NONE&&(i.domElement.ownerDocument.addEventListener("pointermove",et),i.domElement.ownerDocument.addEventListener("pointerup",it),i.dispatchEvent(s))}function st(t){if(!1!==i.enabled)switch(t.preventDefault(),a){case o.ROTATE:if(!1===i.enableRotate)return;N(t);break;case o.DOLLY:if(!1===i.enableZoom)return;z(t);break;case o.PAN:if(!1===i.enablePan)return;q(t);break}}function rt(t){i.domElement.ownerDocument.removeEventListener("pointermove",et),i.domElement.ownerDocument.removeEventListener("pointerup",it),!1!==i.enabled&&(B(t),i.dispatchEvent(r),a=o.NONE)}function ot(t){!1===i.enabled||!1===i.enableZoom||a!==o.NONE&&a!==o.ROTATE||(t.preventDefault(),t.stopPropagation(),i.dispatchEvent(s),F(t),i.dispatchEvent(r))}function at(t){!1!==i.enabled&&!1!==i.enablePan&&$(t)}function lt(t){if(!1!==i.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(i.touches.ONE){case U["u"].ROTATE:if(!1===i.enableRotate)return;V(t),a=o.TOUCH_ROTATE;break;case U["u"].PAN:if(!1===i.enablePan)return;H(t),a=o.TOUCH_PAN;break;default:a=o.NONE}break;case 2:switch(i.touches.TWO){case U["u"].DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;W(t),a=o.TOUCH_DOLLY_PAN;break;case U["u"].DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;j(t),a=o.TOUCH_DOLLY_ROTATE;break;default:a=o.NONE}break;default:a=o.NONE}a!==o.NONE&&i.dispatchEvent(s)}}function ht(t){if(!1!==i.enabled)switch(t.preventDefault(),t.stopPropagation(),a){case o.TOUCH_ROTATE:if(!1===i.enableRotate)return;Y(t),i.update();break;case o.TOUCH_PAN:if(!1===i.enablePan)return;X(t),i.update();break;case o.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;K(t),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;Z(t),i.update();break;default:a=o.NONE}}function ct(t){!1!==i.enabled&&(J(t),i.dispatchEvent(r),a=o.NONE)}function ut(t){!1!==i.enabled&&t.preventDefault()}i.domElement.addEventListener("contextmenu",ut),i.domElement.addEventListener("pointerdown",tt),i.domElement.addEventListener("wheel",ot),i.domElement.addEventListener("touchstart",lt),i.domElement.addEventListener("touchend",ct),i.domElement.addEventListener("touchmove",ht),this.update()};mi.prototype=Object.create(U["e"].prototype),mi.prototype.constructor=mi;const gi=function(t,e){mi.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=U["l"].PAN,this.mouseButtons.RIGHT=U["l"].ROTATE,this.touches.ONE=U["u"].PAN,this.touches.TWO=U["u"].DOLLY_ROTATE};gi.prototype=Object.create(U["e"].prototype),gi.prototype.constructor=gi;const vi=Object.freeze({INFO:"info",WARN:"warn",ERROR:"error"});class _i{constructor(t,e=null){this.domContainer=t,this.options=Object.create(_i.DefaultOptions),e&&Object.assign(this.options,e),e=this.options,this.clearColor=this.options.clearColor.getHex(),this.scene=new U["s"];try{this.renderer=new U["x"]({alpha:e.canvasAlpha,premultipliedAlpha:e.canvasPremultipliedAlpha,antialias:e.antialias,depth:!1})}catch(s){return console.log("Failed to create renderer: "+s),void(this.renderer=null)}const i=this.renderer;i.setPixelRatio(window.devicePixelRatio);const n=this.camera=new U["o"](-1,1,1,-1,.1,2);n.position.z=1,n.position.x=0,n.position.y=0,this.simpleColorMaterial=[],this.simplePointMaterial=[];for(let r=0;r<yi.MAX;r++)this.simpleColorMaterial[r]=this._CreateSimpleColorMaterial(r),this.simplePointMaterial[r]=this._CreateSimplePointMaterial(r);i.setClearColor(e.clearColor,e.clearAlpha),e.autoResize?(this.canvasWidth=t.clientWidth,this.canvasHeight=t.clientHeight,t.style.position="relative"):(this.canvasWidth=e.canvasWidth,this.canvasHeight=e.canvasHeight,this.resizeObserver=null),i.setSize(this.canvasWidth,this.canvasHeight),this.canvas=i.domElement,this.canvas.getContext("webgl",{premultipliedAlpha:!1}),t.style.display="block",e.autoResize&&(this.canvas.style.position="absolute",this.resizeObserver=new ResizeObserver(t=>this._OnResize(t[0])),this.resizeObserver.observe(t)),t.appendChild(this.canvas),this.canvas.addEventListener("pointerdown",this._OnPointerEvent.bind(this)),this.canvas.addEventListener("pointerup",this._OnPointerEvent.bind(this)),this.Render(),this.materials=new Xe((t,e)=>t.key.Compare(e.key)),this.layers=new Map,this.blocks=new Map,this.worker=null}HasRenderer(){return Boolean(this.renderer)}GetCanvas(){return this.canvas}SetSize(t,e){this._EnsureRenderer();const i=t/this.canvasWidth,n=e/this.canvasHeight,s=this.camera,r=(s.left+s.right)/2,o=(s.bottom+s.top)/2,a=s.right-s.left,l=s.top-s.bottom;s.left=r-i*a/2,s.right=r+i*a/2,s.bottom=o-n*l/2,s.top=o+n*l/2,s.updateProjectionMatrix(),this.canvasWidth=t,this.canvasHeight=e,this.renderer.setSize(t,e),this.controls&&this.controls.update(),this._Emit("resized",{width:t,height:e}),this._Emit("viewChanged"),this.Render()}async Load({url:t,fonts:e=null,progressCbk:i=null,workerFactory:n=null}){if(null===t||void 0===t)throw new Error("`url` parameter is not specified");this._EnsureRenderer(),this.Clear(),this.worker=new pi(n?n():null);const s=await this.worker.Load(t,e,this.options,i);await this.worker.Destroy(),this.worker=null,this.origin=s.origin,this.bounds=s.bounds,this.hasMissingChars=s.hasMissingChars;for(const r of s.layers)this.layers.set(r.name,new xi(r.name,r.color));for(const r of s.batches)if(null!==r.key.blockName&&r.key.geometryType!==$.GeometryType.BLOCK_INSTANCE&&r.key.geometryType!==$.GeometryType.POINT_INSTANCE){let t=this.blocks.get(r.key.blockName);t||(t=new Si,this.blocks.set(r.key.blockName,t)),t.PushBatch(new bi(this,s,r))}console.log(`DXF scene:\n                     ${s.batches.length} batches,\n                     ${this.layers.size} layers,\n                     ${this.blocks.size} blocks,\n                     vertices ${s.vertices.byteLength} B,\n                     indices ${s.indices.byteLength} B\n                     transforms ${s.transforms.byteLength} B`);for(const r of s.batches)this._LoadBatch(s,r);this._Emit("loaded"),s.bounds?this.FitView(s.bounds.minX-s.origin.x,s.bounds.maxX-s.origin.x,s.bounds.minY-s.origin.y,s.bounds.maxY-s.origin.y):this._Message("Empty document",vi.WARN),this.hasMissingChars&&this._Message("Some characters cannot be properly displayed due to missing fonts",vi.WARN),this._CreateControls(),this.Render()}Render(){this._EnsureRenderer(),this.renderer.render(this.scene,this.camera)}GetLayers(){const t=[];for(const e of this.layers.values())t.push({name:e.name,color:this._TransformColor(e.color)});return t}ShowLayer(t,e){this._EnsureRenderer();const i=this.layers.get(t);if(i){for(const t of i.objects)t.visible=e;this.Render()}}Clear(){this._EnsureRenderer(),this.worker&&(this.worker.Destroy(!0),this.worker=null),this.controls&&(this.controls.dispose(),this.controls=null),this.scene.clear();for(const t of this.layers.values())t.Dispose();this.layers.clear(),this.blocks.clear(),this.materials.each(t=>t.material.dispose()),this.materials.clear(),this.SetView({x:0,y:0},2),this._Emit("cleared"),this.Render()}Destroy(){if(this.HasRenderer()){this.resizeObserver&&this.resizeObserver.disconnect(),this.Clear(),this._Emit("destroyed");for(const t of this.simplePointMaterial)t.dispose();for(const t of this.simpleColorMaterial)t.dispose();this.simplePointMaterial=null,this.simpleColorMaterial=null,this.renderer.dispose(),this.renderer=null}}SetView(t,e){const i=this.canvasWidth/this.canvasHeight,n=e/i,s=this.camera;s.left=-e/2,s.right=e/2,s.top=n/2,s.bottom=-n/2,s.zoom=1,s.position.set(t.x,t.y,1),s.rotation.set(0,0,0),s.updateMatrix(),s.updateProjectionMatrix(),this._Emit("viewChanged")}FitView(t,e,i,n,s=.1){const r=this.canvasWidth/this.canvasHeight;let o=e-t;const a=n-i,l={x:t+o/2,y:i+a/2};a*r>o&&(o=a*r),o<=2*Number.MIN_VALUE&&(o=1),this.SetView(l,o*(1+s))}GetScene(){return this.scene}GetCamera(){return this.camera}GetOrigin(){return this.origin}Subscribe(t,e){this._EnsureRenderer(),this.canvas.addEventListener(wi+t,e)}Unsubscribe(t,e){this._EnsureRenderer(),this.canvas.removeEventListener(wi+t,e)}_EnsureRenderer(){if(!this.HasRenderer())throw new Error("WebGL renderer not available. Probable WebGL context loss, try refreshing the page.")}_CreateControls(){const t=this.controls=new mi(this.camera,this.canvas);t.enableRotate=!1,t.mouseButtons={LEFT:U["l"].PAN},t.zoomSpeed=3,t.target=new U["w"](this.camera.position.x,this.camera.position.y,0),t.addEventListener("change",()=>{this._Emit("viewChanged"),this.Render()}),t.update()}_Emit(t,e=null){this.canvas.dispatchEvent(new CustomEvent(wi+t,{detail:e}))}_Message(t,e=vi.INFO){this._Emit("message",{message:t,level:e})}_OnPointerEvent(t){const e=t.target.getBoundingClientRect(),i={x:t.clientX-e.left,y:t.clientY-e.top};this._Emit(t.type,{domEvent:t,canvasCoord:i,position:this._CanvasToSceneCoord(i.x,i.y)})}_CanvasToSceneCoord(t,e){const i=new U["w"](2*t/this.canvasWidth-1,2*-e/this.canvasHeight+1,1).unproject(this.camera);return{x:i.x,y:i.y}}_OnResize(t){this.SetSize(Math.floor(t.contentRect.width),Math.floor(t.contentRect.height))}_LoadBatch(t,e){if(null!==e.key.blockName&&e.key.geometryType!==$.GeometryType.BLOCK_INSTANCE&&e.key.geometryType!==$.GeometryType.POINT_INSTANCE)return;const i=new bi(this,t,e).CreateObjects(),n=this.layers.get(e.key.layerName);for(const s of i)this.scene.add(s),n&&n.PushObject(s)}_GetSimpleColorMaterial(t,e=yi.NONE){const i=new fi(e,null,t,0);let n=this.materials.find({key:i});return null!==n||(n={key:i,material:this._CreateSimpleColorMaterialInstance(t,e)},this.materials.insert(n)),n.material}_CreateSimpleColorMaterial(t=yi.NONE){const e=this._GenerateShaders(t,!1);return new U["r"]({uniforms:{color:{value:new U["c"](16711935)}},vertexShader:e.vertex,fragmentShader:e.fragment,depthTest:!1,depthWrite:!1,glslVersion:U["f"],side:U["d"]})}_CreateSimpleColorMaterialInstance(t,e=yi.NONE){const i=this.simpleColorMaterial[e],n=i.clone();return n.uniforms.color={value:new U["c"](t)},n}_GetSimplePointMaterial(t,e=yi.NONE){const i=new fi(e,$.GeometryType.POINTS,t,0);let n=this.materials.find({key:i});return null!==n||(n={key:i,material:this._CreateSimplePointMaterialInstance(t,this.options.pointSize,e)},this.materials.insert(n)),n.material}_CreateSimplePointMaterial(t=yi.NONE){const e=this._GenerateShaders(t,!0);return new U["r"]({uniforms:{color:{value:new U["c"](16711935)},pointSize:{value:2}},vertexShader:e.vertex,fragmentShader:e.fragment,depthTest:!1,depthWrite:!1,glslVersion:U["f"]})}_CreateSimplePointMaterialInstance(t,e=2,i=yi.NONE){const n=this.simplePointMaterial[i],s=n.clone();return s.uniforms.color={value:new U["c"](t)},s.uniforms.size={value:e},s}_GenerateShaders(t,e){const i=t===yi.FULL?"\n            /* First row. */\n            in vec3 instanceTransform0;\n            /* Second row. */\n            in vec3 instanceTransform1;\n            ":"",n=t===yi.FULL?"\n            pos.xy = mat2(instanceTransform0[0], instanceTransform1[0],\n                          instanceTransform0[1], instanceTransform1[1]) * pos.xy +\n                     vec2(instanceTransform0[2], instanceTransform1[2]);\n            ":"",s=t===yi.POINT?"\n            in vec2 instanceTransform;\n            ":"",r=t===yi.POINT?"\n            pos.xy += instanceTransform;\n            ":"",o=e?"uniform float pointSize;":"",a=e?"gl_PointSize = pointSize;":"";return{vertex:`\n\n            precision highp float;\n            precision highp int;\n            in vec2 position;\n            ${i}\n            ${s}\n            uniform mat4 modelViewMatrix;\n            uniform mat4 projectionMatrix;\n            ${o}\n\n            void main() {\n                vec4 pos = vec4(position, 0.0, 1.0);\n                ${n}\n                ${r}\n                gl_Position = projectionMatrix * modelViewMatrix * pos;\n                ${a}\n            }\n            `,fragment:"\n\n            precision highp float;\n            precision highp int;\n            uniform vec3 color;\n            out vec4 fragColor;\n\n            void main() {\n                fragColor = vec4(color, 1.0);\n            }\n            "}}_TransformColor(t){if(!this.options.colorCorrection&&!this.options.blackWhiteInversion)return t;const e=Ti(this.clearColor);if(16777215===t&&e>=.8)return 0;if(0===t&&e<=.2)return 16777215;if(!this.options.colorCorrection)return t;const i=Ti(t),n=1.5,s=ki(t,this.clearColor),r=s>=1?s:1/s;if(r<n){let n;n=e>.5?e/2:2*e,t=n>i?Ai(t,n/i):Pi(t,i/n)}return t}}_i.MessageLevel=vi,_i.DefaultOptions={canvasWidth:400,canvasHeight:300,autoResize:!1,clearColor:new U["c"]("#000"),clearAlpha:1,canvasAlpha:!1,canvasPremultipliedAlpha:!0,antialias:!0,colorCorrection:!1,blackWhiteInversion:!0,pointSize:2,sceneOptions:ei.DefaultOptions},_i.SetupWorker=function(){new pi(self,!0)};const yi=Object.freeze({NONE:0,FULL:1,POINT:2,MAX:3});class bi{constructor(t,e,i){if(this.viewer=t,this.key=i.key,i.hasOwnProperty("verticesOffset")){const t=new Float32Array(e.vertices,i.verticesOffset*Float32Array.BYTES_PER_ELEMENT,i.verticesSize);(this.key.geometryType!==$.GeometryType.POINT_INSTANCE||e.pointShapeHasDot)&&(this.vertices=new U["a"](t,2)),this.key.geometryType===$.GeometryType.POINT_INSTANCE&&(this.transforms=new U["g"](t,2))}if(i.hasOwnProperty("chunks")){this.chunks=[];for(const t of i.chunks){const i=new Float32Array(e.vertices,t.verticesOffset*Float32Array.BYTES_PER_ELEMENT,t.verticesSize),n=new Uint16Array(e.indices,t.indicesOffset*Uint16Array.BYTES_PER_ELEMENT,t.indicesSize);this.chunks.push({vertices:new U["a"](i,2),indices:new U["a"](n,1)})}}if(i.hasOwnProperty("transformsOffset")){const t=new Float32Array(e.transforms,i.transformsOffset*Float32Array.BYTES_PER_ELEMENT,i.transformsSize),n=new U["i"](t,6);this.transforms0=new U["j"](n,3,0),this.transforms1=new U["j"](n,3,3)}if(this.key.geometryType===$.GeometryType.BLOCK_INSTANCE||this.key.geometryType===$.GeometryType.POINT_INSTANCE){const t=this.viewer.layers.get(this.key.layerName);this.layerColor=t?t.color:0}}GetInstanceType(){switch(this.key.geometryType){case $.GeometryType.BLOCK_INSTANCE:return yi.FULL;case $.GeometryType.POINT_INSTANCE:return yi.POINT;default:return yi.NONE}}*CreateObjects(t=null){if(this.key.geometryType!==$.GeometryType.BLOCK_INSTANCE&&this.key.geometryType!==$.GeometryType.POINT_INSTANCE)yield*this._CreateObjects(t);else{if(null!==t)throw new Error("Unexpected instance batch specified for instance batch");yield*this._CreateBlockInstanceObjects()}}*_CreateObjects(t){var e;const i=t?t._GetInstanceColor(this.key.color):this.key.color,n=this.key.geometryType===$.GeometryType.POINTS||this.key.geometryType===$.GeometryType.POINT_INSTANCE?this.viewer._GetSimplePointMaterial:this.viewer._GetSimpleColorMaterial,s=n.call(this.viewer,this.viewer._TransformColor(i),null!==(e=null===t||void 0===t?void 0:t.GetInstanceType())&&void 0!==e?e:yi.NONE);let r;switch(this.key.geometryType){case $.GeometryType.POINTS:case $.GeometryType.POINT_INSTANCE:r=U["p"];break;case $.GeometryType.LINES:case $.GeometryType.INDEXED_LINES:r=U["k"];break;case $.GeometryType.TRIANGLES:case $.GeometryType.INDEXED_TRIANGLES:r=U["n"];break;default:throw new Error("Unexpected geometry type:"+this.key.geometryType)}function o(e,i){const n=t?new U["h"]:new U["b"];n.setAttribute("position",e),null===t||void 0===t||t._SetInstanceTransformAttribute(n),i&&n.setIndex(i);const o=new r(n,s);return o.frustumCulled=!1,o.matrixAutoUpdate=!1,o}if(this.chunks)for(const a of this.chunks)yield o(a.vertices,a.indices);else yield o(this.vertices)}_SetInstanceTransformAttribute(t){if(!t.isInstancedBufferGeometry)throw new Error("InstancedBufferGeometry expected");this.key.geometryType===$.GeometryType.POINT_INSTANCE?t.setAttribute("instanceTransform",this.transforms):(t.setAttribute("instanceTransform0",this.transforms0),t.setAttribute("instanceTransform1",this.transforms1))}*_CreateBlockInstanceObjects(){const t=this.viewer.blocks.get(this.key.blockName);if(t){for(const e of t.batches)yield*e.CreateObjects(this);this.hasOwnProperty("vertices")&&(yield*this._CreateObjects())}}_GetInstanceColor(t){return t===ci.BY_BLOCK?this.key.color:t===ci.BY_LAYER?this.layerColor:t}}class xi{constructor(t,e){this.name=t,this.color=e,this.objects=[]}PushObject(t){this.objects.push(t)}Dispose(){for(const t of this.objects)t.geometry.dispose();this.objects=null}}class Si{constructor(){this.batches=[]}PushBatch(t){this.batches.push(t)}}const wi="__dxf_";function Ci(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mi(t){return t<.003?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Ti(t){const e=Ci(((16711680&t)>>>16)/255),i=Ci(((65280&t)>>>8)/255),n=Ci((255&t)/255);return.2126*e+.7152*i+.0722*n}function ki(t,e){return(Ti(t)+.05)/(Ti(e)+.05)}function Ei({h:t,l:e,s:i}){let n,s,r;if(0===i)n=s=r=e;else{function o(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}const a=e<.5?e*(1+i):e+i-e*i,l=2*e-a;n=o(l,a,t+1/3),s=o(l,a,t),r=o(l,a,t-1/3)}return Math.min(Math.floor(256*Mi(n)),255)<<16|Math.min(Math.floor(256*Mi(s)),255)<<8|Math.min(Math.floor(256*Mi(r)),255)}function Li(t){const e=Ci(((16711680&t)>>>16)/255),i=Ci(((65280&t)>>>8)/255),n=Ci((255&t)/255),s=Math.max(e,i,n),r=Math.min(e,i,n);let o,a;const l=(s+r)/2;if(s===r)o=a=0;else{const t=s-r;switch(a=l>.5?t/(2-s-r):t/(s+r),s){case e:o=(i-n)/t+(i<n?6:0);break;case i:o=(n-e)/t+2;break;case n:o=(e-i)/t+4;break}o/=6}return{h:o,l:l,s:a}}function Ai(t,e){const i=Li(t);return i.l*=e,i.l>1&&(i.l=1),Ei(i)}function Pi(t,e){const i=Li(t);return i.l/=e,Ei(i)}},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}t.exports=i},e3db:function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},e54f:function(t,e,i){},fe09:function(t,e,i){"use strict";i.d(e,"c",(function(){return li})),i.d(e,"d",(function(){return kn})),i.d(e,"e",(function(){return En})),i.d(e,"f",(function(){return ss})),i.d(e,"g",(function(){return Xr})),i.d(e,"h",(function(){return Yo})),i.d(e,"i",(function(){return Xo})),i.d(e,"j",(function(){return Qo})),i.d(e,"k",(function(){return Ko})),i.d(e,"l",(function(){return ge})),i.d(e,"m",(function(){return ia})),i.d(e,"n",(function(){return ma})),i.d(e,"t",(function(){return io})),i.d(e,"o",(function(){return no})),i.d(e,"q",(function(){return so})),i.d(e,"p",(function(){return Co})),i.d(e,"r",(function(){return Ma})),i.d(e,"u",(function(){return Oa})),i.d(e,"v",(function(){return Ia})),i.d(e,"s",(function(){return Wa})),i.d(e,"w",(function(){return nl})),i.d(e,"x",(function(){return Eo})),i.d(e,"y",(function(){return wl})),i.d(e,"z",(function(){return qe})),i.d(e,"A",(function(){return La})),i.d(e,"B",(function(){return Eh})),i.d(e,"C",(function(){return Lh})),i.d(e,"a",(function(){return Fh})),i.d(e,"b",(function(){return id}));var n={};i.r(n),i.d(n,"QAjaxBar",(function(){return Wt})),i.d(n,"QAvatar",(function(){return ve})),i.d(n,"QBadge",(function(){return _e})),i.d(n,"QBanner",(function(){return xe})),i.d(n,"QBar",(function(){return we})),i.d(n,"QBreadcrumbs",(function(){return Ee})),i.d(n,"QBreadcrumbsEl",(function(){return Ne})),i.d(n,"QBtn",(function(){return li})),i.d(n,"QBtnDropdown",(function(){return wn})),i.d(n,"QBtnGroup",(function(){return ci})),i.d(n,"QBtnToggle",(function(){return Tn})),i.d(n,"QCard",(function(){return kn})),i.d(n,"QCardSection",(function(){return En})),i.d(n,"QCardActions",(function(){return Ln})),i.d(n,"QCarousel",(function(){return Kn})),i.d(n,"QCarouselSlide",(function(){return Zn})),i.d(n,"QCarouselControl",(function(){return Jn})),i.d(n,"QChatMessage",(function(){return ts})),i.d(n,"QCheckbox",(function(){return ss})),i.d(n,"QChip",(function(){return rs})),i.d(n,"QCircularProgress",(function(){return cs})),i.d(n,"QColor",(function(){return $s})),i.d(n,"QDate",(function(){return Er})),i.d(n,"QDialog",(function(){return Xr})),i.d(n,"QDrawer",(function(){return Zr})),i.d(n,"QEditor",(function(){return wo})),i.d(n,"QExpansionItem",(function(){return Po})),i.d(n,"QFab",(function(){return No})),i.d(n,"QFabAction",(function(){return Bo})),i.d(n,"QField",(function(){return Vo})),i.d(n,"QFile",(function(){return Yo})),i.d(n,"QFooter",(function(){return Xo})),i.d(n,"QForm",(function(){return Qo})),i.d(n,"QHeader",(function(){return Ko})),i.d(n,"QIcon",(function(){return ge})),i.d(n,"QImg",(function(){return Jo})),i.d(n,"QInfiniteScroll",(function(){return ea})),i.d(n,"QInnerLoading",(function(){return ia})),i.d(n,"QInput",(function(){return ma})),i.d(n,"QIntersection",(function(){return ba})),i.d(n,"QList",(function(){return io})),i.d(n,"QItem",(function(){return no})),i.d(n,"QItemSection",(function(){return so})),i.d(n,"QItemLabel",(function(){return Co})),i.d(n,"QKnob",(function(){return Sa})),i.d(n,"QLayout",(function(){return Ma})),i.d(n,"QMarkupTable",(function(){return Ta})),i.d(n,"QMenu",(function(){return mn})),i.d(n,"QNoSsr",(function(){return ka})),i.d(n,"QOptionGroup",(function(){return Ra})),i.d(n,"QPage",(function(){return Oa})),i.d(n,"QPageContainer",(function(){return Ia})),i.d(n,"QPageScroller",(function(){return Na})),i.d(n,"QPageSticky",(function(){return Da})),i.d(n,"QPagination",(function(){return qa})),i.d(n,"QParallax",(function(){return Ua})),i.d(n,"QPopupEdit",(function(){return Va})),i.d(n,"QPopupProxy",(function(){return Ha})),i.d(n,"QLinearProgress",(function(){return Wa})),i.d(n,"QPullToRefresh",(function(){return Xa})),i.d(n,"QRadio",(function(){return Ea})),i.d(n,"QRange",(function(){return Ka})),i.d(n,"QRating",(function(){return Za})),i.d(n,"QResizeObserver",(function(){return ks})),i.d(n,"QResponsive",(function(){return Ja})),i.d(n,"QScrollArea",(function(){return nl})),i.d(n,"QScrollObserver",(function(){return Ca})),i.d(n,"QSelect",(function(){return vl})),i.d(n,"QSeparator",(function(){return Eo})),i.d(n,"QSkeleton",(function(){return bl})),i.d(n,"QSlideItem",(function(){return Sl})),i.d(n,"QSlideTransition",(function(){return Mo})),i.d(n,"QSlider",(function(){return Ms})),i.d(n,"QSpace",(function(){return wl})),i.d(n,"QSpinner",(function(){return qe})),i.d(n,"QSpinnerAudio",(function(){return Cl})),i.d(n,"QSpinnerBall",(function(){return Ml})),i.d(n,"QSpinnerBars",(function(){return Tl})),i.d(n,"QSpinnerBox",(function(){return kl})),i.d(n,"QSpinnerClock",(function(){return El})),i.d(n,"QSpinnerComment",(function(){return Ll})),i.d(n,"QSpinnerCube",(function(){return Al})),i.d(n,"QSpinnerDots",(function(){return Pl})),i.d(n,"QSpinnerFacebook",(function(){return Rl})),i.d(n,"QSpinnerGears",(function(){return Ol})),i.d(n,"QSpinnerGrid",(function(){return Il})),i.d(n,"QSpinnerHearts",(function(){return Dl})),i.d(n,"QSpinnerHourglass",(function(){return Nl})),i.d(n,"QSpinnerInfinity",(function(){return zl})),i.d(n,"QSpinnerIos",(function(){return ql})),i.d(n,"QSpinnerOrbit",(function(){return Bl})),i.d(n,"QSpinnerOval",(function(){return Fl})),i.d(n,"QSpinnerPie",(function(){return Ul})),i.d(n,"QSpinnerPuff",(function(){return $l})),i.d(n,"QSpinnerRadio",(function(){return Vl})),i.d(n,"QSpinnerRings",(function(){return Hl})),i.d(n,"QSpinnerTail",(function(){return Gl})),i.d(n,"QSplitter",(function(){return Wl})),i.d(n,"QStep",(function(){return Ql})),i.d(n,"QStepper",(function(){return Kl})),i.d(n,"QStepperNavigation",(function(){return Zl})),i.d(n,"QTabPanels",(function(){return Ns})),i.d(n,"QTabPanel",(function(){return qs})),i.d(n,"QTable",(function(){return bh})),i.d(n,"QTh",(function(){return th})),i.d(n,"QTr",(function(){return xh})),i.d(n,"QTd",(function(){return Sh})),i.d(n,"QTabs",(function(){return Os})),i.d(n,"QTab",(function(){return Ds})),i.d(n,"QRouteTab",(function(){return wh})),i.d(n,"QTime",(function(){return Ch})),i.d(n,"QTimeline",(function(){return Mh})),i.d(n,"QTimelineEntry",(function(){return Th})),i.d(n,"QToggle",(function(){return La})),i.d(n,"QToolbar",(function(){return Eh})),i.d(n,"QToolbarTitle",(function(){return Lh})),i.d(n,"QTooltip",(function(){return to})),i.d(n,"QTree",(function(){return Ph})),i.d(n,"QUploader",(function(){return Dh})),i.d(n,"QUploaderBase",(function(){return Rh})),i.d(n,"QUploaderAddTrigger",(function(){return Nh})),i.d(n,"QVideo",(function(){return zh})),i.d(n,"QVirtualScroll",(function(){return lh}));var s={};i.r(s),i.d(s,"ClosePopup",(function(){return Fh})),i.d(s,"GoBack",(function(){return $h})),i.d(s,"Intersection",(function(){return ya})),i.d(s,"Morph",(function(){return mc})),i.d(s,"Mutation",(function(){return yc})),i.d(s,"Ripple",(function(){return Xe})),i.d(s,"ScrollFire",(function(){return Sc})),i.d(s,"Scroll",(function(){return Mc})),i.d(s,"TouchHold",(function(){return kc})),i.d(s,"TouchPan",(function(){return bs})),i.d(s,"TouchRepeat",(function(){return Rc})),i.d(s,"TouchSwipe",(function(){return Nn}));var r={};i.r(r),i.d(r,"AddressbarColor",(function(){return zc})),i.d(r,"AppFullscreen",(function(){return Uc})),i.d(r,"AppVisibility",(function(){return $c})),i.d(r,"BottomSheet",(function(){return Zc})),i.d(r,"Cookies",(function(){return cu})),i.d(r,"Dark",(function(){return $})),i.d(r,"Dialog",(function(){return du})),i.d(r,"LoadingBar",(function(){return pu})),i.d(r,"Loading",(function(){return wu})),i.d(r,"Meta",(function(){return Fu})),i.d(r,"Notify",(function(){return id})),i.d(r,"Platform",(function(){return S})),i.d(r,"Screen",(function(){return F})),i.d(r,"LocalStorage",(function(){return ad})),i.d(r,"SessionStorage",(function(){return ld}));var o=i("c0a8"),a=i("2b0e");const l="undefined"===typeof window;let h,c=!1,u=l,d=!1;function p(t,e){const i=/(edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:i[5]||i[3]||i[1]||"",version:i[2]||i[4]||"0",versionNumber:i[4]||i[2]||"0",platform:e[0]||""}}function f(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const m=!1===l&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function g(t){h={is:{...t}},delete t.mac,delete t.desktop;const e=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(t,{mobile:!0,ios:!0,platform:e,[e]:!0})}function v(t){const e=t.toLowerCase(),i=f(e),n=p(e,i),s={};n.browser&&(s[n.browser]=!0,s.version=n.version,s.versionNumber=parseInt(n.versionNumber,10)),n.platform&&(s[n.platform]=!0);const r=s.android||s.ios||s.bb||s.blackberry||s.ipad||s.iphone||s.ipod||s.kindle||s.playbook||s.silk||s["windows phone"];return!0===r||e.indexOf("mobile")>-1?(s.mobile=!0,s.edga||s.edgios?(s.edge=!0,n.browser="edge"):s.crios?(s.chrome=!0,n.browser="chrome"):s.fxios&&(s.firefox=!0,n.browser="firefox")):s.desktop=!0,(s.ipod||s.ipad||s.iphone)&&(s.ios=!0),s["windows phone"]&&(s.winphone=!0,delete s["windows phone"]),(s.chrome||s.opr||s.safari||s.vivaldi||!0===s.mobile&&!0!==s.ios&&!0!==r)&&(s.webkit=!0),(s.rv||s.iemobile)&&(n.browser="ie",s.ie=!0),(s.safari&&s.blackberry||s.bb)&&(n.browser="blackberry",s.blackberry=!0),s.safari&&s.playbook&&(n.browser="playbook",s.playbook=!0),s.opr&&(n.browser="opera",s.opera=!0),s.safari&&s.android&&(n.browser="android",s.android=!0),s.safari&&s.kindle&&(n.browser="kindle",s.kindle=!0),s.safari&&s.silk&&(n.browser="silk",s.silk=!0),s.vivaldi&&(n.browser="vivaldi",s.vivaldi=!0),s.name=n.browser,s.platform=n.platform,!1===l&&(e.indexOf("electron")>-1?s.electron=!0:document.location.href.indexOf("-extension://")>-1?s.bex=!0:(void 0!==window.Capacitor?(s.capacitor=!0,s.nativeMobile=!0,s.nativeMobileWrapper="capacitor"):void 0===window._cordovaNative&&void 0===window.cordova||(s.cordova=!0,s.nativeMobile=!0,s.nativeMobileWrapper="cordova"),!0===m&&!0===s.mac&&(!0===s.desktop&&!0===s.safari||!0===s.nativeMobile&&!0!==s.android&&!0!==s.ios&&!0!==s.ipad)&&g(s)),c=void 0===s.nativeMobile&&void 0===s.electron&&null!==document.querySelector("[data-server-rendered]"),!0===c&&(u=!0)),s}const _=!0!==l?navigator.userAgent||navigator.vendor||window.opera:"",y={has:{touch:!1,webStorage:!1},within:{iframe:!1}},b=!1===l?{userAgent:_,is:v(_),has:{touch:m,webStorage:(()=>{try{if(window.localStorage)return!0}catch(t){}return!1})()},within:{iframe:window.self!==window.top}}:y,x={install(t,e){!0===l?e.server.push((t,e)=>{t.platform=this.parseSSR(e.ssr)}):!0===c?(Object.assign(this,b,h,y),e.takeover.push(t=>{u=c=!1,Object.assign(t.platform,b),h=void 0}),a["a"].util.defineReactive(t,"platform",this)):(Object.assign(this,b),t.platform=this)}};!0===l?x.parseSSR=t=>{const e=t.req.headers["user-agent"]||t.req.headers["User-Agent"]||"";return{...b,userAgent:e,is:v(e)}}:d=!0===b.is.ios&&-1===window.navigator.vendor.toLowerCase().indexOf("apple");var S=x;const w={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{var C=Object.defineProperty({},"passive",{get(){Object.assign(w,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,C),window.removeEventListener("qtest",null,C)}catch(hd){}function M(){}function T(t){return 0===t.button}function k(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function E(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let i=t.target;while(i){if(e.push(i),"HTML"===i.tagName)return e.push(document),e.push(window),e;i=i.parentElement}}function L(t){t.stopPropagation()}function A(t){!1!==t.cancelable&&t.preventDefault()}function P(t){!1!==t.cancelable&&t.preventDefault(),t.stopPropagation()}function R(t){if(P(t),"mousedown"===t.type){const e=i=>{i.target===t.target&&P(i),document.removeEventListener("click",e,w.notPassiveCapture)};document.addEventListener("click",e,w.notPassiveCapture)}}function O(t,e){if(void 0===t||!0===e&&!0===t.__dragPrevented)return;const i=!0===e?t=>{t.__dragPrevented=!0,t.addEventListener("dragstart",A,w.notPassiveCapture)}:t=>{delete t.__dragPrevented,t.removeEventListener("dragstart",A,w.notPassiveCapture)};t.querySelectorAll("a, img").forEach(i)}function I(t,{bubbles:e=!1,cancelable:i=!1}={}){try{return new CustomEvent(t,{bubbles:e,cancelable:i})}catch(hd){const s=document.createEvent("Event");return s.initEvent(t,e,i),s}}function D(t,e,i){const n=`__q_${e}_evt`;t[n]=void 0!==t[n]?t[n].concat(i):i,i.forEach(e=>{e[0].addEventListener(e[1],t[e[2]],w[e[3]])})}function N(t,e){const i=`__q_${e}_evt`;void 0!==t[i]&&(t[i].forEach(e=>{e[0].removeEventListener(e[1],t[e[2]],w[e[3]])}),t[i]=void 0)}var z=function(t,e=250,i){let n;function s(){const s=arguments,r=()=>{n=void 0,!0!==i&&t.apply(this,s)};clearTimeout(n),!0===i&&void 0===n&&t.apply(this,s),n=setTimeout(r,e)}return s.cancel=()=>{clearTimeout(n)},s};const q=["sm","md","lg","xl"],{passive:B}=w;var F={width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1,setSizes:M,setDebounce:M,install(t,e,i){if(!0===l)return void(t.screen=this);const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,o=void 0===n||!0===b.is.mobile?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],h=void 0!==i.screen&&!0===i.screen.bodyClasses,u=t=>{const[e,i]=o();if(i!==this.height&&(this.height=i),e!==this.width)this.width=e;else if(!0!==t)return;let n=this.sizes;this.gt.xs=e>=n.sm,this.gt.sm=e>=n.md,this.gt.md=e>=n.lg,this.gt.lg=e>=n.xl,this.lt.sm=e<n.sm,this.lt.md=e<n.md,this.lt.lg=e<n.lg,this.lt.xl=e<n.xl,this.xs=this.lt.sm,this.sm=!0===this.gt.xs&&!0===this.lt.md,this.md=!0===this.gt.sm&&!0===this.lt.lg,this.lg=!0===this.gt.md&&!0===this.lt.xl,this.xl=this.gt.lg,n=(!0===this.xs?"xs":!0===this.sm&&"sm")||!0===this.md&&"md"||!0===this.lg&&"lg"||"xl",n!==this.name&&(!0===h&&(document.body.classList.remove("screen--"+this.name),document.body.classList.add("screen--"+n)),this.name=n)};let d,p={},f=16;this.setSizes=t=>{q.forEach(e=>{void 0!==t[e]&&(p[e]=t[e])})},this.setDebounce=t=>{f=t};const m=()=>{const t=getComputedStyle(document.body);t.getPropertyValue("--q-size-sm")&&q.forEach(e=>{this.sizes[e]=parseInt(t.getPropertyValue("--q-size-"+e),10)}),this.setSizes=t=>{q.forEach(e=>{t[e]&&(this.sizes[e]=t[e])}),u(!0)},this.setDebounce=t=>{void 0!==d&&s.removeEventListener("resize",d,B),d=t>0?z(u,t):u,s.addEventListener("resize",d,B)},this.setDebounce(f),Object.keys(p).length>0?(this.setSizes(p),p=void 0):u(),!0===h&&"xs"===this.name&&document.body.classList.add("screen--xs")};!0===c?e.takeover.push(m):m(),a["a"].util.defineReactive(t,"screen",this)}};const U={isActive:!1,mode:!1,install(t,e,{dark:i}){if(this.isActive=!0===i,!0===l)return e.server.push((t,e)=>{t.dark={isActive:!1,mode:!1,set:i=>{e.ssr.Q_BODY_CLASSES=e.ssr.Q_BODY_CLASSES.replace(" body--light","").replace(" body--dark","")+" body--"+(!0===i?"dark":"light"),t.dark.isActive=!0===i,t.dark.mode=i},toggle:()=>{t.dark.set(!1===t.dark.isActive)}},t.dark.set(i)}),void(this.set=M);const n=void 0!==i&&i;if(!0===c){const t=t=>{this.__fromSSR=t},i=this.set;this.set=t,t(n),e.takeover.push(()=>{this.set=i,this.set(this.__fromSSR)})}else this.set(n);a["a"].util.defineReactive(this,"isActive",this.isActive),a["a"].util.defineReactive(t,"dark",this)},set(t){this.mode=t,"auto"===t?(void 0===this.__media&&(this.__media=window.matchMedia("(prefers-color-scheme: dark)"),this.__updateMedia=()=>{this.set("auto")},this.__media.addListener(this.__updateMedia)),t=this.__media.matches):void 0!==this.__media&&(this.__media.removeListener(this.__updateMedia),this.__media=void 0),this.isActive=!0===t,document.body.classList.remove("body--"+(!0===t?"light":"dark")),document.body.classList.add("body--"+(!0===t?"dark":"light"))},toggle(){U.set(!1===U.isActive)},__media:void 0};var $=U;const V=()=>!0;function H(t){return"string"===typeof t&&""!==t&&"/"!==t&&"#/"!==t}function G(t){return!0===t.startsWith("#")&&(t=t.substr(1)),!1===t.startsWith("/")&&(t="/"+t),!0===t.endsWith("/")&&(t=t.substr(0,t.length-1)),"#"+t}function W(t){if(!1===t.backButtonExit)return()=>!1;if("*"===t.backButtonExit)return V;const e=["#/"];return!0===Array.isArray(t.backButtonExit)&&e.push(...t.backButtonExit.filter(H).map(G)),()=>e.includes(window.location.hash)}var j={__history:[],add:M,remove:M,install(t){if(!0===l)return;const{cordova:e,capacitor:i}=b.is;if(!0!==e&&!0!==i)return;const n=t[!0===e?"cordova":"capacitor"];if(void 0!==n&&!1===n.backButton)return;if(!0===i&&(void 0===window.Capacitor||void 0===window.Capacitor.Plugins.App))return;this.add=t=>{void 0===t.condition&&(t.condition=V),this.__history.push(t)},this.remove=t=>{const e=this.__history.indexOf(t);e>=0&&this.__history.splice(e,1)};const s=W(Object.assign({backButtonExit:!0},n)),r=()=>{if(this.__history.length){const t=this.__history[this.__history.length-1];!0===t.condition()&&(this.__history.pop(),t.handler())}else!0===s()?navigator.app.exitApp():window.history.back()};!0===e?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",r,!1)}):window.Capacitor.Plugins.App.addListener("backButton",r)}},Y={isoName:"en-us",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:function(t){return t?`Expand "${t}"`:"Expand"},collapse:function(t){return t?`Collapse "${t}"`:"Collapse"}},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:function(t){return 1===t?"1 record selected.":(0===t?"No":t)+" records selected."},recordsPerPage:"Records per page:",allRows:"All",pagination:function(t,e,i){return t+"-"+e+" of "+i},columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function X(){if(!0===l)return;const t=navigator.language||navigator.languages[0]||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage;return t?t.toLowerCase():void 0}const Q={getLocale:X,install(t,e,i){const n=i||Y;this.set=(e=Y,i)=>{const n={...e,rtl:!0===e.rtl,getLocale:X};if(!0===l){if(void 0===i)return void console.error("SSR ERROR: second param required: Quasar.lang.set(lang, ssrContext)");const t=!0===n.rtl?"rtl":"ltr",e=`lang=${n.isoName} dir=${t}`;n.set=i.$q.lang.set,i.Q_HTML_ATTRS=void 0!==i.Q_PREV_LANG?i.Q_HTML_ATTRS.replace(i.Q_PREV_LANG,e):e,i.Q_PREV_LANG=e,i.$q.lang=n}else{if(!1===c){const t=document.documentElement;t.setAttribute("dir",!0===n.rtl?"rtl":"ltr"),t.setAttribute("lang",n.isoName)}n.set=this.set,t.lang=this.props=n,this.isoName=n.isoName,this.nativeName=n.nativeName}},!0===l?(e.server.push((t,e)=>{t.lang={},t.lang.set=t=>{this.set(t,e.ssr)},t.lang.set(n)}),this.isoName=n.isoName,this.nativeName=n.nativeName,this.props=n):(a["a"].util.defineReactive(t,"lang",{}),this.set(n))}};var K=Q;const Z=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function J({r:t,g:e,b:i,a:n}){const s=void 0!==n;if(t=Math.round(t),e=Math.round(e),i=Math.round(i),t>255||e>255||i>255||s&&n>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return n=s?(256|Math.round(255*n/100)).toString(16).slice(1):"","#"+(i|e<<8|t<<16|1<<24).toString(16).slice(1)+n}function tt({r:t,g:e,b:i,a:n}){return`rgb${void 0!==n?"a":""}(${t},${e},${i}${void 0!==n?","+n/100:""})`}function et(t){if("string"!==typeof t)throw new TypeError("Expected a string");t=t.replace(/^#/,""),3===t.length?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:4===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16);return t.length>6?{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:Math.round((255&e)/2.55)}:{r:e>>16,g:e>>8&255,b:255&e}}function it({h:t,s:e,v:i,a:n}){let s,r,o;e/=100,i/=100,t/=360;const a=Math.floor(6*t),l=6*t-a,h=i*(1-e),c=i*(1-l*e),u=i*(1-(1-l)*e);switch(a%6){case 0:s=i,r=u,o=h;break;case 1:s=c,r=i,o=h;break;case 2:s=h,r=i,o=u;break;case 3:s=h,r=c,o=i;break;case 4:s=u,r=h,o=i;break;case 5:s=i,r=h,o=c;break}return{r:Math.round(255*s),g:Math.round(255*r),b:Math.round(255*o),a:n}}function nt({r:t,g:e,b:i,a:n}){const s=Math.max(t,e,i),r=Math.min(t,e,i),o=s-r,a=0===s?0:o/s,l=s/255;let h;switch(s){case r:h=0;break;case t:h=e-i+o*(e<i?6:0),h/=6*o;break;case e:h=i-t+2*o,h/=6*o;break;case i:h=t-e+4*o,h/=6*o;break}return{h:Math.round(360*h),s:Math.round(100*a),v:Math.round(100*l),a:n}}function st(t){if("string"!==typeof t)throw new TypeError("Expected a string");const e=t.replace(/ /g,""),i=Z.exec(e);if(null===i)return et(e);const n={r:Math.min(255,parseInt(i[2],10)),g:Math.min(255,parseInt(i[3],10)),b:Math.min(255,parseInt(i[4],10))};if(i[1]){const t=parseFloat(i[5]);n.a=100*Math.min(1,!0===isNaN(t)?1:t)}return n}function rt(t){if("string"!==typeof t&&(!t||void 0===t.r))throw new TypeError("Expected a string or a {r, g, b} object as color");const e="string"===typeof t?st(t):t,i=e.r/255,n=e.g/255,s=e.b/255,r=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),a=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);return.2126*r+.7152*o+.0722*a}function ot(t,e,i=document.body){if("string"!==typeof t)throw new TypeError("Expected a string as color");if("string"!==typeof e)throw new TypeError("Expected a string as value");if(!(i instanceof Element))throw new TypeError("Expected a DOM element");i.style.setProperty("--q-color-"+t,e)}function at(t,e=document.body){if("string"!==typeof t)throw new TypeError("Expected a string as color");if(!(e instanceof Element))throw new TypeError("Expected a DOM element");return getComputedStyle(e).getPropertyValue("--q-color-"+t).trim()||null}let lt=!1;function ht(t){lt=!0===t.isComposing}function ct(t){return!0===lt||t!==Object(t)||!0===t.isComposing||!0===t.qKeyEvent}function ut(t,e){return!0!==ct(t)&&[].concat(e).includes(t.keyCode)}function dt(t){return!0===t.ios?"ios":!0===t.android?"android":void 0}function pt({is:t,has:e,within:i},n){const s=[!0===t.desktop?"desktop":"mobile",(!1===e.touch?"no-":"")+"touch"];if(!0===t.mobile){const e=dt(t);void 0!==e&&s.push("platform-"+e)}if(!0===t.nativeMobile){const e=t.nativeMobileWrapper;s.push(e),s.push("native-mobile"),!0!==t.ios||void 0!==n[e]&&!1===n[e].iosStatusBarPadding||s.push("q-ios-padding")}else!0===t.electron?s.push("electron"):!0===t.bex&&s.push("bex");return!0===i.iframe&&s.push("within-iframe"),s}function ft(){const t=document.body.className;let e=t;void 0!==h&&(e=e.replace("desktop","platform-ios mobile")),!0===b.has.touch&&(e=e.replace("no-touch","touch")),!0===b.within.iframe&&(e+=" within-iframe"),t!==e&&(document.body.className=e)}function mt(t){for(const e in t)ot(e,t[e])}var gt={install(t,e){if(!0!==l){if(!0===c)ft();else{const t=pt(b,e);!0===b.is.ie&&11===b.is.versionNumber?t.forEach(t=>document.body.classList.add(t)):document.body.classList.add.apply(document.body.classList,t)}void 0!==e.brand&&mt(e.brand),!0===b.is.ios&&document.body.addEventListener("touchstart",M),window.addEventListener("keydown",ht,!0)}else t.server.push((t,i)=>{const n=pt(t.platform,e),s=i.ssr.setBodyClasses;void 0!==e.screen&&!0===e.screen.bodyClass&&n.push("screen--xs"),"function"===typeof s?s(n):i.ssr.Q_BODY_CLASSES=n.join(" ")})}},vt={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},_t={install(t,e,i){const n=i||vt;this.set=(e,i)=>{const n={...e};if(!0===l){if(void 0===i)return void console.error("SSR ERROR: second param required: Quasar.iconSet.set(iconSet, ssrContext)");n.set=i.$q.iconSet.set,i.$q.iconSet=n}else n.set=this.set,t.iconSet=n},!0===l?e.server.push((t,e)=>{t.iconSet={},t.iconSet.set=t=>{this.set(t,e.ssr)},t.iconSet.set(n)}):(a["a"].util.defineReactive(t,"iconMapFn",void 0),a["a"].util.defineReactive(t,"iconSet",{}),this.set(n))}};const yt=[S,F,$],bt={server:[],takeover:[]},xt={version:o["a"],config:{}};var St=function(t,e={}){if(!0===this.__qInstalled)return;this.__qInstalled=!0;const i=xt.config=Object.freeze(e.config||{});if(S.install(xt,bt),gt.install(bt,i),$.install(xt,bt,i),F.install(xt,bt,i),j.install(i),K.install(xt,bt,e.lang),_t.install(xt,bt,e.iconSet),!0===l?t.mixin({beforeCreate(){this.$q=this.$root.$options.$q}}):t.prototype.$q=xt,e.components&&Object.keys(e.components).forEach(i=>{const n=e.components[i];"function"===typeof n&&t.component(n.options.name,n)}),e.directives&&Object.keys(e.directives).forEach(i=>{const n=e.directives[i];void 0!==n.name&&void 0!==n.unbind&&t.directive(n.name,n)}),e.plugins){const t={$q:xt,queues:bt,cfg:i};Object.keys(e.plugins).forEach(i=>{const n=e.plugins[i];"function"===typeof n.install&&!1===yt.includes(n)&&n.install(t)})}};const wt={mounted(){bt.takeover.forEach(t=>{t(this.$q)})}};var Ct=function(t){if(t.ssr){const e={...xt,ssrContext:t.ssr};Object.assign(t.ssr,{Q_HEAD_TAGS:"",Q_BODY_ATTRS:"",Q_BODY_TAGS:""}),t.app.$q=t.ssr.$q=e,bt.server.forEach(i=>{i(e,t)})}else{const e=t.app.mixins||[];!1===e.includes(wt)&&(t.app.mixins=e.concat(wt))}},Mt={version:o["a"],install:St,lang:K,iconSet:_t,ssrUpdate:Ct};const Tt=["B","KB","MB","GB","TB","PB"];function kt(t){let e=0;while(parseInt(t,10)>=1024&&e<Tt.length-1)t/=1024,++e;return`${t.toFixed(1)}${Tt[e]}`}function Et(t,e,i){return i<=e?e:Math.min(i,Math.max(e,t))}function Lt(t,e,i){if(i<=e)return e;const n=i-e+1;let s=e+(t-e)%n;return s<e&&(s=n+s),0===s?0:s}function At(t,e=2,i="0"){if(void 0===t||null===t)return t;const n=""+t;return n.length>=e?n:new Array(e-n.length+1).join(i)+n}function Pt(t,e,i){if(!0===l)return i;const n="__qcache_"+e;return void 0===t[n]?t[n]=i:t[n]}function Rt(t,e,i){if(!0===l)return i();const n="__qcache_"+e;return void 0===t[n]?t[n]=i():t[n]}function Ot(t,e){return{data(){const i={},n=this[t];for(const t in n)i[t]=n[t];return{[e]:i}},watch:{[t](t,i){const n=this[e];if(void 0!==i)for(const e in i)void 0===t[e]&&this.$delete(n,e);for(const e in t)n[e]!==t[e]&&this.$set(n,e,t[e])}}}}const It={"aria-hidden":"true"},Dt={tabindex:0,type:"button","aria-hidden":!1,role:null};var Nt=Ot("$attrs","qAttrs");const zt=l?null:XMLHttpRequest,qt=l?null:zt.prototype.open,Bt=["top","right","bottom","left"];let Ft=[],Ut=0;function $t({p:t,pos:e,active:i,horiz:n,reverse:s,dir:r}){let o=1,a=1;return!0===n?(!0===s&&(o=-1),"bottom"===e&&(a=-1),{transform:`translate3d(${o*(t-100)}%,${i?0:-200*a}%,0)`}):(!0===s&&(a=-1),"right"===e&&(o=-1),{transform:`translate3d(${i?0:r*o*-200}%,${a*(t-100)}%,0)`})}function Vt(t,e){return"number"!==typeof e&&(e=t<25?3*Math.random()+3:t<65?3*Math.random():t<85?2*Math.random():t<99?.6:0),Et(t+e,0,100)}function Ht(t){Ut++,Ft.push(t),Ut>1||(zt.prototype.open=function(t,e){const i=[],n=()=>{Ft.forEach(t=>{const n=t.getHijackFilter();null!==n&&!0!==n(e)||(t.start(),i.push(t.stop))})},s=()=>{i.forEach(t=>{t()})};this.addEventListener("loadstart",n,{once:!0}),this.addEventListener("loadend",s,{once:!0}),qt.apply(this,arguments)})}function Gt(t){Ft=Ft.filter(e=>e.start!==t),Ut=Math.max(0,Ut-1),Ut||(zt.prototype.open=qt)}var Wt=a["a"].extend({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:t=>Bt.includes(t)},size:{type:String,default:"2px"},color:String,reverse:Boolean,skipHijack:Boolean,hijackFilter:Function},data(){return{calls:0,progress:0,onScreen:!1,animate:!0}},computed:{classes(){return"q-loading-bar q-loading-bar--"+this.position+(void 0!==this.color?" bg-"+this.color:"")+(!0===this.animate?"":" no-transition")},style(){const t=this.onScreen,e=$t({p:this.progress,pos:this.position,active:t,horiz:this.horizontal,reverse:!0===this.$q.lang.rtl&&["top","bottom"].includes(this.position)?!1===this.reverse:this.reverse,dir:!0===this.$q.lang.rtl?-1:1});return e[this.sizeProp]=this.size,e.opacity=t?1:0,e},horizontal(){return"top"===this.position||"bottom"===this.position},sizeProp(){return this.horizontal?"height":"width"},attrs(){return!0===this.onScreen?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.progress}:It}},methods:{start(t=300){const e=this.speed,i=this.speed=Math.max(0,t)||0;return this.calls++,this.calls>1?(0===e&&i>0?this.__work():e>0&&i<=0&&clearTimeout(this.timer),this.calls):(clearTimeout(this.timer),this.$emit("start"),this.progress=0,this.timer=setTimeout(()=>{this.animate=!0,i>0&&this.__work()},!0===this.onScreen?500:1),!0!==this.onScreen&&(this.onScreen=!0,this.animate=!1),this.calls)},increment(t){return this.calls>0&&(this.progress=Vt(this.progress,t)),this.calls},stop(){if(this.calls=Math.max(0,this.calls-1),this.calls>0)return this.calls;clearTimeout(this.timer),this.$emit("stop");const t=()=>{this.animate=!0,this.progress=100,this.timer=setTimeout(()=>{this.onScreen=!1},1e3)};return 0===this.progress?this.timer=setTimeout(t,1):t(),this.calls},__work(){this.progress<100&&(this.timer=setTimeout(()=>{this.increment(),this.__work()},this.speed))}},mounted(){!0!==this.skipHijack&&(this.hijacked=!0,Ht({start:this.start,stop:this.stop,getHijackFilter:()=>this.hijackFilter||null}))},beforeDestroy(){clearTimeout(this.timer),!0===this.hijacked&&Gt(this.start)},render(t){return t("div",{class:this.classes,style:this.style,attrs:this.attrs})}});const jt={xs:18,sm:24,md:32,lg:38,xl:46};function Yt(t){return{props:{size:String},computed:{sizeStyle(){if(void 0!==this.size)return{fontSize:this.size in t?t[this.size]+"px":this.size}}}}}var Xt=Yt(jt),Qt={props:{tag:{type:String,default:"div"}}},Kt=Ot("$listeners","qListeners");function Zt(t,e,i){return void 0!==t.$scopedSlots[e]?t.$scopedSlots[e]():i}function Jt(t,e,i){return void 0!==t.$scopedSlots[e]?[].concat(t.$scopedSlots[e]()):i}function te(t,e,i){return void 0!==e.$scopedSlots[i]?t.concat(e.$scopedSlots[i]()):t}function ee(t,e,i){if(void 0===e.$scopedSlots[i])return t;const n=e.$scopedSlots[i]();return void 0!==t?t.concat(n):n}const ie="0 0 24 24",ne=t=>t,se=t=>"ionicons "+t,re={"mdi-":t=>"mdi "+t,"icon-":ne,"bt-":t=>"bt "+t,"eva-":t=>"eva "+t,"ion-md":se,"ion-ios":se,"ion-logo":se,"iconfont ":ne,"ti-":t=>"themify-icon "+t,"bi-":t=>"bootstrap-icons "+t},oe={o_:"-outlined",r_:"-round",s_:"-sharp"},ae={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},le=new RegExp("^("+Object.keys(re).join("|")+")"),he=new RegExp("^("+Object.keys(oe).join("|")+")"),ce=new RegExp("^("+Object.keys(ae).join("|")+")"),ue=/^[Mm]\s?[-+]?\.?\d/,de=/^img:/,pe=/^svguse:/,fe=/^ion-/,me=/^(fa-(solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var ge=a["a"].extend({name:"QIcon",mixins:[Kt,Xt,Qt],props:{tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},computed:{classes(){return"q-icon"+(!0===this.left?" on-left":"")+(!0===this.right?" on-right":"")+(void 0!==this.color?" text-"+this.color:"")},type(){let t,e=this.name;if("none"===e||!e)return{none:!0};if(void 0!==this.$q.iconMapFn){const t=this.$q.iconMapFn(e);if(void 0!==t){if(void 0===t.icon)return{cls:t.cls,content:void 0!==t.content?t.content:" "};if(e=t.icon,"none"===e||!e)return{none:!0}}}if(!0===ue.test(e)){const[t,i=ie]=e.split("|");return{svg:!0,viewBox:i,nodes:t.split("&&").map(t=>{const[e,i,n]=t.split("@@");return this.$createElement("path",{attrs:{d:e,transform:n},style:i})})}}if(!0===de.test(e))return{img:!0,src:e.substring(4)};if(!0===pe.test(e)){const[t,i=ie]=e.split("|");return{svguse:!0,src:t.substring(7),viewBox:i}}let i=" ";const n=e.match(le);if(null!==n)t=re[n[1]](e);else if(!0===me.test(e))t=e;else if(!0===fe.test(e))t=`ionicons ion-${!0===this.$q.platform.is.ios?"ios":"md"}${e.substr(3)}`;else if(!0===ce.test(e)){t="notranslate material-symbols";const n=e.match(ce);null!==n&&(e=e.substring(6),t+=ae[n[1]]),i=e}else{t="notranslate material-icons";const n=e.match(he);null!==n&&(e=e.substring(2),t+=oe[n[1]]),i=e}return{cls:t,content:i}}},render(t){const e={class:this.classes,style:this.sizeStyle,on:{...this.qListeners},attrs:{"aria-hidden":"true",role:"presentation"}};return!0===this.type.none?t(this.tag,e,Zt(this,"default")):!0===this.type.img?t("span",e,te([t("img",{attrs:{src:this.type.src}})],this,"default")):!0===this.type.svg?t("span",e,te([t("svg",{attrs:{viewBox:this.type.viewBox||"0 0 24 24",focusable:"false"}},this.type.nodes)],this,"default")):!0===this.type.svguse?t("span",e,te([t("svg",{attrs:{viewBox:this.type.viewBox,focusable:"false"}},[t("use",{attrs:{"xlink:href":this.type.src}})])],this,"default")):(void 0!==this.type.cls&&(e.class+=" "+this.type.cls),t(this.tag,e,te([this.type.content],this,"default")))}}),ve=a["a"].extend({name:"QAvatar",mixins:[Kt,Xt],props:{fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},computed:{classes(){return{["bg-"+this.color]:this.color,[`text-${this.textColor} q-chip--colored`]:this.textColor,"q-avatar--square":this.square,"rounded-borders":this.rounded}},contentStyle(){if(this.fontSize)return{fontSize:this.fontSize}}},render(t){const e=void 0!==this.icon?[t(ge,{props:{name:this.icon}})]:void 0;return t("div",{staticClass:"q-avatar",style:this.sizeStyle,class:this.classes,on:{...this.qListeners}},[t("div",{staticClass:"q-avatar__content row flex-center overflow-hidden",style:this.contentStyle},ee(e,this,"default"))])}}),_e=a["a"].extend({name:"QBadge",mixins:[Kt],props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:t=>["top","middle","bottom"].includes(t)}},computed:{style(){if(void 0!==this.align)return{verticalAlign:this.align}},classes(){const t=!0===this.outline&&this.color||this.textColor;return`q-badge flex inline items-center no-wrap q-badge--${!0===this.multiLine?"multi":"single"}-line`+(!0===this.outline?" q-badge--outline":void 0!==this.color?" bg-"+this.color:"")+(void 0!==t?" text-"+t:"")+(!0===this.floating?" q-badge--floating":"")+(!0===this.rounded?" q-badge--rounded":"")+(!0===this.transparent?" q-badge--transparent":"")},attrs(){return{role:"status","aria-label":this.label}}},render(t){return t("div",{style:this.style,class:this.classes,attrs:this.attrs,on:{...this.qListeners}},void 0!==this.label?[this.label]:Zt(this,"default"))}}),ye={props:{dark:{type:Boolean,default:null}},computed:{isDark(){return null===this.dark?this.$q.dark.isActive:this.dark}}};const be={role:"alert"};var xe=a["a"].extend({name:"QBanner",mixins:[Kt,ye],props:{inlineActions:Boolean,dense:Boolean,rounded:Boolean},render(t){const e=Zt(this,"action"),i=[t("div",{staticClass:"q-banner__avatar col-auto row items-center self-start"},Zt(this,"avatar")),t("div",{staticClass:"q-banner__content col text-body2"},Zt(this,"default"))];return void 0!==e&&i.push(t("div",{staticClass:"q-banner__actions row items-center justify-end",class:"col-"+(!0===this.inlineActions?"auto":"all")},e)),t("div",{staticClass:"q-banner row items-center",class:{"q-banner--top-padding":void 0!==e&&!this.inlineActions,"q-banner--dense":this.dense,"q-banner--dark q-dark":this.isDark,"rounded-borders":this.rounded},attrs:be,on:{...this.qListeners}},i)}});const Se={role:"toolbar"};var we=a["a"].extend({name:"QBar",mixins:[Kt,ye],props:{dense:Boolean},computed:{classes(){return`q-bar--${!0===this.dense?"dense":"standard"} q-bar--`+(!0===this.isDark?"dark":"light")}},render(t){return t("div",{staticClass:"q-bar row no-wrap items-center",class:this.classes,attrs:Se,on:{...this.qListeners}},Zt(this,"default"))}});const Ce={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Me=Object.keys(Ce);var Te={props:{align:{type:String,validator:t=>Me.includes(t)}},computed:{alignClass(){const t=void 0===this.align?!0===this.vertical?"stretch":"left":this.align;return`${!0===this.vertical?"items":"justify"}-${Ce[t]}`}}};const ke=[!0,""];var Ee=a["a"].extend({name:"QBreadcrumbs",mixins:[Kt,Te],props:{separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:t=>["none","xs","sm","md","lg","xl"].includes(t),default:"sm"}},computed:{classes(){return`${this.alignClass}${"none"===this.gutter?"":" q-gutter-"+this.gutter}`},sepClass(){return this.separatorColor?" text-"+this.separatorColor:""},activeClass(){return" text-"+this.activeColor}},render(t){const e=Zt(this,"default");if(void 0===e)return;let i=1;const n=[],s=e.filter(t=>void 0!==t.tag&&t.tag.endsWith("-QBreadcrumbsEl")).length,r=void 0!==this.$scopedSlots.separator?this.$scopedSlots.separator:()=>this.separator;return e.forEach(e=>{if(void 0!==e.tag&&e.tag.endsWith("-QBreadcrumbsEl")){const o=i<s,a=ke.includes(e.componentOptions.propsData.disable),l=!0===o?!0!==a?this.activeClass:"":" q-breadcrumbs--last";i++,n.push(t("div",{staticClass:"flex items-center"+l},[e])),!0===o&&n.push(t("div",{staticClass:"q-breadcrumbs__separator"+this.sepClass},r()))}else n.push(e)}),t("div",{staticClass:"q-breadcrumbs",on:{...this.qListeners}},[t("div",{staticClass:"flex items-center",class:this.classes},n)])}});const Le=/\/?$/;function Ae(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in e)if(!(i in t)||String(t[i])!==String(e[i]))return!1;return!0}function Pe(t,e){for(const i in e)if(!(i in t))return!1;return!0}function Re(t,e){return!!e&&(t.path&&e.path?t.path.replace(Le,"")===e.path.replace(Le,"")&&t.hash===e.hash&&Ae(t.query,e.query):"string"===typeof t.name&&t.name===e.name&&t.hash===e.hash&&!0===Ae(t.query,e.query)&&!0===Ae(t.params,e.params))}function Oe(t,e){return 0===t.path.replace(Le,"/").indexOf(e.path.replace(Le,"/"))&&("string"!==typeof e.hash||e.hash.length<2||t.hash===e.hash)&&!0===Pe(t.query,e.query)}const Ie={to:[String,Object],exact:Boolean,append:Boolean,replace:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"},href:String,target:String,disable:Boolean};var De={props:Ie,computed:{hasHrefLink(){return!0!==this.disable&&void 0!==this.href},hasRouterLinkProps(){return void 0!==this.$router&&!0!==this.disable&&!0!==this.hasHrefLink&&void 0!==this.to&&null!==this.to&&""!==this.to},resolvedLink(){return!0===this.hasRouterLinkProps?this.__getLink(this.to,this.append):null},hasRouterLink(){return null!==this.resolvedLink},hasLink(){return!0===this.hasHrefLink||!0===this.hasRouterLink},linkTag(){return"a"===this.type||!0===this.hasLink?"a":this.tag||this.fallbackTag||"div"},linkAttrs(){return!0===this.hasHrefLink?{href:this.href,target:this.target}:!0===this.hasRouterLink?{href:this.resolvedLink.href,target:this.target}:{}},linkIsActive(){return!0===this.hasRouterLink&&Oe(this.$route,this.resolvedLink.route)},linkIsExactActive(){return!0===this.hasRouterLink&&Re(this.$route,this.resolvedLink.route)},linkClass(){return!0===this.hasRouterLink?!0===this.linkIsExactActive?` ${this.exactActiveClass} ${this.activeClass}`:!0===this.exact?"":!0===this.linkIsActive?" "+this.activeClass:"":""}},methods:{__getLink(t,e){try{return!0===e?this.$router.resolve(t,this.$route,!0):this.$router.resolve(t)}catch(i){}return null},__navigateToRouterLink(t,{returnRouterError:e,to:i,replace:n=this.replace,append:s}={}){if(!0===this.disable)return t.preventDefault(),Promise.resolve(!1);if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||void 0!==t.button&&0!==t.button||"_blank"===this.target)return Promise.resolve(!1);t.preventDefault();const r=void 0===i?this.resolvedLink:this.__getLink(i,s);if(null===r)return Promise[!0===e?"reject":"resolve"](!1);const o=this.$router[!0===n?"replace":"push"](r.location);return!0===e?o:o.catch(()=>{})},__navigateOnClick(t){if(!0===this.hasRouterLink){const e=e=>this.__navigateToRouterLink(t,e);this.$emit("click",t,e),!1===t.navigate&&t.preventDefault(),!0!==t.defaultPrevented&&e()}else this.$emit("click",t)}}},Ne=a["a"].extend({name:"QBreadcrumbsEl",mixins:[Kt,De],props:{label:String,icon:String},computed:{iconClass(){return"q-breadcrumbs__el-icon"+(void 0!==this.label?" q-breadcrumbs__el-icon--with-label":"")},renderData(){return{staticClass:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(!0!==this.disable?"q-link--focusable"+this.linkClass:"q-breadcrumbs__el--disabled"),attrs:this.linkAttrs,on:{...this.qListeners,click:this.__navigateOnClick}}}},beforeCreate(){this.fallbackTag="span"},render(t){const e=[];return void 0!==this.icon&&e.push(t(ge,{class:this.iconClass,props:{name:this.icon}})),void 0!==this.label&&e.push(this.label),t(this.linkTag,this.renderData,te(e,this,"default"))}}),ze={mixins:[Kt],props:{color:String,size:{type:[Number,String],default:"1em"}},computed:{cSize(){return this.size in jt?jt[this.size]+"px":this.size},classes(){if(this.color)return"text-"+this.color}}},qe=a["a"].extend({name:"QSpinner",mixins:[ze],props:{thickness:{type:Number,default:5}},render(t){return t("svg",{staticClass:"q-spinner q-spinner-mat",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"25 25 50 50"}},[t("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":this.thickness,"stroke-miterlimit":"10"}})])}});function Be(t){if(t===window)return{top:0,left:0};const{top:e,left:i}=t.getBoundingClientRect();return{top:e,left:i}}function Fe(t){return t===window?window.innerHeight:t.getBoundingClientRect().height}function Ue(t,e){const i=t.style;Object.keys(e).forEach(t=>{i[t]=e[t]})}function $e(t){const e=typeof t;if("function"===e&&(t=t()),"string"===e)try{t=document.querySelector(t)}catch(i){}return t!==Object(t)?null:!0===t._isVue&&void 0!==t.$el?t.$el:t}function Ve(t,e){if(void 0===t||!0===t.contains(e))return!0;for(let i=t.nextElementSibling;null!==i;i=i.nextElementSibling)if(i.contains(e))return!0;return!1}function He(t){return t===document.documentElement||null===t?document.body:t}var Ge=function(t,e=250){let i,n=!1;return function(){return!1===n&&(n=!0,setTimeout(()=>{n=!1},e),i=t.apply(this,arguments)),i}};function We(t,e,i,n){!0===i.modifiers.stop&&L(t);const s=i.modifiers.color;let r=i.modifiers.center;r=!0===r||!0===n;const o=document.createElement("span"),a=document.createElement("span"),l=k(t),{left:h,top:c,width:u,height:d}=e.getBoundingClientRect(),p=Math.sqrt(u*u+d*d),f=p/2,m=(u-p)/2+"px",g=r?m:l.left-h-f+"px",v=(d-p)/2+"px",_=r?v:l.top-c-f+"px";a.className="q-ripple__inner",Ue(a,{height:p+"px",width:p+"px",transform:`translate3d(${g},${_},0) scale3d(.2,.2,1)`,opacity:0}),o.className="q-ripple"+(s?" text-"+s:""),o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const y=()=>{o.remove(),clearTimeout(b)};i.abort.push(y);let b=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${m},${v},0) scale3d(1,1,1)`,a.style.opacity=.2,b=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,b=setTimeout(()=>{o.remove(),i.abort.splice(i.abort.indexOf(y),1)},275)},250)},50)}function je(t,{modifiers:e,value:i,arg:n}){const s=Object.assign({},xt.config.ripple,e,i);t.modifiers={early:!0===s.early,stop:!0===s.stop,center:!0===s.center,color:s.color||n,keyCodes:[].concat(s.keyCodes||13)}}function Ye(t){const e=t.__qripple;void 0!==e&&(e.abort.forEach(t=>{t()}),N(e,"main"),delete t._qripple)}var Xe={name:"ripple",inserted(t,e){void 0!==t.__qripple&&(Ye(t),t.__qripple_destroyed=!0);const i={enabled:!1!==e.value,modifiers:{},abort:[],start(e){!0===i.enabled&&!0!==e.qSkipRipple&&(!0!==b.is.ie||e.clientX>=0)&&e.type===(!0===i.modifiers.early?"pointerdown":"click")&&We(e,t,i,!0===e.qKeyEvent)},keystart:Ge(e=>{!0===i.enabled&&!0!==e.qSkipRipple&&!0===ut(e,i.modifiers.keyCodes)&&e.type==="key"+(!0===i.modifiers.early?"down":"up")&&We(e,t,i,!0)},300)};je(i,e),t.__qripple=i,D(i,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},update(t,e){const i=t.__qripple;void 0!==i&&e.oldValue!==e.value&&(i.enabled=!1!==e.value,!0===i.enabled&&Object(e.value)===e.value&&je(i,e))},unbind(t){void 0===t.__qripple_destroyed?Ye(t):delete t.__qripple_destroyed}},Qe={directives:{Ripple:Xe},props:{ripple:{type:[Boolean,Object],default:!0}}};const Ke={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Ze=["button","submit","reset"],Je=/[^\s]\/[^\s]/,ti=["flat","outline","push","unelevated"],ei=(t,e)=>!0===t.flat?"flat":!0===t.outline?"outline":!0===t.push?"push":!0===t.unelevated?"unelevated":e;var ii={mixins:[Kt,Qe,De,Te,Yt({xs:8,sm:10,md:14,lg:20,xl:24})],props:{type:{type:String,default:"button"},to:[Object,String],replace:Boolean,append:Boolean,label:[Number,String],icon:String,iconRight:String,...ti.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,round:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],align:{default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},computed:{style(){if(!1===this.fab&&!1===this.fabMini)return this.sizeStyle},isRounded(){return!0===this.rounded||!0===this.fab||!0===this.fabMini},isActionable(){return!0!==this.disable&&!0!==this.loading},computedTabIndex(){return!0===this.isActionable?this.tabindex||0:-1},design(){return ei(this,"standard")},attrs(){const t={tabindex:this.computedTabIndex};return!0===this.hasLink?Object.assign(t,this.linkAttrs):!0===Ze.includes(this.type)&&(t.type=this.type),"a"===this.linkTag?(!0===this.disable?t["aria-disabled"]="true":void 0===t.href&&(t.role="button"),!0!==this.hasRouterLink&&!0===Je.test(this.type)&&(t.type=this.type)):!0===this.disable&&(t.disabled="",t["aria-disabled"]="true"),!0===this.loading&&void 0!==this.percentage&&(t.role="progressbar",t["aria-valuemin"]=0,t["aria-valuemax"]=100,t["aria-valuenow"]=this.percentage),t},classes(){let t;void 0!==this.color?t=!0===this.flat||!0===this.outline?"text-"+(this.textColor||this.color):`bg-${this.color} text-${this.textColor||"white"}`:this.textColor&&(t="text-"+this.textColor);const e=!0===this.round?"round":"rectangle"+(!0===this.isRounded?" q-btn--rounded":!0===this.square?" q-btn--square":"");return`q-btn--${this.design} q-btn--${e}`+(void 0!==t?" "+t:"")+(!0===this.isActionable?" q-btn--actionable q-focusable q-hoverable":!0===this.disable?" disabled":"")+(!0===this.fab?" q-btn--fab":!0===this.fabMini?" q-btn--fab-mini":"")+(!0===this.noCaps?" q-btn--no-uppercase":"")+(!0===this.noWrap?"":" q-btn--wrap")+(!0===this.dense?" q-btn--dense":"")+(!0===this.stretch?" no-border-radius self-stretch":"")+(!0===this.glossy?" glossy":"")},innerClasses(){return this.alignClass+(!0===this.stack?" column":" row")+(!0===this.noWrap?" no-wrap text-no-wrap":"")+(!0===this.loading?" q-btn__content--hidden":"")},wrapperStyle(){if(void 0!==this.padding)return{padding:this.padding.split(/\s+/).map(t=>t in Ke?Ke[t]+"px":t).join(" "),minWidth:"0",minHeight:"0"}}}};const{passiveCapture:ni}=w;let si=void 0,ri=void 0,oi=void 0;const ai={role:"img","aria-hidden":"true"};var li=a["a"].extend({name:"QBtn",mixins:[ii],props:{percentage:Number,darkPercentage:Boolean},computed:{hasLabel(){return void 0!==this.label&&null!==this.label&&""!==this.label},computedRipple(){return!1!==this.ripple&&{keyCodes:!0===this.hasLink?[13,32]:[13],...!0===this.ripple?{}:this.ripple}},percentageStyle(){const t=Math.max(0,Math.min(100,this.percentage));if(t>0)return{transition:"transform 0.6s",transform:`translateX(${t-100}%)`}},onEvents(){if(!0===this.loading)return{mousedown:this.__onLoadingEvt,touchstart:this.__onLoadingEvt,click:this.__onLoadingEvt,keydown:this.__onLoadingEvt,keyup:this.__onLoadingEvt};if(!0===this.isActionable){const t={...this.qListeners,click:this.click,keydown:this.__onKeydown,mousedown:this.__onMousedown};return!0===this.$q.platform.has.touch&&(t[(void 0===t.touchstart?"&":"")+"touchstart"]=this.__onTouchstart),t}return{click:P}},directives(){if(!0!==this.disable&&!1!==this.ripple)return[{name:"ripple",value:this.computedRipple,modifiers:{center:this.round}}]}},methods:{click(t){if(void 0!==t){if(!0===t.defaultPrevented)return;const e=document.activeElement;if("submit"===this.type&&(!0===this.$q.platform.is.ie&&(t.clientX<0||t.clientY<0)||e!==document.body&&!1===this.$el.contains(e)&&!1===e.contains(this.$el))){this.$el.focus();const t=()=>{document.removeEventListener("keydown",P,!0),document.removeEventListener("keyup",t,ni),void 0!==this.$el&&this.$el.removeEventListener("blur",t,ni)};document.addEventListener("keydown",P,!0),document.addEventListener("keyup",t,ni),this.$el.addEventListener("blur",t,ni)}}this.__navigateOnClick(t)},__onKeydown(t){this.$emit("keydown",t),!0===ut(t,[13,32])&&(ri!==this.$el&&(void 0!==ri&&this.__cleanup(),!0!==t.defaultPrevented&&(this.$el.focus(),ri=this.$el,this.$el.classList.add("q-btn--active"),document.addEventListener("keyup",this.__onPressEnd,!0),this.$el.addEventListener("blur",this.__onPressEnd,ni))),P(t))},__onTouchstart(t){if(this.$emit("touchstart",t),si!==this.$el&&(void 0!==si&&this.__cleanup(),!0!==t.defaultPrevented)){si=this.$el;const e=this.touchTargetEl=t.target;e.addEventListener("touchcancel",this.__onPressEnd,ni),e.addEventListener("touchend",this.__onPressEnd,ni)}this.avoidMouseRipple=!0,clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(()=>{this.avoidMouseRipple=!1},200)},__onMousedown(t){t.qSkipRipple=!0===this.avoidMouseRipple,this.$emit("mousedown",t),oi!==this.$el&&(void 0!==oi&&this.__cleanup(),!0!==t.defaultPrevented&&(oi=this.$el,this.$el.classList.add("q-btn--active"),document.addEventListener("mouseup",this.__onPressEnd,ni)))},__onPressEnd(t){if(void 0===t||"blur"!==t.type||document.activeElement!==this.$el){if(void 0!==t&&"keyup"===t.type){if(ri===this.$el&&!0===ut(t,[13,32])){const e=new MouseEvent("click",t);e.qKeyEvent=!0,!0===t.defaultPrevented&&A(e),!0===t.cancelBubble&&L(e),this.$el.dispatchEvent(e),P(t),t.qKeyEvent=!0}this.$emit("keyup",t)}this.__cleanup()}},__cleanup(t){const e=this.$refs.blurTarget;if(!0===t||si!==this.$el&&oi!==this.$el||void 0===e||e===document.activeElement||!0!==this.$el.contains(document.activeElement)||(e.setAttribute("tabindex",-1),e.focus()),si===this.$el){const t=this.touchTargetEl;t.removeEventListener("touchcancel",this.__onPressEnd,ni),t.removeEventListener("touchend",this.__onPressEnd,ni),si=this.touchTargetEl=void 0}oi===this.$el&&(document.removeEventListener("mouseup",this.__onPressEnd,ni),oi=void 0),ri===this.$el&&(document.removeEventListener("keyup",this.__onPressEnd,!0),void 0!==this.$el&&this.$el.removeEventListener("blur",this.__onPressEnd,ni),ri=void 0),void 0!==this.$el&&this.$el.classList.remove("q-btn--active")},__onLoadingEvt(t){P(t),t.qSkipRipple=!0}},beforeDestroy(){this.__cleanup(!0)},render(t){let e=[];void 0!==this.icon&&e.push(t(ge,{attrs:ai,props:{name:this.icon,left:!1===this.stack&&!0===this.hasLabel}})),!0===this.hasLabel&&e.push(t("span",{staticClass:"block"},[this.label])),e=te(e,this,"default"),void 0!==this.iconRight&&!1===this.round&&e.push(t(ge,{attrs:ai,props:{name:this.iconRight,right:!1===this.stack&&!0===this.hasLabel}}));const i=[t("span",{staticClass:"q-focus-helper",ref:"blurTarget"})];return!0===this.loading&&void 0!==this.percentage&&i.push(t("span",{staticClass:"q-btn__progress absolute-full overflow-hidden",class:!0===this.darkPercentage?"q-btn__progress--dark":""},[t("span",{staticClass:"q-btn__progress-indicator fit block",style:this.percentageStyle})])),i.push(t("span",{staticClass:"q-btn__wrapper col row q-anchor--skip",style:this.wrapperStyle},[t("span",{staticClass:"q-btn__content text-center col items-center q-anchor--skip",class:this.innerClasses},e)])),null!==this.loading&&i.push(t("transition",{props:{name:"q-transition--fade"}},!0===this.loading?[t("span",{key:"loading",staticClass:"absolute-full flex flex-center"},void 0!==this.$scopedSlots.loading?this.$scopedSlots.loading():[t(qe)])]:void 0)),t(!0===this.hasLink||"a"===this.type?"a":"button",{staticClass:"q-btn q-btn-item non-selectable no-outline",class:this.classes,style:this.style,attrs:this.attrs,on:this.onEvents,directives:this.directives},i)}}),hi={props:{transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"}},computed:{transitionProps(){const t="q-transition--"+(this.transitionShow||this.defaultTransitionShow),e="q-transition--"+(this.transitionHide||this.defaultTransitionHide);return{appear:!0,enterClass:t+"-enter",enterActiveClass:t+"-enter-active",enterToClass:t+"-enter-to",leaveClass:e+"-leave",leaveActiveClass:e+"-leave-active",leaveToClass:e+"-leave-to"}}}},ci=a["a"].extend({name:"QBtnGroup",mixin:[Kt],props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},computed:{classes(){return["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(t=>!0===this[t]).map(t=>"q-btn-group--"+t).join(" ")}},render(t){return t("div",{staticClass:"q-btn-group row no-wrap "+(!0===this.spread?"q-btn-group--spread":"inline"),class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}});function ui(){if(void 0!==window.getSelection){const t=window.getSelection();void 0!==t.empty?t.empty():void 0!==t.removeAllRanges&&(t.removeAllRanges(),!0!==S.is.mobile&&t.addRange(document.createRange()))}else void 0!==document.selection&&document.selection.empty()}var di={props:{target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean},watch:{contextMenu(t){void 0!==this.anchorEl&&(this.__unconfigureAnchorEl(),this.__configureAnchorEl(t))},target(){void 0!==this.anchorEl&&this.__unconfigureAnchorEl(),this.__pickAnchorEl()},noParentEvent(t){void 0!==this.anchorEl&&(!0===t?this.__unconfigureAnchorEl():this.__configureAnchorEl())}},methods:{__showCondition(t){return void 0!==this.anchorEl&&(void 0===t||(void 0===t.touches||t.touches.length<=1))},__contextClick(t){this.hide(t),this.$nextTick(()=>{this.show(t)}),A(t)},__toggleKey(t){!0===ut(t,13)&&this.toggle(t)},__mobileCleanup(t){this.anchorEl.classList.remove("non-selectable"),clearTimeout(this.touchTimer),!0===this.showing&&void 0!==t&&ui()},__mobilePrevent:A,__mobileTouch(t){if(this.__mobileCleanup(t),!0!==this.__showCondition(t))return;this.hide(t),this.anchorEl.classList.add("non-selectable");const e=t.target;D(this,"anchor",[[e,"touchmove","__mobileCleanup","passive"],[e,"touchend","__mobileCleanup","passive"],[e,"touchcancel","__mobileCleanup","passive"],[this.anchorEl,"contextmenu","__mobilePrevent","notPassive"]]),this.touchTimer=setTimeout(()=>{this.show(t)},300)},__unconfigureAnchorEl(){N(this,"anchor")},__configureAnchorEl(t=this.contextMenu){if(!0===this.noParentEvent||void 0===this.anchorEl)return;let e;e=!0===t?!0===this.$q.platform.is.mobile?[[this.anchorEl,"touchstart","__mobileTouch","passive"]]:[[this.anchorEl,"click","hide","passive"],[this.anchorEl,"contextmenu","__contextClick","notPassive"]]:[[this.anchorEl,"click","toggle","passive"],[this.anchorEl,"keyup","__toggleKey","passive"]],D(this,"anchor",e)},__setAnchorEl(t){this.anchorEl=t;while(this.anchorEl.classList.contains("q-anchor--skip"))this.anchorEl=this.anchorEl.parentNode;this.__configureAnchorEl()},__pickAnchorEl(){!1===this.target||""===this.target||null===this.parentEl?this.anchorEl=void 0:!0===this.target?this.__setAnchorEl(this.parentEl):(this.anchorEl=$e(this.target)||void 0,void 0!==this.anchorEl?this.__configureAnchorEl():console.error(`Anchor: target "${this.target}" not found`,this))},__changeScrollEvent(t,e){const i=(void 0!==e?"add":"remove")+"EventListener",n=void 0!==e?e:this.__scrollFn;t!==window&&t[i]("scroll",n,w.passive),window[i]("scroll",n,w.passive),this.__scrollFn=e}},created(){"function"===typeof this.__configureScrollTarget&&"function"===typeof this.__unconfigureScrollTarget&&(this.noParentEventWatcher=this.$watch("noParentEvent",()=>{void 0!==this.__scrollTarget&&(this.__unconfigureScrollTarget(),this.__configureScrollTarget())}))},mounted(){this.parentEl=this.$el.parentNode,this.__pickAnchorEl(),!0===this.value&&void 0===this.anchorEl&&this.$emit("input",!1)},beforeDestroy(){clearTimeout(this.touchTimer),void 0!==this.noParentEventWatcher&&this.noParentEventWatcher(),void 0!==this.__anchorCleanup&&this.__anchorCleanup(),this.__unconfigureAnchorEl()}},pi={created(){this.__tickFnList=[],this.__timeoutFnList=[]},deactivated(){this.__tickFnList.forEach(t=>{t.removeTick()}),this.__timeoutFnList.forEach(t=>{t.removeTimeout()})},beforeDestroy(){this.__tickFnList.forEach(t=>{t.removeTick()}),this.__tickFnList=void 0,this.__timeoutFnList.forEach(t=>{t.removeTimeout()}),this.__timeoutFnList=void 0},methods:{__useTick(t,e){const i={removeTick(){i.fn=void 0},registerTick:t=>{i.fn=t,this.$nextTick(()=>{i.fn===t&&(!1===this._isDestroyed&&i.fn(),i.fn=void 0)})}};this.__tickFnList.push(i),this[t]=i.registerTick,void 0!==e&&(this[e]=i.removeTick)},__useTimeout(t,e){const i={removeTimeout(){clearTimeout(i.timer)},registerTimeout:(t,e)=>{clearTimeout(i.timer),!1===this._isDestroyed&&(i.timer=setTimeout(t,e))}};this.__timeoutFnList.push(i),this[t]=i.registerTimeout,void 0!==e&&(this[e]=i.removeTimeout)}}},fi={mixins:[Kt],props:{value:{type:Boolean,default:void 0}},data(){return{showing:!1}},watch:{value(t){this.__processModelChange(t)},$route(){!0===this.hideOnRouteChange&&!0===this.showing&&this.hide()}},methods:{toggle(t){this[!0===this.showing?"hide":"show"](t)},show(t){!0===this.disable||void 0!==this.__showCondition&&!0!==this.__showCondition(t)||(void 0!==this.qListeners.input&&!1===l&&(this.$emit("input",!0),this.payload=t,this.$nextTick(()=>{this.payload===t&&(this.payload=void 0)})),void 0!==this.value&&void 0!==this.qListeners.input&&!0!==l||this.__processShow(t))},__processShow(t){!0!==this.showing&&(void 0!==this.__preparePortal&&this.__preparePortal(),this.showing=!0,this.$emit("before-show",t),void 0!==this.__show?this.__show(t):this.$emit("show",t))},hide(t){!0!==this.disable&&(void 0!==this.qListeners.input&&!1===l&&(this.$emit("input",!1),this.payload=t,this.$nextTick(()=>{this.payload===t&&(this.payload=void 0)})),void 0!==this.value&&void 0!==this.qListeners.input&&!0!==l||this.__processHide(t))},__processHide(t){!1!==this.showing&&(this.showing=!1,this.$emit("before-hide",t),void 0!==this.__hide?this.__hide(t):this.$emit("hide",t))},__processModelChange(t){!0===this.disable&&!0===t?void 0!==this.qListeners.input&&this.$emit("input",!1):!0===t!==this.showing&&this["__process"+(!0===t?"Show":"Hide")](this.payload)}}};let mi=[],gi=[];function vi(t){gi=gi.filter(e=>e!==t)}function _i(t){vi(t),gi.push(t)}function yi(t){vi(t),0===gi.length&&mi.length>0&&(mi[mi.length-1](),mi=[])}function bi(t){0===gi.length?t():mi.push(t)}function xi(t){mi=mi.filter(e=>e!==t)}function Si(t,e){do{if("QMenu"===t.$options.name){if(t.hide(e),!0===t.separateClosePopup)return t.$parent}else if(void 0!==t.__renderPortal)return void 0!==t.$parent&&"QPopupProxy"===t.$parent.$options.name?(t.hide(e),t.$parent):t;t=t.$parent}while(void 0!==t&&(void 0===t.$el.contains||!0!==t.$el.contains(e.target)))}function wi(t,e,i){while(0!==i&&void 0!==t){if(void 0!==t.__renderPortal){if(i--,"QMenu"===t.$options.name){t=Si(t,e);continue}t.hide(e)}t=t.$parent}}function Ci(t){while(void 0!==t){if("QGlobalDialog"===t.$options.name)return!0;if("QDialog"===t.$options.name)return!1;t=t.$parent}return!1}const Mi={inheritAttrs:!1,props:{contentClass:[Array,String,Object],contentStyle:[Array,String,Object]},methods:{__showPortal(t){if(!0===t)return yi(this.focusObj),void(this.__portalIsAccessible=!0);if(this.__portalIsAccessible=!1,!0!==this.__portalIsActive)if(this.__portalIsActive=!0,void 0===this.focusObj&&(this.focusObj={}),_i(this.focusObj),void 0!==this.$q.fullscreen&&!0===this.$q.fullscreen.isCapable){const t=()=>{if(void 0===this.__portal)return;const t=He(this.$q.fullscreen.activeEl);this.__portal.$el.parentElement!==t&&t.contains(this.$el)===(!1===this.__onGlobalDialog)&&t.appendChild(this.__portal.$el)};this.unwatchFullscreen=this.$watch("$q.fullscreen.activeEl",z(t,50)),!1!==this.__onGlobalDialog&&!0!==this.$q.fullscreen.isActive||t()}else void 0!==this.__portal&&!1===this.__onGlobalDialog&&document.body.appendChild(this.__portal.$el)},__hidePortal(t){this.__portalIsAccessible=!1,!0===t&&(this.__portalIsActive=!1,yi(this.focusObj),void 0!==this.__portal&&(void 0!==this.unwatchFullscreen&&(this.unwatchFullscreen(),this.unwatchFullscreen=void 0),!1===this.__onGlobalDialog&&(this.__portal.$destroy(),this.__portal.$el.remove()),this.__portal=void 0))},__preparePortal(){void 0===this.__portal&&(this.__portal=!0===this.__onGlobalDialog?{$el:this.$el,$refs:this.$refs}:new a["a"]({name:"QPortal",parent:this,inheritAttrs:!1,render:t=>this.__renderPortal(t),components:this.$options.components,directives:this.$options.directives}).$mount())}},render(t){if(!0===this.__onGlobalDialog)return this.__renderPortal(t);void 0!==this.__portal&&this.__portal.$forceUpdate()},beforeDestroy(){this.__hidePortal(!0)}};!1===l&&(Mi.created=function(){this.__onGlobalDialog=Ci(this.$parent)});var Ti=Mi;function ki(t){for(let e=t;null!==e;e=e.parentNode)if(void 0!==e.__vue__)return e.__vue__}function Ei(t,e){if(null===t||null===e)return null;for(let i=t;void 0!==i;i=i.$parent)if(i===e)return!0;return!1}let Li;const{notPassiveCapture:Ai,passiveCapture:Pi}=w,Ri={click:[],focus:[]};function Oi(t){while(null!==(t=t.nextElementSibling))if(t.classList.contains("q-dialog--modal"))return!0;return!1}function Ii(t,e){for(let i=t.length-1;i>=0;i--)if(void 0===t[i](e))return}function Di(t){clearTimeout(Li),"focusin"===t.type&&(!0===b.is.ie&&t.target===document.body||!0===t.target.hasAttribute("tabindex"))?Li=setTimeout(()=>{Ii(Ri.focus,t)},!0===b.is.ie?500:200):Ii(Ri.click,t)}var Ni={name:"click-outside",bind(t,{value:e,arg:i},n){const s=n.componentInstance||n.context,r={trigger:e,toggleEl:i,handler(e){const i=e.target;if(!0!==e.qClickOutside&&!0===document.body.contains(i)&&8!==i.nodeType&&i!==document.documentElement&&!1===i.classList.contains("no-pointer-events")&&!0!==Oi(t)&&(void 0===r.toggleEl||!1===r.toggleEl.contains(i))&&(i===document.body||!1===Ei(ki(i),s)))return e.qClickOutside=!0,r.trigger(e)}};t.__qclickoutside&&(t.__qclickoutside_old=t.__qclickoutside),t.__qclickoutside=r,0===Ri.click.length&&(document.addEventListener("mousedown",Di,Ai),document.addEventListener("touchstart",Di,Ai),document.addEventListener("focusin",Di,Pi)),Ri.click.push(r.handler),r.timerFocusin=setTimeout(()=>{Ri.focus.push(r.handler)},500)},update(t,{value:e,oldValue:i,arg:n}){const s=t.__qclickoutside;e!==i&&(s.trigger=e),n!==s.arg&&(s.toggleEl=n)},unbind(t){const e=t.__qclickoutside_old||t.__qclickoutside;if(void 0!==e){clearTimeout(e.timerFocusin);const i=Ri.click.findIndex(t=>t===e.handler),n=Ri.focus.findIndex(t=>t===e.handler);i>-1&&Ri.click.splice(i,1),n>-1&&Ri.focus.splice(n,1),0===Ri.click.length&&(clearTimeout(Li),document.removeEventListener("mousedown",Di,Ai),document.removeEventListener("touchstart",Di,Ai),document.removeEventListener("focusin",Di,Pi)),delete t[t.__qclickoutside_old?"__qclickoutside_old":"__qclickoutside"]}}};const zi=!0===l?[]:[null,document,document.body,document.scrollingElement,document.documentElement];let qi;function Bi(){if(!0===l)return!1;if(void 0===qi){const t=document.createElement("div"),e=document.createElement("div");Object.assign(t.style,{direction:"rtl",width:"1px",height:"1px",overflow:"auto"}),Object.assign(e.style,{width:"1000px",height:"1px"}),t.appendChild(e),document.body.appendChild(t),t.scrollLeft=-1e3,qi=t.scrollLeft>=0,t.remove()}return qi}function Fi(t,e){let i=$e(e);if(null===i){if(t!==Object(t)||"function"!==typeof t.closest)return window;i=t.closest(".scroll,.scroll-y,.overflow-auto")}return zi.includes(i)?window:i}function Ui(t){return(t===window?document.body:t).scrollHeight}function $i(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}const Vi=$i;function Hi(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function Gi(t,e,i=0){const n=void 0===arguments[3]?performance.now():arguments[3],s=$i(t);i<=0?s!==e&&ji(t,e):requestAnimationFrame(r=>{const o=r-n,a=s+(e-s)/Math.max(o,i)*o;ji(t,a),a!==e&&Gi(t,e,i-o,r)})}function Wi(t,e,i=0){const n=void 0===arguments[3]?performance.now():arguments[3],s=Hi(t);i<=0?s!==e&&Yi(t,e):requestAnimationFrame(r=>{const o=r-n,a=s+(e-s)/Math.max(o,i)*o;Yi(t,a),a!==e&&Wi(t,e,i-o,r)})}function ji(t,e){t!==window?t.scrollTop=e:window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e)}function Yi(t,e){t!==window?t.scrollLeft=e:window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)}function Xi(t,e,i){i?Gi(t,e,i):ji(t,e)}const Qi=Xi;function Ki(t,e,i){i?Wi(t,e,i):Yi(t,e)}let Zi;function Ji(){if(void 0!==Zi)return Zi;const t=document.createElement("p"),e=document.createElement("div");Ue(t,{width:"100%",height:"200px"}),Ue(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const i=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;return i===n&&(n=e.clientWidth),e.remove(),Zi=i-n,Zi}function tn(t,e=!0){return!(!t||t.nodeType!==Node.ELEMENT_NODE)&&(e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"])))}const en=[];let nn=!1;var sn={__install(){this.__installed=!0,window.addEventListener("keydown",t=>{nn=27===t.keyCode}),window.addEventListener("blur",()=>{!0===nn&&(nn=!1)}),window.addEventListener("keyup",t=>{!0===nn&&(nn=!1,0!==en.length&&!0===ut(t,27)&&en[en.length-1].fn(t))})},register(t,e){!0===t.$q.platform.is.desktop&&(!0!==this.__installed&&this.__install(),en.push({comp:t,fn:e}))},pop(t){if(!0===t.$q.platform.is.desktop){const e=en.findIndex(e=>e.comp===t);e>-1&&en.splice(e,1)}}};let rn,on;function an(t){const e=t.split(" ");return 2===e.length&&(!0!==["top","center","bottom"].includes(e[0])?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):!0===["left","middle","right","start","end"].includes(e[1])||(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1))}function ln(t){return!t||2===t.length&&("number"===typeof t[0]&&"number"===typeof t[1])}const hn={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function cn(t,e){const i=t.split(" ");return{vertical:i[0],horizontal:hn[`${i[1]}#${!0===e?"rtl":"ltr"}`]}}function un(t,e){let{top:i,left:n,right:s,bottom:r,width:o,height:a}=t.getBoundingClientRect();return void 0!==e&&(i-=e[1],n-=e[0],r+=e[1],s+=e[0],o+=e[0],a+=e[1]),{top:i,left:n,right:s,bottom:r,width:o,height:a,middle:n+(s-n)/2,center:i+(r-i)/2}}function dn(t){return{top:0,center:t.offsetHeight/2,bottom:t.offsetHeight,left:0,middle:t.offsetWidth/2,right:t.offsetWidth}}function pn(t){if(!0===b.is.ios&&void 0!==window.visualViewport){const t=document.body.style,{offsetLeft:e,offsetTop:i}=window.visualViewport;e!==rn&&(t.setProperty("--q-pe-left",e+"px"),rn=e),i!==on&&(t.setProperty("--q-pe-top",i+"px"),on=i)}let e;const{scrollLeft:i,scrollTop:n}=t.el;if(void 0===t.absoluteOffset)e=un(t.anchorEl,!0===t.cover?[0,0]:t.offset);else{const{top:i,left:n}=t.anchorEl.getBoundingClientRect(),s=i+t.absoluteOffset.top,r=n+t.absoluteOffset.left;e={top:s,left:r,width:1,height:1,right:r+1,center:s,middle:r,bottom:s+1}}let s={maxHeight:t.maxHeight,maxWidth:t.maxWidth,visibility:"visible"};!0!==t.fit&&!0!==t.cover||(s.minWidth=e.width+"px",!0===t.cover&&(s.minHeight=e.height+"px")),Object.assign(t.el.style,s);const r=dn(t.el),o={top:e[t.anchorOrigin.vertical]-r[t.selfOrigin.vertical],left:e[t.anchorOrigin.horizontal]-r[t.selfOrigin.horizontal]};fn(o,e,r,t.anchorOrigin,t.selfOrigin),s={top:o.top+"px",left:o.left+"px"},void 0!==o.maxHeight&&(s.maxHeight=o.maxHeight+"px",e.height>o.maxHeight&&(s.minHeight=s.maxHeight)),void 0!==o.maxWidth&&(s.maxWidth=o.maxWidth+"px",e.width>o.maxWidth&&(s.minWidth=s.maxWidth)),Object.assign(t.el.style,s),t.el.scrollTop!==n&&(t.el.scrollTop=n),t.el.scrollLeft!==i&&(t.el.scrollLeft=i)}function fn(t,e,i,n,s){const r=i.bottom,o=i.right,a=Ji(),l=window.innerHeight-a,h=document.body.clientWidth;if(t.top<0||t.top+r>l)if("center"===s.vertical)t.top=e[n.vertical]>l/2?Math.max(0,l-r):0,t.maxHeight=Math.min(r,l);else if(e[n.vertical]>l/2){const i=Math.min(l,"center"===n.vertical?e.center:n.vertical===s.vertical?e.bottom:e.top);t.maxHeight=Math.min(r,i),t.top=Math.max(0,i-r)}else t.top=Math.max(0,"center"===n.vertical?e.center:n.vertical===s.vertical?e.top:e.bottom),t.maxHeight=Math.min(r,l-t.top);if(t.left<0||t.left+o>h)if(t.maxWidth=Math.min(o,h),"middle"===s.horizontal)t.left=e[n.horizontal]>h/2?Math.max(0,h-o):0;else if(e[n.horizontal]>h/2){const i=Math.min(h,"middle"===n.horizontal?e.middle:n.horizontal===s.horizontal?e.right:e.left);t.maxWidth=Math.min(o,i),t.left=Math.max(0,i-t.maxWidth)}else t.left=Math.max(0,"middle"===n.horizontal?e.middle:n.horizontal===s.horizontal?e.left:e.right),t.maxWidth=Math.min(o,h-t.left)}["left","middle","right"].forEach(t=>{hn[t+"#ltr"]=t,hn[t+"#rtl"]=t});var mn=a["a"].extend({name:"QMenu",mixins:[Nt,ye,di,pi,fi,Ti,hi],directives:{ClickOutside:Ni},props:{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:an},self:{type:String,validator:an},offset:{type:Array,validator:ln},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},computed:{anchorOrigin(){return cn(this.anchor||(!0===this.cover?"center middle":"bottom start"),this.$q.lang.rtl)},selfOrigin(){return!0===this.cover?this.anchorOrigin:cn(this.self||"top start",this.$q.lang.rtl)},menuClass(){return(!0===this.square?" q-menu--square":"")+(!0===this.isDark?" q-menu--dark q-dark":"")},hideOnRouteChange(){return!0!==this.persistent&&!0!==this.noRouteDismiss},onEvents(){const t={...this.qListeners,input:L,"popup-show":L,"popup-hide":L};return!0===this.autoClose&&(t.click=this.__onAutoClose),t},attrs(){return{tabindex:-1,role:"menu",...this.qAttrs}}},methods:{focus(){bi(()=>{let t=void 0!==this.__portal&&void 0!==this.__portal.$refs?this.__portal.$refs.inner:void 0;void 0!==t&&!0!==t.contains(document.activeElement)&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})},__show(t){if(this.__refocusTarget=!0!==b.is.mobile&&!1===this.noRefocus&&null!==document.activeElement?document.activeElement:void 0,sn.register(this,()=>{!0!==this.persistent&&(this.$emit("escape-key"),this.hide())}),this.__showPortal(),this.__configureScrollTarget(),this.absoluteOffset=void 0,void 0!==t&&(this.touchPosition||this.contextMenu)){const e=k(t);if(void 0!==e.left){const{top:t,left:i}=this.anchorEl.getBoundingClientRect();this.absoluteOffset={left:e.left-i,top:e.top-t}}}void 0===this.unwatch&&(this.unwatch=this.$watch(()=>this.$q.screen.width+"|"+this.$q.screen.height+"|"+this.self+"|"+this.anchor+"|"+this.$q.lang.rtl,this.updatePosition)),this.$el.dispatchEvent(I("popup-show",{bubbles:!0})),!0!==this.noFocus&&null!==document.activeElement&&document.activeElement.blur(),this.__registerTick(()=>{this.updatePosition(),!0!==this.noFocus&&this.focus()}),this.__registerTimeout(()=>{!0===this.$q.platform.is.ios&&(this.__avoidAutoClose=this.autoClose,this.__portal.$el.click()),this.updatePosition(),this.__showPortal(!0),this.$emit("show",t)},300)},__hide(t){this.__removeTick(),this.__anchorCleanup(!0),this.__hidePortal(),void 0===this.__refocusTarget||null===this.__refocusTarget||void 0!==t&&!0===t.qClickOutside||(this.__refocusTarget.focus(),this.__refocusTarget=void 0),this.$el.dispatchEvent(I("popup-hide",{bubbles:!0})),this.__registerTimeout(()=>{this.__hidePortal(!0),this.$emit("hide",t)},300)},__anchorCleanup(t){this.absoluteOffset=void 0,void 0!==this.unwatch&&(this.unwatch(),this.unwatch=void 0),!0!==t&&!0!==this.showing||(sn.pop(this),this.__unconfigureScrollTarget())},__unconfigureScrollTarget(){void 0!==this.__scrollTarget&&(this.__changeScrollEvent(this.__scrollTarget),this.__scrollTarget=void 0)},__configureScrollTarget(){void 0===this.anchorEl&&void 0===this.scrollTarget||(this.__scrollTarget=Fi(this.anchorEl,this.scrollTarget),this.__changeScrollEvent(this.__scrollTarget,this.updatePosition))},__onAutoClose(t){!0!==this.__avoidAutoClose?(Si(this,t),void 0!==this.qListeners.click&&this.$emit("click",t)):this.__avoidAutoClose=!1},updatePosition(){if(void 0===this.anchorEl||void 0===this.__portal)return;const t=this.__portal.$el;8!==t.nodeType?pn({el:t,offset:this.offset,anchorEl:this.anchorEl,anchorOrigin:this.anchorOrigin,selfOrigin:this.selfOrigin,absoluteOffset:this.absoluteOffset,fit:this.fit,cover:this.cover,maxHeight:this.maxHeight,maxWidth:this.maxWidth}):setTimeout(this.updatePosition,25)},__onClickOutside(t){if(!0!==this.persistent&&!0===this.showing){const e=t.target.classList;return Si(this,t),("touchstart"===t.type||e.contains("q-dialog__backdrop"))&&R(t),!0}},__renderPortal(t){return t("transition",{props:{...this.transitionProps}},[!0===this.showing?t("div",{ref:"inner",staticClass:"q-menu q-position-engine scroll"+this.menuClass,class:this.contentClass,style:this.contentStyle,attrs:this.attrs,on:this.onEvents,directives:[{name:"click-outside",value:this.__onClickOutside,arg:this.anchorEl}]},Zt(this,"default")):null])}},created(){this.__useTick("__registerTick","__removeTick"),this.__useTimeout("__registerTimeout")},mounted(){this.__processModelChange(this.value)},beforeDestroy(){this.__refocusTarget=void 0,!0===this.showing&&void 0!==this.anchorEl&&this.anchorEl.dispatchEvent(I("popup-hide",{bubbles:!0}))}});let gn,vn=0;const _n=new Array(256);for(let cd=0;cd<256;cd++)_n[cd]=(cd+256).toString(16).substr(1);const yn=(()=>{const t="undefined"!==typeof crypto?crypto:"undefined"!==typeof window?window.msCrypto:void 0;if(void 0!==t){if(void 0!==t.randomBytes)return t.randomBytes;if(void 0!==t.getRandomValues)return e=>{var i=new Uint8Array(e);return t.getRandomValues(i),i}}return t=>{const e=[];for(let i=t;i>0;i--)e.push(Math.floor(256*Math.random()));return e}})(),bn=4096;var xn=function(){(void 0===gn||vn+16>bn)&&(vn=0,gn=yn(bn));const t=Array.prototype.slice.call(gn,vn,vn+=16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,_n[t[0]]+_n[t[1]]+_n[t[2]]+_n[t[3]]+"-"+_n[t[4]]+_n[t[5]]+"-"+_n[t[6]]+_n[t[7]]+"-"+_n[t[8]]+_n[t[9]]+"-"+_n[t[10]]+_n[t[11]]+_n[t[12]]+_n[t[13]]+_n[t[14]]+_n[t[15]]};const Sn=Object.keys(hi.props).reduce((t,e)=>(t[e]={})&&t,{});var wn=a["a"].extend({name:"QBtnDropdown",mixins:[ii,Nt],inheritAttrs:!1,props:{value:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,...Sn,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},data(){return{showing:this.value}},watch:{value(t){void 0!==this.$refs.menu&&this.$refs.menu[t?"show":"hide"]()},split(){this.hide()}},render(t){const e=Zt(this,"label",[]),i={"aria-expanded":!0===this.showing?"true":"false","aria-haspopup":"true","aria-controls":this.targetUid,"aria-owns":this.targetUid,"aria-label":this.toggleAriaLabel||this.$q.lang.label[!0===this.showing?"collapse":"expand"](this.label)};(!0===this.disable||!1===this.split&&!0===this.disableMainBtn||!0===this.disableDropdown)&&(i["aria-disabled"]="true");const n=[t(ge,{props:{name:this.dropdownIcon||this.$q.iconSet.arrow.dropdown},class:"q-btn-dropdown__arrow"+(!0===this.showing&&!1===this.noIconAnimation?" rotate-180":"")+(!1===this.split?" q-btn-dropdown__arrow-container":"")})];if(!0!==this.disableDropdown&&n.push(t(mn,{ref:"menu",attrs:{id:this.targetUid},props:{cover:this.cover,fit:!0,persistent:this.persistent,noRouteDismiss:this.noRouteDismiss,autoClose:this.autoClose,anchor:this.menuAnchor,self:this.menuSelf,offset:this.menuOffset,contentClass:this.contentClass,contentStyle:this.contentStyle,separateClosePopup:!0,transitionShow:this.transitionShow,transitionHide:this.transitionHide},on:Pt(this,"menu",{"before-show":t=>{this.showing=!0,this.$emit("before-show",t)},show:t=>{this.$emit("show",t),this.$emit("input",!0)},"before-hide":t=>{this.showing=!1,this.$emit("before-hide",t)},hide:t=>{this.$emit("hide",t),this.$emit("input",!1)}})},Zt(this,"default"))),!1===this.split)return t(li,{class:"q-btn-dropdown q-btn-dropdown--simple",props:{...this.$props,disable:!0===this.disable||!0===this.disableMainBtn,noWrap:!0,round:!1},attrs:{...i,...this.qAttrs},on:Pt(this,"nonSpl",{click:t=>{this.$emit("click",t)}}),scopedSlots:{loading:this.$scopedSlots.loading}},e.concat(n));const s=t(li,{class:"q-btn-dropdown--current",props:{...this.$props,disable:!0===this.disable||!0===this.disableMainBtn,noWrap:!0,iconRight:this.iconRight,round:!1},attrs:this.qAttrs,on:Pt(this,"spl",{click:t=>{L(t),this.hide(),this.$emit("click",t)}}),scopedSlots:{loading:this.$scopedSlots.loading}},e);return t(ci,{props:{outline:this.outline,flat:this.flat,rounded:this.rounded,square:this.square,push:this.push,unelevated:this.unelevated,glossy:this.glossy,stretch:this.stretch},staticClass:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item"},[s,t(li,{staticClass:"q-btn-dropdown__arrow-container q-anchor--skip",attrs:i,props:{disable:!0===this.disable||!0===this.disableDropdown,outline:this.outline,flat:this.flat,rounded:this.rounded,push:this.push,size:this.size,color:this.color,textColor:this.textColor,dense:this.dense,ripple:this.ripple}},n)])},methods:{toggle(t){this.$refs.menu&&this.$refs.menu.toggle(t)},show(t){this.$refs.menu&&this.$refs.menu.show(t)},hide(t){this.$refs.menu&&this.$refs.menu.hide(t)}},created(){this.targetUid="d_"+xn()},mounted(){!0===this.value&&this.show()}}),Cn={props:{name:String},computed:{formAttrs(){return{type:"hidden",name:this.name,value:this.value}}},methods:{__injectFormInput(t,e,i){t[e](this.$createElement("input",{staticClass:"hidden",class:i,attrs:this.formAttrs,domProps:this.formDomProps}))}}};const Mn={props:{name:String},computed:{nameProp(){return this.name||this.for}}};var Tn=a["a"].extend({name:"QBtnToggle",mixins:[Kt,Qe,Cn],props:{value:{required:!0},options:{type:Array,required:!0,validator:t=>t.every(t=>("label"in t||"icon"in t||"slot"in t)&&"value"in t)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean},computed:{hasActiveValue(){return void 0!==this.options.find(t=>t.value===this.value)},formAttrs(){return{type:"hidden",name:this.name,value:this.value}},btnOptions(){const t=(t,e)=>void 0===t[e]?this[e]:t[e];return this.options.map((e,i)=>({slot:e.slot,options:{key:i,class:e.class,style:e.style,on:{...this.qListeners,click:t=>this.__set(e.value,e,t)},attrs:{"aria-pressed":e.value===this.value?"true":"false",...e.attrs},props:{...e,slot:void 0,class:void 0,style:void 0,value:void 0,attrs:void 0,outline:this.outline,flat:this.flat,rounded:this.rounded,push:this.push,unelevated:this.unelevated,dense:this.dense,disable:!0===this.disable||!0===e.disable,color:e.value===this.value?t(e,"toggleColor"):t(e,"color"),textColor:e.value===this.value?t(e,"toggleTextColor"):t(e,"textColor"),noCaps:!0===t(e,"noCaps"),noWrap:!0===t(e,"noWrap"),size:t(e,"size"),padding:t(e,"padding"),ripple:t(e,"ripple"),stack:!0===t(e,"stack"),stretch:!0===t(e,"stretch")}}}))}},methods:{__set(t,e,i){!0!==this.readonly&&(this.value===t?!0===this.clearable&&(this.$emit("input",null,null),this.$emit("clear")):this.$emit("input",t,e),this.$emit("click",i))}},render(t){const e=this.btnOptions.map(e=>t(li,{...e.options},void 0!==e.slot?Zt(this,e.slot):void 0));return void 0!==this.name&&!0!==this.disable&&!0===this.hasActiveValue&&this.__injectFormInput(e,"push"),t(ci,{staticClass:"q-btn-toggle",props:{outline:this.outline,flat:this.flat,rounded:this.rounded,push:this.push,stretch:this.stretch,unelevated:this.unelevated,glossy:this.glossy,spread:this.spread}},te(e,this,"default"))}}),kn=a["a"].extend({name:"QCard",mixins:[Kt,ye,Qt],props:{square:Boolean,flat:Boolean,bordered:Boolean},computed:{classes(){return"q-card"+(!0===this.isDark?" q-card--dark q-dark":"")+(!0===this.bordered?" q-card--bordered":"")+(!0===this.square?" q-card--square no-border-radius":"")+(!0===this.flat?" q-card--flat no-shadow":"")}},render(t){return t(this.tag,{class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}}),En=a["a"].extend({name:"QCardSection",mixins:[Kt,Qt],props:{horizontal:Boolean},computed:{classes(){return"q-card__section q-card__section--"+(!0===this.horizontal?"horiz row no-wrap":"vert")}},render(t){return t(this.tag,{class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}}),Ln=a["a"].extend({name:"QCardActions",mixins:[Kt,Te],props:{vertical:Boolean},computed:{classes(){return`q-card__actions--${!0===this.vertical?"vert column":"horiz row"} ${this.alignClass}`}},render(t){return t("div",{staticClass:"q-card__actions",class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}});const An=["left","right","up","down","horizontal","vertical"],Pn={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0,all:!0};function Rn(t){const e={};return An.forEach(i=>{t[i]&&(e[i]=!0)}),0===Object.keys(e).length?Pn:(!0===e.horizontal&&(e.left=e.right=!0),!0===e.vertical&&(e.up=e.down=!0),!0===e.left&&!0===e.right&&(e.horizontal=!0),!0===e.up&&!0===e.down&&(e.vertical=!0),!0===e.horizontal&&!0===e.vertical&&(e.all=!0),e)}function On(t,e){return void 0===e.event&&void 0!==t.target&&!0!==t.target.draggable&&"function"===typeof e.handler&&"INPUT"!==t.target.nodeName.toUpperCase()&&(void 0===t.qClonedBy||-1===t.qClonedBy.indexOf(e.uid))}function In(t){const e=[.06,6,50];return"string"===typeof t&&t.length&&t.split(":").forEach((t,i)=>{const n=parseFloat(t);n&&(e[i]=n)}),e}function Dn(t){const e=t.__qtouchswipe;void 0!==e&&(N(e,"main"),N(e,"temp"),!0===b.is.firefox&&O(t,!1),void 0!==e.styleCleanup&&e.styleCleanup(),delete t.__qtouchswipe)}var Nn={name:"touch-swipe",bind(t,{value:e,arg:i,modifiers:n}){if(void 0!==t.__qtouchswipe&&(Dn(t),t.__qtouchswipe_destroyed=!0),!0!==n.mouse&&!0!==b.has.touch)return;const s=!0===n.mouseCapture||!0===n.mousecapture?"Capture":"",r={handler:e,sensitivity:In(i),modifiers:n,direction:Rn(n),noop:M,mouseStart(t){On(t,r)&&T(t)&&(D(r,"temp",[[document,"mousemove","move","notPassive"+s],[document,"mouseup","end","notPassiveCapture"]]),r.start(t,!0))},touchStart(t){if(On(t,r)){const e=t.target;D(r,"temp",[[e,"touchmove","move","notPassiveCapture"],[e,"touchcancel","end","notPassiveCapture"],[e,"touchend","end","notPassiveCapture"]]),r.start(t)}},start(e,i){!0===b.is.firefox&&O(t,!0);const n=k(e);r.event={x:n.left,y:n.top,time:Date.now(),mouse:!0===i,dir:!1}},move(t){if(void 0===r.event)return;if(!1!==r.event.dir)return void P(t);const e=Date.now()-r.event.time;if(0===e)return;const i=k(t),n=i.left-r.event.x,s=Math.abs(n),o=i.top-r.event.y,a=Math.abs(o);if(!0!==r.event.mouse){if(s<r.sensitivity[1]&&a<r.sensitivity[1])return void r.end(t)}else if(s<r.sensitivity[2]&&a<r.sensitivity[2])return;const l=s/e,h=a/e;!0===r.direction.vertical&&s<a&&s<100&&h>r.sensitivity[0]&&(r.event.dir=o<0?"up":"down"),!0===r.direction.horizontal&&s>a&&a<100&&l>r.sensitivity[0]&&(r.event.dir=n<0?"left":"right"),!0===r.direction.up&&s<a&&o<0&&s<100&&h>r.sensitivity[0]&&(r.event.dir="up"),!0===r.direction.down&&s<a&&o>0&&s<100&&h>r.sensitivity[0]&&(r.event.dir="down"),!0===r.direction.left&&s>a&&n<0&&a<100&&l>r.sensitivity[0]&&(r.event.dir="left"),!0===r.direction.right&&s>a&&n>0&&a<100&&l>r.sensitivity[0]&&(r.event.dir="right"),!1!==r.event.dir?(P(t),!0===r.event.mouse&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ui(),r.styleCleanup=t=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const e=()=>{document.body.classList.remove("no-pointer-events--children")};!0===t?setTimeout(e,50):e()}),r.handler({evt:t,touch:!0!==r.event.mouse,mouse:r.event.mouse,direction:r.event.dir,duration:e,distance:{x:s,y:a}})):r.end(t)},end(e){void 0!==r.event&&(N(r,"temp"),!0===b.is.firefox&&O(t,!1),void 0!==r.styleCleanup&&r.styleCleanup(!0),void 0!==e&&!1!==r.event.dir&&P(e),r.event=void 0)}};t.__qtouchswipe=r,!0===n.mouse&&D(r,"main",[[t,"mousedown","mouseStart","passive"+s]]),!0===b.has.touch&&D(r,"main",[[t,"touchstart","touchStart","passive"+(!0===n.capture?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},update(t,{oldValue:e,value:i}){const n=t.__qtouchswipe;void 0!==n&&e!==i&&("function"!==typeof i&&n.end(),n.handler=i)},unbind(t){void 0===t.__qtouchswipe_destroyed?Dn(t):delete t.__qtouchswipe_destroyed}};function zn(t){return t("div",{staticClass:"q-panel scroll",attrs:{role:"tabpanel"},on:Pt(this,"stop",{input:L})},Zt(this,"default"))}const qn=a["a"].extend({render:zn}),Bn={mixins:[Kt],directives:{TouchSwipe:Nn},props:{value:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},data(){return{panelIndex:null,panelTransition:null}},computed:{panelDirectives(){if(!0===this.swipeable)return[{name:"touch-swipe",value:this.__swipe,modifiers:{horizontal:!0!==this.vertical,vertical:this.vertical,mouse:!0}}]},contentKey(){return"string"===typeof this.value||"number"===typeof this.value?this.value:String(this.value)},transitionPrevComputed(){return this.transitionPrev||"slide-"+(!0===this.vertical?"down":"right")},transitionNextComputed(){return this.transitionNext||"slide-"+(!0===this.vertical?"up":"left")},keepAliveProps(){return{include:this.keepAliveInclude,exclude:this.keepAliveExclude,max:this.keepAliveMax}},needsUniqueWrapper(){return void 0!==this.keepAliveInclude||void 0!==this.keepAliveExclude}},watch:{value(t,e){const i=!0===this.__isValidPanelName(t)?this.__getPanelIndex(t):-1;!0!==this.__forcedPanelTransition&&this.__updatePanelTransition(-1===i?0:i<this.__getPanelIndex(e)?-1:1),this.panelIndex!==i&&(this.panelIndex=i,this.$emit("before-transition",t,e),this.$nextTick(()=>{this.$emit("transition",t,e)}))}},methods:{next(){this.__go(1)},previous(){this.__go(-1)},goTo(t){this.$emit("input",t)},__isValidPanelName(t){return void 0!==t&&null!==t&&""!==t},__getPanelIndex(t){return this.panels.findIndex(e=>{const i=e.componentOptions.propsData;return i.name===t&&""!==i.disable&&!0!==i.disable})},__getEnabledPanels(){return this.panels.filter(t=>{const e=t.componentOptions.propsData;return""!==e.disable&&!0!==e.disable})},__updatePanelTransition(t){const e=0!==t&&!0===this.animated&&-1!==this.panelIndex?"q-transition--"+(-1===t?this.transitionPrevComputed:this.transitionNextComputed):null;this.panelTransition!==e&&(this.panelTransition=e)},__go(t,e=this.panelIndex){let i=e+t;const n=this.panels;while(i>-1&&i<n.length){const e=n[i].componentOptions;if(void 0!==e&&""!==e.propsData.disable&&!0!==e.propsData.disable)return this.__updatePanelTransition(t),this.__forcedPanelTransition=!0,this.$emit("input",n[i].componentOptions.propsData.name),void setTimeout(()=>{this.__forcedPanelTransition=!1});i+=t}!0===this.infinite&&n.length>0&&-1!==e&&e!==n.length&&this.__go(t,-1===t?n.length:-1)},__swipe(t){const e=!0===this.vertical?"up":"left";this.__go((!0===this.$q.lang.rtl?-1:1)*(t.direction===e?1:-1))},__updatePanelIndex(){const t=this.__getPanelIndex(this.value);return this.panelIndex!==t&&(this.panelIndex=t),!0},__getPanelContent(t){if(0===this.panels.length)return;const e=this.__isValidPanelName(this.value)&&this.__updatePanelIndex()&&this.panels[this.panelIndex],i=!0===this.keepAlive?[t("keep-alive",{props:this.keepAliveProps},[t(!0===this.needsUniqueWrapper?Rt(this,this.contentKey,()=>a["a"].extend({name:this.contentKey,render:zn})):qn,{key:this.contentKey},[e])])]:[t("div",{staticClass:"q-panel scroll",key:this.contentKey,attrs:{role:"tabpanel"},on:Pt(this,"stop",{input:L})},[e])];return!0===this.animated?[t("transition",{props:{name:this.panelTransition}},i)]:i}},render(t){return this.panels=Zt(this,"default",[]).filter(t=>void 0!==t&&void 0!==t.componentOptions&&void 0!==t.componentOptions.propsData&&this.__isValidPanelName(t.componentOptions.propsData.name)),this.__renderPanels(t)}},Fn={mixins:[Kt],props:{name:{required:!0},disable:Boolean}};let Un=0;var $n={props:{fullscreen:Boolean,noRouteFullscreenExit:Boolean},data(){return{inFullscreen:!1}},watch:{$route(){!0!==this.noRouteFullscreenExit&&this.exitFullscreen()},fullscreen(t){this.inFullscreen!==t&&this.toggleFullscreen()},inFullscreen(t){this.$emit("update:fullscreen",t),this.$emit("fullscreen",t)}},methods:{toggleFullscreen(){!0===this.inFullscreen?this.exitFullscreen():this.setFullscreen()},setFullscreen(){!0!==this.inFullscreen&&(this.inFullscreen=!0,this.container=this.$el.parentNode,this.container.replaceChild(this.fullscreenFillerNode,this.$el),document.body.appendChild(this.$el),Un++,1===Un&&document.body.classList.add("q-body--fullscreen-mixin"),this.__historyFullscreen={handler:this.exitFullscreen},j.add(this.__historyFullscreen))},exitFullscreen(){!0===this.inFullscreen&&(void 0!==this.__historyFullscreen&&(j.remove(this.__historyFullscreen),this.__historyFullscreen=void 0),this.container.replaceChild(this.$el,this.fullscreenFillerNode),this.inFullscreen=!1,Un=Math.max(0,Un-1),0===Un&&(document.body.classList.remove("q-body--fullscreen-mixin"),void 0!==this.$el.scrollIntoView&&setTimeout(()=>{this.$el.scrollIntoView()})))}},beforeMount(){this.fullscreenFillerNode=document.createElement("span")},mounted(){!0===this.fullscreen&&this.setFullscreen()},beforeDestroy(){this.exitFullscreen()}};const Vn="function"===typeof Map,Hn="function"===typeof Set,Gn="function"===typeof ArrayBuffer;function Wn(t,e){if(t===e)return!0;if(null!==t&&null!==e&&"object"===typeof t&&"object"===typeof e){if(t.constructor!==e.constructor)return!1;let i,n;if(t.constructor===Array){if(i=t.length,i!==e.length)return!1;for(n=i;0!==n--;)if(!0!==Wn(t[n],e[n]))return!1;return!0}if(!0===Vn&&t.constructor===Map){if(t.size!==e.size)return!1;n=t.entries().next();while(!0!==n.done){if(!0!==e.has(n.value[0]))return!1;n=n.next()}n=t.entries().next();while(!0!==n.done){if(!0!==Wn(n.value[1],e.get(n.value[0])))return!1;n=n.next()}return!0}if(!0===Hn&&t.constructor===Set){if(t.size!==e.size)return!1;n=t.entries().next();while(!0!==n.done){if(!0!==e.has(n.value[0]))return!1;n=n.next()}return!0}if(!0===Gn&&null!=t.buffer&&t.buffer.constructor===ArrayBuffer){if(i=t.length,i!==e.length)return!1;for(n=i;0!==n--;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t).filter(e=>void 0!==t[e]);if(i=s.length,i!==Object.keys(e).filter(t=>void 0!==e[t]).length)return!1;for(n=i;0!==n--;){const i=s[n];if(!0!==Wn(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function jn(t){return null!==t&&"object"===typeof t&&!0!==Array.isArray(t)}function Yn(t){return"[object Date]"===Object.prototype.toString.call(t)}function Xn(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function Qn(t){return"number"===typeof t&&isFinite(t)}var Kn=a["a"].extend({name:"QCarousel",mixins:[ye,Bn,$n],props:{height:String,padding:Boolean,controlType:{type:String,validator:t=>["regular","flat","outline","push","unelevated"].includes(t),default:"flat"},controlColor:String,controlTextColor:String,autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:t=>["top","right","bottom","left"].includes(t)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},computed:{style(){if(!0!==this.inFullscreen&&void 0!==this.height)return{height:this.height}},direction(){return!0===this.vertical?"vertical":"horizontal"},classes(){return`q-carousel q-panel-parent q-carousel--with${!0===this.padding?"":"out"}-padding`+(!0===this.inFullscreen?" fullscreen":"")+(!0===this.isDark?" q-carousel--dark q-dark":"")+(!0===this.arrows?" q-carousel--arrows-"+this.direction:"")+(!0===this.navigation?" q-carousel--navigation-"+this.navigationPositionComputed:"")},arrowIcons(){const t=[this.prevIcon||this.$q.iconSet.carousel[!0===this.vertical?"up":"left"],this.nextIcon||this.$q.iconSet.carousel[!0===this.vertical?"down":"right"]];return!1===this.vertical&&!0===this.$q.lang.rtl?t.reverse():t},navIcon(){return this.navigationIcon||this.$q.iconSet.carousel.navigationIcon},navActiveIcon(){return this.navigationActiveIcon||this.navIcon},navigationPositionComputed(){return this.navigationPosition||(!0===this.vertical?"right":"bottom")},controlProps(){return{color:this.controlColor,textColor:this.controlTextColor,round:!0,[this.controlType]:!0,dense:!0}},transitionPrevComputed(){return this.transitionPrev||"fade"},transitionNextComputed(){return this.transitionNext||"fade"}},watch:{value(){this.autoplay&&(clearInterval(this.timer),this.__startTimer())},autoplay(t){t?this.__startTimer():clearInterval(this.timer)}},methods:{__startTimer(){const t=!0===Qn(this.autoplay)?this.autoplay:5e3;this.timer=setTimeout(t>=0?this.next:this.previous,Math.abs(t))},__getNavigationContainer(t,e,i){return t("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${e} q-carousel__navigation--${this.navigationPositionComputed}`+(void 0!==this.controlColor?" text-"+this.controlColor:"")},[t("div",{staticClass:"q-carousel__navigation-inner flex flex-center no-wrap"},this.__getEnabledPanels().map(i))])},__getContent(t){const e=[];if(!0===this.navigation){const i=void 0!==this.$scopedSlots["navigation-icon"]?this.$scopedSlots["navigation-icon"]:e=>t(li,{key:"nav"+e.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${!0===e.active?"":"in"}active`,props:e.btnProps,on:Pt(this,"nav#"+e.name,{click:e.onClick})}),n=this.panels.length-1;e.push(this.__getNavigationContainer(t,"buttons",(t,e)=>{const s=t.componentOptions.propsData.name,r=this.panelIndex===e;return i({index:e,maxIndex:n,name:s,active:r,btnProps:{icon:!0===r?this.navActiveIcon:this.navIcon,size:"sm",...this.controlProps},onClick:()=>{this.goTo(s)}})}))}else if(!0===this.thumbnails){const i=void 0!==this.controlColor?" text-"+this.controlColor:"";e.push(this.__getNavigationContainer(t,"thumbnails",e=>{const n=e.componentOptions.propsData;return t("img",{class:`q-carousel__thumbnail q-carousel__thumbnail--${n.name===this.value?"":"in"}active`+i,attrs:{src:n.imgSrc},key:"tmb#"+n.name,on:Pt(this,"tmb#"+n.name,{click:()=>{this.goTo(n.name)}})})}))}return!0===this.arrows&&this.panelIndex>=0&&((!0===this.infinite||this.panelIndex>0)&&e.push(t("div",{key:"prev",staticClass:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${this.direction} absolute flex flex-center`},[t(li,{props:{icon:this.arrowIcons[0],...this.controlProps},on:Pt(this,"prev",{click:this.previous})})])),(!0===this.infinite||this.panelIndex<this.panels.length-1)&&e.push(t("div",{key:"next",staticClass:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${this.direction} absolute flex flex-center`},[t(li,{props:{icon:this.arrowIcons[1],...this.controlProps},on:Pt(this,"next",{click:this.next})})]))),te(e,this,"control")},__renderPanels(t){return t("div",{style:this.style,class:this.classes,on:{...this.qListeners}},[t("div",{staticClass:"q-carousel__slides-container",directives:this.panelDirectives},this.__getPanelContent(t))].concat(this.__getContent(t)))}},mounted(){this.autoplay&&this.__startTimer()},beforeDestroy(){clearInterval(this.timer)}}),Zn=a["a"].extend({name:"QCarouselSlide",mixins:[Fn],props:{imgSrc:String},computed:{style(){if(this.imgSrc)return{backgroundImage:`url("${this.imgSrc}")`}}},render(t){return t("div",{staticClass:"q-carousel__slide",style:this.style,on:{...this.qListeners}},Zt(this,"default"))}}),Jn=a["a"].extend({name:"QCarouselControl",mixins:[Kt],props:{position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,default:()=>[18,18],validator:t=>2===t.length}},computed:{classes(){return"absolute-"+this.position},style(){return{margin:`${this.offset[1]}px ${this.offset[0]}px`}}},render(t){return t("div",{staticClass:"q-carousel__control absolute",style:this.style,class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}}),ts=a["a"].extend({name:"QChatMessage",mixins:[Kt],props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelSanitize:Boolean,nameSanitize:Boolean,textSanitize:Boolean,stampSanitize:Boolean},computed:{textClass(){return"q-message-text-content q-message-text-content--"+this.op+(void 0!==this.textColor?" text-"+this.textColor:"")},messageClass(){return"q-message-text q-message-text--"+this.op+(void 0!==this.bgColor?" text-"+this.bgColor:"")},containerClass(){return"q-message-container row items-end no-wrap"+(!0===this.sent?" reverse":"")},sizeClass(){if(void 0!==this.size)return"col-"+this.size},op(){return!0===this.sent?"sent":"received"}},methods:{__wrapStamp(t,e){if(void 0!==this.$scopedSlots.stamp)return[e,t("div",{staticClass:"q-message-stamp"},this.$scopedSlots.stamp())];if(this.stamp){const i=!0===this.stampSanitize?"textContent":"innerHTML";return[e,t("div",{staticClass:"q-message-stamp",domProps:{[i]:this.stamp}})]}return[e]},__getText(t,e,i){const n=!0===this.textSanitize?"textContent":"innerHTML";if(!0===i&&!0===e.some(t=>void 0===t.tag&&void 0!==t.text))return[t("div",{class:this.messageClass},[t("div",{class:this.textClass},this.__wrapStamp(t,t("div",e)))])];const s=!0!==i?e=>t("div",{domProps:{[n]:e}}):e.length>1?t=>t:e=>t("div",[e]);return e.map((e,i)=>t("div",{key:i,class:this.messageClass},[t("div",{class:this.textClass},this.__wrapStamp(t,s(e)))]))}},render(t){const e=[];void 0!==this.$scopedSlots.avatar?e.push(this.$scopedSlots.avatar()):void 0!==this.avatar&&e.push(t("img",{class:"q-message-avatar q-message-avatar--"+this.op,attrs:{src:this.avatar,"aria-hidden":"true"}}));const i=[];void 0!==this.$scopedSlots.name?i.push(t("div",{class:"q-message-name q-message-name--"+this.op},this.$scopedSlots.name())):void 0!==this.name&&i.push(t("div",{class:"q-message-name q-message-name--"+this.op,domProps:{[!0===this.nameSanitize?"textContent":"innerHTML"]:this.name}})),void 0!==this.text&&i.push(this.__getText(t,this.text)),void 0!==this.$scopedSlots.default&&i.push(this.__getText(t,this.$scopedSlots.default(),!0)),e.push(t("div",{class:this.sizeClass},i));const n=[];return void 0!==this.$scopedSlots.label?n.push(t("div",{staticClass:"q-message-label"},this.$scopedSlots.label())):void 0!==this.label&&n.push(t("div",{staticClass:"q-message-label",domProps:{[!0===this.labelSanitize?"textContent":"innerHTML"]:this.label}})),n.push(t("div",{class:this.containerClass},e)),t("div",{class:"q-message q-message-"+this.op,on:{...this.qListeners}},n)}}),es=Yt({xs:30,sm:35,md:40,lg:50,xl:60}),is={computed:{__refocusTargetEl(){if(!0!==this.disable)return this.$createElement("span",{ref:"refocusTarget",staticClass:"no-outline",attrs:{tabindex:-1}})}},methods:{__refocusTarget(t){void 0!==t&&0===t.type.indexOf("key")?document.activeElement!==this.$el&&!0===this.$el.contains(document.activeElement)&&this.$el.focus():void 0!==t&&!0!==this.$el.contains(t.target)||void 0===this.$refs.refocusTarget||this.$refs.refocusTarget.focus()}}},ns={mixins:[ye,es,Cn,is],props:{value:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>"tf"===t||"ft"===t},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},computed:{isTrue(){return!0===this.modelIsArray?this.index>-1:this.value===this.trueValue},isFalse(){return!0===this.modelIsArray?-1===this.index:this.value===this.falseValue},isIndeterminate(){return!1===this.isTrue&&!1===this.isFalse},index(){if(!0===this.modelIsArray)return this.value.indexOf(this.val)},modelIsArray(){return void 0!==this.val&&Array.isArray(this.value)},computedTabindex(){return!0===this.disable?-1:this.tabindex||0},classes(){return`q-${this.type} cursor-pointer no-outline row inline no-wrap items-center`+(!0===this.disable?" disabled":"")+(!0===this.isDark?` q-${this.type}--dark`:"")+(!0===this.dense?` q-${this.type}--dense`:"")+(!0===this.leftLabel?" reverse":"")},innerClass(){const t=!0===this.isTrue?"truthy":!0===this.isFalse?"falsy":"indet",e=void 0===this.color||!0!==this.keepColor&&("toggle"===this.type?!0!==this.isTrue:!0===this.isFalse)?"":" text-"+this.color;return`q-${this.type}__inner--${t}${e}`},formAttrs(){const t={type:"checkbox"};return void 0!==this.name&&Object.assign(t,{checked:this.isTrue,name:this.name,value:!0===this.modelIsArray?this.val:this.trueValue}),t},attrs(){const t={tabindex:this.computedTabindex,role:"toggle"===this.type?"switch":"checkbox","aria-label":this.label,"aria-checked":!0===this.isIndeterminate?"mixed":!0===this.isTrue?"true":"false"};return!0===this.disable&&(t["aria-disabled"]="true"),t}},methods:{toggle(t){void 0!==t&&(P(t),this.__refocusTarget(t)),!0!==this.disable&&this.$emit("input",this.__getNextValue(),t)},__getNextValue(){if(!0===this.modelIsArray){if(!0===this.isTrue){const t=this.value.slice();return t.splice(this.index,1),t}return this.value.concat([this.val])}if(!0===this.isTrue){if("ft"!==this.toggleOrder||!1===this.toggleIndeterminate)return this.falseValue}else{if(!0!==this.isFalse)return"ft"!==this.toggleOrder?this.trueValue:this.falseValue;if("ft"===this.toggleOrder||!1===this.toggleIndeterminate)return this.trueValue}return this.indeterminateValue},__onKeydown(t){13!==t.keyCode&&32!==t.keyCode||P(t)},__onKeyup(t){13!==t.keyCode&&32!==t.keyCode||this.toggle(t)}},render(t){const e=this.__getInner(t);!0!==this.disable&&this.__injectFormInput(e,"unshift",`q-${this.type}__native absolute q-ma-none q-pa-none`);const i=[t("div",{staticClass:`q-${this.type}__inner relative-position non-selectable`,class:this.innerClass,style:this.sizeStyle,attrs:{"aria-hidden":"true"}},e)];void 0!==this.__refocusTargetEl&&i.push(this.__refocusTargetEl);const n=void 0!==this.label?te([this.label],this,"default"):Zt(this,"default");return void 0!==n&&i.push(t("div",{staticClass:`q-${this.type}__label q-anchor--skip`},n)),t("div",{class:this.classes,attrs:this.attrs,on:Pt(this,"inpExt",{click:this.toggle,keydown:this.__onKeydown,keyup:this.__onKeyup})},i)}},ss=a["a"].extend({name:"QCheckbox",mixins:[ns],computed:{computedIcon(){return!0===this.isTrue?this.checkedIcon:!0===this.isIndeterminate?this.indeterminateIcon:this.uncheckedIcon}},methods:{__getInner(t){return void 0!==this.computedIcon?[t("div",{key:"icon",staticClass:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[t(ge,{staticClass:"q-checkbox__icon",props:{name:this.computedIcon}})])]:[t("div",{key:"svg",staticClass:"q-checkbox__bg absolute"},[t("svg",{staticClass:"q-checkbox__svg fit absolute-full",attrs:{focusable:"false",viewBox:"0 0 24 24"}},[t("path",{staticClass:"q-checkbox__truthy",attrs:{fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}}),t("path",{staticClass:"q-checkbox__indet",attrs:{d:"M4,14H20V10H4"}})])])]}},created(){this.type="checkbox"}}),rs=a["a"].extend({name:"QChip",mixins:[Qe,ye,Yt({xs:8,sm:10,md:14,lg:20,xl:24})],model:{event:"remove"},props:{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,value:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean},computed:{classes(){const t=!0===this.outline&&this.color||this.textColor;return{["bg-"+this.color]:!1===this.outline&&void 0!==this.color,[`text-${t} q-chip--colored`]:t,disabled:this.disable,"q-chip--dense":this.dense,"q-chip--outline":this.outline,"q-chip--selected":this.selected,"q-chip--clickable cursor-pointer non-selectable q-hoverable":this.isClickable,"q-chip--square":this.square,"q-chip--dark q-dark":this.isDark}},hasLeftIcon(){return!0===this.selected||void 0!==this.icon},leftIcon(){return!0===this.selected?this.iconSelected||this.$q.iconSet.chip.selected:this.icon},removeIcon(){return this.iconRemove||this.$q.iconSet.chip.remove},isClickable(){return!1===this.disable&&(!0===this.clickable||null!==this.selected)},attrs(){const t=!0===this.disable?{tabindex:-1,"aria-disabled":"true"}:{tabindex:this.tabindex||0},e={...t,role:"button","aria-hidden":"false","aria-label":this.removeAriaLabel||this.$q.lang.label.remove};return{chip:t,remove:e}}},methods:{__onKeyup(t){13===t.keyCode&&this.__onClick(t)},__onClick(t){this.disable||(this.$emit("update:selected",!this.selected),this.$emit("click",t))},__onRemove(t){void 0!==t.keyCode&&13!==t.keyCode||(P(t),!this.disable&&this.$emit("remove",!1))},__getContent(t){const e=[];!0===this.isClickable&&e.push(t("div",{staticClass:"q-focus-helper"})),!0===this.hasLeftIcon&&e.push(t(ge,{staticClass:"q-chip__icon q-chip__icon--left",props:{name:this.leftIcon}}));const i=void 0!==this.label?[t("div",{staticClass:"ellipsis"},[this.label])]:void 0;return e.push(t("div",{staticClass:"q-chip__content col row no-wrap items-center q-anchor--skip"},ee(i,this,"default"))),this.iconRight&&e.push(t(ge,{staticClass:"q-chip__icon q-chip__icon--right",props:{name:this.iconRight}})),!0===this.removable&&e.push(t(ge,{staticClass:"q-chip__icon q-chip__icon--remove cursor-pointer",props:{name:this.removeIcon},attrs:this.attrs.remove,on:Pt(this,"non",{click:this.__onRemove,keyup:this.__onRemove})})),e}},render(t){if(!1===this.value)return;const e={staticClass:"q-chip row inline no-wrap items-center",class:this.classes,style:this.sizeStyle};return!0===this.isClickable&&Object.assign(e,{attrs:this.attrs.chip,on:Pt(this,"click",{click:this.__onClick,keyup:this.__onKeyup}),directives:Pt(this,"dir#"+this.ripple,[{name:"ripple",value:this.ripple}])}),t("div",e,this.__getContent(t))}});const os=50,as=2*os,ls=as*Math.PI,hs=Math.round(1e3*ls)/1e3;var cs=a["a"].extend({name:"QCircularProgress",mixins:[Kt,Xt],props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:t=>t>=0&&t<=1},angle:{type:Number,default:0},indeterminate:Boolean,showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},computed:{normalizedValue(){return Et(this.value,this.min,this.max)},svgStyle(){const t=!0===this.$q.lang.rtl?-this.angle:this.angle;return{transform:this.reverse!==(!0===this.$q.lang.rtl)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-t}deg)`:`rotate3d(0, 0, 1, ${t-90}deg)`}},circleStyle(){if(!0!==this.instantFeedback&&!0!==this.indeterminate)return{transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"}},viewBox(){return as/(1-this.thickness/2)},viewBoxAttr(){return`${this.viewBox/2} ${this.viewBox/2} ${this.viewBox} ${this.viewBox}`},strokeDashOffset(){const t=1-(this.normalizedValue-this.min)/(this.max-this.min);return t*ls},strokeWidth(){return this.thickness/2*this.viewBox},attrs(){return{role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":!0===this.indeterminate?void 0:this.normalizedValue}}},methods:{__getCircle(t,{thickness:e,offset:i,color:n,cls:s,rounded:r}){return t("circle",{staticClass:"q-circular-progress__"+s,class:void 0!==n?"text-"+n:null,style:this.circleStyle,attrs:{fill:"transparent",stroke:"currentColor","stroke-width":e,"stroke-dasharray":hs,"stroke-dashoffset":i,"stroke-linecap":r,cx:this.viewBox,cy:this.viewBox,r:os}})}},render(t){const e=[];void 0!==this.centerColor&&"transparent"!==this.centerColor&&e.push(t("circle",{staticClass:"q-circular-progress__center",class:"text-"+this.centerColor,attrs:{fill:"currentColor",r:os-this.strokeWidth/2,cx:this.viewBox,cy:this.viewBox}})),void 0!==this.trackColor&&"transparent"!==this.trackColor&&e.push(this.__getCircle(t,{cls:"track",thickness:this.strokeWidth,offset:0,color:this.trackColor})),e.push(this.__getCircle(t,{cls:"circle",thickness:this.strokeWidth,offset:this.strokeDashOffset,color:this.color,rounded:!0===this.rounded?"round":void 0}));const i=[t("svg",{staticClass:"q-circular-progress__svg",style:this.svgStyle,attrs:{focusable:"false",viewBox:this.viewBoxAttr,"aria-hidden":"true"}},e)];return!0===this.showValue&&i.push(t("div",{staticClass:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:this.fontSize}},void 0!==this.$scopedSlots.default?this.$scopedSlots.default():[t("div",[this.normalizedValue])])),t("div",{staticClass:"q-circular-progress",class:`q-circular-progress--${!0===this.indeterminate?"in":""}determinate`,style:this.sizeStyle,on:{...this.qListeners},attrs:this.attrs},ee(i,this,"internal"))}});const us=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,ds=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,ps=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,fs=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,ms=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,gs={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>us.test(t),hexaColor:t=>ds.test(t),hexOrHexaColor:t=>ps.test(t),rgbColor:t=>fs.test(t),rgbaColor:t=>ms.test(t),rgbOrRgbaColor:t=>fs.test(t)||ms.test(t),hexOrRgbColor:t=>us.test(t)||fs.test(t),hexaOrRgbaColor:t=>ds.test(t)||ms.test(t),anyColor:t=>ps.test(t)||fs.test(t)||ms.test(t)};function vs(t,e,i){const n=k(t);let s,r=n.left-e.event.x,o=n.top-e.event.y,a=Math.abs(r),l=Math.abs(o);const h=e.direction;!0===h.horizontal&&!0!==h.vertical?s=r<0?"left":"right":!0!==h.horizontal&&!0===h.vertical?s=o<0?"up":"down":!0===h.up&&o<0?(s="up",a>l&&(!0===h.left&&r<0?s="left":!0===h.right&&r>0&&(s="right"))):!0===h.down&&o>0?(s="down",a>l&&(!0===h.left&&r<0?s="left":!0===h.right&&r>0&&(s="right"))):!0===h.left&&r<0?(s="left",a<l&&(!0===h.up&&o<0?s="up":!0===h.down&&o>0&&(s="down"))):!0===h.right&&r>0&&(s="right",a<l&&(!0===h.up&&o<0?s="up":!0===h.down&&o>0&&(s="down")));let c=!1;if(void 0===s&&!1===i){if(!0===e.event.isFirst||void 0===e.event.lastDir)return{};s=e.event.lastDir,c=!0,"left"===s||"right"===s?(n.left-=r,a=0,r=0):(n.top-=o,l=0,o=0)}return{synthetic:c,payload:{evt:t,touch:!0!==e.event.mouse,mouse:!0===e.event.mouse,position:n,direction:s,isFirst:e.event.isFirst,isFinal:!0===i,duration:Date.now()-e.event.time,distance:{x:a,y:l},offset:{x:r,y:o},delta:{x:n.left-e.event.lastX,y:n.top-e.event.lastY}}}}function _s(t){const e=t.__qtouchpan;void 0!==e&&(void 0!==e.event&&e.end(),N(e,"main"),N(e,"temp"),!0===b.is.firefox&&O(t,!1),void 0!==e.styleCleanup&&e.styleCleanup(),delete t.__qtouchpan)}let ys=0;var bs={name:"touch-pan",bind(t,{value:e,modifiers:i}){if(void 0!==t.__qtouchpan&&(_s(t),t.__qtouchpan_destroyed=!0),!0!==i.mouse&&!0!==b.has.touch)return;function n(t,e){!0===i.mouse&&!0===e?P(t):(!0===i.stop&&L(t),!0===i.prevent&&A(t))}const s={uid:"qvtp_"+ys++,handler:e,modifiers:i,direction:Rn(i),noop:M,mouseStart(t){On(t,s)&&T(t)&&(D(s,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),s.start(t,!0))},touchStart(t){if(On(t,s)){const e=t.target;D(s,"temp",[[e,"touchmove","move","notPassiveCapture"],[e,"touchcancel","end","passiveCapture"],[e,"touchend","end","passiveCapture"]]),s.start(t)}},start(e,n){!0===b.is.firefox&&O(t,!0),s.lastEvt=e;const r=k(e);if(!0===n||!0===i.stop){if(!0!==s.direction.all&&(!0!==n||!0!==s.modifiers.mouseAllDir&&!0!==s.modifiers.mousealldir)){const t=e.type.indexOf("mouse")>-1?new MouseEvent(e.type,e):new TouchEvent(e.type,e);!0===e.defaultPrevented&&A(t),!0===e.cancelBubble&&L(t),t.qClonedBy=void 0===e.qClonedBy?[s.uid]:e.qClonedBy.concat(s.uid),t.qKeyEvent=e.qKeyEvent,t.qClickOutside=e.qClickOutside,s.initialEvent={target:e.target,event:t}}L(e)}s.event={x:r.left,y:r.top,time:Date.now(),mouse:!0===n,detected:!1,isFirst:!0,isFinal:!1,lastX:r.left,lastY:r.top}},move(t){if(void 0===s.event)return;s.lastEvt=t;const e=!0===s.event.mouse,i=()=>{let i;n(t,e),!0!==s.modifiers.preserveCursor&&!0!==s.modifiers.preservecursor&&(i=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===e&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ui(),s.styleCleanup=t=>{if(s.styleCleanup=void 0,void 0!==i&&(document.documentElement.style.cursor=i),document.body.classList.remove("non-selectable"),!0===e){const e=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==t?setTimeout(()=>{e(),t()},50):e()}else void 0!==t&&t()}};if(!0===s.event.detected){!0!==s.event.isFirst&&n(t,s.event.mouse);const{payload:e,synthetic:r}=vs(t,s,!1);return void(void 0!==e&&(!1===s.handler(e)?s.end(t):(void 0===s.styleCleanup&&!0===s.event.isFirst&&i(),s.event.lastX=e.position.left,s.event.lastY=e.position.top,s.event.lastDir=!0===r?void 0:e.direction,s.event.isFirst=!1)))}if(!0===s.direction.all||!0===e&&(!0===s.modifiers.mouseAllDir||!0===s.modifiers.mousealldir))return i(),s.event.detected=!0,void s.move(t);const r=k(t),o=r.left-s.event.x,a=r.top-s.event.y,l=Math.abs(o),h=Math.abs(a);l!==h&&(!0===s.direction.horizontal&&l>h||!0===s.direction.vertical&&l<h||!0===s.direction.up&&l<h&&a<0||!0===s.direction.down&&l<h&&a>0||!0===s.direction.left&&l>h&&o<0||!0===s.direction.right&&l>h&&o>0?(s.event.detected=!0,s.move(t)):s.end(t,!0))},end(e,i){if(void 0!==s.event){if(N(s,"temp"),!0===b.is.firefox&&O(t,!1),!0===i)void 0!==s.styleCleanup&&s.styleCleanup(),!0!==s.event.detected&&void 0!==s.initialEvent&&s.initialEvent.target.dispatchEvent(s.initialEvent.event);else if(!0===s.event.detected){!0===s.event.isFirst&&s.handler(vs(void 0===e?s.lastEvt:e,s).payload);const{payload:t}=vs(void 0===e?s.lastEvt:e,s,!0),i=()=>{s.handler(t)};void 0!==s.styleCleanup?s.styleCleanup(i):i()}s.event=void 0,s.initialEvent=void 0,s.lastEvt=void 0}}};t.__qtouchpan=s,!0===i.mouse&&D(s,"main",[[t,"mousedown","mouseStart","passive"+(!0===i.mouseCapture||!0===i.mousecapture?"Capture":"")]]),!0===b.has.touch&&D(s,"main",[[t,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},update(t,{oldValue:e,value:i}){const n=t.__qtouchpan;void 0!==n&&e!==i&&("function"!==typeof i&&n.end(),n.handler=i)},unbind(t){void 0===t.__qtouchpan_destroyed?_s(t):delete t.__qtouchpan_destroyed}};const xs="q-slider__marker-labels",Ss=t=>({value:t}),ws=[34,37,40,33,39,38],Cs={mixins:[ye,Cn],directives:{TouchPan:bs},props:{min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},data(){return{active:!1,preventFocus:!1,focus:!1,dragging:!1}},computed:{axis(){return!0===this.vertical?"--v":"--h"},labelSide(){return"-"+(!0===this.switchLabelSide?"switched":"standard")},isReversed(){return!0===this.vertical?!0===this.reverse:this.reverse!==(!0===this.$q.lang.rtl)},computedInnerMin(){return this.__getInnerMin(this.innerMin)},computedInnerMax(){return this.__getInnerMax(this.innerMax)},editable(){return!0!==this.disable&&!0!==this.readonly&&this.computedInnerMin<this.computedInnerMax},computedDecimals(){return(String(this.step).trim("0").split(".")[1]||"").length},computedStep(){return 0===this.step?1:this.step},computedTabindex(){return!0===this.editable?this.tabindex||0:-1},trackLen(){return this.max-this.min},innerBarLen(){return this.computedInnerMax-this.computedInnerMin},innerMinRatio(){return this.__convertModelToRatio(this.computedInnerMin)},innerMaxRatio(){return this.__convertModelToRatio(this.computedInnerMax)},positionProp(){return!0===this.vertical?!0===this.isReversed?"bottom":"top":!0===this.isReversed?"right":"left"},sizeProp(){return!0===this.vertical?"height":"width"},thicknessProp(){return!0===this.vertical?"width":"height"},orientation(){return!0===this.vertical?"vertical":"horizontal"},attributes(){const t={role:"slider","aria-valuemin":this.computedInnerMin,"aria-valuemax":this.computedInnerMax,"aria-orientation":this.orientation,"data-step":this.step};return!0===this.disable?t["aria-disabled"]="true":!0===this.readonly&&(t["aria-readonly"]="true"),t},classes(){return`q-slider q-slider${this.axis} q-slider--${!0===this.active?"":"in"}active inline no-wrap `+(!0===this.vertical?"row":"column")+(!0===this.disable?" disabled":" q-slider--enabled"+(!0===this.editable?" q-slider--editable":""))+("both"===this.focus?" q-slider--focus":"")+(this.label||!0===this.labelAlways?" q-slider--label":"")+(!0===this.labelAlways?" q-slider--label-always":"")+(!0===this.isDark?" q-slider--dark":"")+(!0===this.dense?" q-slider--dense q-slider--dense"+this.axis:"")},selectionBarClass(){const t=this.selectionColor||this.color;return"q-slider__selection absolute"+(void 0!==t?" text-"+t:"")},markerClass(){return this.__getAxisClass("markers")+" absolute overflow-hidden"},trackContainerClass(){return this.__getAxisClass("track-container")},pinClass(){return this.__getPositionClass("pin")},labelClass(){return this.__getPositionClass("label")},textContainerClass(){return this.__getPositionClass("text-container")},markerLabelsContainerClass(){return this.__getPositionClass("marker-labels-container")+(void 0!==this.markerLabelsClass?" "+this.markerLabelsClass:"")},trackClass(){return"q-slider__track relative-position no-outline"+(void 0!==this.trackColor?" bg-"+this.trackColor:"")},trackStyle(){const t={[this.thicknessProp]:this.trackSize};return void 0!==this.trackImg&&(t.backgroundImage=`url(${this.trackImg}) !important`),t},innerBarClass(){return"q-slider__inner absolute"+(void 0!==this.innerTrackColor?" bg-"+this.innerTrackColor:"")},innerBarStyle(){const t={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.innerMaxRatio-this.innerMinRatio)+"%"};return void 0!==this.innerTrackImg&&(t.backgroundImage=`url(${this.innerTrackImg}) !important`),t},markerStep(){return!0===Qn(this.markers)?this.markers:this.computedStep},markerTicks(){const t=[],e=this.markerStep;let i=this.min;do{t.push(i),i+=e}while(i<this.max);return t.push(this.max),t},markerLabelClass(){const t=` ${xs}${this.axis}-`;return xs+`${t}${!0===this.switchMarkerLabelsSide?"switched":"standard"}`+`${t}${!0===this.isReversed?"rtl":"ltr"}`},markerLabelsList(){return!1===this.markerLabels?null:this.__getMarkerList(this.markerLabels).map((t,e)=>({index:e,value:t.value,label:t.label||t.value,classes:this.markerLabelClass+(void 0!==t.classes?" "+t.classes:""),style:{...this.__getMarkerLabelStyle(t.value),...t.style||{}}}))},markerScope(){return{markerList:this.markerLabelsList,markerMap:this.markerLabelsMap,classes:this.markerLabelClass,getStyle:this.__getMarkerLabelStyle}},markerStyle(){if(0!==this.innerBarLen){const t=100*this.markerStep/this.innerBarLen;return{...this.innerBarStyle,backgroundSize:!0===this.vertical?`2px ${t}%`:t+"% 2px"}}return null},markerLabelsMap(){if(!1===this.markerLabels)return null;const t={};return this.markerLabelsList.forEach(e=>{t[e.value]=e}),t},panDirectives(){return!0===this.editable?[{name:"touch-pan",value:this.__onPan,modifiers:{[this.orientation]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}}]:null}},methods:{__getInnerMin(t){return!0===isNaN(t)||this.innerMin<this.min?this.min:this.innerMin},__getInnerMax(t){return!0===isNaN(t)||t>this.max?this.max:this.innerMax},__getPositionClass(t){const e="q-slider__"+t;return`${e} ${e}${this.axis} ${e}${this.axis}${this.labelSide}`},__getAxisClass(t){const e="q-slider__"+t;return`${e} ${e}${this.axis}`},__convertRatioToModel(t){let e=this.min+t*(this.max-this.min);if(this.step>0){const t=(e-this.min)%this.step;e+=(Math.abs(t)>=this.step/2?(t<0?-1:1)*this.step:0)-t}return this.computedDecimals>0&&(e=parseFloat(e.toFixed(this.computedDecimals))),Et(e,this.computedInnerMin,this.computedInnerMax)},__convertModelToRatio(t){return 0===this.trackLen?0:(t-this.min)/this.trackLen},__getDraggingRatio(t,e){const i=k(t),n=!0===this.vertical?Et((i.top-e.top)/e.height,0,1):Et((i.left-e.left)/e.width,0,1);return Et(!0===this.isReversed?1-n:n,this.innerMinRatio,this.innerMaxRatio)},__getMarkerList(t){if(!1===t)return null;if(!0===t)return this.markerTicks.map(Ss);if("function"===typeof t)return this.markerTicks.map(e=>{const i=t(e);return!0===jn(i)?{...i,value:e}:{value:e,label:i}});const e=({value:t})=>t>=this.min&&t<=this.max;return!0===Array.isArray(t)?t.map(t=>!0===jn(t)?t:{value:t}).filter(e):Object.keys(t).map(e=>{const i=t[e],n=Number(e);return!0===jn(i)?{...i,value:n}:{value:n,label:i}}).filter(e)},__getMarkerLabelStyle(t){return{[this.positionProp]:100*(t-this.min)/this.trackLen+"%"}},__getMarkerLabelsContent(t){if(void 0!==this.$scopedSlots["marker-label-group"])return this.$scopedSlots["marker-label-group"](this.markerScope);const e=this.$scopedSlots["marker-label"];return void 0!==e?this.markerLabelsList.map(t=>e({marker:t,...this.markerScope})):this.markerLabelsList.map(e=>t("div",{key:e.value,style:e.style,class:e.classes},e.label))},__onPan(t){!0===t.isFinal?(void 0!==this.dragging&&(this.__updatePosition(t.evt),!0===t.touch&&this.__updateValue(!0),this.dragging=void 0,this.$emit("pan","end")),this.active=!1,this.focus=!1):!0===t.isFirst?(this.dragging=this.__getDragging(t.evt),this.__updatePosition(t.evt),this.__updateValue(),this.active=!0,this.$emit("pan","start")):(this.__updatePosition(t.evt),this.__updateValue())},__onBlur(){this.focus=!1},__onActivate(t){this.__updatePosition(t,this.__getDragging(t)),this.__updateValue(),this.preventFocus=!0,this.active=!0,document.addEventListener("mouseup",this.__onDeactivate,!0)},__onDeactivate(){this.preventFocus=!1,this.active=!1,this.__updateValue(!0),this.__onBlur(),document.removeEventListener("mouseup",this.__onDeactivate,!0)},__onMobileClick(t){this.__updatePosition(t,this.__getDragging(t)),this.__updateValue(!0)},__onKeyup(t){ws.includes(t.keyCode)&&this.__updateValue(!0)},__getTextContainerStyle(t){if(!0===this.vertical)return null;const e=this.$q.lang.rtl!==this.reverse?1-t:t;return{transform:`translateX(calc(${2*e-1} * ${this.thumbSize} / 2 + ${50-100*e}%))`}},__getThumb(t,e){const i=[t("svg",{class:"q-slider__thumb-shape absolute-full",attrs:{viewBox:"0 0 20 20","aria-hidden":"true"}},[t("path",{attrs:{d:this.thumbPath}})]),t("div",{class:"q-slider__focus-ring fit"})];return!0!==this.label&&!0!==this.labelAlways||(i.push(t("div",{class:this.pinClass+" absolute fit no-pointer-events"+e.pinColor},[t("div",{class:this.labelClass,style:{minWidth:this.thumbSize}},[t("div",{class:this.textContainerClass,style:e.textContainerStyle},[t("span",{class:e.textClass},e.label)])])])),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(i,"push")),t("div",{class:e.classes,style:e.style,...e.nodeData},i)},__getContent(t,e){const i=[];"transparent"!==this.innerTrackColor&&i.push(t("div",{key:"inner",class:this.innerBarClass,style:this.innerBarStyle})),"transparent"!==this.selectionColor&&i.push(t("div",{key:"selection",class:this.selectionBarClass,style:this.selectionBarStyle})),!1!==this.markers&&i.push(t("div",{key:"marker",class:this.markerClass,style:this.markerStyle})),e(i);const n=[t("div",{key:"trackC",class:this.trackContainerClass,attrs:this.trackContainerAttrs,on:this.trackContainerEvents,directives:this.panDirectives},[t("div",{class:this.trackClass,style:this.trackStyle},i)])];if(!1!==this.markerLabels){const e=!0===this.switchMarkerLabelsSide?"unshift":"push";n[e](t("div",{key:"markerL",class:this.markerLabelsContainerClass},this.__getMarkerLabelsContent(t)))}return n}},beforeDestroy(){document.removeEventListener("mouseup",this.__onDeactivate,!0)}};var Ms=a["a"].extend({name:"QSlider",mixins:[Cs],props:{value:{required:!0,default:null,validator:t=>"number"===typeof t||null===t},labelValue:[String,Number]},data(){const t=this.__getInnerMin(this.innerMin),e=this.__getInnerMax(this.innerMax);return{model:null===this.value?t:Et(this.value,t,e),curRatio:0}},computed:{modelRatio(){return this.__convertModelToRatio(this.model)},ratio(){return!0===this.active?this.curRatio:this.modelRatio},selectionBarStyle(){const t={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.ratio-this.innerMinRatio)+"%"};return void 0!==this.selectionImg&&(t.backgroundImage=`url(${this.selectionImg}) !important`),t},thumbLabel(){return void 0!==this.labelValue?this.labelValue:this.model},thumbClasses(){const t=this.thumbColor||this.color;return`q-slider__thumb q-slider__thumb${this.axis} q-slider__thumb${this.axis}-${!0===this.isReversed?"rtl":"ltr"} absolute non-selectable`+(!1===this.preventFocus&&!0===this.focus?" q-slider--focus":"")+(void 0!==t?" text-"+t:"")},thumbStyle(){return{width:this.thumbSize,height:this.thumbSize,[this.positionProp]:100*this.ratio+"%"}},thumbPinColor(){return void 0!==this.labelColor?" text-"+this.labelColor:""},thumbTextContainerStyle(){return this.__getTextContainerStyle(this.ratio)},thumbTextClass(){return"q-slider__text"+(void 0!==this.labelTextColor?" text-"+this.labelTextColor:"")},trackContainerEvents(){return!0!==this.editable?{}:!0===this.$q.platform.is.mobile?{click:this.__onMobileClick}:{mousedown:this.__onActivate,focus:this.__onFocus,blur:this.__onBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}},trackContainerAttrs(){return{tabindex:!0!==this.$q.platform.is.mobile?this.computedTabindex:null}},modelUpdate(){return`${this.value}|${this.computedInnerMin}|${this.computedInnerMax}`}},watch:{modelUpdate(){this.model=null===this.value?this.computedInnerMin:Et(this.value,this.computedInnerMin,this.computedInnerMax)}},methods:{__updateValue(t){this.model!==this.value&&this.$emit("input",this.model),!0===t&&this.$emit("change",this.model)},__getDragging(){return this.$el.getBoundingClientRect()},__updatePosition(t,e=this.dragging){const i=this.__getDraggingRatio(t,e);this.model=this.__convertRatioToModel(i),this.curRatio=!0!==this.snap||0===this.computedStep?i:this.__convertModelToRatio(this.model)},__onFocus(){this.focus=!0},__onKeydown(t){if(!ws.includes(t.keyCode))return;P(t);const e=([34,33].includes(t.keyCode)?10:1)*this.computedStep,i=([34,37,40].includes(t.keyCode)?-1:1)*(!0===this.isReversed?-1:1)*(!0===this.vertical?-1:1)*e;this.model=Et(parseFloat((this.model+i).toFixed(this.computedDecimals)),this.computedInnerMin,this.computedInnerMax),this.__updateValue()}},render(t){const e=this.__getContent(t,e=>{e.push(this.__getThumb(t,{pinColor:this.thumbPinColor,textContainerStyle:this.thumbTextContainerStyle,textClass:this.thumbTextClass,label:this.thumbLabel,classes:this.thumbClasses,style:this.thumbStyle,nodeData:{}}))});return t("div",{class:this.classes+(null===this.value?" q-slider--no-value":""),attrs:{...this.attributes,"aria-valuenow":this.value}},e)}}),Ts={data(){return{canRender:!u}},mounted(){!1===this.canRender&&(this.canRender=!0)}},ks=a["a"].extend({name:"QResizeObserver",mixins:[Ts],props:{debounce:{type:[String,Number],default:100}},data(){return!0===this.hasObserver?{}:{url:!0===this.$q.platform.is.ie?null:"about:blank"}},methods:{trigger(t){!0===t||0===this.debounce||"0"===this.debounce?this.__emit():null===this.timer&&(this.timer=setTimeout(this.__emit,this.debounce))},__emit(){if(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),!this.$el||!this.$el.parentNode)return;const t=this.$el.parentNode,e={width:t.offsetWidth,height:t.offsetHeight};e.width===this.size.width&&e.height===this.size.height||(this.size=e,this.$emit("resize",this.size))},__cleanup(){void 0!==this.curDocView&&(void 0!==this.curDocView.removeEventListener&&this.curDocView.removeEventListener("resize",this.trigger,w.passive),this.curDocView=void 0)},__onObjLoad(){this.__cleanup(),this.$el.contentDocument&&(this.curDocView=this.$el.contentDocument.defaultView,this.curDocView.addEventListener("resize",this.trigger,w.passive)),this.__emit()}},render(t){if(!1!==this.canRender&&!0!==this.hasObserver)return t("object",{style:this.style,attrs:{tabindex:-1,type:"text/html",data:this.url,"aria-hidden":"true"},on:Pt(this,"load",{load:this.__onObjLoad})})},beforeCreate(){this.size={width:-1,height:-1},!0!==l&&(this.hasObserver="undefined"!==typeof ResizeObserver,!0!==this.hasObserver&&(this.style=(this.$q.platform.is.ie?"visibility:hidden;":"")+"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;"))},mounted(){if(this.timer=null,!0===this.hasObserver)return this.observer=new ResizeObserver(this.trigger),this.observer.observe(this.$el.parentNode),void this.__emit();!0===this.$q.platform.is.ie?(this.url="about:blank",this.__emit()):this.__onObjLoad()},beforeDestroy(){clearTimeout(this.timer),!0!==this.hasObserver?this.__cleanup():void 0!==this.observer&&this.$el.parentNode&&this.observer.unobserve(this.$el.parentNode)}});function Es(t,e,i,n){return Object.defineProperty(t,e,{get:i,set:n,enumerable:!0}),t}function Ls(t,e,i){const n=!0===i?["left","right"]:["top","bottom"];return`absolute-${!0===e?n[0]:n[1]}${t?" text-"+t:""}`}const As=["left","center","right","justify"],Ps=()=>({matchedLen:0,queryDiff:9999,hrefLen:0,exact:!1,redirected:!0});function Rs(t,e){for(const i in t)if(t[i]!==e[i])return!1;return!0}var Os=a["a"].extend({name:"QTabs",mixins:[pi,Kt],provide(){return{$tabs:this}},props:{value:[Number,String],align:{type:String,default:"center",validator:t=>As.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String},data(){return{scrollable:!1,leftArrow:!0,rightArrow:!1,justify:!1,tabNameList:[],currentModel:this.value,hasFocus:!1,avoidRouteWatcher:!1}},watch:{isRTL(){this.__localUpdateArrows()},value(t){this.__updateModel({name:t,setCurrent:!0,skipEmit:!0})},outsideArrows(){this.__recalculateScroll()},arrowsEnabled(t){this.__localUpdateArrows=!0===t?this.__updateArrowsFn:M,this.__recalculateScroll()}},computed:{tabProps(){return{activeClass:this.activeClass,activeColor:this.activeColor,activeBgColor:this.activeBgColor,indicatorClass:Ls(this.indicatorColor,this.switchIndicator,this.vertical),narrowIndicator:this.narrowIndicator,inlineLabel:this.inlineLabel,noCaps:this.noCaps}},hasActiveTab(){return this.tabNameList.some(t=>t.name===this.currentModel)},arrowsEnabled(){return!0===this.$q.platform.is.desktop||!0===this.mobileArrows},alignClass(){const t=!0===this.scrollable?"left":!0===this.justify?"justify":this.align;return"q-tabs__content--align-"+t},classes(){return`q-tabs row no-wrap items-center q-tabs--${!0===this.scrollable?"":"not-"}scrollable q-tabs--`+(!0===this.vertical?"vertical":"horizontal")+" q-tabs__arrows--"+(!0===this.arrowsEnabled&&!0===this.outsideArrows?"outside":"inside")+(!0===this.dense?" q-tabs--dense":"")+(!0===this.shrink?" col-shrink":"")+(!0===this.stretch?" self-stretch":"")},innerClass(){return"q-tabs__content row no-wrap items-center self-stretch hide-scrollbar relative-position "+this.alignClass+(void 0!==this.contentClass?" "+this.contentClass:"")+(!0===this.$q.platform.is.mobile?" scroll":"")},domProps(){return!0===this.vertical?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}},isRTL(){return!0!==this.vertical&&!0===this.$q.lang.rtl},rtlPosCorrection(){return!1===Bi()&&!0===this.isRTL},posFn(){return!0===this.rtlPosCorrection?{get:t=>Math.abs(t.scrollLeft),set:(t,e)=>{t.scrollLeft=-e}}:!0===this.vertical?{get:t=>t.scrollTop,set:(t,e)=>{t.scrollTop=e}}:{get:t=>t.scrollLeft,set:(t,e)=>{t.scrollLeft=e}}},onEvents(){return{input:L,...this.qListeners,focusin:this.__onFocusin,focusout:this.__onFocusout}}},methods:{__updateModel({name:t,setCurrent:e,skipEmit:i}){this.currentModel!==t&&(!0!==i&&void 0!==this.qListeners.input&&this.$emit("input",t),!0!==e&&void 0!==this.qListeners.input||(this.__animate(this.currentModel,t),this.currentModel=t))},__recalculateScroll(){this.__registerScrollTick(()=>{this.__updateContainer({width:this.$el.offsetWidth,height:this.$el.offsetHeight})})},__updateContainer(t){if(void 0===this.domProps||!this.$refs.content)return;const e=t[this.domProps.container],i=Math.min(this.$refs.content[this.domProps.scroll],Array.prototype.reduce.call(this.$refs.content.children,(t,e)=>t+(e[this.domProps.content]||0),0)),n=e>0&&i>e;this.scrollable!==n&&(this.scrollable=n),!0===n&&this.__registerUpdateArrowsTick(this.__localUpdateArrows);const s=e<parseInt(this.breakpoint,10);this.justify!==s&&(this.justify=s)},__animate(t,e){const i=void 0!==t&&null!==t&&""!==t?this.tabVmList.find(e=>e.name===t):null,n=void 0!==e&&null!==e&&""!==e?this.tabVmList.find(t=>t.name===e):null;if(i&&n){const t=i.$refs.tabIndicator,e=n.$refs.tabIndicator;clearTimeout(this.animateTimer),t.style.transition="none",t.style.transform="none",e.style.transition="none",e.style.transform="none";const s=t.getBoundingClientRect(),r=e.getBoundingClientRect();e.style.transform=!0===this.vertical?`translate3d(0,${s.top-r.top}px,0) scale3d(1,${r.height?s.height/r.height:1},1)`:`translate3d(${s.left-r.left}px,0,0) scale3d(${r.width?s.width/r.width:1},1,1)`,this.__registerAnimateTick(()=>{this.animateTimer=setTimeout(()=>{e.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",e.style.transform="none"},70)})}n&&!0===this.scrollable&&this.__scrollToTabEl(n.$el)},__scrollToTabEl(t){const e=this.$refs.content,{left:i,width:n,top:s,height:r}=e.getBoundingClientRect(),o=t.getBoundingClientRect();let a=!0===this.vertical?o.top-s:o.left-i;if(a<0)return e[!0===this.vertical?"scrollTop":"scrollLeft"]+=Math.floor(a),void this.__localUpdateArrows();a+=!0===this.vertical?o.height-r:o.width-n,a>0&&(e[!0===this.vertical?"scrollTop":"scrollLeft"]+=Math.ceil(a),this.__localUpdateArrows())},__updateArrowsFn(){const t=this.$refs.content;if(null!==t){const e=t.getBoundingClientRect(),i=!0===this.vertical?t.scrollTop:Math.abs(t.scrollLeft);!0===this.isRTL?(this.leftArrow=Math.ceil(i+e.width)<t.scrollWidth-1,this.rightArrow=i>0):(this.leftArrow=i>0,this.rightArrow=!0===this.vertical?Math.ceil(i+e.height)<t.scrollHeight:Math.ceil(i+e.width)<t.scrollWidth)}},__animScrollTo(t){this.__stopAnimScroll(),this.scrollTimer=setInterval(()=>{!0===this.__scrollTowards(t)&&this.__stopAnimScroll()},5)},__scrollToStart(){this.__animScrollTo(!0===this.rtlPosCorrection?Number.MAX_SAFE_INTEGER:0)},__scrollToEnd(){this.__animScrollTo(!0===this.rtlPosCorrection?0:Number.MAX_SAFE_INTEGER)},__stopAnimScroll(){clearInterval(this.scrollTimer)},__onKbdNavigate(t,e){const i=Array.prototype.filter.call(this.$refs.content.children,t=>t===e||t.matches&&!0===t.matches(".q-tab.q-focusable")),n=i.length;if(0===n)return;if(36===t)return this.__scrollToTabEl(i[0]),i[0].focus(),!0;if(35===t)return this.__scrollToTabEl(i[n-1]),i[n-1].focus(),!0;const s=t===(!0===this.vertical?38:37),r=t===(!0===this.vertical?40:39),o=!0===s?-1:!0===r?1:void 0;if(void 0!==o){const t=!0===this.isRTL?-1:1,s=i.indexOf(e)+o*t;return s>=0&&s<n&&(this.__scrollToTabEl(i[s]),i[s].focus({preventScroll:!0})),!0}},__scrollTowards(t){const e=this.$refs.content,{get:i,set:n}=this.posFn;let s=!1,r=i(e);const o=t<r?-1:1;return r+=5*o,r<0?(s=!0,r=0):(-1===o&&r<=t||1===o&&r>=t)&&(s=!0,r=t),n(e,r),this.__localUpdateArrows(),s},__updateActiveRoute(){let t=null,e=Ps();const i=this.tabVmList.filter(t=>!0===t.hasRouterLink),n=i.length,{query:s}=this.$route,r=Object.keys(s).length;for(let o=0;o<n;o++){const n=i[o],a=!0===n.exact;if(!0!==n[!0===a?"linkIsExactActive":"linkIsActive"]||!0===e.exact&&!0!==a)continue;const{route:l,href:h}=n.resolvedLink,{matched:c,query:u,hash:d}=l,p=void 0!==l.redirectedFrom;if(!0===a){if(!1===p){t=n.name;break}!1===e.exact&&(e=Ps())}if(!1===e.redirected&&!0===p)continue;const f=Object.keys(u).length;if(!1===a&&0!==f&&!1===Rs(u,s))continue;const m={exact:a,redirected:p,matchedLen:c.length,queryDiff:!0===a?0:r-f,hrefLen:h.length-d.length};m.matchedLen>e.matchedLen?(t=n.name,e=m):m.matchedLen===e.matchedLen&&(m.queryDiff<e.queryDiff||m.queryDiff===e.queryDiff&&m.hrefLen>e.hrefLen)&&(t=n.name,e=m)}null===t&&!0===this.tabVmList.some(t=>void 0===t.hasRouterLink&&t.name===this.currentModel)||this.__updateModel({name:t,setCurrent:!0})},__onFocusin(t){if(this.__removeFocusTimeout(),!0!==this.hasFocus&&this.$el&&t.target&&"function"===typeof t.target.closest){const e=t.target.closest(".q-tab");e&&!0===this.$el.contains(e)&&(this.hasFocus=!0,!0===this.scrollable&&this.__scrollToTabEl(e))}void 0!==this.qListeners.focusin&&this.$emit("focusin",t)},__onFocusout(t){this.__registerFocusTimeout(()=>{this.hasFocus=!1},30),void 0!==this.qListeners.focusout&&this.$emit("focusout",t)},__verifyRouteModel(){!1===this.avoidRouteWatcher?this.__registerScrollToTabTimeout(this.__updateActiveRoute):this.__removeScrollToTabTimeout()},__watchRoute(){if(void 0===this.unwatchRoute){const t=this.$watch(()=>this.$route.fullPath,this.__verifyRouteModel);this.unwatchRoute=()=>{t(),this.unwatchRoute=void 0}}},__registerTab(t){this.tabVmList.push(t),this.tabNameList.push(Es({},"name",()=>t.name)),this.__recalculateScroll(),void 0===t.hasRouterLink||void 0===this.$route?this.__registerScrollToTabTimeout(()=>{if(!0===this.scrollable){const t=this.currentModel,e=void 0!==t&&null!==t&&""!==t?this.tabVmList.find(e=>e.name===t):null;e&&this.__scrollToTabEl(e.$el)}}):(this.__watchRoute(),!0===t.hasRouterLink&&this.__verifyRouteModel())},__unregisterTab(t){const e=this.tabVmList.indexOf(t);this.tabVmList.splice(e,1),this.tabNameList.splice(e,1),this.__recalculateScroll(),void 0!==this.unwatchRoute&&void 0!==t.hasRouterLink&&(!0===this.tabVmList.every(t=>void 0===t.hasRouterLink)&&this.unwatchRoute(),this.__verifyRouteModel())},__cleanup(){clearTimeout(this.animateTimer),this.__stopAnimScroll(),void 0!==this.unwatchRoute&&this.unwatchRoute()}},created(){this.__useTick("__registerScrollTick"),this.__useTick("__registerUpdateArrowsTick"),this.__useTick("__registerAnimateTick"),this.__useTimeout("__registerFocusTimeout","__removeFocusTimeout"),this.__useTimeout("__registerScrollToTabTimeout","__removeScrollToTabTimeout"),Object.assign(this,{tabVmList:[],__localUpdateArrows:!0===this.arrowsEnabled?this.__updateArrowsFn:M})},activated(){!0===this.hadRouteWatcher&&this.__watchRoute(),this.__recalculateScroll()},deactivated(){this.hadRouteWatcher=void 0!==this.unwatchRoute,this.__cleanup()},beforeDestroy(){this.__cleanup()},render(t){const e=[t(ks,{on:Pt(this,"resize",{resize:this.__updateContainer})}),t("div",{ref:"content",class:this.innerClass,on:!0===this.arrowsEnabled?Pt(this,"scroll",{scroll:this.__updateArrowsFn}):void 0},Zt(this,"default"))];return!0===this.arrowsEnabled&&e.push(t(ge,{class:"q-tabs__arrow q-tabs__arrow--start absolute q-tab__icon"+(!0===this.leftArrow?"":" q-tabs__arrow--faded"),props:{name:this.leftIcon||this.$q.iconSet.tabs[!0===this.vertical?"up":"left"]},on:Pt(this,"onS",{"&mousedown":this.__scrollToStart,"&touchstart":this.__scrollToStart,"&mouseup":this.__stopAnimScroll,"&mouseleave":this.__stopAnimScroll,"&touchend":this.__stopAnimScroll})}),t(ge,{class:"q-tabs__arrow q-tabs__arrow--end absolute q-tab__icon"+(!0===this.rightArrow?"":" q-tabs__arrow--faded"),props:{name:this.rightIcon||this.$q.iconSet.tabs[!0===this.vertical?"down":"right"]},on:Pt(this,"onE",{"&mousedown":this.__scrollToEnd,"&touchstart":this.__scrollToEnd,"&mouseup":this.__stopAnimScroll,"&mouseleave":this.__stopAnimScroll,"&touchend":this.__stopAnimScroll})})),t("div",{class:this.classes,on:this.onEvents,attrs:{role:"tablist"}},e)}});let Is=0;var Ds=a["a"].extend({name:"QTab",mixins:[Qe,Kt],inject:{$tabs:{default(){console.error("QTab/QRouteTab components need to be child of QTabs")}}},props:{icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>"t_"+Is++},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String},computed:{isActive(){return this.$tabs.currentModel===this.name},classes(){return"q-tab relative-position self-stretch flex flex-center text-center"+(!0===this.isActive?" q-tab--active"+(this.$tabs.tabProps.activeClass?" "+this.$tabs.tabProps.activeClass:"")+(this.$tabs.tabProps.activeColor?" text-"+this.$tabs.tabProps.activeColor:"")+(this.$tabs.tabProps.activeBgColor?" bg-"+this.$tabs.tabProps.activeBgColor:""):" q-tab--inactive")+(this.icon&&this.label&&!1===this.$tabs.tabProps.inlineLabel?" q-tab--full":"")+(!0===this.noCaps||!0===this.$tabs.tabProps.noCaps?" q-tab--no-caps":"")+(!0===this.disable?" disabled":" q-focusable q-hoverable cursor-pointer")+(void 0!==this.hasRouterLinkProps?this.linkClass:"")},innerClass(){return"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(!0===this.$tabs.tabProps.inlineLabel?"row no-wrap q-tab__content--inline":"column")+(void 0!==this.contentClass?" "+this.contentClass:"")},computedTabIndex(){return!0===this.disable||!0===this.$tabs.hasFocus||!1===this.isActive&&!0===this.$tabs.hasActiveTab?-1:this.tabindex||0},computedRipple(){return!1!==this.ripple&&Object.assign({keyCodes:[13,32],early:!0},!0===this.ripple?{}:this.ripple)},onEvents(){return{input:L,...this.qListeners,click:this.__onClick,keydown:this.__onKeydown}},attrs(){const t={...this.linkAttrs,tabindex:this.computedTabIndex,role:"tab","aria-selected":!0===this.isActive?"true":"false"};return!0===this.disable&&(t["aria-disabled"]="true"),t}},methods:{__onClick(t,e){if(!0!==e&&void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus({preventScroll:!0}),!0!==this.disable){if(void 0===this.hasRouterLinkProps)return this.$tabs.__updateModel({name:this.name}),void(void 0!==this.qListeners.click&&this.$emit("click",t));if(!0===this.hasRouterLink){const e=(e,i,n)=>{const{to:s,replace:r,append:o,returnRouterError:a}=!1===t.navigate?{to:e,replace:i,append:n}:e||{};let l;const h=void 0===s||o===this.append&&!0===Wn(s,this.to)?this.$tabs.avoidRouteWatcher=xn():null;return this.__navigateToRouterLink(t,{to:s,replace:r,append:o,returnRouterError:!0}).catch(t=>{l=t}).then(t=>(h===this.$tabs.avoidRouteWatcher&&(this.$tabs.avoidRouteWatcher=!1,void 0!==l&&!0!==l.message.startsWith("Avoided redundant navigation")||this.$tabs.__updateModel({name:this.name})),void 0!==l&&!0===a?Promise.reject(l):t))};return void 0!==this.qListeners.click&&this.$emit("click",t,e),!1===t.navigate&&t.preventDefault(),void(!0!==t.defaultPrevented&&e())}void 0!==this.qListeners.click&&this.$emit("click",t)}else!0===this.hasRouterLink&&P(t)},__onKeydown(t){ut(t,[13,32])?this.__onClick(t,!0):!0!==ct(t)&&t.keyCode>=35&&t.keyCode<=40&&!0!==t.altKey&&!0!==t.metaKey&&!0===this.$tabs.__onKbdNavigate(t.keyCode,this.$el)&&P(t),void 0!==this.qListeners.keydown&&this.$emit("keydown",t)},__getContent(t){const e=this.$tabs.tabProps.narrowIndicator,i=[],n=t("div",{ref:"tabIndicator",staticClass:"q-tab__indicator",class:this.$tabs.tabProps.indicatorClass});void 0!==this.icon&&i.push(t(ge,{staticClass:"q-tab__icon",props:{name:this.icon}})),void 0!==this.label&&i.push(t("div",{staticClass:"q-tab__label"},[this.label])),!1!==this.alert&&i.push(void 0!==this.alertIcon?t(ge,{staticClass:"q-tab__alert-icon",props:{color:!0!==this.alert?this.alert:void 0,name:this.alertIcon}}):t("div",{staticClass:"q-tab__alert",class:!0!==this.alert?"text-"+this.alert:null})),!0===e&&i.push(n);const s=[t("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget"}),t("div",{class:this.innerClass},te(i,this,"default"))];return!1===e&&s.push(n),s},__renderTab(t,e){const i={class:this.classes,attrs:this.attrs,on:this.onEvents,directives:!1===this.ripple||!0===this.disable?null:[{name:"ripple",value:this.computedRipple}]};return t(e,i,this.__getContent(t))}},mounted(){this.$tabs.__registerTab(this)},beforeDestroy(){this.$tabs.__unregisterTab(this)},render(t){return this.__renderTab(t,"div")}}),Ns=a["a"].extend({name:"QTabPanels",mixins:[ye,Bn],computed:{classes(){return"q-tab-panels q-panel-parent"+(!0===this.isDark?" q-tab-panels--dark q-dark":"")}},methods:{__renderPanels(t){return t("div",{class:this.classes,directives:this.panelDirectives,on:{...this.qListeners}},this.__getPanelContent(t))}}});const zs={role:"tabpanel"};var qs=a["a"].extend({name:"QTabPanel",mixins:[Fn],render(t){return t("div",{staticClass:"q-tab-panel",attrs:zs,on:{...this.qListeners}},Zt(this,"default"))}});const Bs=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],Fs="M5 5 h10 v10 h-10 v-10 z",Us="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==";var $s=a["a"].extend({name:"QColor",mixins:[Kt,ye,Cn],directives:{TouchPan:bs},props:{value:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:t=>["spectrum","tune","palette"].includes(t)},formatModel:{type:String,default:"auto",validator:t=>["auto","hex","rgb","hexa","rgba"].includes(t)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},data(){return{topView:"auto"===this.formatModel?void 0===this.value||null===this.value||""===this.value||this.value.startsWith("#")?"hex":"rgb":this.formatModel.startsWith("hex")?"hex":"rgb",view:this.defaultView,model:this.__parseModel(this.value||this.defaultValue)}},watch:{value(t){const e=this.__parseModel(t||this.defaultValue);e.hex!==this.model.hex&&(this.model=e)},defaultValue(t){if(!this.value&&t){const e=this.__parseModel(t);e.hex!==this.model.hex&&(this.model=e)}}},computed:{editable(){return!0!==this.disable&&!0!==this.readonly},forceHex(){return"auto"===this.formatModel?null:this.formatModel.indexOf("hex")>-1},forceAlpha(){return"auto"===this.formatModel?null:this.formatModel.indexOf("a")>-1},isHex(){return void 0===this.value||null===this.value||""===this.value||this.value.startsWith("#")},isOutputHex(){return null!==this.forceHex?this.forceHex:this.isHex},formAttrs(){return{type:"hidden",name:this.name,value:this.model[!0===this.isOutputHex?"hex":"rgb"]}},hasAlpha(){return null!==this.forceAlpha?this.forceAlpha:void 0!==this.model.a},currentBgColor(){return{backgroundColor:this.model.rgb||"#000"}},headerClass(){const t=void 0!==this.model.a&&this.model.a<65||rt(this.model)>.4;return"q-color-picker__header-content--"+(t?"light":"dark")},spectrumStyle(){return{background:`hsl(${this.model.h},100%,50%)`}},spectrumPointerStyle(){return{top:100-this.model.v+"%",[!0===this.$q.lang.rtl?"right":"left"]:this.model.s+"%"}},computedPalette(){return void 0!==this.palette&&this.palette.length>0?this.palette:Bs},classes(){return"q-color-picker"+(!0===this.bordered?" q-color-picker--bordered":"")+(!0===this.square?" q-color-picker--square no-border-radius":"")+(!0===this.flat?" q-color-picker--flat no-shadow":"")+(!0===this.disable?" disabled":"")+(!0===this.isDark?" q-color-picker--dark q-dark":"")},attrs(){return!0===this.disable?{"aria-disabled":"true"}:!0===this.readonly?{"aria-readonly":"true"}:void 0}},created(){this.__spectrumChange=Ge(this.__spectrumChange,20)},render(t){const e=[this.__getContent(t)];return void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(e,"push"),!0!==this.noHeader&&e.unshift(this.__getHeader(t)),!0!==this.noFooter&&e.push(this.__getFooter(t)),t("div",{class:this.classes,attrs:this.attrs,on:{...this.qListeners}},e)},methods:{__getHeader(t){const e=[];return!0!==this.noHeaderTabs&&e.push(t(Os,{class:"q-color-picker__header-tabs",props:{value:this.topView,dense:!0,align:"justify"},on:Pt(this,"topVTab",{input:t=>{this.topView=t}})},[t(Ds,{props:{label:"HEX"+(!0===this.hasAlpha?"A":""),name:"hex",ripple:!1}}),t(Ds,{props:{label:"RGB"+(!0===this.hasAlpha?"A":""),name:"rgb",ripple:!1}})])),e.push(t("div",{staticClass:"q-color-picker__header-banner row flex-center no-wrap"},[t("input",{staticClass:"fit",domProps:{value:this.model[this.topView]},attrs:!0!==this.editable?{readonly:!0}:null,on:Pt(this,"topIn",{input:t=>{this.__updateErrorIcon(!0===this.__onEditorChange(t))},change:L,blur:t=>{!0===this.__onEditorChange(t,!0)&&this.$forceUpdate(),this.__updateErrorIcon(!1)}})}),t(ge,{ref:"errorIcon",staticClass:"q-color-picker__error-icon absolute no-pointer-events",props:{name:this.$q.iconSet.type.negative}})])),t("div",{staticClass:"q-color-picker__header relative-position overflow-hidden"},[t("div",{staticClass:"q-color-picker__header-bg absolute-full"}),t("div",{staticClass:"q-color-picker__header-content",class:this.headerClass,style:this.currentBgColor},e)])},__getContent(t){return t(Ns,{props:{value:this.view,animated:!0}},[t(qs,{staticClass:"q-color-picker__spectrum-tab overflow-hidden",props:{name:"spectrum"}},this.__getSpectrumTab(t)),t(qs,{staticClass:"q-pa-md q-color-picker__tune-tab",props:{name:"tune"}},this.__getTuneTab(t)),t(qs,{staticClass:"q-color-picker__palette-tab",props:{name:"palette"}},this.__getPaletteTab(t))])},__getFooter(t){return t("div",{staticClass:"q-color-picker__footer relative-position overflow-hidden"},[t(Os,{staticClass:"absolute-full",props:{value:this.view,dense:!0,align:"justify"},on:Pt(this,"ftIn",{input:t=>{this.view=t}})},[t(Ds,{props:{icon:this.$q.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}}),t(Ds,{props:{icon:this.$q.iconSet.colorPicker.tune,name:"tune",ripple:!1}}),t(Ds,{props:{icon:this.$q.iconSet.colorPicker.palette,name:"palette",ripple:!1}})])])},__getSpectrumTab(t){return[t("div",{ref:"spectrum",staticClass:"q-color-picker__spectrum non-selectable relative-position cursor-pointer",style:this.spectrumStyle,class:{readonly:!0!==this.editable},on:!0===this.editable?Pt(this,"spectrT",{click:this.__spectrumClick,mousedown:this.__activate}):null,directives:!0===this.editable?Pt(this,"spectrDir",[{name:"touch-pan",modifiers:{prevent:!0,stop:!0,mouse:!0},value:this.__spectrumPan}]):null},[t("div",{style:{paddingBottom:"100%"}}),t("div",{staticClass:"q-color-picker__spectrum-white absolute-full"}),t("div",{staticClass:"q-color-picker__spectrum-black absolute-full"}),t("div",{staticClass:"absolute",style:this.spectrumPointerStyle},[void 0!==this.model.hex?t("div",{staticClass:"q-color-picker__spectrum-circle"}):null])]),t("div",{staticClass:"q-color-picker__sliders"},[t(Ms,{staticClass:"q-color-picker__hue non-selectable",props:{value:this.model.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:!0!==this.editable,thumbPath:Fs},on:Pt(this,"hueSlide",{input:this.__onHueChange,change:t=>this.__onHueChange(t,!0)})}),!0===this.hasAlpha?t(Ms,{staticClass:"q-color-picker__alpha non-selectable",props:{value:this.model.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:Us,readonly:!0!==this.editable,hideSelection:!0,thumbPath:Fs},on:Pt(this,"alphaSlide",{input:t=>this.__onNumericChange(t,"a",100),change:t=>this.__onNumericChange(t,"a",100,void 0,!0)})}):null])]},__getTuneTab(t){const e={inputmode:"numeric",maxlength:3,readonly:!0!==this.editable};return[t("div",{staticClass:"row items-center no-wrap"},[t("div",["R"]),t(Ms,{props:{value:this.model.r,min:0,max:255,color:"red",dark:this.isDark,readonly:!0!==this.editable},on:Pt(this,"rSlide",{input:t=>this.__onNumericChange(t,"r",255),change:t=>this.__onNumericChange(t,"r",255,void 0,!0)})}),t("input",{domProps:{value:this.model.r},attrs:e,on:Pt(this,"rIn",{input:t=>this.__onNumericChange(t.target.value,"r",255,t),change:L,blur:t=>this.__onNumericChange(t.target.value,"r",255,t,!0)})})]),t("div",{staticClass:"row items-center no-wrap"},[t("div",["G"]),t(Ms,{props:{value:this.model.g,min:0,max:255,color:"green",dark:this.isDark,readonly:!0!==this.editable},on:Pt(this,"gSlide",{input:t=>this.__onNumericChange(t,"g",255),change:t=>this.__onNumericChange(t,"g",255,void 0,!0)})}),t("input",{domProps:{value:this.model.g},attrs:e,on:Pt(this,"gIn",{input:t=>this.__onNumericChange(t.target.value,"g",255,t),change:L,blur:t=>this.__onNumericChange(t.target.value,"g",255,t,!0)})})]),t("div",{staticClass:"row items-center no-wrap"},[t("div",["B"]),t(Ms,{props:{value:this.model.b,min:0,max:255,color:"blue",readonly:!0!==this.editable,dark:this.isDark},on:Pt(this,"bSlide",{input:t=>this.__onNumericChange(t,"b",255),change:t=>this.__onNumericChange(t,"b",255,void 0,!0)})}),t("input",{domProps:{value:this.model.b},attrs:e,on:Pt(this,"bIn",{input:t=>this.__onNumericChange(t.target.value,"b",255,t),change:L,blur:t=>this.__onNumericChange(t.target.value,"b",255,t,!0)})})]),!0===this.hasAlpha?t("div",{staticClass:"row items-center no-wrap"},[t("div",["A"]),t(Ms,{props:{value:this.model.a,color:"grey",readonly:!0!==this.editable,dark:this.isDark},on:Pt(this,"aSlide",{input:t=>this.__onNumericChange(t,"a",100),change:t=>this.__onNumericChange(t,"a",100,void 0,!0)})}),t("input",{domProps:{value:this.model.a},attrs:e,on:Pt(this,"aIn",{input:t=>this.__onNumericChange(t.target.value,"a",100,t),change:L,blur:t=>this.__onNumericChange(t.target.value,"a",100,t,!0)})})]):null]},__getPaletteTab(t){return[t("div",{staticClass:"row items-center q-color-picker__palette-rows",class:!0===this.editable?"q-color-picker__palette-rows--editable":""},this.computedPalette.map(e=>t("div",{staticClass:"q-color-picker__cube col-auto",style:{backgroundColor:e},on:!0===this.editable?Pt(this,"palette#"+e,{click:()=>{this.__onPalettePick(e)}}):null})))]},__onSpectrumChange(t,e,i){const n=this.$refs.spectrum;if(void 0===n)return;const s=n.clientWidth,r=n.clientHeight,o=n.getBoundingClientRect();let a=Math.min(s,Math.max(0,t-o.left));!0===this.$q.lang.rtl&&(a=s-a);const l=Math.min(r,Math.max(0,e-o.top)),h=Math.round(100*a/s),c=Math.round(100*Math.max(0,Math.min(1,-l/r+1))),u=it({h:this.model.h,s:h,v:c,a:!0===this.hasAlpha?this.model.a:void 0});this.model.s=h,this.model.v=c,this.__update(u,i)},__onHueChange(t,e){t=Math.round(t);const i=it({h:t,s:this.model.s,v:this.model.v,a:!0===this.hasAlpha?this.model.a:void 0});this.model.h=t,this.__update(i,e)},__onNumericChange(t,e,i,n,s){if(void 0!==n&&L(n),!/^[0-9]+$/.test(t))return void(!0===s&&this.$forceUpdate());const r=Math.floor(Number(t));if(r<0||r>i)return void(!0===s&&this.$forceUpdate());const o={r:"r"===e?r:this.model.r,g:"g"===e?r:this.model.g,b:"b"===e?r:this.model.b,a:!0===this.hasAlpha?"a"===e?r:this.model.a:void 0};if("a"!==e){const t=nt(o);this.model.h=t.h,this.model.s=t.s,this.model.v=t.v}if(this.__update(o,s),void 0!==n&&!0!==s&&void 0!==n.target.selectionEnd){const t=n.target.selectionEnd;this.$nextTick(()=>{n.target.setSelectionRange(t,t)})}},__onEditorChange(t,e){let i;const n=t.target.value;if(L(t),"hex"===this.topView){if(n.length!==(!0===this.hasAlpha?9:7)||!/^#[0-9A-Fa-f]+$/.test(n))return!0;i=et(n)}else{let t;if(!n.endsWith(")"))return!0;if(!0!==this.hasAlpha&&n.startsWith("rgb(")){if(t=n.substring(4,n.length-1).split(",").map(t=>parseInt(t,10)),3!==t.length||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(n))return!0}else{if(!0!==this.hasAlpha||!n.startsWith("rgba("))return!0;{if(t=n.substring(5,n.length-1).split(","),4!==t.length||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(n))return!0;for(let i=0;i<3;i++){const e=parseInt(t[i],10);if(e<0||e>255)return!0;t[i]=e}const e=parseFloat(t[3]);if(e<0||e>1)return!0;t[3]=e}}if(t[0]<0||t[0]>255||t[1]<0||t[1]>255||t[2]<0||t[2]>255||!0===this.hasAlpha&&(t[3]<0||t[3]>1))return!0;i={r:t[0],g:t[1],b:t[2],a:!0===this.hasAlpha?100*t[3]:void 0}}const s=nt(i);if(this.model.h=s.h,this.model.s=s.s,this.model.v=s.v,this.__update(i,e),!0!==e){const e=t.target.selectionEnd;this.$nextTick(()=>{t.target.setSelectionRange(e,e)})}},__onPalettePick(t){const e=this.__parseModel(t),i={r:e.r,g:e.g,b:e.b,a:e.a};void 0===i.a&&(i.a=this.model.a),this.model.h=e.h,this.model.s=e.s,this.model.v=e.v,this.__update(i,!0)},__update(t,e){this.model.hex=J(t),this.model.rgb=tt(t),this.model.r=t.r,this.model.g=t.g,this.model.b=t.b,this.model.a=t.a;const i=this.model[!0===this.isOutputHex?"hex":"rgb"];this.$emit("input",i),!0===e&&this.$emit("change",i)},__updateErrorIcon(t){void 0!==this.$refs.errorIcon&&(this.$refs.errorIcon.$el.style.opacity=t?1:0)},__parseModel(t){const e=void 0!==this.forceAlpha?this.forceAlpha:"auto"===this.formatModel?null:this.formatModel.indexOf("a")>-1;if("string"!==typeof t||0===t.length||!0!==gs.anyColor(t.replace(/ /g,"")))return{h:0,s:0,v:0,r:0,g:0,b:0,a:!0===e?100:void 0,hex:void 0,rgb:void 0};const i=st(t);return!0===e&&void 0===i.a&&(i.a=100),i.hex=J(i),i.rgb=tt(i),Object.assign(i,nt(i))},__spectrumPan(t){t.isFinal?this.__onSpectrumChange(t.position.left,t.position.top,!0):this.__spectrumChange(t)},__spectrumChange(t){this.__onSpectrumChange(t.position.left,t.position.top)},__spectrumClick(t){this.__onSpectrumChange(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset,!0)},__activate(t){this.__onSpectrumChange(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset)}}});const Vs=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Hs(t,e,i){return"[object Date]"===Object.prototype.toString.call(t)&&(i=t.getDate(),e=t.getMonth()+1,t=t.getFullYear()),Ks(Zs(t,e,i))}function Gs(t,e,i){return Js(Qs(t,e,i))}function Ws(t){return 0===Ys(t)}function js(t,e){return e<=6?31:e<=11||Ws(t)?30:29}function Ys(t){const e=Vs.length;let i,n,s,r,o,a=Vs[0];if(t<a||t>=Vs[e-1])throw new Error("Invalid Jalaali year "+t);for(o=1;o<e;o+=1){if(i=Vs[o],n=i-a,t<i)break;a=i}return r=t-a,n-r<6&&(r=r-n+33*tr(n+4,33)),s=er(er(r+1,33)-1,4),-1===s&&(s=4),s}function Xs(t,e){const i=Vs.length,n=t+621;let s,r,o,a,l,h=-14,c=Vs[0];if(t<c||t>=Vs[i-1])throw new Error("Invalid Jalaali year "+t);for(l=1;l<i;l+=1){if(s=Vs[l],r=s-c,t<s)break;h=h+8*tr(r,33)+tr(er(r,33),4),c=s}a=t-c,h=h+8*tr(a,33)+tr(er(a,33)+3,4),4===er(r,33)&&r-a===4&&(h+=1);const u=tr(n,4)-tr(3*(tr(n,100)+1),4)-150,d=20+h-u;return e||(r-a<6&&(a=a-r+33*tr(r+4,33)),o=er(er(a+1,33)-1,4),-1===o&&(o=4)),{leap:o,gy:n,march:d}}function Qs(t,e,i){const n=Xs(t,!0);return Zs(n.gy,3,n.march)+31*(e-1)-tr(e,7)*(e-7)+i-1}function Ks(t){const e=Js(t).gy;let i,n,s,r=e-621;const o=Xs(r,!1),a=Zs(e,3,o.march);if(s=t-a,s>=0){if(s<=185)return n=1+tr(s,31),i=er(s,31)+1,{jy:r,jm:n,jd:i};s-=186}else r-=1,s+=179,1===o.leap&&(s+=1);return n=7+tr(s,30),i=er(s,30)+1,{jy:r,jm:n,jd:i}}function Zs(t,e,i){let n=tr(1461*(t+tr(e-8,6)+100100),4)+tr(153*er(e+9,12)+2,5)+i-34840408;return n=n-tr(3*tr(t+100100+tr(e-8,6),100),4)+752,n}function Js(t){let e=4*t+139361631;e=e+4*tr(3*tr(4*t+183187720,146097),4)-3908;const i=5*tr(er(e,1461),4)+308,n=tr(er(i,153),5)+1,s=er(tr(i,153),12)+1,r=tr(e,1461)-100100+tr(8-s,6);return{gy:r,gm:s,gd:n}}function tr(t,e){return~~(t/e)}function er(t,e){return t-~~(t/e)*e}const ir=["gregorian","persian"];var nr={mixins:[ye,Cn,Kt],props:{value:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>ir.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},computed:{computedMask(){return this.__getMask()},computedLocale(){return this.__getLocale()},editable(){return!0!==this.disable&&!0!==this.readonly},computedColor(){return this.color||"primary"},computedTextColor(){return this.textColor||"white"},computedTabindex(){return!0===this.editable?0:-1},headerClass(){const t=[];return void 0!==this.color&&t.push("bg-"+this.color),void 0!==this.textColor&&t.push("text-"+this.textColor),t.join(" ")}},methods:{__getLocale(){return void 0!==this.locale?{...this.$q.lang.date,...this.locale}:this.$q.lang.date},__getCurrentDate(t){const e=new Date,i=!0===t?null:0;if("persian"===this.calendar){const t=Hs(e);return{year:t.jy,month:t.jm,day:t.jd}}return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:i,minute:i,second:i,millisecond:i}},__getCurrentTime(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}},__getDayHash(t){return t.year+"/"+At(t.month)+"/"+At(t.day)}}};const sr=864e5,rr=36e5,or=6e4,ar="YYYY-MM-DDTHH:mm:ss.SSSZ",lr=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,hr=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,cr={};function ur(t,e){const i="("+e.days.join("|")+")",n=t+i;if(void 0!==cr[n])return cr[n];const s="("+e.daysShort.join("|")+")",r="("+e.months.join("|")+")",o="("+e.monthsShort.join("|")+")",a={};let l=0;const h=t.replace(hr,t=>{switch(l++,t){case"YY":return a.YY=l,"(-?\\d{1,2})";case"YYYY":return a.YYYY=l,"(-?\\d{1,4})";case"M":return a.M=l,"(\\d{1,2})";case"MM":return a.M=l,"(\\d{2})";case"MMM":return a.MMM=l,o;case"MMMM":return a.MMMM=l,r;case"D":return a.D=l,"(\\d{1,2})";case"Do":return a.D=l++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return a.D=l,"(\\d{2})";case"H":return a.H=l,"(\\d{1,2})";case"HH":return a.H=l,"(\\d{2})";case"h":return a.h=l,"(\\d{1,2})";case"hh":return a.h=l,"(\\d{2})";case"m":return a.m=l,"(\\d{1,2})";case"mm":return a.m=l,"(\\d{2})";case"s":return a.s=l,"(\\d{1,2})";case"ss":return a.s=l,"(\\d{2})";case"S":return a.S=l,"(\\d{1})";case"SS":return a.S=l,"(\\d{2})";case"SSS":return a.S=l,"(\\d{3})";case"A":return a.A=l,"(AM|PM)";case"a":return a.a=l,"(am|pm)";case"aa":return a.aa=l,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return i;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return a.Z=l,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return a.ZZ=l,"(Z|[+-]\\d{2}\\d{2})";case"X":return a.X=l,"(-?\\d+)";case"x":return a.x=l,"(-?\\d{4,})";default:return l--,"["===t[0]&&(t=t.substring(1,t.length-1)),t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:a,regex:new RegExp("^"+h)};return cr[n]=c,c}function dr(t,e){return void 0!==t?t:void 0!==e?e.date:Y.date}function pr(t,e=""){const i=t>0?"-":"+",n=Math.abs(t),s=Math.floor(n/60),r=n%60;return i+At(s)+e+At(r)}function fr(t,e,i,n,s){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(void 0!==s&&Object.assign(r,s),void 0===t||null===t||""===t||"string"!==typeof t)return r;void 0===e&&(e=ar);const o=dr(i,K.props),a=o.months,l=o.monthsShort,{regex:h,map:c}=ur(e,o),u=t.match(h);if(null===u)return r;let d="";if(void 0!==c.X||void 0!==c.x){const t=parseInt(u[void 0!==c.X?c.X:c.x],10);if(!0===isNaN(t)||t<0)return r;const e=new Date(t*(void 0!==c.X?1e3:1));r.year=e.getFullYear(),r.month=e.getMonth()+1,r.day=e.getDate(),r.hour=e.getHours(),r.minute=e.getMinutes(),r.second=e.getSeconds(),r.millisecond=e.getMilliseconds()}else{if(void 0!==c.YYYY)r.year=parseInt(u[c.YYYY],10);else if(void 0!==c.YY){const t=parseInt(u[c.YY],10);r.year=t<0?t:2e3+t}if(void 0!==c.M){if(r.month=parseInt(u[c.M],10),r.month<1||r.month>12)return r}else void 0!==c.MMM?r.month=l.indexOf(u[c.MMM])+1:void 0!==c.MMMM&&(r.month=a.indexOf(u[c.MMMM])+1);if(void 0!==c.D){if(r.day=parseInt(u[c.D],10),null===r.year||null===r.month||r.day<1)return r;const t="persian"!==n?new Date(r.year,r.month,0).getDate():js(r.year,r.month);if(r.day>t)return r}void 0!==c.H?r.hour=parseInt(u[c.H],10)%24:void 0!==c.h&&(r.hour=parseInt(u[c.h],10)%12,(c.A&&"PM"===u[c.A]||c.a&&"pm"===u[c.a]||c.aa&&"p.m."===u[c.aa])&&(r.hour+=12),r.hour=r.hour%24),void 0!==c.m&&(r.minute=parseInt(u[c.m],10)%60),void 0!==c.s&&(r.second=parseInt(u[c.s],10)%60),void 0!==c.S&&(r.millisecond=parseInt(u[c.S],10)*10**(3-u[c.S].length)),void 0===c.Z&&void 0===c.ZZ||(d=void 0!==c.Z?u[c.Z].replace(":",""):u[c.ZZ],r.timezoneOffset=("+"===d[0]?-1:1)*(60*d.slice(1,3)+1*d.slice(3,5)))}return r.dateHash=At(r.year,6)+"/"+At(r.month)+"/"+At(r.day),r.timeHash=At(r.hour)+":"+At(r.minute)+":"+At(r.second)+d,r}function mr(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const i=new Date(e.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const n=e.getTimezoneOffset()-i.getTimezoneOffset();e.setHours(e.getHours()-n);const s=(e-i)/(7*sr);return 1+Math.floor(s)}function gr(t,e,i){const n=new Date(t),s="set"+(!0===i?"UTC":"");switch(e){case"year":case"years":n[s+"Month"](0);case"month":case"months":n[s+"Date"](1);case"day":case"days":case"date":n[s+"Hours"](0);case"hour":case"hours":n[s+"Minutes"](0);case"minute":case"minutes":n[s+"Seconds"](0);case"second":case"seconds":n[s+"Milliseconds"](0)}return n}function vr(t,e,i){return(t.getTime()-t.getTimezoneOffset()*or-(e.getTime()-e.getTimezoneOffset()*or))/i}function _r(t,e,i="days"){const n=new Date(t),s=new Date(e);switch(i){case"years":case"year":return n.getFullYear()-s.getFullYear();case"months":case"month":return 12*(n.getFullYear()-s.getFullYear())+n.getMonth()-s.getMonth();case"days":case"day":case"date":return vr(gr(n,"day"),gr(s,"day"),sr);case"hours":case"hour":return vr(gr(n,"hour"),gr(s,"hour"),rr);case"minutes":case"minute":return vr(gr(n,"minute"),gr(s,"minute"),or);case"seconds":case"second":return vr(gr(n,"second"),gr(s,"second"),1e3)}}function yr(t){return _r(t,gr(t,"year"),"days")+1}function br(t){if(t>=11&&t<=13)return t+"th";switch(t%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}const xr={YY(t,e,i){const n=this.YYYY(t,e,i)%100;return n>=0?At(n):"-"+At(Math.abs(n))},YYYY(t,e,i){return void 0!==i&&null!==i?i:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return At(t.getMonth()+1)},MMM(t,e){return e.monthsShort[t.getMonth()]},MMMM(t,e){return e.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return br(this.Q(t))},D(t){return t.getDate()},Do(t){return br(t.getDate())},DD(t){return At(t.getDate())},DDD(t){return yr(t)},DDDD(t){return At(yr(t),3)},d(t){return t.getDay()},dd(t,e){return this.dddd(t,e).slice(0,2)},ddd(t,e){return e.daysShort[t.getDay()]},dddd(t,e){return e.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return mr(t)},ww(t){return At(mr(t))},H(t){return t.getHours()},HH(t){return At(t.getHours())},h(t){const e=t.getHours();return 0===e?12:e>12?e%12:e},hh(t){return At(this.h(t))},m(t){return t.getMinutes()},mm(t){return At(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return At(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return At(Math.floor(t.getMilliseconds()/10))},SSS(t){return At(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,e,i,n){const s=void 0===n||null===n?t.getTimezoneOffset():n;return pr(s,":")},ZZ(t,e,i,n){const s=void 0===n||null===n?t.getTimezoneOffset():n;return pr(s)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Sr(t,e,i,n,s){if(0!==t&&!t||t===1/0||t===-1/0)return;const r=new Date(t);if(isNaN(r))return;void 0===e&&(e=ar);const o=dr(i,K.props);return e.replace(lr,(t,e)=>t in xr?xr[t](r,o,n,s):void 0===e?t:e.split("\\]").join("]"))}const wr=20,Cr=["Calendar","Years","Months"],Mr=t=>Cr.includes(t),Tr=t=>/^-?[\d]+\/[0-1]\d$/.test(t),kr=" — ";var Er=a["a"].extend({name:"QDate",mixins:[nr],props:{multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Tr},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Tr},navigationMaxYearMonth:{type:String,validator:Tr},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mr}},data(){const t=this.__getMask(),e=this.__getLocale(),i=this.__getViewModel(t,e),n=i.year,s=!0===this.$q.lang.rtl?"right":"left";return{view:this.defaultView,monthDirection:s,yearDirection:s,startYear:n-n%wr-(n<0?wr:0),editRange:void 0,innerMask:t,innerLocale:e,viewModel:i}},watch:{value(t){if(this.lastEmitValue===t)this.lastEmitValue=0;else{const{year:t,month:e}=this.__getViewModel(this.innerMask,this.innerLocale);this.__updateViewModel(t,e)}},view(){void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus()},"viewModel.year"(t){this.$emit("navigation",{year:t,month:this.viewModel.month})},"viewModel.month"(t){this.$emit("navigation",{year:this.viewModel.year,month:t})},computedMask(t){this.__updateValue(t,this.innerLocale,"mask"),this.innerMask=t},computedLocale(t){this.__updateValue(this.innerMask,t,"locale"),this.innerLocale=t}},computed:{classes(){const t=!0===this.landscape?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${!0===this.minimal?"minimal":"standard"}`+(!0===this.isDark?" q-date--dark q-dark":"")+(!0===this.bordered?" q-date--bordered":"")+(!0===this.square?" q-date--square no-border-radius":"")+(!0===this.flat?" q-date--flat no-shadow":"")+(!0===this.disable?" disabled":!0===this.readonly?" q-date--readonly":"")},isImmediate(){return!0===this.emitImmediately&&!0!==this.multiple&&!0!==this.range},normalizedModel(){return!0===Array.isArray(this.value)?this.value:null!==this.value&&void 0!==this.value?[this.value]:[]},daysModel(){return this.normalizedModel.filter(t=>"string"===typeof t).map(t=>this.__decodeString(t,this.innerMask,this.innerLocale)).filter(t=>null!==t.dateHash&&null!==t.day&&null!==t.month&&null!==t.year)},rangeModel(){const t=t=>this.__decodeString(t,this.innerMask,this.innerLocale);return this.normalizedModel.filter(t=>!0===jn(t)&&void 0!==t.from&&void 0!==t.to).map(e=>({from:t(e.from),to:t(e.to)})).filter(t=>null!==t.from.dateHash&&null!==t.to.dateHash&&t.from.dateHash<t.to.dateHash)},getNativeDateFn(){return"persian"!==this.calendar?t=>new Date(t.year,t.month-1,t.day):t=>{const e=Gs(t.year,t.month,t.day);return new Date(e.gy,e.gm-1,e.gd)}},encodeObjectFn(){return"persian"===this.calendar?this.__getDayHash:(t,e,i)=>Sr(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),void 0===e?this.innerMask:e,void 0===i?this.innerLocale:i,t.year,t.timezoneOffset)},daysInModel(){return this.daysModel.length+this.rangeModel.reduce((t,e)=>t+1+_r(this.getNativeDateFn(e.to),this.getNativeDateFn(e.from)),0)},headerTitle(){if(void 0!==this.title&&null!==this.title&&this.title.length>0)return this.title;if(void 0!==this.editRange){const t=this.editRange.init,e=this.getNativeDateFn(t);return this.innerLocale.daysShort[e.getDay()]+", "+this.innerLocale.monthsShort[t.month-1]+" "+t.day+kr+"?"}if(0===this.daysInModel)return kr;if(this.daysInModel>1)return`${this.daysInModel} ${this.innerLocale.pluralDay}`;const t=this.daysModel[0],e=this.getNativeDateFn(t);return!0===isNaN(e.valueOf())?kr:void 0!==this.innerLocale.headerTitle?this.innerLocale.headerTitle(e,t):this.innerLocale.daysShort[e.getDay()]+", "+this.innerLocale.monthsShort[t.month-1]+" "+t.day},headerSubtitle(){if(void 0!==this.subtitle&&null!==this.subtitle&&this.subtitle.length>0)return this.subtitle;if(0===this.daysInModel)return kr;if(this.daysInModel>1){const t=this.minSelectedModel,e=this.maxSelectedModel,i=this.innerLocale.monthsShort;return i[t.month-1]+(t.year!==e.year?" "+t.year+kr+i[e.month-1]+" ":t.month!==e.month?kr+i[e.month-1]:"")+" "+e.year}return this.daysModel[0].year},minSelectedModel(){const t=this.daysModel.concat(this.rangeModel.map(t=>t.from)).sort((t,e)=>t.year-e.year||t.month-e.month);return t[0]},maxSelectedModel(){const t=this.daysModel.concat(this.rangeModel.map(t=>t.to)).sort((t,e)=>e.year-t.year||e.month-t.month);return t[0]},dateArrow(){const t=[this.$q.iconSet.datetime.arrowLeft,this.$q.iconSet.datetime.arrowRight];return!0===this.$q.lang.rtl?t.reverse():t},computedFirstDayOfWeek(){return void 0!==this.firstDayOfWeek?Number(this.firstDayOfWeek):this.innerLocale.firstDayOfWeek},daysOfWeek(){const t=this.innerLocale.daysShort,e=this.computedFirstDayOfWeek;return e>0?t.slice(e,7).concat(t.slice(0,e)):t},daysInMonth(){const t=this.viewModel;return"persian"!==this.calendar?new Date(t.year,t.month,0).getDate():js(t.year,t.month)},today(){return this.__getCurrentDate()},evtColor(){return"function"===typeof this.eventColor?this.eventColor:()=>this.eventColor},minNav(){if(void 0!==this.navigationMinYearMonth){const t=this.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}},maxNav(){if(void 0!==this.navigationMaxYearMonth){const t=this.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}},navBoundaries(){const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return void 0!==this.minNav&&this.minNav.year>=this.viewModel.year&&(t.year.prev=!1,this.minNav.year===this.viewModel.year&&this.minNav.month>=this.viewModel.month&&(t.month.prev=!1)),void 0!==this.maxNav&&this.maxNav.year<=this.viewModel.year&&(t.year.next=!1,this.maxNav.year===this.viewModel.year&&this.maxNav.month<=this.viewModel.month&&(t.month.next=!1)),t},daysMap(){const t={};return this.daysModel.forEach(e=>{const i=this.__getMonthHash(e);void 0===t[i]&&(t[i]=[]),t[i].push(e.day)}),t},rangeMap(){const t={};return this.rangeModel.forEach(e=>{const i=this.__getMonthHash(e.from),n=this.__getMonthHash(e.to);if(void 0===t[i]&&(t[i]=[]),t[i].push({from:e.from.day,to:i===n?e.to.day:void 0,range:e}),i<n){let i;const{year:s,month:r}=e.from,o=r<12?{year:s,month:r+1}:{year:s+1,month:1};while((i=this.__getMonthHash(o))<=n)void 0===t[i]&&(t[i]=[]),t[i].push({from:void 0,to:i===n?e.to.day:void 0,range:e}),o.month++,o.month>12&&(o.year++,o.month=1)}}),t},rangeView(){if(void 0===this.editRange)return;const{init:t,initHash:e,final:i,finalHash:n}=this.editRange,[s,r]=e<=n?[t,i]:[i,t],o=this.__getMonthHash(s),a=this.__getMonthHash(r);if(o!==this.viewMonthHash&&a!==this.viewMonthHash)return;const l={};return o===this.viewMonthHash?(l.from=s.day,l.includeFrom=!0):l.from=1,a===this.viewMonthHash?(l.to=r.day,l.includeTo=!0):l.to=this.daysInMonth,l},viewMonthHash(){return this.__getMonthHash(this.viewModel)},selectionDaysMap(){const t={};if(void 0===this.options){for(let e=1;e<=this.daysInMonth;e++)t[e]=!0;return t}const e="function"===typeof this.options?this.options:t=>this.options.includes(t);for(let i=1;i<=this.daysInMonth;i++){const n=this.viewMonthHash+"/"+At(i);t[i]=e(n)}return t},eventDaysMap(){const t={};if(void 0===this.events)for(let e=1;e<=this.daysInMonth;e++)t[e]=!1;else{const e="function"===typeof this.events?this.events:t=>this.events.includes(t);for(let i=1;i<=this.daysInMonth;i++){const n=this.viewMonthHash+"/"+At(i);t[i]=!0===e(n)&&this.evtColor(n)}}return t},viewDays(){let t,e;const{year:i,month:n}=this.viewModel;if("persian"!==this.calendar)t=new Date(i,n-1,1),e=new Date(i,n-1,0).getDate();else{const s=Gs(i,n,1);t=new Date(s.gy,s.gm-1,s.gd);let r=n-1,o=i;0===r&&(r=12,o--),e=js(o,r)}return{days:t.getDay()-this.computedFirstDayOfWeek-1,endDay:e}},days(){const t=[],{days:e,endDay:i}=this.viewDays,n=e<0?e+7:e;if(n<6)for(let o=i-n;o<=i;o++)t.push({i:o,fill:!0});const s=t.length;for(let o=1;o<=this.daysInMonth;o++){const e={i:o,event:this.eventDaysMap[o],classes:[]};!0===this.selectionDaysMap[o]&&(e.in=!0,e.flat=!0),t.push(e)}if(void 0!==this.daysMap[this.viewMonthHash]&&this.daysMap[this.viewMonthHash].forEach(e=>{const i=s+e-1;Object.assign(t[i],{selected:!0,unelevated:!0,flat:!1,color:this.computedColor,textColor:this.computedTextColor})}),void 0!==this.rangeMap[this.viewMonthHash]&&this.rangeMap[this.viewMonthHash].forEach(e=>{if(void 0!==e.from){const i=s+e.from-1,n=s+(e.to||this.daysInMonth)-1;for(let s=i;s<=n;s++)Object.assign(t[s],{range:e.range,unelevated:!0,color:this.computedColor,textColor:this.computedTextColor});Object.assign(t[i],{rangeFrom:!0,flat:!1}),void 0!==e.to&&Object.assign(t[n],{rangeTo:!0,flat:!1})}else if(void 0!==e.to){const i=s+e.to-1;for(let n=s;n<=i;n++)Object.assign(t[n],{range:e.range,unelevated:!0,color:this.computedColor,textColor:this.computedTextColor});Object.assign(t[i],{flat:!1,rangeTo:!0})}else{const i=s+this.daysInMonth-1;for(let n=s;n<=i;n++)Object.assign(t[n],{range:e.range,unelevated:!0,color:this.computedColor,textColor:this.computedTextColor})}}),void 0!==this.rangeView){const e=s+this.rangeView.from-1,i=s+this.rangeView.to-1;for(let n=e;n<=i;n++)t[n].color=this.computedColor,t[n].editRange=!0;!0===this.rangeView.includeFrom&&(t[e].editRangeFrom=!0),!0===this.rangeView.includeTo&&(t[i].editRangeTo=!0)}this.viewModel.year===this.today.year&&this.viewModel.month===this.today.month&&(t[s+this.today.day-1].today=!0);const r=t.length%7;if(r>0){const e=7-r;for(let i=1;i<=e;i++)t.push({i:i,fill:!0})}return t.forEach(t=>{let e="q-date__calendar-item ";!0===t.fill?e+="q-date__calendar-item--fill":(e+="q-date__calendar-item--"+(!0===t.in?"in":"out"),void 0!==t.range&&(e+=" q-date__range"+(!0===t.rangeTo?"-to":!0===t.rangeFrom?"-from":"")),!0===t.editRange&&(e+=` q-date__edit-range${!0===t.editRangeFrom?"-from":""}${!0===t.editRangeTo?"-to":""}`),void 0===t.range&&!0!==t.editRange||(e+=" text-"+t.color)),t.classes=e}),t},attrs(){return!0===this.disable?{"aria-disabled":"true"}:!0===this.readonly?{"aria-readonly":"true"}:void 0}},methods:{setToday(){const t=this.today,e=this.daysMap[this.__getMonthHash(t)];void 0!==e&&!1!==e.includes(t.day)||this.__addToModel(t),this.setCalendarTo(this.today.year,this.today.month)},setView(t){!0===Mr(t)&&(this.view=t)},offsetCalendar(t,e){["month","year"].includes(t)&&this["__goTo"+("month"===t?"Month":"Year")](!0===e?-1:1)},setCalendarTo(t,e){this.view="Calendar",this.__updateViewModel(t,e)},setEditingRange(t,e){if(!1===this.range||!t)return void(this.editRange=void 0);const i=Object.assign({...this.viewModel},t),n=void 0!==e?Object.assign({...this.viewModel},e):i;this.editRange={init:i,initHash:this.__getDayHash(i),final:n,finalHash:this.__getDayHash(n)},this.setCalendarTo(i.year,i.month)},__getMask(){return"persian"===this.calendar?"YYYY/MM/DD":this.mask},__decodeString(t,e,i){return fr(t,e,i,this.calendar,{hour:0,minute:0,second:0,millisecond:0})},__getViewModel(t,e){const i=!0===Array.isArray(this.value)?this.value:this.value?[this.value]:[];if(0===i.length)return this.__getDefaultViewModel();const n=this.__decodeString(void 0!==i[0].from?i[0].from:i[0],t,e);return null===n.dateHash?this.__getDefaultViewModel():n},__getDefaultViewModel(){let t,e;if(void 0!==this.defaultYearMonth){const i=this.defaultYearMonth.split("/");t=parseInt(i[0],10),e=parseInt(i[1],10)}else{const i=void 0!==this.today?this.today:this.__getCurrentDate();t=i.year,e=i.month}return{year:t,month:e,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+At(e)+"/01"}},__getHeader(t){if(!0!==this.minimal)return t("div",{staticClass:"q-date__header",class:this.headerClass},[t("div",{staticClass:"relative-position"},[t("transition",{props:{name:"q-transition--fade"}},[t("div",{key:"h-yr-"+this.headerSubtitle,staticClass:"q-date__header-subtitle q-date__header-link",class:"Years"===this.view?"q-date__header-link--active":"cursor-pointer",attrs:{tabindex:this.computedTabindex},on:Pt(this,"vY",{click:()=>{this.view="Years"},keyup:t=>{13===t.keyCode&&(this.view="Years")}})},[this.headerSubtitle])])]),t("div",{staticClass:"q-date__header-title relative-position flex no-wrap"},[t("div",{staticClass:"relative-position col"},[t("transition",{props:{name:"q-transition--fade"}},[t("div",{key:"h-sub"+this.headerTitle,staticClass:"q-date__header-title-label q-date__header-link",class:"Calendar"===this.view?"q-date__header-link--active":"cursor-pointer",attrs:{tabindex:this.computedTabindex},on:Pt(this,"vC",{click:()=>{this.view="Calendar"},keyup:t=>{13===t.keyCode&&(this.view="Calendar")}})},[this.headerTitle])])]),!0===this.todayBtn?t(li,{staticClass:"q-date__header-today self-start",props:{icon:this.$q.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:this.computedTabindex},on:Pt(this,"today",{click:this.setToday})}):null])])},__getNavigation(t,{label:e,view:i,key:n,dir:s,goTo:r,boundaries:o,cls:a}){return[t("div",{staticClass:"row items-center q-date__arrow"},[t(li,{props:{round:!0,dense:!0,size:"sm",flat:!0,icon:this.dateArrow[0],tabindex:this.computedTabindex,disable:!1===o.prev},on:Pt(this,"go-#"+i,{click(){r(-1)}})})]),t("div",{staticClass:"relative-position overflow-hidden flex flex-center"+a},[t("transition",{props:{name:"q-transition--jump-"+s}},[t("div",{key:n},[t(li,{props:{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:this.computedTabindex},on:Pt(this,"view#"+i,{click:()=>{this.view=i}})})])])]),t("div",{staticClass:"row items-center q-date__arrow"},[t(li,{props:{round:!0,dense:!0,size:"sm",flat:!0,icon:this.dateArrow[1],tabindex:this.computedTabindex,disable:!1===o.next},on:Pt(this,"go+#"+i,{click(){r(1)}})})])]},__getCalendarView(t){return[t("div",{key:"calendar-view",staticClass:"q-date__view q-date__calendar"},[t("div",{staticClass:"q-date__navigation row items-center no-wrap"},this.__getNavigation(t,{label:this.innerLocale.months[this.viewModel.month-1],view:"Months",key:this.viewModel.month,dir:this.monthDirection,goTo:this.__goToMonth,boundaries:this.navBoundaries.month,cls:" col"}).concat(this.__getNavigation(t,{label:this.viewModel.year,view:"Years",key:this.viewModel.year,dir:this.yearDirection,goTo:this.__goToYear,boundaries:this.navBoundaries.year,cls:""}))),t("div",{staticClass:"q-date__calendar-weekdays row items-center no-wrap"},this.daysOfWeek.map(e=>t("div",{staticClass:"q-date__calendar-item"},[t("div",[e])]))),t("div",{staticClass:"q-date__calendar-days-container relative-position overflow-hidden"},[t("transition",{props:{name:"q-transition--slide-"+this.monthDirection}},[t("div",{key:this.viewMonthHash,staticClass:"q-date__calendar-days fit"},this.days.map(e=>t("div",{staticClass:e.classes},[!0===e.in?t(li,{staticClass:!0===e.today?"q-date__today":null,props:{dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:this.computedTabindex},on:Pt(this,"day#"+e.i,{click:()=>{this.__onDayClick(e.i)},mouseover:()=>{this.__onDayMouseover(e.i)}})},!1!==e.event?[t("div",{staticClass:"q-date__event bg-"+e.event})]:null):t("div",[e.i])])))])])])]},__getMonthsView(t){const e=this.viewModel.year===this.today.year,i=t=>void 0!==this.minNav&&this.viewModel.year===this.minNav.year&&this.minNav.month>t||void 0!==this.maxNav&&this.viewModel.year===this.maxNav.year&&this.maxNav.month<t,n=this.innerLocale.monthsShort.map((n,s)=>{const r=this.viewModel.month===s+1;return t("div",{staticClass:"q-date__months-item flex flex-center"},[t(li,{staticClass:!0===e&&this.today.month===s+1?"q-date__today":null,props:{flat:!0!==r,label:n,unelevated:r,color:!0===r?this.computedColor:null,textColor:!0===r?this.computedTextColor:null,tabindex:this.computedTabindex,disable:i(s+1)},on:Pt(this,"month#"+s,{click:()=>{this.__setMonth(s+1)}})})])});return!0===this.yearsInMonthView&&n.unshift(t("div",{staticClass:"row no-wrap full-width"},[this.__getNavigation(t,{label:this.viewModel.year,view:"Years",key:this.viewModel.year,dir:this.yearDirection,goTo:this.__goToYear,boundaries:this.navBoundaries.year,cls:" col"})])),t("div",{key:"months-view",staticClass:"q-date__view q-date__months flex flex-center"},n)},__getYearsView(t){const e=this.startYear,i=e+wr,n=[],s=t=>void 0!==this.minNav&&this.minNav.year>t||void 0!==this.maxNav&&this.maxNav.year<t;for(let r=e;r<=i;r++){const e=this.viewModel.year===r;n.push(t("div",{staticClass:"q-date__years-item flex flex-center"},[t(li,{key:"yr"+r,staticClass:this.today.year===r?"q-date__today":null,props:{flat:!e,label:r,dense:!0,unelevated:e,color:!0===e?this.computedColor:null,textColor:!0===e?this.computedTextColor:null,tabindex:this.computedTabindex,disable:s(r)},on:Pt(this,"yr#"+r,{click:()=>{this.__setYear(r)}})})]))}return t("div",{staticClass:"q-date__view q-date__years flex flex-center"},[t("div",{staticClass:"col-auto"},[t(li,{props:{round:!0,dense:!0,flat:!0,icon:this.dateArrow[0],tabindex:this.computedTabindex,disable:s(e)},on:Pt(this,"y-",{click:()=>{this.startYear-=wr}})})]),t("div",{staticClass:"q-date__years-content col self-stretch row items-center"},n),t("div",{staticClass:"col-auto"},[t(li,{props:{round:!0,dense:!0,flat:!0,icon:this.dateArrow[1],tabindex:this.computedTabindex,disable:s(i)},on:Pt(this,"y+",{click:()=>{this.startYear+=wr}})})])])},__goToMonth(t){let e=this.viewModel.year,i=Number(this.viewModel.month)+t;13===i?(i=1,e++):0===i&&(i=12,e--),this.__updateViewModel(e,i),!0===this.isImmediate&&this.__emitImmediately("month")},__goToYear(t){const e=Number(this.viewModel.year)+t;this.__updateViewModel(e,this.viewModel.month),!0===this.isImmediate&&this.__emitImmediately("year")},__setYear(t){this.__updateViewModel(t,this.viewModel.month),this.view="Years"===this.defaultView?"Months":"Calendar",!0===this.isImmediate&&this.__emitImmediately("year")},__setMonth(t){this.__updateViewModel(this.viewModel.year,t),this.view="Calendar",!0===this.isImmediate&&this.__emitImmediately("month")},__getMonthHash(t){return t.year+"/"+At(t.month)},__toggleDate(t,e){const i=this.daysMap[e],n=void 0!==i&&!0===i.includes(t.day)?this.__removeFromModel:this.__addToModel;n(t)},__getShortDate(t){return{year:t.year,month:t.month,day:t.day}},__onDayClick(t){const e={...this.viewModel,day:t};if(!1!==this.range)if(void 0===this.editRange){const i=this.days.find(e=>!0!==e.fill&&e.i===t);if(void 0!==i.range)return void this.__removeFromModel({target:e,from:i.range.from,to:i.range.to});if(!0===i.selected)return void this.__removeFromModel(e);const n=this.__getDayHash(e);this.editRange={init:e,initHash:n,final:e,finalHash:n},this.$emit("range-start",this.__getShortDate(e))}else{const t=this.editRange.initHash,i=this.__getDayHash(e),n=t<=i?{from:this.editRange.init,to:e}:{from:e,to:this.editRange.init};this.editRange=void 0,this.__addToModel(t===i?e:{target:e,...n}),this.$emit("range-end",{from:this.__getShortDate(n.from),to:this.__getShortDate(n.to)})}else this.__toggleDate(e,this.viewMonthHash)},__onDayMouseover(t){if(void 0!==this.editRange){const e={...this.viewModel,day:t};Object.assign(this.editRange,{final:e,finalHash:this.__getDayHash(e)})}},__updateViewModel(t,e){void 0!==this.minNav&&t<=this.minNav.year&&(t=this.minNav.year,e<this.minNav.month&&(e=this.minNav.month)),void 0!==this.maxNav&&t>=this.maxNav.year&&(t=this.maxNav.year,e>this.maxNav.month&&(e=this.maxNav.month));const i=t+"/"+At(e)+"/01";i!==this.viewModel.dateHash&&(this.monthDirection=this.viewModel.dateHash<i===(!0!==this.$q.lang.rtl)?"left":"right",t!==this.viewModel.year&&(this.yearDirection=this.monthDirection),this.$nextTick(()=>{this.startYear=t-t%wr-(t<0?wr:0),Object.assign(this.viewModel,{year:t,month:e,day:1,dateHash:i})}))},__emitValue(t,e,i){const n=null!==t&&1===t.length&&!1===this.multiple?t[0]:t;this.lastEmitValue=n;const{reason:s,details:r}=this.__getEmitParams(e,i);this.$emit("input",n,s,r)},__emitImmediately(t){const e=void 0!==this.daysModel[0]&&null!==this.daysModel[0].dateHash?{...this.daysModel[0]}:{...this.viewModel};this.$nextTick(()=>{e.year=this.viewModel.year,e.month=this.viewModel.month;const i="persian"!==this.calendar?new Date(e.year,e.month,0).getDate():js(e.year,e.month);e.day=Math.min(Math.max(1,e.day),i);const n=this.__encodeEntry(e);this.lastEmitValue=n;const{details:s}=this.__getEmitParams("",e);this.$emit("input",n,t,s)})},__getEmitParams(t,e){return void 0!==e.from?{reason:t+"-range",details:{...this.__getShortDate(e.target),from:this.__getShortDate(e.from),to:this.__getShortDate(e.to),changed:!0}}:{reason:t+"-day",details:{...this.__getShortDate(e),changed:!0}}},__encodeEntry(t,e,i){return void 0!==t.from?{from:this.encodeObjectFn(t.from,e,i),to:this.encodeObjectFn(t.to,e,i)}:this.encodeObjectFn(t,e,i)},__addToModel(t){let e;if(!0===this.multiple)if(void 0!==t.from){const i=this.__getDayHash(t.from),n=this.__getDayHash(t.to),s=this.daysModel.filter(t=>t.dateHash<i||t.dateHash>n),r=this.rangeModel.filter(({from:t,to:e})=>e.dateHash<i||t.dateHash>n);e=s.concat(r).concat(t).map(t=>this.__encodeEntry(t))}else{const i=this.normalizedModel.slice();i.push(this.__encodeEntry(t)),e=i}else e=this.__encodeEntry(t);this.__emitValue(e,"add",t)},__removeFromModel(t){if(!0===this.noUnset)return;let e=null;if(!0===this.multiple&&!0===Array.isArray(this.value)){const i=this.__encodeEntry(t);e=void 0!==t.from?this.value.filter(t=>void 0===t.from||t.from!==i.from&&t.to!==i.to):this.value.filter(t=>t!==i),0===e.length&&(e=null)}this.__emitValue(e,"remove",t)},__updateValue(t,e,i){const n=this.daysModel.concat(this.rangeModel).map(i=>this.__encodeEntry(i,t,e)).filter(t=>void 0!==t.from?null!==t.from.dateHash&&null!==t.to.dateHash:null!==t.dateHash);this.$emit("input",(!0===this.multiple?n:n[0])||null,i)}},render(t){const e=[t("div",{staticClass:"q-date__content col relative-position"},[t("transition",{props:{name:"q-transition--fade"}},[this[`__get${this.view}View`](t)])])],i=Zt(this,"default");return void 0!==i&&e.push(t("div",{staticClass:"q-date__actions"},i)),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(e,"push"),t("div",{class:this.classes,attrs:this.attrs,on:{...this.qListeners}},[this.__getHeader(t),t("div",{staticClass:"q-date__main col column",attrs:{tabindex:-1},ref:"blurTarget"},e)])}}),Lr={methods:{__addHistory(){this.__historyEntry={condition:()=>!0===this.hideOnRouteChange,handler:this.hide},j.add(this.__historyEntry)},__removeHistory(){void 0!==this.__historyEntry&&(j.remove(this.__historyEntry),this.__historyEntry=void 0)}},beforeDestroy(){!0===this.showing&&this.__removeHistory()}};let Ar,Pr,Rr,Or,Ir,Dr,Nr=0,zr=!1;function qr(t){Br(t)&&P(t)}function Br(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=E(t),i=t.shiftKey&&!t.deltaX,n=!i&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),s=i||n?t.deltaY:t.deltaX;for(let r=0;r<e.length;r++){const t=e[r];if(tn(t,n))return n?s<0&&0===t.scrollTop||s>0&&t.scrollTop+t.clientHeight===t.scrollHeight:s<0&&0===t.scrollLeft||s>0&&t.scrollLeft+t.clientWidth===t.scrollWidth}return!0}function Fr(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ur(t){!0!==zr&&(zr=!0,requestAnimationFrame(()=>{zr=!1;const{height:e}=t.target,{clientHeight:i,scrollTop:n}=document.scrollingElement;void 0!==Rr&&e===window.innerHeight||(Rr=i-e,document.scrollingElement.scrollTop=n),n>Rr&&(document.scrollingElement.scrollTop-=Math.ceil((n-Rr)/8))}))}function $r(t){const e=document.body,i=void 0!==window.visualViewport;if("add"===t){const t=window.getComputedStyle(e).overflowY;Ar=Hi(window),Pr=Vi(window),Or=e.style.left,Ir=e.style.top,e.style.left=`-${Ar}px`,e.style.top=`-${Pr}px`,"hidden"!==t&&("scroll"===t||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,!0===b.is.ios&&(!0===i?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ur,w.passiveCapture),window.visualViewport.addEventListener("scroll",Ur,w.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Fr,w.passiveCapture))}!0===b.is.desktop&&!0===b.is.mac&&window[t+"EventListener"]("wheel",qr,w.notPassive),"remove"===t&&(!0===b.is.ios&&(!0===i?(window.visualViewport.removeEventListener("resize",Ur,w.passiveCapture),window.visualViewport.removeEventListener("scroll",Ur,w.passiveCapture)):window.removeEventListener("scroll",Fr,w.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar"),document.qScrollPrevented=!1,e.style.left=Or,e.style.top=Ir,window.scrollTo(Ar,Pr),Rr=void 0)}function Vr(t){let e="add";if(!0===t){if(Nr++,void 0!==Dr)return clearTimeout(Dr),void(Dr=void 0);if(Nr>1)return}else{if(0===Nr)return;if(Nr--,Nr>0)return;if(e="remove",!0===b.is.ios&&!0===b.is.nativeMobile)return clearTimeout(Dr),void(Dr=setTimeout(()=>{$r(e),Dr=void 0},100))}$r(e)}var Hr={methods:{__preventScroll(t){t===this.preventedScroll||void 0===this.preventedScroll&&!0!==t||(this.preventedScroll=t,Vr(t))}}};let Gr=0;const Wr={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},jr={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Yr={...It,tabindex:-1};var Xr=a["a"].extend({name:"QDialog",mixins:[Nt,hi,Lr,pi,fi,Ti,Hr],props:{persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:t=>"standard"===t||["top","bottom","left","right"].includes(t)},transitionShow:String,transitionHide:String},data(){return{animating:!1}},watch:{maximized(t){!0===this.showing&&this.__updateMaximized(t)},useBackdrop(t){this.__preventScroll(t),this.__preventFocusout(t)}},computed:{classes(){return`q-dialog__inner--${!0===this.maximized?"maximized":"minimized"} q-dialog__inner--${this.position} ${Wr[this.position]}`+(!0===this.animating?" q-dialog__inner--animating":"")+(!0===this.fullWidth?" q-dialog__inner--fullwidth":"")+(!0===this.fullHeight?" q-dialog__inner--fullheight":"")+(!0===this.square?" q-dialog__inner--square":"")},defaultTransitionShow(){return jr[this.position][0]},defaultTransitionHide(){return jr[this.position][1]},useBackdrop(){return!0===this.showing&&!0!==this.seamless},hideOnRouteChange(){return!0!==this.persistent&&!0!==this.noRouteDismiss&&!0!==this.seamless},onEvents(){const t={...this.qListeners,input:L,"popup-show":L,"popup-hide":L};return!0===this.autoClose&&(t.click=this.__onAutoClose),t},attrs(){return{role:"dialog","aria-modal":!0===this.useBackdrop?"true":"false",...this.qAttrs}}},methods:{focus(t){bi(()=>{let e=this.__getInnerNode();void 0!==e&&!0!==e.contains(document.activeElement)&&(e=(""!==t?e.querySelector(t):null)||e.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.querySelector("[autofocus], [data-autofocus]")||e,e.focus({preventScroll:!0}))})},shake(t){t&&"function"===typeof t.focus?t.focus({preventScroll:!0}):this.focus(),this.$emit("shake");const e=this.__getInnerNode();void 0!==e&&(e.classList.remove("q-animate--scale"),e.classList.add("q-animate--scale"),clearTimeout(this.shakeTimeout),this.shakeTimeout=setTimeout(()=>{e.classList.remove("q-animate--scale")},170))},__getInnerNode(){return void 0!==this.__portal&&void 0!==this.__portal.$refs?this.__portal.$refs.inner:void 0},__show(t){this.__addHistory(),this.__refocusTarget=!0!==b.is.mobile&&!1===this.noRefocus&&null!==document.activeElement?document.activeElement:void 0,this.$el.dispatchEvent(I("popup-show",{bubbles:!0})),this.__updateMaximized(this.maximized),sn.register(this,()=>{!0!==this.seamless&&(!0===this.persistent||!0===this.noEscDismiss?!0!==this.maximized&&!0!==this.noShake&&this.shake():(this.$emit("escape-key"),this.hide()))}),this.__showPortal(),this.animating=!0,!0!==this.noFocus?(null!==document.activeElement&&document.activeElement.blur(),this.__registerTick(this.focus)):this.__removeTick(),this.__registerTimeout(()=>{if(!0===this.$q.platform.is.ios){if(!0!==this.seamless&&document.activeElement){const{top:t,bottom:e}=document.activeElement.getBoundingClientRect(),{innerHeight:i}=window,n=void 0!==window.visualViewport?window.visualViewport.height:i;t>0&&e>n/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-n,e>=i?1/0:Math.ceil(document.scrollingElement.scrollTop+e-n/2))),document.activeElement.scrollIntoView()}this.__portal.$el.click()}this.animating=!1,this.__showPortal(!0),this.$emit("show",t)},300)},__hide(t){this.__removeTick(),this.__removeHistory(),this.__cleanup(!0),this.__hidePortal(),this.animating=!0,void 0!==this.__refocusTarget&&null!==this.__refocusTarget&&(this.__refocusTarget.focus(t),this.__refocusTarget=void 0),this.$el.dispatchEvent(I("popup-hide",{bubbles:!0})),this.__registerTimeout(()=>{this.__hidePortal(!0),this.animating=!1,this.$emit("hide",t)},300)},__cleanup(t){clearTimeout(this.shakeTimeout),!0!==t&&!0!==this.showing||(sn.pop(this),this.__updateMaximized(!1),!0!==this.seamless&&(this.__preventScroll(!1),this.__preventFocusout(!1)))},__updateMaximized(t){!0===t?!0!==this.isMaximized&&(Gr<1&&document.body.classList.add("q-body--dialog"),Gr++,this.isMaximized=!0):!0===this.isMaximized&&(Gr<2&&document.body.classList.remove("q-body--dialog"),Gr--,this.isMaximized=!1)},__preventFocusout(t){if(!0===this.$q.platform.is.desktop){const e=(!0===t?"add":"remove")+"EventListener";document.body[e]("focusin",this.__onFocusChange)}},__onAutoClose(t){this.hide(t),void 0!==this.qListeners.click&&this.$emit("click",t)},__onBackdropClick(t){!0!==this.persistent&&!0!==this.noBackdropDismiss?this.hide(t):!0!==this.noShake&&this.shake(t.relatedTarget)},__onFocusChange(t){!0!==this.allowFocusOutside&&!0===this.__portalIsAccessible&&!0!==Ve(this.__portal.$el,t.target)&&this.focus('[tabindex]:not([tabindex="-1"])')},__renderPortal(t){return t("div",{staticClass:"q-dialog fullscreen no-pointer-events q-dialog--"+(!0===this.useBackdrop?"modal":"seamless"),class:this.contentClass,style:this.contentStyle,attrs:this.attrs},[t("transition",{props:{name:"q-transition--fade"}},!0===this.useBackdrop?[t("div",{staticClass:"q-dialog__backdrop fixed-full",attrs:Yr,on:Pt(this,"bkdrop",{focusin:this.__onBackdropClick})})]:null),t("transition",{props:{...this.transitionProps}},[!0===this.showing?t("div",{ref:"inner",staticClass:"q-dialog__inner flex no-pointer-events",class:this.classes,attrs:{tabindex:-1},on:this.onEvents},Zt(this,"default")):null])])}},created(){this.__useTick("__registerTick","__removeTick"),this.__useTimeout("__registerTimeout")},mounted(){this.__processModelChange(this.value)},beforeDestroy(){this.__cleanup(),this.__refocusTarget=void 0}});const Qr=150,Kr=["mouseover","mouseout","mouseenter","mouseleave"];var Zr=a["a"].extend({name:"QDrawer",inject:{layout:{default(){console.error("QDrawer needs to be child of QLayout")}}},mixins:[ye,Lr,pi,fi,Hr],directives:{TouchPan:bs},props:{side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,contentStyle:[String,Object,Array],contentClass:[String,Object,Array],overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},data(){const t="mobile"===this.behavior||"desktop"!==this.behavior&&this.layout.totalWidth<=this.breakpoint;return{belowBreakpoint:t,showing:!0===this.showIfAbove&&!1===t||!0===this.value}},watch:{belowBreakpoint(t){!0===t?(this.lastDesktopState=this.showing,!0===this.showing&&this.hide(!1)):!1===this.overlay&&"mobile"!==this.behavior&&!1!==this.lastDesktopState&&(!0===this.showing?(this.__applyPosition(0),this.__applyBackdrop(0),this.__cleanup()):this.show(!1))},"layout.totalWidth"(){!0!==this.layout.container&&!0===document.qScrollPrevented||this.__updateBelowBreakpoint()},side(t,e){this.layout.instances[e]===this&&(this.layout.instances[e]=void 0,this.layout[e].space=!1,this.layout[e].offset=0),this.layout.instances[t]=this,this.layout[t].size=this.size,this.layout[t].space=this.onLayout,this.layout[t].offset=this.offset},behavior(){this.__updateBelowBreakpoint()},breakpoint(){this.__updateBelowBreakpoint()},"layout.container"(t){!0===this.showing&&this.__preventScroll(!0!==t),!0===t&&this.__updateBelowBreakpoint()},"layout.scrollbarWidth"(){this.__applyPosition(!0===this.showing?0:void 0)},offset(t){this.__update("offset",t)},onLayout(t){this.$emit("on-layout",t),this.__update("space",t)},rightSide(){this.__applyPosition()},size(t){this.__applyPosition(),this.__updateSizeOnLayout(this.miniToOverlay,t)},miniToOverlay(t){this.__updateSizeOnLayout(t,this.size)},"$q.lang.rtl"(){this.__applyPosition()},mini(){!0===this.value&&(this.__animateMini(),this.layout.__animate())},isMini(t){this.$emit("mini-state",t)}},computed:{rightSide(){return"right"===this.side},otherSide(){return!0===this.rightSide?"left":"right"},offset(){return!0===this.showing&&!1===this.belowBreakpoint&&!1===this.overlay?!0===this.miniToOverlay?this.miniWidth:this.size:0},size(){return!0===this.isMini?this.miniWidth:this.width},fixed(){return!0===this.overlay||!0===this.miniToOverlay||this.layout.view.indexOf(this.rightSide?"R":"L")>-1||this.$q.platform.is.ios&&!0===this.layout.container},onLayout(){return!0===this.showing&&!1===this.belowBreakpoint&&!1===this.overlay},onScreenOverlay(){return!0===this.showing&&!1===this.belowBreakpoint&&!0===this.overlay},backdropClass(){return!1===this.showing?"hidden":null},headerSlot(){return!0===this.rightSide?"r"===this.layout.rows.top[2]:"l"===this.layout.rows.top[0]},footerSlot(){return!0===this.rightSide?"r"===this.layout.rows.bottom[2]:"l"===this.layout.rows.bottom[0]},aboveStyle(){const t={};return!0===this.layout.header.space&&!1===this.headerSlot&&(!0===this.fixed?t.top=this.layout.header.offset+"px":!0===this.layout.header.space&&(t.top=this.layout.header.size+"px")),!0===this.layout.footer.space&&!1===this.footerSlot&&(!0===this.fixed?t.bottom=this.layout.footer.offset+"px":!0===this.layout.footer.space&&(t.bottom=this.layout.footer.size+"px")),t},style(){const t={width:this.size+"px"};return!0===this.belowBreakpoint?t:Object.assign(t,this.aboveStyle)},classes(){return"q-drawer--"+this.side+(!0===this.bordered?" q-drawer--bordered":"")+(!0===this.isDark?" q-drawer--dark q-dark":"")+(!0!==this.showing?" q-layout--prevent-focus":"")+(!0===this.belowBreakpoint?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(!0===this.isMini?"mini":"standard")+(!0===this.fixed||!0!==this.onLayout?" fixed":"")+(!0===this.overlay||!0===this.miniToOverlay?" q-drawer--on-top":"")+(!0===this.headerSlot?" q-drawer--top-padding":""))},stateDirection(){return(!0===this.$q.lang.rtl?-1:1)*(!0===this.rightSide?1:-1)},isMini(){return!0===this.mini&&!0!==this.belowBreakpoint},onNativeEvents(){if(!0!==this.belowBreakpoint){const t={"!click":t=>{this.$emit("click",t)}};return Kr.forEach(e=>{t[e]=t=>{void 0!==this.qListeners[e]&&this.$emit(e,t)}}),t}},hideOnRouteChange(){return!0!==this.persistent&&(!0===this.belowBreakpoint||!0===this.onScreenOverlay)},openDirective(){const t=!0===this.$q.lang.rtl?this.side:this.otherSide;return[{name:"touch-pan",value:this.__openByTouch,modifiers:{[t]:!0,mouse:!0}}]},contentCloseDirective(){if(!0!==this.noSwipeClose){const t=!0===this.$q.lang.rtl?this.otherSide:this.side;return[{name:"touch-pan",value:this.__closeByTouch,modifiers:{[t]:!0,mouse:!0}}]}},backdropCloseDirective(){if(!0!==this.noSwipeBackdrop){const t=!0===this.$q.lang.rtl?this.otherSide:this.side;return[{name:"touch-pan",value:this.__closeByTouch,modifiers:{[t]:!0,mouse:!0,mouseAllDir:!0}}]}}},methods:{__applyPosition(t){void 0===t?this.$nextTick(()=>{t=!0===this.showing?0:this.size,this.__applyPosition(this.stateDirection*t)}):void 0!==this.$refs.content&&(!0!==this.layout.container||!0!==this.rightSide||!0!==this.belowBreakpoint&&Math.abs(t)!==this.size||(t+=this.stateDirection*this.layout.scrollbarWidth),this.__lastPosition!==t&&(this.$refs.content.style.transform=`translateX(${t}px)`,this.__lastPosition=t))},__applyBackdrop(t,e){void 0!==this.$refs.backdrop?this.$refs.backdrop.style.backgroundColor=this.lastBackdropBg=`rgba(0,0,0,${.4*t})`:!0!==e&&this.$nextTick(()=>{this.__applyBackdrop(t,!0)})},__setBackdropVisible(t){void 0!==this.$refs.backdrop&&this.$refs.backdrop.classList[!0===t?"remove":"add"]("hidden")},__setScrollable(t){const e=!0===t?"remove":!0!==this.layout.container?"add":"";""!==e&&document.body.classList[e]("q-body--drawer-toggle")},__animateMini(){void 0!==this.timerMini?clearTimeout(this.timerMini):void 0!==this.$el&&this.$el.classList.add("q-drawer--mini-animate"),this.timerMini=setTimeout(()=>{void 0!==this.$el&&this.$el.classList.remove("q-drawer--mini-animate"),this.timerMini=void 0},150)},__openByTouch(t){if(!1!==this.showing)return;const e=this.size,i=Et(t.distance.x,0,e);if(!0===t.isFinal){const t=this.$refs.content,n=i>=Math.min(75,e);return t.classList.remove("no-transition"),void(!0===n?this.show():(this.layout.__animate(),this.__applyBackdrop(0),this.__applyPosition(this.stateDirection*e),t.classList.remove("q-drawer--delimiter"),t.classList.add("q-layout--prevent-focus"),this.__setBackdropVisible(!1)))}if(this.__applyPosition((!0===this.$q.lang.rtl?!0!==this.rightSide:this.rightSide)?Math.max(e-i,0):Math.min(0,i-e)),this.__applyBackdrop(Et(i/e,0,1)),!0===t.isFirst){const t=this.$refs.content;t.classList.add("no-transition"),t.classList.add("q-drawer--delimiter"),t.classList.remove("q-layout--prevent-focus"),this.__setBackdropVisible(!0)}},__closeByTouch(t){if(!0!==this.showing)return;const e=this.size,i=t.direction===this.side,n=(!0===this.$q.lang.rtl?!0!==i:i)?Et(t.distance.x,0,e):0;if(!0===t.isFinal){const t=Math.abs(n)<Math.min(75,e);return this.$refs.content.classList.remove("no-transition"),void(!0===t?(this.layout.__animate(),this.__applyBackdrop(1),this.__applyPosition(0)):this.hide())}this.__applyPosition(this.stateDirection*n),this.__applyBackdrop(Et(1-n/e,0,1)),!0===t.isFirst&&this.$refs.content.classList.add("no-transition")},__show(t,e){if(this.__addHistory(),this.__setBackdropVisible(!0),!1!==t&&this.layout.__animate(),this.__applyPosition(0),!0===this.belowBreakpoint){const t=this.layout.instances[this.otherSide];void 0!==t&&!0===t.belowBreakpoint&&t.hide(!1),this.__applyBackdrop(1),!0!==this.layout.container&&this.__preventScroll(!0)}else this.__applyBackdrop(0),!1!==t&&this.__setScrollable(!1);this.__registerTimeout(()=>{!1!==t&&this.__setScrollable(!0),!0!==e&&this.$emit("show",t)},Qr)},__hide(t,e){this.__removeHistory(),!1!==t&&this.layout.__animate(),this.__applyBackdrop(0),this.__applyPosition(this.stateDirection*this.size),this.__setBackdropVisible(!1),this.__cleanup(),!0!==e?this.__registerTimeout(()=>{this.$emit("hide",t)},Qr):this.__removeTimeout()},__cleanup(){this.__preventScroll(!1),this.__setScrollable(!0)},__update(t,e){this.layout[this.side][t]!==e&&(this.layout[this.side][t]=e)},__updateLocal(t,e){this[t]!==e&&(this[t]=e)},__updateSizeOnLayout(t,e){this.__update("size",!0===t?this.miniWidth:e)},__updateBelowBreakpoint(){this.__updateLocal("belowBreakpoint","mobile"===this.behavior||"desktop"!==this.behavior&&this.layout.totalWidth<=this.breakpoint)}},created(){this.__useTimeout("__registerTimeout","__removeTimeout"),this.layout.instances[this.side]=this,this.__updateSizeOnLayout(this.miniToOverlay,this.size),this.__update("space",this.onLayout),this.__update("offset",this.offset),!0===this.showIfAbove&&!0!==this.value&&!0===this.showing&&void 0!==this.qListeners.input&&this.$emit("input",!0)},mounted(){this.$emit("on-layout",this.onLayout),this.$emit("mini-state",this.isMini),this.lastDesktopState=!0===this.showIfAbove;const t=()=>{const t=!0===this.showing?"show":"hide";this["__"+t](!1,!0)};0===this.layout.totalWidth?this.watcher=this.$watch("layout.totalWidth",()=>{this.watcher(),this.watcher=void 0,!1===this.showing&&!0===this.showIfAbove&&!1===this.belowBreakpoint?this.show(!1):t()}):this.$nextTick(t)},beforeDestroy(){void 0!==this.watcher&&this.watcher(),clearTimeout(this.timerMini),!0===this.showing&&this.__cleanup(),this.layout.instances[this.side]===this&&(this.layout.instances[this.side]=void 0,this.__update("size",0),this.__update("offset",0),this.__update("space",!1))},render(t){const e=[];!0===this.belowBreakpoint&&(!0!==this.noSwipeOpen&&e.push(t("div",{staticClass:"q-drawer__opener fixed-"+this.side,attrs:It,directives:this.openDirective})),e.push(t("div",{ref:"backdrop",staticClass:"fullscreen q-drawer__backdrop",class:this.backdropClass,attrs:It,style:void 0!==this.lastBackdropBg?{backgroundColor:this.lastBackdropBg}:null,on:Pt(this,"bkdrop",{click:this.hide}),directives:!1===this.showing?void 0:this.backdropCloseDirective})));const i=[t("div",{staticClass:"q-drawer__content fit "+(!0===this.layout.container?"overflow-auto":"scroll"),class:this.contentClass,style:this.contentStyle},!0===this.isMini&&void 0!==this.$scopedSlots.mini?this.$scopedSlots.mini():Zt(this,"default"))];return!0===this.elevated&&!0===this.showing&&i.push(t("div",{staticClass:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(t("aside",{ref:"content",staticClass:"q-drawer",class:this.classes,style:this.style,on:this.onNativeEvents,directives:!0===this.belowBreakpoint?this.contentCloseDirective:void 0},i)),t("div",{staticClass:"q-drawer-container"},e)}});const Jr={role:"tooltip"};var to=a["a"].extend({name:"QTooltip",mixins:[di,pi,fi,Ti,hi],props:{maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:an},self:{type:String,default:"top middle",validator:an},offset:{type:Array,default:()=>[14,14],validator:ln},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},computed:{anchorOrigin(){return cn(this.anchor,this.$q.lang.rtl)},selfOrigin(){return cn(this.self,this.$q.lang.rtl)},hideOnRouteChange(){return!0!==this.persistent}},methods:{__show(t){this.__showPortal(),this.__registerTick(()=>{this.observer=new MutationObserver(()=>this.updatePosition()),this.observer.observe(this.__portal.$el,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),this.updatePosition(),this.__configureScrollTarget()}),void 0===this.unwatch&&(this.unwatch=this.$watch(()=>this.$q.screen.width+"|"+this.$q.screen.height+"|"+this.self+"|"+this.anchor+"|"+this.$q.lang.rtl,this.updatePosition)),this.__registerTimeout(()=>{this.__showPortal(!0),this.$emit("show",t)},300)},__hide(t){this.__removeTick(),this.__anchorCleanup(),this.__hidePortal(),this.__registerTimeout(()=>{this.__hidePortal(!0),this.$emit("hide",t)},300)},__anchorCleanup(){void 0!==this.observer&&(this.observer.disconnect(),this.observer=void 0),void 0!==this.unwatch&&(this.unwatch(),this.unwatch=void 0),this.__unconfigureScrollTarget(),N(this,"tooltipTemp")},updatePosition(){if(void 0===this.anchorEl||void 0===this.__portal)return;const t=this.__portal.$el;8!==t.nodeType?pn({el:t,offset:this.offset,anchorEl:this.anchorEl,anchorOrigin:this.anchorOrigin,selfOrigin:this.selfOrigin,maxHeight:this.maxHeight,maxWidth:this.maxWidth}):setTimeout(this.updatePosition,25)},__delayShow(t){if(!0===this.$q.platform.is.mobile){ui(),document.body.classList.add("non-selectable");const t=this.anchorEl,e=["touchmove","touchcancel","touchend","click"].map(e=>[t,e,"__delayHide","passiveCapture"]);D(this,"tooltipTemp",e)}this.__registerTimeout(()=>{this.show(t)},this.delay)},__delayHide(t){!0===this.$q.platform.is.mobile&&(N(this,"tooltipTemp"),ui(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),this.__registerTimeout(()=>{this.hide(t)},this.hideDelay)},__configureAnchorEl(){if(!0===this.noParentEvent||void 0===this.anchorEl)return;const t=!0===this.$q.platform.is.mobile?[[this.anchorEl,"touchstart","__delayShow","passive"]]:[[this.anchorEl,"mouseenter","__delayShow","passive"],[this.anchorEl,"mouseleave","__delayHide","passive"]];D(this,"anchor",t)},__unconfigureScrollTarget(){void 0!==this.__scrollTarget&&(this.__changeScrollEvent(this.__scrollTarget),this.__scrollTarget=void 0)},__configureScrollTarget(){if(void 0!==this.anchorEl||void 0!==this.scrollTarget){this.__scrollTarget=Fi(this.anchorEl,this.scrollTarget);const t=!0===this.noParentEvent?this.updatePosition:this.hide;this.__changeScrollEvent(this.__scrollTarget,t)}},__renderPortal(t){return t("transition",{props:{...this.transitionProps}},[!0===this.showing?t("div",{staticClass:"q-tooltip q-tooltip--style q-position-engine no-pointer-events",class:this.contentClass,style:this.contentStyle,attrs:Jr},Zt(this,"default")):null])}},created(){this.__useTick("__registerTick","__removeTick"),this.__useTimeout("__registerTimeout")},mounted(){this.__processModelChange(this.value)}});const eo={role:"list"};var io=a["a"].extend({name:"QList",mixins:[Kt,ye],props:{bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},computed:{classes(){return"q-list"+(!0===this.bordered?" q-list--bordered":"")+(!0===this.dense?" q-list--dense":"")+(!0===this.separator?" q-list--separator":"")+(!0===this.isDark?" q-list--dark":"")+(!0===this.padding?" q-list--padding":"")}},render(t){return t(this.tag,{class:this.classes,attrs:eo,on:{...this.qListeners}},Zt(this,"default"))}}),no=a["a"].extend({name:"QItem",mixins:[ye,De,Qt,Kt],props:{active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},computed:{isActionable(){return!0===this.clickable||!0===this.hasLink||"label"===this.tag},isClickable(){return!0!==this.disable&&!0===this.isActionable},classes(){return"q-item q-item-type row no-wrap"+(!0===this.dense?" q-item--dense":"")+(!0===this.isDark?" q-item--dark":"")+(!0===this.hasLink&&null===this.active?this.linkClass:!0===this.active?` q-item--active${void 0!==this.activeClass?" "+this.activeClass:""} `:"")+(!0===this.disable?" disabled":"")+(!0===this.isClickable?" q-item--clickable q-link cursor-pointer "+(!0===this.manualFocus?"q-manual-focusable":"q-focusable q-hoverable")+(!0===this.focused?" q-manual-focusable--focused":""):"")},style(){if(void 0!==this.insetLevel){const t=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+t]:16+56*this.insetLevel+"px"}}},onEvents(){return{...this.qListeners,click:this.__onClick,keyup:this.__onKeyup}}},methods:{__onClick(t){!0===this.isClickable&&(void 0!==this.$refs.blurTarget&&(!0!==t.qKeyEvent&&document.activeElement===this.$el?this.$refs.blurTarget.focus():document.activeElement===this.$refs.blurTarget&&this.$el.focus()),this.__navigateOnClick(t))},__onKeyup(t){if(!0===this.isClickable&&!0===ut(t,13)){P(t),t.qKeyEvent=!0;const e=new MouseEvent("click",t);e.qKeyEvent=!0,this.$el.dispatchEvent(e)}this.$emit("keyup",t)},__getContent(t){const e=Jt(this,"default",[]);return!0===this.isClickable&&e.unshift(t("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget"})),e}},render(t){const e={class:this.classes,style:this.style,attrs:{role:"listitem"},on:this.onEvents};return!0===this.isClickable?(e.attrs.tabindex=this.tabindex||"0",Object.assign(e.attrs,this.linkAttrs)):!0===this.isActionable&&(e.attrs["aria-disabled"]="true"),t(this.linkTag,e,this.__getContent(t))}}),so=a["a"].extend({name:"QItemSection",mixins:[Kt],props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},computed:{classes(){const t=this.avatar||this.side||this.thumbnail;return{"q-item__section--top":this.top,"q-item__section--avatar":this.avatar,"q-item__section--thumbnail":this.thumbnail,"q-item__section--side":t,"q-item__section--nowrap":this.noWrap,"q-item__section--main":!t,["justify-"+(this.top?"start":"center")]:!0}}},render(t){return t("div",{staticClass:"q-item__section column",class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}});function ro(t,e,i){e.handler?e.handler(t,i,i.caret):i.runCmd(e.cmd,e.param)}function oo(t,e){return t("div",{staticClass:"q-editor__toolbar-group"},e)}function ao(t,e,i,n,s=!1){const r=s||"toggle"===i.type&&(i.toggled?i.toggled(e):i.cmd&&e.caret.is(i.cmd,i.param)),o=[],a={click(t){n&&n(),ro(t,i,e)}};if(i.tip&&e.$q.platform.is.desktop){const e=i.key?t("div",[t("small",`(CTRL + ${String.fromCharCode(i.key)})`)]):null;o.push(t(to,{props:{delay:1e3}},[t("div",{domProps:{innerHTML:i.tip}}),e]))}return t(li,{props:{...e.buttonProps,icon:null!==i.icon?i.icon:void 0,color:r?i.toggleColor||e.toolbarToggleColor:i.color||e.toolbarColor,textColor:r&&!e.toolbarPush?null:i.textColor||e.toolbarTextColor,label:i.label,disable:!!i.disable&&("function"!==typeof i.disable||i.disable(e)),size:"sm"},on:a},o)}function lo(t,e,i){const n="only-icons"===i.list;let s,r,o=i.label,a=null!==i.icon?i.icon:void 0;function l(){c.componentInstance.hide()}if(n)r=i.options.map(i=>{const n=void 0===i.type&&e.caret.is(i.cmd,i.param);return n&&(o=i.tip,a=null!==i.icon?i.icon:void 0),ao(t,e,i,l,n)}),s=e.toolbarBackgroundClass,r=[oo(t,r)];else{const n=void 0!==e.toolbarToggleColor?"text-"+e.toolbarToggleColor:null,h=void 0!==e.toolbarTextColor?"text-"+e.toolbarTextColor:null,c="no-icons"===i.list;r=i.options.map(i=>{const s=!!i.disable&&i.disable(e),r=void 0===i.type&&e.caret.is(i.cmd,i.param);r&&(o=i.tip,a=null!==i.icon?i.icon:void 0);const u=i.htmlTip;return t(no,{props:{active:r,activeClass:n,clickable:!0,disable:s,dense:!0},on:{click(t){l(),e.$refs.content&&e.$refs.content.focus(),e.caret.restore(),ro(t,i,e)}}},[!0===c?null:t(so,{class:r?n:h,props:{side:!0}},[t(ge,{props:{name:null!==i.icon?i.icon:void 0}})]),t(so,[u?t("div",{staticClass:"text-no-wrap",domProps:{innerHTML:i.htmlTip}}):i.tip?t("div",{staticClass:"text-no-wrap"},[i.tip]):null])])}),s=[e.toolbarBackgroundClass,h],r=[t(io,[r])]}const h=i.highlight&&o!==i.label,c=t(wn,{props:{...e.buttonProps,noCaps:!0,noWrap:!0,color:h?e.toolbarToggleColor:e.toolbarColor,textColor:h&&!e.toolbarPush?null:e.toolbarTextColor,label:i.fixedLabel?i.label:o,icon:i.fixedIcon?null!==i.icon?i.icon:void 0:a,contentClass:s}},r);return c}function ho(t,e){if(e.caret)return e.buttons.filter(t=>!e.isViewingSource||t.find(t=>"viewsource"===t.cmd)).map(i=>oo(t,i.map(i=>(!e.isViewingSource||"viewsource"===i.cmd)&&("slot"===i.type?Zt(e,i.slot):"dropdown"===i.type?lo(t,e,i):ao(t,e,i)))))}function co(t,e,i,n={}){const s=Object.keys(n);if(0===s.length)return{};const r={default_font:{cmd:"fontName",param:t,icon:i,tip:e}};return s.forEach(t=>{const e=n[t];r[t]={cmd:"fontName",param:e,icon:i,tip:e,htmlTip:`<font face="${e}">${e}</font>`}}),r}function uo(t,e,i){if(e.caret){const n=e.toolbarColor||e.toolbarTextColor;let s=e.editLinkUrl;const r=()=>{e.caret.restore(),s!==e.editLinkUrl&&document.execCommand("createLink",!1,""===s?" ":s),e.editLinkUrl=null,!0===i&&e.$nextTick(e.__onInput)};return[t("div",{staticClass:"q-mx-xs",class:"text-"+n},[e.$q.lang.editor.url+": "]),t("input",{key:"qedt_btm_input",staticClass:"col q-editor__link-input",domProps:{value:s},on:{input:t=>{L(t),s=t.target.value},keydown:t=>{if(!0!==ct(t))switch(t.keyCode){case 13:return A(t),r();case 27:A(t),e.caret.restore(),e.editLinkUrl&&"https://"!==e.editLinkUrl||document.execCommand("unlink"),e.editLinkUrl=null;break}}}}),oo(t,[t(li,{key:"qedt_btm_rem",attrs:{tabindex:-1},props:{...e.buttonProps,label:e.$q.lang.label.remove,noCaps:!0},on:{click:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl=null,!0===i&&e.$nextTick(e.__onInput)}}}),t(li,{key:"qedt_btm_upd",props:{...e.buttonProps,label:e.$q.lang.label.update,noCaps:!0},on:{click:r}})])]}}function po(t,e){if(e&&t===e)return null;const i=t.nodeName.toLowerCase();if(!0===["div","li","ul","ol","blockquote"].includes(i))return t;const n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,s=n.display;return"block"===s||"table"===s?t:po(t.parentNode)}function fo(t,e,i){return!(!t||t===document.body)&&(!0===i&&t===e||(e===document?document.body:e).contains(t.parentNode))}function mo(t,e,i){if(i||(i=document.createRange(),i.selectNode(t),i.setStart(t,0)),0===e.count)i.setEnd(t,e.count);else if(e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(i.setEnd(t,e.count),e.count=0);else for(let n=0;0!==e.count&&n<t.childNodes.length;n++)i=mo(t.childNodes[n],e,i);return i}const go=/^https?:\/\//;class vo{constructor(t,e){this.el=t,this.vm=e,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(fo(t.anchorNode,this.el,!0)&&fo(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return null!==this.selection&&this.selection.toString().length>0}get range(){const t=this.selection;return null!==t&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(null!==t){const e=t.startContainer;return e.nodeType===document.ELEMENT_NODE?e:e.parentNode}return null}get blockParent(){const t=this.parent;return null!==t?po(t,this.el):null}save(t=this.range){null!==t&&(this._range=t)}restore(t=this._range){const e=document.createRange(),i=document.getSelection();null!==t?(e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),i.removeAllRanges(),i.addRange(e)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let t,e=-1;const i=document.getSelection(),n=this.el.parentNode;if(i.focusNode&&fo(i.focusNode,n)){t=i.focusNode,e=i.focusOffset;while(t&&t!==n)t!==this.el&&t.previousSibling?(t=t.previousSibling,e+=t.textContent.length):t=t.parentNode}this.savedPos=e}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const t=window.getSelection(),e=mo(this.el,{count:this.savedPos});e&&(e.collapse(!1),t.removeAllRanges(),t.addRange(e))}}hasParent(t,e){const i=e?this.parent:this.blockParent;return null!==i&&i.nodeName.toLowerCase()===t.toLowerCase()}hasParents(t,e,i=this.parent){return null!==i&&(!0===t.includes(i.nodeName.toLowerCase())||!0===e&&this.hasParents(t,e,i.parentNode))}is(t,e){if(null===this.selection)return!1;switch(t){case"formatBlock":return"DIV"===e&&this.parent===this.el||this.hasParent(e,"PRE"===e);case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===e;case"fontName":const i=document.queryCommandValue(t);return i===`"${e}"`||i===e;case"fullscreen":return this.vm.inFullscreen;case"viewsource":return this.vm.isViewingSource;case void 0:return!1;default:const n=document.queryCommandState(t);return void 0!==e?n===e:n}}getParentAttribute(t){return null!==this.parent?this.parent.getAttribute(t):null}can(t){return"outdent"===t?this.hasParents(["blockquote","li"],!0):"indent"===t?this.hasParents(["li"],!0):"link"===t?null!==this.selection||this.is("link"):void 0}apply(t,e,i=M){if("formatBlock"===t)["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(e)&&this.is(t,e)&&(t="outdent",e=null),"PRE"===e&&this.is(t,"PRE")&&(e="P");else{if("print"===t){i();const t=window.open();return t.document.write(`\n        <!doctype html>\n        <html>\n          <head>\n            <title>Print - ${document.title}</title>\n          </head>\n          <body>\n            <div>${this.el.innerHTML}</div>\n          </body>\n        </html>\n      `),t.print(),void t.close()}if("link"===t){const t=this.getParentAttribute("href");if(null===t){const t=this.selectWord(this.selection),e=t?t.toString():"";if(!e.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.vm.editLinkUrl=go.test(e)?e:"https://",document.execCommand("createLink",!1,this.vm.editLinkUrl),this.save(t.getRangeAt(0))}else this.vm.editLinkUrl=t,this.range.selectNodeContents(this.parent),this.save();return}if("fullscreen"===t)return this.vm.toggleFullscreen(),void i();if("viewsource"===t)return this.vm.isViewingSource=!1===this.vm.isViewingSource,this.vm.__setContent(this.vm.value),void i()}document.execCommand(t,!1,e),i()}selectWord(t){if(null===t||!0!==t.isCollapsed||void 0===t.modify)return t;const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const i=e.collapsed?["backward","forward"]:["forward","backward"];e.detach();const n=t.focusNode,s=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",i[0],"character"),t.modify("move",i[1],"word"),t.extend(n,s),t.modify("extend",i[1],"character"),t.modify("extend",i[0],"word"),t}}const _o=Object.prototype.toString,yo=Object.prototype.hasOwnProperty,bo=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(t=>"[object "+t+"]"));function xo(t){if(t!==Object(t)||!0===bo.has(_o.call(t)))return!1;if(t.constructor&&!1===yo.call(t,"constructor")&&!1===yo.call(t.constructor.prototype,"isPrototypeOf"))return!1;let e;for(e in t);return void 0===e||yo.call(t,e)}function So(){let t,e,i,n,s,r,o=arguments[0]||{},a=1,l=!1;const h=arguments.length;for("boolean"===typeof o&&(l=o,o=arguments[1]||{},a=2),Object(o)!==o&&"function"!==typeof o&&(o={}),h===a&&(o=this,a--);a<h;a++)if(null!==(t=arguments[a]))for(e in t)i=o[e],n=t[e],o!==n&&(!0===l&&n&&((s=Array.isArray(n))||!0===xo(n))?(r=!0===s?!0===Array.isArray(i)?i:[]:!0===xo(i)?i:{},o[e]=So(l,r,n)):void 0!==n&&(o[e]=n));return o}var wo=a["a"].extend({name:"QEditor",mixins:[Kt,$n,ye],props:{value:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:t=>0===t.length||t.every(t=>t.length),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:t=>["div","p"].includes(t),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},computed:{editable(){return!this.readonly&&!this.disable},hasToolbar(){return this.toolbar&&this.toolbar.length>0},toolbarBackgroundClass(){if(this.toolbarBg)return"bg-"+this.toolbarBg},buttonProps(){const t=!0!==this.toolbarOutline&&!0!==this.toolbarPush;return{type:"a",flat:t,noWrap:!0,outline:this.toolbarOutline,push:this.toolbarPush,rounded:this.toolbarRounded,dense:!0,color:this.toolbarColor,disable:!this.editable,size:"sm"}},buttonDef(){const t=this.$q.lang.editor,e=this.$q.iconSet.editor;return{bold:{cmd:"bold",icon:e.bold,tip:t.bold,key:66},italic:{cmd:"italic",icon:e.italic,tip:t.italic,key:73},strike:{cmd:"strikeThrough",icon:e.strikethrough,tip:t.strikethrough,key:83},underline:{cmd:"underline",icon:e.underline,tip:t.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:e.unorderedList,tip:t.unorderedList},ordered:{cmd:"insertOrderedList",icon:e.orderedList,tip:t.orderedList},subscript:{cmd:"subscript",icon:e.subscript,tip:t.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:e.superscript,tip:t.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:t=>t.caret&&!t.caret.can("link"),icon:e.hyperlink,tip:t.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:e.toggleFullscreen,tip:t.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:e.viewSource,tip:t.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:e.quote,tip:t.quote,key:81},left:{cmd:"justifyLeft",icon:e.left,tip:t.left},center:{cmd:"justifyCenter",icon:e.center,tip:t.center},right:{cmd:"justifyRight",icon:e.right,tip:t.right},justify:{cmd:"justifyFull",icon:e.justify,tip:t.justify},print:{type:"no-state",cmd:"print",icon:e.print,tip:t.print,key:80},outdent:{type:"no-state",disable:t=>t.caret&&!t.caret.can("outdent"),cmd:"outdent",icon:e.outdent,tip:t.outdent},indent:{type:"no-state",disable:t=>t.caret&&!t.caret.can("indent"),cmd:"indent",icon:e.indent,tip:t.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:e.removeFormat,tip:t.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:e.hr,tip:t.hr},undo:{type:"no-state",cmd:"undo",icon:e.undo,tip:t.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:e.redo,tip:t.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:e.heading1||e.heading,tip:t.heading1,htmlTip:`<h1 class="q-ma-none">${t.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:e.heading2||e.heading,tip:t.heading2,htmlTip:`<h2 class="q-ma-none">${t.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:e.heading3||e.heading,tip:t.heading3,htmlTip:`<h3 class="q-ma-none">${t.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:e.heading4||e.heading,tip:t.heading4,htmlTip:`<h4 class="q-ma-none">${t.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:e.heading5||e.heading,tip:t.heading5,htmlTip:`<h5 class="q-ma-none">${t.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:e.heading6||e.heading,tip:t.heading6,htmlTip:`<h6 class="q-ma-none">${t.heading6}</h6>`},p:{cmd:"formatBlock",param:this.paragraphTag.toUpperCase(),icon:e.heading,tip:t.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:e.code,htmlTip:`<code>${t.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:e.size1||e.size,tip:t.size1,htmlTip:`<font size="1">${t.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:e.size2||e.size,tip:t.size2,htmlTip:`<font size="2">${t.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:e.size3||e.size,tip:t.size3,htmlTip:`<font size="3">${t.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:e.size4||e.size,tip:t.size4,htmlTip:`<font size="4">${t.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:e.size5||e.size,tip:t.size5,htmlTip:`<font size="5">${t.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:e.size6||e.size,tip:t.size6,htmlTip:`<font size="6">${t.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:e.size7||e.size,tip:t.size7,htmlTip:`<font size="7">${t.size7}</font>`}}},buttons(){const t=this.definitions||{},e=this.definitions||this.fonts?So(!0,{},this.buttonDef,t,co(this.defaultFont,this.$q.lang.editor.defaultFont,this.$q.iconSet.editor.font,this.fonts)):this.buttonDef;return this.toolbar.map(i=>i.map(i=>{if(i.options)return{type:"dropdown",icon:i.icon,label:i.label,size:"sm",dense:!0,fixedLabel:i.fixedLabel,fixedIcon:i.fixedIcon,highlight:i.highlight,list:i.list,options:i.options.map(t=>e[t])};const n=e[i];return n?"no-state"===n.type||t[i]&&(void 0===n.cmd||this.buttonDef[n.cmd]&&"no-state"===this.buttonDef[n.cmd].type)?n:Object.assign({type:"toggle"},n):{type:"slot",slot:i}}))},keys(){const t={},e=e=>{e.key&&(t[e.key]={cmd:e.cmd,param:e.param})};return this.buttons.forEach(t=>{t.forEach(t=>{t.options?t.options.forEach(e):e(t)})}),t},innerStyle(){return this.inFullscreen?this.contentStyle:[{minHeight:this.minHeight,height:this.height,maxHeight:this.maxHeight},this.contentStyle]},classes(){return"q-editor q-editor--"+(!0===this.isViewingSource?"source":"default")+(!0===this.disable?" disabled":"")+(!0===this.inFullscreen?" fullscreen column":"")+(!0===this.square?" q-editor--square no-border-radius":"")+(!0===this.flat?" q-editor--flat":"")+(!0===this.dense?" q-editor--dense":"")+(!0===this.isDark?" q-editor--dark q-dark":"")},innerClass(){return[this.contentClass,{col:this.inFullscreen,"overflow-auto":this.inFullscreen||this.maxHeight}]},attrs(){return!0===this.disable?{"aria-disabled":"true"}:!0===this.readonly?{"aria-readonly":"true"}:void 0},onEditor(){return{focusin:this.__onFocusin,focusout:this.__onFocusout}}},data(){return{lastEmit:this.value,editLinkUrl:null,isViewingSource:!1}},watch:{value(t){this.lastEmit!==t&&(this.lastEmit=t,this.__setContent(t,!0))}},methods:{__onInput(){if(void 0!==this.$refs.content){const t=!0===this.isViewingSource?this.$refs.content.innerText:this.$refs.content.innerHTML;t!==this.value&&(this.lastEmit=t,this.$emit("input",t))}},__onKeydown(t){if(this.$emit("keydown",t),!0!==t.ctrlKey||!0===ct(t))return this.refreshToolbar(),void(this.$q.platform.is.ie&&this.$nextTick(this.__onInput));const e=t.keyCode,i=this.keys[e];if(void 0!==i){const{cmd:e,param:n}=i;P(t),this.runCmd(e,n,!1)}},__onClick(t){this.refreshToolbar(),this.$emit("click",t)},__onBlur(t){if(void 0!==this.$refs.content){const{scrollTop:t,scrollHeight:e}=this.$refs.content;this.__offsetBottom=e-t}!0!==this.$q.platform.is.ie&&this.caret.save(),this.$emit("blur",t)},__onFocus(t){this.$nextTick(()=>{void 0!==this.$refs.content&&void 0!==this.__offsetBottom&&(this.$refs.content.scrollTop=this.$refs.content.scrollHeight-this.__offsetBottom)}),this.$emit("focus",t)},__onFocusin(t){if(!0===this.$el.contains(t.target)&&(null===t.relatedTarget||!0!==this.$el.contains(t.relatedTarget))){const t="inner"+(!0===this.isViewingSource?"Text":"HTML");this.caret.restorePosition(this.$refs.content[t].length),this.refreshToolbar()}},__onFocusout(t){!0!==this.$el.contains(t.target)||null!==t.relatedTarget&&!0===this.$el.contains(t.relatedTarget)||(this.caret.savePosition(),this.refreshToolbar())},__onPointerStart(t){this.__offsetBottom=void 0,void 0!==this.qListeners[t.type]&&this.$emit(t.type,t)},__onSelectionchange(){this.caret.save()},runCmd(t,e,i=!0){this.focus(),this.caret.restore(),this.caret.apply(t,e,()=>{this.focus(),this.caret.save(),!0!==this.$q.platform.is.ie&&!0!==this.$q.platform.is.edge||this.$nextTick(this.__onInput),i&&this.refreshToolbar()})},refreshToolbar(){setTimeout(()=>{this.editLinkUrl=null,this.$forceUpdate()},1)},focus(){bi(()=>{void 0!==this.$refs.content&&this.$refs.content.focus({preventScroll:!0})})},getContentEl(){return this.$refs.content},__setContent(t,e){if(void 0!==this.$refs.content){!0===e&&this.caret.savePosition();const i="inner"+(!0===this.isViewingSource?"Text":"HTML");this.$refs.content[i]=t,!0===e&&(this.caret.restorePosition(this.$refs.content[i].length),this.refreshToolbar())}}},created(){!1===l&&(document.execCommand("defaultParagraphSeparator",!1,this.paragraphTag),this.defaultFont=window.getComputedStyle(document.body).fontFamily)},mounted(){this.caret=new vo(this.$refs.content,this),this.__setContent(this.value),this.refreshToolbar(),document.addEventListener("selectionchange",this.__onSelectionchange)},beforeDestroy(){document.removeEventListener("selectionchange",this.__onSelectionchange)},render(t){let e;if(this.hasToolbar){const i=[t("div",{key:"qedt_top",staticClass:"q-editor__toolbar row no-wrap scroll-x",class:this.toolbarBackgroundClass},ho(t,this))];null!==this.editLinkUrl&&i.push(t("div",{key:"qedt_btm",staticClass:"q-editor__toolbar row no-wrap items-center scroll-x",class:this.toolbarBackgroundClass},uo(t,this,this.$q.platform.is.ie))),e=t("div",{key:"toolbar_ctainer",staticClass:"q-editor__toolbars-container"},i)}const i={...this.qListeners,input:this.__onInput,keydown:this.__onKeydown,click:this.__onClick,blur:this.__onBlur,focus:this.__onFocus,mousedown:this.__onPointerStart,touchstart:this.__onPointerStart};return t("div",{style:{height:!0===this.inFullscreen?"100%":null},class:this.classes,attrs:this.attrs,on:this.onEditor},[e,t("div",{ref:"content",staticClass:"q-editor__content",style:this.innerStyle,class:this.innerClass,attrs:{contenteditable:this.editable,placeholder:this.placeholder},domProps:l?{innerHTML:this.value}:void 0,on:i})])}}),Co=a["a"].extend({name:"QItemLabel",mixins:[Kt],props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},computed:{classes(){return{"q-item__label--overline text-overline":this.overline,"q-item__label--caption text-caption":this.caption,"q-item__label--header":this.header,ellipsis:1===parseInt(this.lines,10)}},style(){if(void 0!==this.lines&&parseInt(this.lines,10)>1)return{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":this.lines}}},render(t){return t("div",{staticClass:"q-item__label",style:this.style,class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}}),Mo=a["a"].extend({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},methods:{__begin(t,e,i){t.style.overflowY="hidden",void 0!==e&&(t.style.height=e+"px"),t.style.transition=`height ${this.duration}ms cubic-bezier(.25, .8, .50, 1)`,this.animating=!0,this.done=i},__end(t,e){t.style.overflowY=null,t.style.height=null,t.style.transition=null,this.__cleanup(),e!==this.lastEvent&&this.$emit(e)},__cleanup(){this.done&&this.done(),this.done=null,this.animating=!1,clearTimeout(this.timer),clearTimeout(this.timerFallback),void 0!==this.el&&this.el.removeEventListener("transitionend",this.animListener),this.animListener=null}},beforeDestroy(){this.animating&&this.__cleanup()},render(t){return t("transition",{props:{css:!1,appear:this.appear},on:Pt(this,"tr",{enter:(t,e)=>{let i=0;this.el=t,!0===this.animating?(this.__cleanup(),i=t.offsetHeight===t.scrollHeight?0:void 0):this.lastEvent="hide",this.__begin(t,i,e),this.timer=setTimeout(()=>{t.style.height=t.scrollHeight+"px",this.animListener=e=>{Object(e)===e&&e.target!==t||this.__end(t,"show")},t.addEventListener("transitionend",this.animListener),this.timerFallback=setTimeout(this.animListener,1.1*this.duration)},100)},leave:(t,e)=>{let i;this.el=t,!0===this.animating?this.__cleanup():(this.lastEvent="show",i=t.scrollHeight),this.__begin(t,i,e),this.timer=setTimeout(()=>{t.style.height=0,this.animListener=e=>{Object(e)===e&&e.target!==t||this.__end(t,"hide")},t.addEventListener("transitionend",this.animListener),this.timerFallback=setTimeout(this.animListener,1.1*this.duration)},100)}})},Zt(this,"default"))}});const To={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},ko={xs:2,sm:4,md:8,lg:16,xl:24};var Eo=a["a"].extend({name:"QSeparator",mixins:[ye,Kt],props:{spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},computed:{orientation(){return!0===this.vertical?"vertical":"horizontal"},classPrefix(){return" q-separator--"+this.orientation},insetClass(){return!1!==this.inset?`${this.classPrefix}-${To[this.inset]}`:""},classes(){return`q-separator${this.classPrefix}${this.insetClass}`+(void 0!==this.color?" bg-"+this.color:"")+(!0===this.isDark?" q-separator--dark":"")},style(){const t={};if(void 0!==this.size&&(t[!0===this.vertical?"width":"height"]=this.size),!1!==this.spaced){const e=!0===this.spaced?ko.md+"px":this.spaced in ko?ko[this.spaced]+"px":this.spaced,i=!0===this.vertical?["Left","Right"]:["Top","Bottom"];t["margin"+i[0]]=t["margin"+i[1]]=e}return t},attrs(){return{"aria-orientation":this.orientation}}},render(t){return t("hr",{staticClass:"q-separator",class:this.classes,style:this.style,attrs:this.attrs,on:{...this.qListeners}})}});const Lo="q:expansion-item:close",Ao=Object.keys(Ie);var Po=a["a"].extend({name:"QExpansionItem",mixins:[ye,pi,fi],props:{...Ie,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},data(){return{showing:void 0!==this.value?this.value:this.defaultOpened}},watch:{showing(t){!0===t&&void 0!==this.group&&this.$root.$emit(Lo,this)},group(t,e){void 0!==t&&void 0===e?this.$root.$on(Lo,this.__eventHandler):void 0===t&&void 0!==e&&this.$root.$off(Lo,this.__eventHandler)}},computed:{classes(){return"q-expansion-item--"+(!0===this.showing?"expanded":"collapsed")+" q-expansion-item--"+(!0===this.popup?"popup":"standard")},contentStyle(){if(void 0!==this.contentInsetLevel){const t=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+t]:56*this.contentInsetLevel+"px"}}},hasLink(){return!0!==this.disable&&(void 0!==this.href||void 0!==this.to&&null!==this.to&&""!==this.to)},linkProps(){const t={};return Ao.forEach(e=>{t[e]=this[e]}),t},isClickable(){return!0===this.hasLink||!0!==this.expandIconToggle},expansionIcon(){return void 0!==this.expandedIcon&&!0===this.showing?this.expandedIcon:this.expandIcon||this.$q.iconSet.expansionItem[!0===this.denseToggle?"denseIcon":"icon"]},activeToggleIcon(){return!0!==this.disable&&(!0===this.hasLink||!0===this.expandIconToggle)},headerSlotScope(){return{expanded:!0===this.showing,detailsId:this.targetUid,toggle:this.toggle,show:this.show,hide:this.hide}},toggleAriaAttrs(){const t=void 0!==this.toggleAriaLabel?this.toggleAriaLabel:this.$q.lang.label[!0===this.showing?"collapse":"expand"](this.label);return{role:"button","aria-expanded":!0===this.showing?"true":"false","aria-owns":this.targetUid,"aria-controls":this.targetUid,"aria-label":t}}},methods:{__onHeaderClick(t){!0!==this.hasLink&&this.toggle(t),this.$emit("click",t)},__toggleIconKeyboard(t){13===t.keyCode&&this.__toggleIcon(t,!0)},__toggleIcon(t,e){!0!==e&&void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus(),this.toggle(t),P(t)},__eventHandler(t){this!==t&&this.group===t.group&&this.hide()},__getToggleIcon(t){const e={staticClass:"q-focusable relative-position cursor-pointer"+(!0===this.denseToggle&&!0===this.switchToggleSide?" items-end":""),class:this.expandIconClass,props:{side:!0!==this.switchToggleSide,avatar:this.switchToggleSide}},i=[t(ge,{staticClass:"q-expansion-item__toggle-icon",class:void 0===this.expandedIcon&&!0===this.showing?"q-expansion-item__toggle-icon--rotated":void 0,props:{name:this.expansionIcon}})];return!0===this.activeToggleIcon&&(Object.assign(e,{attrs:{tabindex:0,...this.toggleAriaAttrs},on:Pt(this,"inpExt",{click:this.__toggleIcon,keyup:this.__toggleIconKeyboard})}),i.unshift(t("div",{ref:"blurTarget",staticClass:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",attrs:{tabindex:-1}}))),t(so,e,i)},__getHeader(t){let e;void 0!==this.$scopedSlots.header?e=[].concat(this.$scopedSlots.header(this.headerSlotScope)):(e=[t(so,[t(Co,{props:{lines:this.labelLines}},[this.label||""]),this.caption?t(Co,{props:{lines:this.captionLines,caption:!0}},[this.caption]):null])],this.icon&&e[!0===this.switchToggleSide?"push":"unshift"](t(so,{props:{side:!0===this.switchToggleSide,avatar:!0!==this.switchToggleSide}},[t(ge,{props:{name:this.icon}})]))),!0!==this.disable&&!0!==this.hideExpandIcon&&e[!0===this.switchToggleSide?"unshift":"push"](this.__getToggleIcon(t));const i={ref:"item",style:this.headerStyle,class:this.headerClass,props:{dark:this.isDark,disable:this.disable,dense:this.dense,insetLevel:this.headerInsetLevel}};return!0===this.isClickable&&(i.props.clickable=!0,!0===this.hasLink?Object.assign(i.props,this.linkProps):i.attrs=this.toggleAriaAttrs,i.on={...this.qListeners,click:this.__onHeaderClick}),t(no,i,e)},__getContent(t){const e=[this.__getHeader(t),t(Mo,{props:{duration:this.duration},on:Pt(this,"slide",{show:()=>{this.$emit("after-show")},hide:()=>{this.$emit("after-hide")}})},[t("div",{staticClass:"q-expansion-item__content relative-position",style:this.contentStyle,attrs:{id:this.targetUid},directives:[{name:"show",value:this.showing}]},Zt(this,"default"))])];return this.expandSeparator&&e.push(t(Eo,{staticClass:"q-expansion-item__border q-expansion-item__border--top absolute-top",props:{dark:this.isDark}}),t(Eo,{staticClass:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",props:{dark:this.isDark}})),e}},render(t){return t("div",{staticClass:"q-expansion-item q-item-type",class:this.classes},[t("div",{staticClass:"q-expansion-item__container relative-position"},this.__getContent(t))])},created(){void 0!==this.group&&this.$root.$on(Lo,this.__eventHandler),this.targetUid="e_"+xn()},beforeDestroy(){void 0!==this.group&&this.$root.$off(Lo,this.__eventHandler)}});const Ro=["top","right","bottom","left"];var Oo={mixins:[Kt],props:{type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:t=>Ro.includes(t)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]},computed:{formClass(){return"q-fab--form-"+(!0===this.square?"square":"rounded")},stacked(){return!1===this.externalLabel&&["top","bottom"].includes(this.labelPosition)},labelProps(){if(!0===this.externalLabel){const t=null===this.hideLabel?!1===this.showing:this.hideLabel;return{action:"push",data:{staticClass:"q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-"+this.labelPosition+(!0===t?" q-fab__label--external-hidden":""),style:this.labelStyle,class:this.labelClass}}}return{action:["left","top"].includes(this.labelPosition)?"unshift":"push",data:{staticClass:"q-fab__label q-fab__label--internal q-fab__label--internal-"+this.labelPosition+(!0===this.hideLabel?" q-fab__label--internal-hidden":""),style:this.labelStyle,class:this.labelClass}}}}};const Io=["up","right","down","left"],Do=["left","center","right"];var No=a["a"].extend({name:"QFab",inheritAttrs:!1,mixins:[Oo,Nt,fi],provide(){return{__qFab:this}},props:{icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:t=>Io.includes(t)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:t=>Do.includes(t)}},data(){return{showing:!0===this.value}},computed:{hideOnRouteChange(){return!0!==this.persistent},classes(){return`q-fab--align-${this.verticalActionsAlign} ${this.formClass}`+(!0===this.showing?" q-fab--opened":"")},actionsClasses(){return"q-fab__actions--"+this.direction+(!0===this.showing?" q-fab__actions--opened":"")},actionsAttrs(){const t={id:this.targetUid};return!0===this.showing?t.role="menu":t["aria-hidden"]="true",t},iconHolderClasses(){return!0===this.showing?"q-fab__icon-holder--opened":""},attrs(){return{"aria-expanded":!0===this.showing?"true":"false","aria-haspopup":"true","aria-controls":this.targetUid,"aria-owns":this.targetUid,...this.qAttrs}},slotScope(){return{opened:this.showing}}},methods:{__onChildClick(t){this.hide(t),this.$refs.trigger&&this.$refs.trigger.$el&&this.$refs.trigger.$el.focus()},__getIcon(t,e,i){const n=this.$scopedSlots[e],s=`q-fab__${e} absolute-full`;return void 0===n?t(ge,{staticClass:s,props:{name:this[i]||this.$q.iconSet.fab[i]}}):t("div",{staticClass:s},n(this.slotScope))}},render(t){const e=[];return!0!==this.hideIcon&&e.push(t("div",{staticClass:"q-fab__icon-holder",class:this.iconHolderClasses},[this.__getIcon(t,"icon","icon"),this.__getIcon(t,"active-icon","activeIcon")])),""===this.label&&void 0===this.$scopedSlots.label||e[this.labelProps.action](t("div",this.labelProps.data,void 0!==this.$scopedSlots.label?this.$scopedSlots.label(this.slotScope):[this.label])),t("div",{staticClass:"q-fab z-fab row inline justify-center",class:this.classes,on:{...this.qListeners}},[t(li,{ref:"trigger",class:this.formClass,props:{...this.$props,noWrap:!0,stack:this.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0},attrs:this.attrs,on:Pt(this,"tog",{click:this.toggle})},te(e,this,"tooltip")),t("div",{staticClass:"q-fab__actions flex no-wrap inline",class:this.actionsClasses,attrs:this.actionsAttrs},Zt(this,"default"))])},created(){this.targetUid="fb_"+xn()}});const zo={start:"self-end",center:"self-center",end:"self-start"},qo=Object.keys(zo);var Bo=a["a"].extend({name:"QFabAction",mixins:[Oo],props:{icon:{type:String,default:""},anchor:{type:String,validator:t=>qo.includes(t)},to:[String,Object],replace:Boolean},inject:{__qFab:{default(){return{showing:!0,__onChildClick:M}}}},computed:{classes(){const t=zo[this.anchor];return this.formClass+(void 0!==t?" "+t:"")},onEvents(){return{...this.qListeners,click:this.click}},isDisabled(){return!0!==this.__qFab.showing||!0===this.disable}},methods:{click(t){this.__qFab.__onChildClick(t),this.$emit("click",t)}},render(t){const e=[];return void 0!==this.$scopedSlots.icon?e.push(this.$scopedSlots.icon()):""!==this.icon&&e.push(t(ge,{props:{name:this.icon}})),""===this.label&&void 0===this.$scopedSlots.label||e[this.labelProps.action](t("div",this.labelProps.data,void 0!==this.$scopedSlots.label?this.$scopedSlots.label():[this.label])),t(li,{class:this.classes,props:{...this.$props,noWrap:!0,stack:this.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:this.isDisabled},on:this.onEvents},te(e,this,"default"))}});const Fo=[!0,!1,"ondemand"];var Uo={props:{value:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:t=>Fo.includes(t)}},data(){return{isDirty:null,innerError:!1,innerErrorMessage:void 0}},watch:{value(){this.__validateIfNeeded()},disable(t){!0===t?this.__resetValidation():this.__validateIfNeeded(!0)},reactiveRules:{handler(t){!0===t?void 0===this.unwatchRules&&(this.unwatchRules=this.$watch("rules",()=>{this.__validateIfNeeded(!0)})):void 0!==this.unwatchRules&&(this.unwatchRules(),this.unwatchRules=void 0)},immediate:!0},focused(t){!0===t?null===this.isDirty&&(this.isDirty=!1):!1===this.isDirty&&(this.isDirty=!0,!0===this.hasActiveRules&&"ondemand"!==this.lazyRules&&!1===this.innerLoading&&this.debouncedValidate())},hasError(t){const e=document.getElementById(this.targetUid);null!==e&&e.setAttribute("aria-invalid",!0===t)}},computed:{hasRules(){return void 0!==this.rules&&null!==this.rules&&this.rules.length>0},hasActiveRules(){return!0!==this.disable&&!0===this.hasRules},hasError(){return!0===this.error||!0===this.innerError},computedErrorMessage(){return"string"===typeof this.errorMessage&&this.errorMessage.length>0?this.errorMessage:this.innerErrorMessage}},created(){this.debouncedValidate=z(this.validate,0)},mounted(){this.validateIndex=0},beforeDestroy(){void 0!==this.unwatchRules&&this.unwatchRules(),this.debouncedValidate.cancel()},methods:{resetValidation(){this.isDirty=null,this.__resetValidation()},validate(t=this.value){if(!0!==this.hasActiveRules)return!0;const e=++this.validateIndex,i=!0!==this.innerLoading?()=>!0!==this.isDirty&&(this.isDirty=!0):()=>{},n=(t,e)=>{!0===t&&i(),this.innerError!==t&&(this.innerError=t);const n=e||void 0;this.innerErrorMessage!==n&&(this.innerErrorMessage=n),!1!==this.innerLoading&&(this.innerLoading=!1)},s=[];for(let r=0;r<this.rules.length;r++){const e=this.rules[r];let i;if("function"===typeof e?i=e(t,gs):"string"===typeof e&&void 0!==gs[e]&&(i=gs[e](t)),!1===i||"string"===typeof i)return n(!0,i),!1;!0!==i&&void 0!==i&&s.push(i)}return 0===s.length?(n(!1),!0):(!0!==this.innerLoading&&(this.innerLoading=!0),Promise.all(s).then(t=>{if(void 0===t||!1===Array.isArray(t)||0===t.length)return e===this.validateIndex&&n(!1),!0;const i=t.find(t=>!1===t||"string"===typeof t);return e===this.validateIndex&&n(void 0!==i,i),void 0===i},t=>(e===this.validateIndex&&(console.error(t),n(!0)),!1)))},__resetValidation(){this.debouncedValidate.cancel(),this.validateIndex++,this.innerLoading=!1,this.innerError=!1,this.innerErrorMessage=void 0},__validateIfNeeded(t){!0===this.hasActiveRules&&"ondemand"!==this.lazyRules&&(!0===this.isDirty||!0!==this.lazyRules&&!0!==t)&&this.debouncedValidate()}}};function $o(t){return void 0===t?"f_"+xn():t}var Vo=a["a"].extend({name:"QField",mixins:[ye,Uo,Nt],inheritAttrs:!1,props:{label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String],maxValues:[Number,String]},data(){return{focused:!1,targetUid:$o(this.for),innerLoading:!1}},watch:{for(t){this.targetUid=$o(t)}},computed:{editable(){return!0!==this.disable&&!0!==this.readonly},hasValue(){const t=void 0===this.__getControl?this.value:this.innerValue;return void 0!==t&&null!==t&&(""+t).length>0},computedCounter(){if(!1!==this.counter){const t="string"===typeof this.value||"number"===typeof this.value?(""+this.value).length:!0===Array.isArray(this.value)?this.value.length:0,e=void 0!==this.maxlength?this.maxlength:this.maxValues;return t+(void 0!==e?" / "+e:"")}},floatingLabel(){return!0===this.stackLabel||!0===this.focused||"number"===typeof this.inputValue||"string"===typeof this.inputValue&&this.inputValue.length>0||!0!==this.hideSelected&&!0===this.hasValue||void 0!==this.displayValue&&null!==this.displayValue&&(""+this.displayValue).length>0},shouldRenderBottom(){return!0===this.bottomSlots||void 0!==this.hint||!0===this.hasRules||!0===this.counter||null!==this.error},classes(){return{[this.fieldClass]:void 0!==this.fieldClass,["q-field--"+this.styleType]:!0,"q-field--rounded":this.rounded,"q-field--square":this.square,"q-field--focused":!0===this.focused,"q-field--highlighted":!0===this.focused||!0===this.hasError,"q-field--float":this.floatingLabel,"q-field--labeled":this.hasLabel,"q-field--dense":this.dense,"q-field--item-aligned q-item-type":this.itemAligned,"q-field--dark":this.isDark,"q-field--auto-height":void 0===this.__getControl,"q-field--with-bottom":!0!==this.hideBottomSpace&&!0===this.shouldRenderBottom,"q-field--error":this.hasError,"q-field--readonly":!0===this.readonly&&!0!==this.disable,"q-field--disabled":!0===this.disable}},styleType(){return!0===this.filled?"filled":!0===this.outlined?"outlined":!0===this.borderless?"borderless":this.standout?"standout":"standard"},contentClass(){const t=[];if(!0===this.hasError)t.push("text-negative");else{if("string"===typeof this.standout&&this.standout.length>0&&!0===this.focused)return this.standout;void 0!==this.color&&t.push("text-"+this.color)}return void 0!==this.bgColor&&t.push("bg-"+this.bgColor),t},hasLabel(){return!0===this.labelSlot||void 0!==this.label},labelClass(){if(void 0!==this.labelColor&&!0!==this.hasError)return"text-"+this.labelColor},controlSlotScope(){return{id:this.targetUid,field:this.$el,editable:this.editable,focused:this.focused,floatingLabel:this.floatingLabel,value:this.value,emitValue:this.__emitValue}},bottomSlotScope(){return{id:this.targetUid,field:this.$el,editable:this.editable,focused:this.focused,value:this.value,errorMessage:this.computedErrorMessage}},attrs(){const t={for:this.targetUid};return!0===this.disable?t["aria-disabled"]="true":!0===this.readonly&&(t["aria-readonly"]="true"),t}},methods:{focus(){bi(this.__focus)},blur(){xi(this.__focus);const t=document.activeElement;null!==t&&this.$el.contains(t)&&t.blur()},__focus(){const t=document.activeElement;let e=this.$refs.target;void 0===e||null!==t&&t.id===this.targetUid||(!0===e.hasAttribute("tabindex")||(e=e.querySelector("[tabindex]")),null!==e&&e!==t&&e.focus({preventScroll:!0}))},__getContent(t){const e=[];return void 0!==this.$scopedSlots.prepend&&e.push(t("div",{staticClass:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",on:this.slotsEvents},this.$scopedSlots.prepend())),e.push(t("div",{staticClass:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},this.__getControlContainer(t))),!0===this.hasError&&!1===this.noErrorIcon&&e.push(this.__getInnerAppendNode(t,"error",[t(ge,{props:{name:this.$q.iconSet.field.error,color:"negative"}})])),!0===this.loading||!0===this.innerLoading?e.push(this.__getInnerAppendNode(t,"inner-loading-append",void 0!==this.$scopedSlots.loading?this.$scopedSlots.loading():[t(qe,{props:{color:this.color}})])):!0===this.clearable&&!0===this.hasValue&&!0===this.editable&&e.push(this.__getInnerAppendNode(t,"inner-clearable-append",[t(ge,{staticClass:"q-field__focusable-action",props:{tag:"button",name:this.clearIcon||this.$q.iconSet.field.clear},attrs:Dt,on:this.clearableEvents})])),void 0!==this.$scopedSlots.append&&e.push(t("div",{staticClass:"q-field__append q-field__marginal row no-wrap items-center",key:"append",on:this.slotsEvents},this.$scopedSlots.append())),void 0!==this.__getInnerAppend&&e.push(this.__getInnerAppendNode(t,"inner-append",this.__getInnerAppend(t))),void 0!==this.__getControlChild&&e.push(this.__getControlChild(t)),e},__getControlContainer(t){const e=[];return void 0!==this.prefix&&null!==this.prefix&&e.push(t("div",{staticClass:"q-field__prefix no-pointer-events row items-center"},[this.prefix])),!0===this.hasShadow&&void 0!==this.__getShadowControl&&e.push(this.__getShadowControl(t)),void 0!==this.__getControl?e.push(this.__getControl(t)):void 0!==this.$scopedSlots.rawControl?e.push(this.$scopedSlots.rawControl()):void 0!==this.$scopedSlots.control&&e.push(t("div",{ref:"target",staticClass:"q-field__native row",attrs:{tabindex:-1,...this.qAttrs,"data-autofocus":this.autofocus||void 0}},this.$scopedSlots.control(this.controlSlotScope))),!0===this.hasLabel&&e.push(t("div",{staticClass:"q-field__label no-pointer-events absolute ellipsis",class:this.labelClass},[Zt(this,"label",this.label)])),void 0!==this.suffix&&null!==this.suffix&&e.push(t("div",{staticClass:"q-field__suffix no-pointer-events row items-center"},[this.suffix])),e.concat(void 0!==this.__getDefaultSlot?this.__getDefaultSlot(t):Zt(this,"default"))},__getBottom(t){let e,i;!0===this.hasError?(i="q--slot-error",void 0!==this.$scopedSlots.error?e=this.$scopedSlots.error(this.bottomSlotScope):void 0!==this.computedErrorMessage&&(e=[t("div",{attrs:{role:"alert"}},[this.computedErrorMessage])],i=this.computedErrorMessage)):!0===this.hideHint&&!0!==this.focused||(i="q--slot-hint",void 0!==this.$scopedSlots.hint?e=this.$scopedSlots.hint(this.bottomSlotScope):void 0!==this.hint&&(e=[t("div",[this.hint])],i=this.hint));const n=!0===this.counter||void 0!==this.$scopedSlots.counter;if(!0===this.hideBottomSpace&&!1===n&&void 0===e)return;const s=t("div",{key:i,staticClass:"q-field__messages col"},e);return t("div",{staticClass:"q-field__bottom row items-start q-field__bottom--"+(!0!==this.hideBottomSpace?"animated":"stale"),on:{click:A}},[!0===this.hideBottomSpace?s:t("transition",{props:{name:"q-transition--field-message"}},[s]),!0===n?t("div",{staticClass:"q-field__counter"},void 0!==this.$scopedSlots.counter?this.$scopedSlots.counter():[this.computedCounter]):null])},__getInnerAppendNode(t,e,i){return null===i?null:t("div",{staticClass:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip",key:e},i)},__onControlPopupShow(t){void 0!==t&&L(t),this.$emit("popup-show",t),this.hasPopupOpen=!0,this.__onControlFocusin(t)},__onControlPopupHide(t){void 0!==t&&L(t),this.$emit("popup-hide",t),this.hasPopupOpen=!1,this.__onControlFocusout(t)},__onControlFocusin(t){clearTimeout(this.focusoutTimer),!0===this.editable&&!1===this.focused&&(this.focused=!0,this.$emit("focus",t))},__onControlFocusout(t,e){clearTimeout(this.focusoutTimer),this.focusoutTimer=setTimeout(()=>{(!0!==document.hasFocus()||!0!==this.hasPopupOpen&&void 0!==this.$refs&&void 0!==this.$refs.control&&!1===this.$refs.control.contains(document.activeElement))&&(!0===this.focused&&(this.focused=!1,this.$emit("blur",t)),void 0!==e&&e())})},__clearValue(t){if(P(t),!0!==this.$q.platform.is.mobile){const t=this.$refs.target||this.$el;t.focus()}else!0===this.$el.contains(document.activeElement)&&document.activeElement.blur();"file"===this.type&&(this.$refs.input.value=null),this.$emit("input",null),this.$emit("clear",this.value),this.$nextTick(()=>{this.resetValidation(),!0!==this.$q.platform.is.mobile&&(this.isDirty=!1)})},__emitValue(t){this.$emit("input",t)}},render(t){void 0!==this.__onPreRender&&this.__onPreRender(),void 0!==this.__onPostRender&&this.$nextTick(this.__onPostRender);const e=void 0===this.__getControl&&void 0===this.$scopedSlots.control?{...this.qAttrs,"data-autofocus":this.autofocus||void 0,...this.attrs}:this.attrs;return t("label",{staticClass:"q-field q-validation-component row no-wrap items-start",class:this.classes,attrs:e},[void 0!==this.$scopedSlots.before?t("div",{staticClass:"q-field__before q-field__marginal row no-wrap items-center",on:this.slotsEvents},this.$scopedSlots.before()):null,t("div",{staticClass:"q-field__inner relative-position col self-stretch"},[t("div",{ref:"control",staticClass:"q-field__control relative-position row no-wrap",class:this.contentClass,attrs:{tabindex:-1},on:this.controlEvents},this.__getContent(t)),!0===this.shouldRenderBottom?this.__getBottom(t):null]),void 0!==this.$scopedSlots.after?t("div",{staticClass:"q-field__after q-field__marginal row no-wrap items-center",on:this.slotsEvents},this.$scopedSlots.after()):null])},created(){void 0!==this.__onPreRender&&this.__onPreRender(),this.slotsEvents={click:A},this.clearableEvents={click:this.__clearValue},this.controlEvents=void 0!==this.__getControlEvents?this.__getControlEvents():{focusin:this.__onControlFocusin,focusout:this.__onControlFocusout,"popup-show":this.__onControlPopupShow,"popup-hide":this.__onControlPopupHide}},mounted(){!0===c&&void 0===this.for&&(this.targetUid=$o()),!0===this.autofocus&&this.focus()},activated(){!0===this.shouldActivate&&!0===this.autofocus&&this.focus()},deactivated(){this.shouldActivate=!0},beforeDestroy(){clearTimeout(this.focusoutTimer)}});function Ho(t,e,i,n){const s=[];return t.forEach(t=>{!0===n(t)?s.push(t):e.push({failedPropValidation:i,file:t})}),s}function Go(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),P(t)}var Wo={props:{multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},computed:{extensions(){if(void 0!==this.accept)return this.accept.split(",").map(t=>(t=t.trim(),"*"===t?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase())))},maxFilesNumber(){return parseInt(this.maxFiles,10)},maxTotalSizeNumber(){return parseInt(this.maxTotalSize,10)}},methods:{pickFiles(t){if(!0===this.editable)if(t!==Object(t)&&(t={target:null}),null!==t.target&&!0===t.target.matches('input[type="file"]'))0===t.clientX&&0===t.clientY&&L(t);else{const e=this.__getFileInput();e&&e!==t.target&&e.click(t)}},addFiles(t){this.editable&&t&&this.__addFiles(null,t)},__processFiles(t,e,i,n){let s=Array.from(e||t.target.files);const r=[],o=()=>{r.length>0&&this.$emit("rejected",r)};if(void 0!==this.accept&&-1===this.extensions.indexOf("*/")&&(s=Ho(s,r,"accept",t=>this.extensions.some(e=>t.type.toUpperCase().startsWith(e)||t.name.toUpperCase().endsWith(e))),0===s.length))return o();if(void 0!==this.maxFileSize){const t=parseInt(this.maxFileSize,10);if(s=Ho(s,r,"max-file-size",e=>e.size<=t),0===s.length)return o()}if(!0!==this.multiple&&s.length>0&&(s=[s[0]]),s.forEach(t=>{t.__key=t.webkitRelativePath+t.lastModified+t.name+t.size}),!0===n){const t=i.map(t=>t.__key);s=Ho(s,r,"duplicate",e=>!1===t.includes(e.__key))}if(0===s.length)return o();if(void 0!==this.maxTotalSize){let t=!0===n?i.reduce((t,e)=>t+e.size,0):0;if(s=Ho(s,r,"max-total-size",e=>(t+=e.size,t<=this.maxTotalSizeNumber)),0===s.length)return o()}if("function"===typeof this.filter){const t=this.filter(s);s=Ho(s,r,"filter",e=>t.includes(e))}if(void 0!==this.maxFiles){let t=!0===n?i.length:0;if(s=Ho(s,r,"max-files",()=>(t++,t<=this.maxFilesNumber)),0===s.length)return o()}return o(),s.length>0?s:void 0},__onDragOver(t){Go(t),!0!==this.dnd&&(this.dnd=!0)},__onDragLeave(t){P(t);const e=null!==t.relatedTarget||!0!==S.is.safari?t.relatedTarget!==this.$refs.dnd:!1===document.elementsFromPoint(t.clientX,t.clientY).includes(this.$refs.dnd);!0===e&&(this.dnd=!1)},__onDrop(t){Go(t);const e=t.dataTransfer.files;e.length>0&&this.__addFiles(null,e),this.dnd=!1},__getDnd(t,e){if(!0===this.dnd)return t("div",{staticClass:`q-${e}__dnd absolute-full`,ref:"dnd",on:Pt(this,"dnd",{dragenter:Go,dragover:Go,dragleave:this.__onDragLeave,drop:this.__onDrop})})}}};const jo={computed:{formDomProps(){if("file"===this.type)try{const t="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(this.value)===this.value&&("length"in this.value?Array.from(this.value):[this.value]).forEach(e=>{t.items.add(e)}),{files:t.files}}catch(hd){return{files:void 0}}}}};var Yo=a["a"].extend({name:"QFile",mixins:[Vo,Wo,Mn,jo],props:{value:!0===l?{}:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},data(){return{dnd:!1}},computed:{innerValue(){return Object(this.value)===this.value?"length"in this.value?Array.from(this.value):[this.value]:[]},selectedString(){return this.innerValue.map(t=>t.name).join(", ")},totalSize(){return kt(this.innerValue.reduce((t,e)=>t+e.size,0))},counterProps(){return{totalSize:this.totalSize,filesNumber:this.innerValue.length,maxFiles:this.maxFiles}},computedCounter(){if(void 0!==this.counterLabel)return this.counterLabel(this.counterProps);const t=this.maxFiles;return`${this.innerValue.length}${void 0!==t?" / "+t:""} (${this.totalSize})`},inputAttrs(){return{tabindex:-1,type:"file",title:"",accept:this.accept,capture:this.capture,name:this.nameProp,...this.qAttrs,id:this.targetUid,disabled:!0!==this.editable}},isAppending(){return!0===this.multiple&&!0===this.append},fieldClass(){return"q-file q-field--auto-height"+(!0===this.dnd?" q-file--dnd":"")}},methods:{removeAtIndex(t){const e=this.innerValue.slice();e.splice(t,1),this.__emitValue(e)},removeFile(t){const e=this.innerValue.findIndex(t);e>-1&&this.removeAtIndex(e)},__emitValue(t){this.$emit("input",!0===this.multiple?t:t[0])},__onKeydown(t){13===t.keyCode&&A(t)},__onKeyup(t){13!==t.keyCode&&32!==t.keyCode||this.pickFiles(t)},__getFileInput(){return this.$refs.input},__addFiles(t,e){const i=this.__processFiles(t,e,this.innerValue,this.isAppending),n=this.__getFileInput();void 0!==n&&(n.value=""),void 0!==i&&((!0===this.multiple?this.value&&i.every(t=>this.innerValue.includes(t)):this.value===i[0])||this.__emitValue(!0===this.isAppending?this.innerValue.concat(i):i))},__getControl(t){const e={ref:"target",staticClass:"q-field__native row items-center cursor-pointer",attrs:{tabindex:this.tabindex}};return!0===this.editable&&(e.on=Pt(this,"native",{dragover:this.__onDragOver,dragleave:this.__onDragLeave,keydown:this.__onKeydown,keyup:this.__onKeyup})),t("div",e,[this.__getInput(t)].concat(this.__getSelection(t)))},__getControlChild(t){return this.__getDnd(t,"file")},__getFiller(t){return[t("input",{class:[this.inputClass,"q-file__filler"],style:this.inputStyle})]},__getSelection(t){if(void 0!==this.$scopedSlots.file)return 0===this.innerValue.length?this.__getFiller(t):this.innerValue.map((t,e)=>this.$scopedSlots.file({index:e,file:t,ref:this}));if(void 0!==this.$scopedSlots.selected)return 0===this.innerValue.length?this.__getFiller(t):this.$scopedSlots.selected({files:this.innerValue,ref:this});if(!0===this.useChips)return 0===this.innerValue.length?this.__getFiller(t):this.innerValue.map((e,i)=>t(rs,{key:"file-"+i,props:{removable:this.editable,dense:!0,textColor:this.color,tabindex:this.tabindex},on:Pt(this,"rem#"+i,{remove:()=>{this.removeAtIndex(i)}})},[t("span",{staticClass:"ellipsis",domProps:{textContent:e.name}})]));const e=void 0!==this.displayValue?this.displayValue:this.selectedString;return e.length>0?[t("div",{style:this.inputStyle,class:this.inputClass,domProps:{textContent:e}})]:this.__getFiller(t)},__getInput(t){const e={ref:"input",staticClass:"q-field__input fit absolute-full cursor-pointer",attrs:this.inputAttrs,domProps:this.formDomProps,on:Pt(this,"input",{change:this.__addFiles})};return!0===this.multiple&&(e.attrs.multiple=!0),t("input",e)}},created(){this.type="file"}}),Xo=a["a"].extend({name:"QFooter",mixins:[Kt],inject:{layout:{default(){console.error("QFooter needs to be child of QLayout")}}},props:{value:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},data(){return{size:parseInt(this.heightHint,10),revealed:!0,windowHeight:u||this.layout.container?0:window.innerHeight}},watch:{value(t){this.__update("space",t),this.__updateLocal("revealed",!0),this.layout.__animate()},offset(t){this.__update("offset",t)},reveal(t){!1===t&&this.__updateLocal("revealed",this.value)},revealed(t){this.layout.__animate(),this.$emit("reveal",t)},"layout.scroll"(){this.__updateRevealed()},"layout.height"(){this.__updateRevealed()},size(){this.__updateRevealed()},"$q.screen.height"(t){!0!==this.layout.container&&this.__updateLocal("windowHeight",t)}},computed:{fixed(){return!0===this.reveal||this.layout.view.indexOf("F")>-1||this.$q.platform.is.ios&&!0===this.layout.container},containerHeight(){return!0===this.layout.container?this.layout.containerHeight:this.windowHeight},offset(){if(!0!==this.value)return 0;if(!0===this.fixed)return!0===this.revealed?this.size:0;const t=this.layout.scroll.position+this.containerHeight+this.size-this.layout.height;return t>0?t:0},hidden(){return!0!==this.value||!0===this.fixed&&!0!==this.revealed},revealOnFocus(){return!0===this.value&&!0===this.hidden&&!0===this.reveal},classes(){return(!0===this.fixed?"fixed":"absolute")+"-bottom"+(!0===this.bordered?" q-footer--bordered":"")+(!0===this.hidden?" q-footer--hidden":"")+(!0!==this.value?" q-layout--prevent-focus":"")+(!0!==this.value&&!0!==this.fixed?" hidden":"")},style(){const t=this.layout.rows.bottom,e={};return"l"===t[0]&&!0===this.layout.left.space&&(e[!0===this.$q.lang.rtl?"right":"left"]=this.layout.left.size+"px"),"r"===t[2]&&!0===this.layout.right.space&&(e[!0===this.$q.lang.rtl?"left":"right"]=this.layout.right.size+"px"),e},onEvents(){return{...this.qListeners,focusin:this.__onFocusin,input:L}}},render(t){const e=te([t(ks,{props:{debounce:0},on:Pt(this,"resize",{resize:this.__onResize})})],this,"default");return!0===this.elevated&&e.push(t("div",{staticClass:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t("footer",{staticClass:"q-footer q-layout__section--marginal",class:this.classes,style:this.style,on:this.onEvents},e)},created(){this.layout.instances.footer=this,!0===this.value&&this.__update("size",this.size),this.__update("space",this.value),this.__update("offset",this.offset)},beforeDestroy(){this.layout.instances.footer===this&&(this.layout.instances.footer=void 0,this.__update("size",0),this.__update("offset",0),this.__update("space",!1))},methods:{__onResize({height:t}){this.__updateLocal("size",t),this.__update("size",t)},__update(t,e){this.layout.footer[t]!==e&&(this.layout.footer[t]=e)},__updateLocal(t,e){this[t]!==e&&(this[t]=e)},__updateRevealed(){if(!0!==this.reveal)return;const{direction:t,position:e,inflexionPosition:i}=this.layout.scroll;this.__updateLocal("revealed","up"===t||e-i<100||this.layout.height-this.containerHeight-e-this.size<300)},__onFocusin(t){!0===this.revealOnFocus&&this.__updateLocal("revealed",!0),this.$emit("focusin",t)}}}),Qo=a["a"].extend({name:"QForm",mixins:[Kt],props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean},computed:{onEvents(){return{...this.qListeners,submit:this.submit,reset:this.reset}}},mounted(){this.validateIndex=0,!0===this.autofocus&&this.focus()},activated(){!0===this.shouldActivate&&!0===this.autofocus&&this.focus()},deactivated(){this.shouldActivate=!0},methods:{validate(t){const e="boolean"===typeof t?t:!0!==this.noErrorFocus,i=++this.validateIndex,n=this.getValidationComponents().filter(t=>!0!==t.disable),s=(t,e)=>{this.$emit("validation-"+(!0===t?"success":"error"),e)},r=t=>{const e=t.validate();return"function"===typeof e.then?e.then(e=>({valid:e,comp:t}),e=>({valid:!1,comp:t,err:e})):Promise.resolve({valid:e,comp:t})},o=!0===this.greedy?Promise.all(n.map(r)).then(t=>t.filter(t=>!0!==t.valid)):n.reduce((t,e)=>t.then(()=>r(e).then(t=>{if(!1===t.valid)return Promise.reject(t)})),Promise.resolve()).catch(t=>[t]);return o.then(t=>{if(void 0===t||0===t.length)return i===this.validateIndex&&s(!0),!0;if(i===this.validateIndex){const{comp:i,err:n}=t[0];if(void 0!==n&&console.error(n),s(!1,i),!0===e){const e=t.find(({comp:t})=>"function"===typeof t.focus&&!0!==t._isBeingDestroyed&&!0!==t._isDestroyed&&!0!==t._inactive);void 0!==e&&e.comp.focus()}}return!1})},resetValidation(){this.validateIndex++,this.getValidationComponents().forEach(t=>{"function"===typeof t.resetValidation&&t.resetValidation()})},submit(t){void 0!==t&&P(t);const e=this.validateIndex+1;this.validate().then(i=>{e===this.validateIndex&&!0===i&&(void 0!==this.qListeners.submit?this.$emit("submit",t):void 0!==t&&void 0!==t.target&&"function"===typeof t.target.submit&&t.target.submit())})},reset(t){void 0!==t&&P(t),this.$emit("reset"),this.$nextTick(()=>{this.resetValidation(),!0===this.autofocus&&!0!==this.noResetFocus&&this.focus()})},focus(){bi(()=>{if(!this.$el)return;const t=this.$el.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||this.$el.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||this.$el.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(this.$el.querySelectorAll("[tabindex]"),t=>t.tabIndex>-1);null!==t&&void 0!==t&&t.focus({preventScroll:!0})})},getValidationComponents(){return Array.prototype.map.call(this.$el.getElementsByClassName("q-validation-component"),t=>t.__vue__).filter(t=>void 0!==t&&"function"===typeof t.validate)}},render(t){return t("form",{staticClass:"q-form",on:this.onEvents},Zt(this,"default"))}}),Ko=a["a"].extend({name:"QHeader",mixins:[Kt],inject:{layout:{default(){console.error("QHeader needs to be child of QLayout")}}},props:{value:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},data(){return{size:parseInt(this.heightHint,10),revealed:!0}},watch:{value(t){this.__update("space",t),this.__updateLocal("revealed",!0),this.layout.__animate()},offset(t){this.__update("offset",t)},reveal(t){!1===t&&this.__updateLocal("revealed",this.value)},revealed(t){this.layout.__animate(),this.$emit("reveal",t)},"layout.scroll"(t){!0===this.reveal&&this.__updateLocal("revealed","up"===t.direction||t.position<=this.revealOffset||t.position-t.inflexionPosition<100)}},computed:{fixed(){return!0===this.reveal||this.layout.view.indexOf("H")>-1||this.$q.platform.is.ios&&!0===this.layout.container},offset(){if(!0!==this.value)return 0;if(!0===this.fixed)return!0===this.revealed?this.size:0;const t=this.size-this.layout.scroll.position;return t>0?t:0},hidden(){return!0!==this.value||!0===this.fixed&&!0!==this.revealed},revealOnFocus(){return!0===this.value&&!0===this.hidden&&!0===this.reveal},classes(){return(!0===this.fixed?"fixed":"absolute")+"-top"+(!0===this.bordered?" q-header--bordered":"")+(!0===this.hidden?" q-header--hidden":"")+(!0!==this.value?" q-layout--prevent-focus":"")},style(){const t=this.layout.rows.top,e={};return"l"===t[0]&&!0===this.layout.left.space&&(e[!0===this.$q.lang.rtl?"right":"left"]=this.layout.left.size+"px"),"r"===t[2]&&!0===this.layout.right.space&&(e[!0===this.$q.lang.rtl?"left":"right"]=this.layout.right.size+"px"),e},onEvents(){return{...this.qListeners,focusin:this.__onFocusin,input:L}}},render(t){const e=Jt(this,"default",[]);return!0===this.elevated&&e.push(t("div",{staticClass:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(t(ks,{props:{debounce:0},on:Pt(this,"resize",{resize:this.__onResize})})),t("header",{staticClass:"q-header q-layout__section--marginal",class:this.classes,style:this.style,on:this.onEvents},e)},created(){this.layout.instances.header=this,!0===this.value&&this.__update("size",this.size),this.__update("space",this.value),this.__update("offset",this.offset)},beforeDestroy(){this.layout.instances.header===this&&(this.layout.instances.header=void 0,this.__update("size",0),this.__update("offset",0),this.__update("space",!1))},methods:{__onResize({height:t}){this.__updateLocal("size",t),this.__update("size",t)},__update(t,e){this.layout.header[t]!==e&&(this.layout.header[t]=e)},__updateLocal(t,e){this[t]!==e&&(this[t]=e)},__onFocusin(t){!0===this.revealOnFocus&&this.__updateLocal("revealed",!0),this.$emit("focusin",t)}}}),Zo={props:{ratio:[String,Number]},computed:{ratioStyle(){const t=this.ratio||this.naturalRatio;if(void 0!==t)return{paddingBottom:100/t+"%"}}}},Jo=a["a"].extend({name:"QImg",mixins:[Kt,Zo],props:{src:String,srcset:String,sizes:String,alt:String,width:String,height:String,placeholderSrc:String,basic:Boolean,contain:Boolean,position:{type:String,default:"50% 50%"},transition:{type:String,default:"fade"},imgClass:[Array,String,Object],imgStyle:Object,nativeContextMenu:Boolean,noDefaultSpinner:Boolean,spinnerColor:String,spinnerSize:String},data(){return{currentSrc:"",image:null,isLoading:!!this.src,hasError:!1,naturalRatio:void 0}},watch:{src(){this.__load()},srcset(t){this.__updateWatcher(t)}},computed:{url(){return this.currentSrc||this.placeholderSrc||void 0},attrs(){const t={role:"img"};return void 0!==this.alt&&(t["aria-label"]=this.alt),t},imgContainerStyle(){return Object.assign({backgroundSize:!0===this.contain?"contain":"cover",backgroundPosition:this.position},this.imgStyle,{backgroundImage:`url("${this.url}")`})},style(){return{width:this.width,height:this.height}},classes(){return"q-img overflow-hidden"+(!0===this.nativeContextMenu?" q-img--menu":"")}},methods:{__onLoad(t){this.isLoading=!1,this.hasError=!1,this.__computeRatio(t),this.__updateSrc(),this.__updateWatcher(this.srcset),this.$emit("load",this.currentSrc)},__onError(t){clearTimeout(this.ratioTimer),this.isLoading=!1,this.hasError=!0,this.currentSrc="",this.$emit("error",t)},__updateSrc(){if(void 0!==this.image&&!1===this.isLoading){const t=this.image.currentSrc||this.image.src;this.currentSrc!==t&&(this.currentSrc=t)}},__updateWatcher(t){t?void 0===this.unwatch&&(this.unwatch=this.$watch("$q.screen.width",this.__updateSrc)):void 0!==this.unwatch&&(this.unwatch(),this.unwatch=void 0)},__load(){if(clearTimeout(this.ratioTimer),this.hasError=!1,!this.src)return this.isLoading=!1,this.image=void 0,void(this.currentSrc="");this.isLoading=!0;const t=new Image;this.image=t,t.onerror=e=>{this.image===t&&!0!==this.destroyed&&this.__onError(e)},t.onload=()=>{!0!==this.destroyed&&this.image===t&&(void 0!==t.decode?t.decode().catch(e=>{this.image===t&&!0!==this.destroyed&&this.__onError(e)}).then(()=>{this.image===t&&!0!==this.destroyed&&this.__onLoad(t)}):this.__onLoad(t))},t.src=this.src,this.srcset&&(t.srcset=this.srcset),void 0!==this.sizes?t.sizes=this.sizes:Object.assign(t,{height:this.height,width:this.width})},__computeRatio(t){const{naturalHeight:e,naturalWidth:i}=t;e||i?this.naturalRatio=0===e?1:i/e:this.ratioTimer=setTimeout(()=>{this.image===t&&!0!==this.destroyed&&this.__computeRatio(t)},100)},__getImage(t){const e=!0===this.nativeContextMenu?[t("img",{staticClass:"absolute-full fit",attrs:{src:this.url,"aria-hidden":"true"}})]:void 0,i=void 0!==this.url?t("div",{key:this.url,staticClass:"q-img__image absolute-full",class:this.imgClass,style:this.imgContainerStyle},e):null;return!0===this.basic?i:t("transition",{props:{name:"q-transition--"+this.transition}},[i])},__getContent(t){const e=Zt(this,!0===this.hasError?"error":"default");if(!0===this.basic)return t("div",{key:"content",staticClass:"q-img__content absolute-full"},e);const i=!0===this.isLoading?t("div",{key:"placeholder",staticClass:"q-img__loading absolute-full flex flex-center"},void 0!==this.$scopedSlots.loading?this.$scopedSlots.loading():!1===this.noDefaultSpinner?[t(qe,{props:{color:this.spinnerColor,size:this.spinnerSize}})]:void 0):t("div",{key:"content",staticClass:"q-img__content absolute-full"},e);return t("transition",{props:{name:"q-transition--fade"}},[i])}},render(t){return t("div",{class:this.classes,style:this.style,attrs:this.attrs,on:{...this.qListeners}},[t("div",{style:this.ratioStyle}),this.__getImage(t),this.__getContent(t)])},beforeMount(){if(void 0!==this.placeholderSrc&&void 0===this.ratio){const t=new Image;t.src=this.placeholderSrc,this.__computeRatio(t)}!0===this.isLoading&&this.__load()},beforeDestroy(){this.destroyed=!0,clearTimeout(this.ratioTimer),void 0!==this.unwatch&&this.unwatch()}});const{passive:ta}=w;var ea=a["a"].extend({name:"QInfiniteScroll",mixins:[Kt],props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},data(){return{index:this.initialIndex||0,isFetching:!1,isWorking:!0}},watch:{disable(t){!0===t?this.stop():this.resume()},reverse(){!1===this.isFetching&&!0===this.isWorking&&this.immediatePoll()},scrollTarget(){this.updateScrollTarget()},debounce(t){this.__setDebounce(t)}},methods:{poll(){if(!0===this.disable||!0===this.isFetching||!1===this.isWorking)return;const t=Ui(this.__scrollTarget),e=Vi(this.__scrollTarget),i=Fe(this.__scrollTarget);!1===this.reverse?Math.round(e+i+this.offset)>=Math.round(t)&&this.trigger():Math.round(e)<this.offset&&this.trigger()},trigger(){if(!0===this.disable||!0===this.isFetching||!1===this.isWorking)return;this.index++,this.isFetching=!0;const t=Ui(this.__scrollTarget);this.$emit("load",this.index,e=>{!0===this.isWorking&&(this.isFetching=!1,this.$nextTick(()=>{if(!0===this.reverse){const e=Ui(this.__scrollTarget),i=Vi(this.__scrollTarget),n=e-t;Qi(this.__scrollTarget,i+n)}!0===e?this.stop():this.$el.closest("body")&&this.poll()}))})},reset(){this.index=0},resume(){!1===this.isWorking&&(this.isWorking=!0,this.__scrollTarget.addEventListener("scroll",this.poll,ta)),this.immediatePoll()},stop(){!0===this.isWorking&&(this.isWorking=!1,this.isFetching=!1,this.__scrollTarget.removeEventListener("scroll",this.poll,ta),"function"===typeof this.poll.cancel&&this.poll.cancel())},updateScrollTarget(){if(this.__scrollTarget&&!0===this.isWorking&&this.__scrollTarget.removeEventListener("scroll",this.poll,ta),this.__scrollTarget=Fi(this.$el,this.scrollTarget),!0===this.isWorking){if(this.__scrollTarget.addEventListener("scroll",this.poll,ta),!0===this.reverse){const t=Ui(this.__scrollTarget),e=Fe(this.__scrollTarget);Qi(this.__scrollTarget,t-e)}this.immediatePoll()}},setIndex(t){this.index=t},__setDebounce(t){t=parseInt(t,10);const e=this.poll;this.poll=t<=0?this.immediatePoll:z(this.immediatePoll,!0===isNaN(t)?100:t),this.__scrollTarget&&!0===this.isWorking&&(void 0!==e&&this.__scrollTarget.removeEventListener("scroll",e,ta),this.__scrollTarget.addEventListener("scroll",this.poll,ta))}},mounted(){this.immediatePoll=this.poll,this.__setDebounce(this.debounce),this.updateScrollTarget()},activated(){void 0!==this.__scrollPosition&&this.__scrollTarget&&Qi(this.__scrollTarget,this.__scrollPosition)},deactivated(){this.__scrollPosition=this.__scrollTarget?Vi(this.__scrollTarget):void 0},beforeDestroy(){this.stop()},render(t){const e=Jt(this,"default",[]);return!0!==this.disable&&!0===this.isWorking&&e[!1===this.reverse?"push":"unshift"](t("div",{staticClass:"q-infinite-scroll__loading",class:!0===this.isFetching?"":"invisible"},Zt(this,"loading"))),t("div",{staticClass:"q-infinite-scroll",on:{...this.qListeners}},e)}}),ia=a["a"].extend({name:"QInnerLoading",mixins:[Kt,ye,hi],props:{showing:Boolean,color:String,size:{type:[String,Number],default:42},label:String,labelClass:String,labelStyle:[String,Array,Object]},computed:{classes(){return"q-inner-loading absolute-full column flex-center"+(!0===this.isDark?" q-inner-loading--dark":"")},labelClasses(){return"q-inner-loading__label"+(void 0!==this.labelClass?" "+this.labelClass:"")}},methods:{__getInner(t){const e=[t(qe,{props:{size:this.size,color:this.color}})];return void 0!==this.label&&e.push(t("div",{class:this.labelClasses,style:this.labelStyle},[this.label])),e},__getContent(t){return!0===this.showing?[t("div",{staticClass:this.classes,on:{...this.qListeners}},void 0!==this.$scopedSlots.default?this.$scopedSlots.default():this.__getInner(t))]:void 0}},render(t){return t("transition",{props:{...this.transitionProps}},this.__getContent(t))}});const na={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},sa={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},ra=Object.keys(sa);ra.forEach(t=>{sa[t].regex=new RegExp(sa[t].pattern)});const oa=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+ra.join("")+"])|(.)","g"),aa=/[.*+?^${}()|[\]\\]/g,la=String.fromCharCode(1);var ha={props:{mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean},watch:{type(){this.__updateMaskInternals()},autogrow(){this.__updateMaskInternals()},mask(t){if(void 0!==t)this.__updateMaskValue(this.innerValue,!0);else{const t=this.__unmask(this.innerValue);this.__updateMaskInternals(),this.value!==t&&this.$emit("input",t)}},fillMask(){!0===this.hasMask&&this.__updateMaskValue(this.innerValue,!0)},reverseFillMask(){!0===this.hasMask&&this.__updateMaskValue(this.innerValue,!0)},unmaskedValue(){!0===this.hasMask&&this.__updateMaskValue(this.innerValue)}},methods:{__getInitialMaskedValue(){if(this.__updateMaskInternals(),!0===this.hasMask){const t=this.__mask(this.__unmask(this.value));return!1!==this.fillMask?this.__fillWithMask(t):t}return this.value},__getPaddedMaskMarked(t){if(t<this.maskMarked.length)return this.maskMarked.slice(-t);let e=this.maskMarked,i="";const n=e.indexOf(la);if(n>-1){for(let n=t-e.length;n>0;n--)i+=la;e=e.slice(0,n)+i+e.slice(n)}return e},__updateMaskInternals(){if(this.hasMask=void 0!==this.mask&&this.mask.length>0&&(!0===this.autogrow||["textarea","text","search","url","tel","password"].includes(this.type)),!1===this.hasMask)return this.computedUnmask=void 0,this.maskMarked="",void(this.maskReplaced="");const t=void 0===na[this.mask]?this.mask:na[this.mask],e="string"===typeof this.fillMask&&this.fillMask.length>0?this.fillMask.slice(0,1):"_",i=e.replace(aa,"\\$&"),n=[],s=[],r=[];let o=!0===this.reverseFillMask,a="",l="";t.replace(oa,(t,e,i,h,c)=>{if(void 0!==h){const t=sa[h];r.push(t),l=t.negate,!0===o&&(s.push("(?:"+l+"+)?("+t.pattern+"+)?(?:"+l+"+)?("+t.pattern+"+)?"),o=!1),s.push("(?:"+l+"+)?("+t.pattern+")?")}else if(void 0!==i)a="\\"+("\\"===i?"":i),r.push(i),n.push("([^"+a+"]+)?"+a+"?");else{const t=void 0!==e?e:c;a="\\"===t?"\\\\\\\\":t.replace(aa,"\\\\$&"),r.push(t),n.push("([^"+a+"]+)?"+a+"?")}});const h=new RegExp("^"+n.join("")+"("+(""===a?".":"[^"+a+"]")+"+)?"+(""===a?"":"["+a+"]*")+"$"),c=s.length-1,u=s.map((t,e)=>0===e&&!0===this.reverseFillMask?new RegExp("^"+i+"*"+t):e===c?new RegExp("^"+t+"("+(""===l?".":l)+"+)?"+(!0===this.reverseFillMask?"$":i+"*")):new RegExp("^"+t));this.computedMask=r,this.computedUnmask=t=>{const e=h.exec(!0===this.reverseFillMask?t:t.slice(0,r.length));null!==e&&(t=e.slice(1).join(""));const i=[],n=u.length;for(let s=0,r=t;s<n;s++){const t=u[s].exec(r);if(null===t)break;r=r.slice(t.shift().length),i.push(...t)}return i.length>0?i.join(""):t},this.maskMarked=r.map(t=>"string"===typeof t?t:la).join(""),this.maskReplaced=this.maskMarked.split(la).join(e)},__updateMaskValue(t,e,i){const n=this.$refs.input,s=n.selectionEnd,r=n.value.length-s,o=this.__unmask(t);!0===e&&this.__updateMaskInternals();const a=this.__mask(o),l=!1!==this.fillMask?this.__fillWithMask(a):a,h=this.innerValue!==l;n.value!==l&&(n.value=l),!0===h&&(this.innerValue=l),document.activeElement===n&&this.$nextTick(()=>{if(l!==this.maskReplaced)if("insertFromPaste"!==i||!0===this.reverseFillMask)if(["deleteContentBackward","deleteContentForward"].indexOf(i)>-1){const t=!0===this.reverseFillMask?0===s?l.length>a.length?1:0:Math.max(0,l.length-(l===this.maskReplaced?0:Math.min(a.length,r)+1))+1:s;n.setSelectionRange(t,t,"forward")}else if(!0===this.reverseFillMask)if(!0===h){const t=Math.max(0,l.length-(l===this.maskReplaced?0:Math.min(a.length,r+1)));1===t&&1===s?n.setSelectionRange(t,t,"forward"):this.__moveCursorRightReverse(n,t,t)}else{const t=l.length-r;n.setSelectionRange(t,t,"backward")}else if(!0===h){const t=Math.max(0,this.maskMarked.indexOf(la),Math.min(a.length,s)-1);this.__moveCursorRight(n,t,t)}else{const t=s-1;this.__moveCursorRight(n,t,t)}else{const t=s-1;this.__moveCursorRight(n,t,t)}else{const t=!0===this.reverseFillMask?this.maskReplaced.length:0;n.setSelectionRange(t,t,"forward")}});const c=!0===this.unmaskedValue?this.__unmask(l):l;String(this.value)!==c&&this.__emitValue(c,!0)},__moveCursorForPaste(t,e,i){const n=this.__mask(this.__unmask(t.value));e=Math.max(0,this.maskMarked.indexOf(la),Math.min(n.length,e)),t.setSelectionRange(e,i,"forward")},__moveCursorLeft(t,e,i,n){const s=-1===this.maskMarked.slice(e-1).indexOf(la);let r=Math.max(0,e-1);for(;r>=0;r--)if(this.maskMarked[r]===la){e=r,!0===s&&e++;break}if(r<0&&void 0!==this.maskMarked[e]&&this.maskMarked[e]!==la)return this.__moveCursorRight(t,0,0);e>=0&&t.setSelectionRange(e,!0===n?i:e,"backward")},__moveCursorRight(t,e,i,n){const s=t.value.length;let r=Math.min(s,i+1);for(;r<=s;r++){if(this.maskMarked[r]===la){i=r;break}this.maskMarked[r-1]===la&&(i=r)}if(r>s&&void 0!==this.maskMarked[i-1]&&this.maskMarked[i-1]!==la)return this.__moveCursorLeft(t,s,s);t.setSelectionRange(n?e:i,i,"forward")},__moveCursorLeftReverse(t,e,i,n){const s=this.__getPaddedMaskMarked(t.value.length);let r=Math.max(0,e-1);for(;r>=0;r--){if(s[r-1]===la){e=r;break}if(s[r]===la&&(e=r,0===r))break}if(r<0&&void 0!==s[e]&&s[e]!==la)return this.__moveCursorRightReverse(t,0,0);e>=0&&t.setSelectionRange(e,!0===n?i:e,"backward")},__moveCursorRightReverse(t,e,i,n){const s=t.value.length,r=this.__getPaddedMaskMarked(s),o=-1===r.slice(0,i+1).indexOf(la);let a=Math.min(s,i+1);for(;a<=s;a++)if(r[a-1]===la){i=a,i>0&&!0===o&&i--;break}if(a>s&&void 0!==r[i-1]&&r[i-1]!==la)return this.__moveCursorLeftReverse(t,s,s);t.setSelectionRange(!0===n?e:i,i,"forward")},__onMaskedKeydown(t){if(!0===ct(t))return;const e=this.$refs.input,i=e.selectionStart,n=e.selectionEnd;if(37===t.keyCode||39===t.keyCode){const s=this["__moveCursor"+(39===t.keyCode?"Right":"Left")+(!0===this.reverseFillMask?"Reverse":"")];t.preventDefault(),s(e,i,n,t.shiftKey)}else 8===t.keyCode&&!0!==this.reverseFillMask&&i===n?this.__moveCursorLeft(e,i,n,!0):46===t.keyCode&&!0===this.reverseFillMask&&i===n&&this.__moveCursorRightReverse(e,i,n,!0);this.$emit("keydown",t)},__mask(t){if(void 0===t||null===t||""===t)return"";if(!0===this.reverseFillMask)return this.__maskReverse(t);const e=this.computedMask;let i=0,n="";for(let s=0;s<e.length;s++){const r=t[i],o=e[s];if("string"===typeof o)n+=o,r===o&&i++;else{if(void 0===r||!o.regex.test(r))return n;n+=void 0!==o.transform?o.transform(r):r,i++}}return n},__maskReverse(t){const e=this.computedMask,i=this.maskMarked.indexOf(la);let n=t.length-1,s="";for(let r=e.length-1;r>=0&&n>-1;r--){const o=e[r];let a=t[n];if("string"===typeof o)s=o+s,a===o&&n--;else{if(void 0===a||!o.regex.test(a))return s;do{s=(void 0!==o.transform?o.transform(a):a)+s,n--,a=t[n]}while(i===r&&void 0!==a&&o.regex.test(a))}}return s},__unmask(t){return"string"!==typeof t||void 0===this.computedUnmask?"number"===typeof t?this.computedUnmask(""+t):t:this.computedUnmask(t)},__fillWithMask(t){return this.maskReplaced.length-t.length<=0?t:!0===this.reverseFillMask&&t.length>0?this.maskReplaced.slice(0,-t.length)+t:t+this.maskReplaced.slice(t.length)}}};const ca=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,ua=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,da=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,pa=/[a-z0-9_ -]$/i;var fa={methods:{__onComposition(t){if("compositionend"===t.type||"change"===t.type){if(!0!==t.target.qComposing)return;t.target.qComposing=!1,this.__onInput(t)}else if("compositionupdate"===t.type&&!0!==t.target.qComposing&&"string"===typeof t.data){const e=!0===b.is.firefox?!1===pa.test(t.data):!0===ca.test(t.data)||!0===ua.test(t.data)||!0===da.test(t.data);!0===e&&(t.target.qComposing=!0)}}}},ma=a["a"].extend({name:"QInput",mixins:[Vo,ha,fa,Mn,jo,Kt],props:{value:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},watch:{value(t){if(!0===this.hasMask){if(!0===this.stopValueWatcher&&(this.stopValueWatcher=!1,String(t)===this.emitCachedValue))return;this.__updateMaskValue(t)}else this.innerValue!==t&&(this.innerValue=t,"number"===this.type&&!0===this.hasOwnProperty("tempValue")&&(!0===this.typedNumber?this.typedNumber=!1:delete this.tempValue));!0===this.autogrow&&this.$nextTick(this.__adjustHeight)},type(){this.$refs.input&&(this.$refs.input.value=this.value)},autogrow(t){if(!0===t)this.$nextTick(this.__adjustHeight);else if(this.qAttrs.rows>0&&void 0!==this.$refs.input){const t=this.$refs.input;t.style.height="auto"}},dense(){!0===this.autogrow&&this.$nextTick(this.__adjustHeight)}},data(){return{innerValue:this.__getInitialMaskedValue()}},computed:{isTextarea(){return"textarea"===this.type||!0===this.autogrow},isTypeText(){return!0===this.isTextarea||["text","search","url","tel","password"].includes(this.type)},fieldClass(){return"q-"+(!0===this.isTextarea?"textarea":"input")+(!0===this.autogrow?" q-textarea--autogrow":"")},hasShadow(){return"file"!==this.type&&"string"===typeof this.shadowText&&this.shadowText.length>0},onEvents(){const t={...this.qListeners,input:this.__onInput,paste:this.__onPaste,change:this.__onChange,blur:this.__onFinishEditing,focus:L};return t.compositionstart=t.compositionupdate=t.compositionend=this.__onComposition,!0===this.hasMask&&(t.keydown=this.__onMaskedKeydown),!0===this.autogrow&&(t.animationend=this.__adjustHeight),t},inputAttrs(){const t={tabindex:0,"data-autofocus":this.autofocus||void 0,rows:"textarea"===this.type?6:void 0,"aria-label":this.label,name:this.nameProp,...this.qAttrs,id:this.targetUid,type:this.type,maxlength:this.maxlength,disabled:!0===this.disable,readonly:!0===this.readonly};return!0===this.autogrow&&(t.rows=1),t}},methods:{focus(){bi(()=>{const t=document.activeElement;void 0===this.$refs.input||this.$refs.input===t||null!==t&&t.id===this.targetUid||this.$refs.input.focus({preventScroll:!0})})},select(){void 0!==this.$refs.input&&this.$refs.input.select()},getNativeElement(){return this.$refs.input},__onPaste(t){if(!0===this.hasMask&&!0!==this.reverseFillMask){const e=t.target;this.__moveCursorForPaste(e,e.selectionStart,e.selectionEnd)}this.$emit("paste",t)},__onInput(t){if(!t||!t.target||!0===t.target.qComposing)return;if("file"===this.type)return void this.$emit("input",t.target.files);const e=t.target.value;if(!0===this.hasMask)this.__updateMaskValue(e,!1,t.inputType);else if(this.__emitValue(e),!0===this.isTypeText&&t.target===document.activeElement){const{selectionStart:i,selectionEnd:n}=t.target;void 0!==i&&void 0!==n&&this.$nextTick(()=>{t.target===document.activeElement&&0===e.indexOf(t.target.value)&&t.target.setSelectionRange(i,n)})}!0===this.autogrow&&this.__adjustHeight()},__emitValue(t,e){this.emitValueFn=()=>{"number"!==this.type&&!0===this.hasOwnProperty("tempValue")&&delete this.tempValue,this.value!==t&&this.emitCachedValue!==t&&(this.emitCachedValue=t,!0===e&&(this.stopValueWatcher=!0),this.$emit("input",t),this.$nextTick(()=>{this.emitCachedValue===t&&(this.emitCachedValue=NaN)})),this.emitValueFn=void 0},"number"===this.type&&(this.typedNumber=!0,this.tempValue=t),void 0!==this.debounce?(clearTimeout(this.emitTimer),this.tempValue=t,this.emitTimer=setTimeout(this.emitValueFn,this.debounce)):this.emitValueFn()},__adjustHeight(){requestAnimationFrame(()=>{const t=this.$refs.input;if(void 0!==t){const e=t.parentNode.style,{overflow:i}=t.style;!0!==this.$q.platform.is.firefox&&(t.style.overflow="hidden"),t.style.height="1px",e.marginBottom=t.scrollHeight-1+"px",t.style.height=t.scrollHeight+"px",t.style.overflow=i,e.marginBottom=""}})},__onChange(t){this.__onComposition(t),clearTimeout(this.emitTimer),void 0!==this.emitValueFn&&this.emitValueFn(),this.$emit("change",t)},__onFinishEditing(t){void 0!==t&&L(t),clearTimeout(this.emitTimer),void 0!==this.emitValueFn&&this.emitValueFn(),this.typedNumber=!1,this.stopValueWatcher=!1,delete this.tempValue,"file"!==this.type&&setTimeout(()=>{void 0!==this.$refs.input&&(this.$refs.input.value=void 0!==this.innerValue?this.innerValue:"")})},__getCurValue(){return!0===this.hasOwnProperty("tempValue")?this.tempValue:void 0!==this.innerValue?this.innerValue:""},__getShadowControl(t){return t("div",{staticClass:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(!0===this.isTextarea?"":" text-no-wrap")},[t("span",{staticClass:"invisible"},this.__getCurValue()),t("span",this.shadowText)])},__getControl(t){return t(!0===this.isTextarea?"textarea":"input",{ref:"input",staticClass:"q-field__native q-placeholder",style:this.inputStyle,class:this.inputClass,attrs:this.inputAttrs,on:this.onEvents,domProps:"file"!==this.type?{value:this.__getCurValue()}:this.formDomProps})}},created(){this.emitCachedValue=NaN},mounted(){!0===this.autogrow&&this.__adjustHeight()},beforeDestroy(){this.__onFinishEditing()}});const ga={threshold:0,root:null,rootMargin:"0px"};function va(t,e,i){let n,s,r;"function"===typeof i?(n=i,s=ga,r=void 0===e.cfg):(n=i.handler,s=Object.assign({},ga,i.cfg),r=void 0===e.cfg||!1===Wn(e.cfg,s)),e.handler!==n&&(e.handler=n),!0===r&&(e.cfg=s,void 0!==e.observer&&e.observer.unobserve(t),e.observer=new IntersectionObserver(([i])=>{if("function"===typeof e.handler){if(null===i.rootBounds&&(void 0!==t.__vue__?!0!==t.__vue__._inactive:!0===document.body.contains(t)))return e.observer.unobserve(t),void e.observer.observe(t);const n=e.handler(i,e.observer);(!1===n||!0===e.once&&!0===i.isIntersecting)&&_a(t)}},s),e.observer.observe(t))}function _a(t){const e=t.__qvisible;void 0!==e&&(void 0!==e.observer&&e.observer.unobserve(t),delete t.__qvisible)}var ya={name:"intersection",inserted(t,{modifiers:e,value:i}){void 0!==t.__qvisible&&(_a(t),t.__qvisible_destroyed=!0);const n={once:!0===e.once};va(t,n,i),t.__qvisible=n},update(t,e){const i=t.__qvisible;void 0!==i&&va(t,i,e.value)},unbind(t){void 0===t.__qvisible_destroyed?_a(t):delete t.__qvisible_destroyed}},ba=a["a"].extend({name:"QIntersection",mixins:[Qt,Kt],directives:{Intersection:ya},props:{once:Boolean,transition:String,ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean},data(){return{showing:!0===u&&this.ssrPrerender}},computed:{value(){return void 0!==this.root||void 0!==this.margin||void 0!==this.threshold?{handler:this.__trigger,cfg:{root:this.root,rootMargin:this.margin,threshold:this.threshold}}:this.__trigger},directives(){if(!0!==this.disable&&(!0!==u||!0!==this.once||!0!==this.ssrPrerender))return[{name:"intersection",value:this.value,modifiers:{once:this.once}}]}},methods:{__trigger(t){this.showing!==t.isIntersecting&&(this.showing=t.isIntersecting,void 0!==this.qListeners.visibility&&this.$emit("visibility",this.showing))}},render(t){const e=!0===this.showing?[t("div",{key:"content"},Zt(this,"default"))]:void 0;return t(this.tag,{staticClass:"q-intersection",on:{...this.qListeners},directives:this.directives},this.transition?[t("transition",{props:{name:"q-transition--"+this.transition}},e)]:e)}});const xa=[34,37,40,33,39,38];var Sa=a["a"].extend({name:"QKnob",mixins:[{props:cs.options.props},Cn],directives:{TouchPan:bs},props:{innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},data(){const t=this.__getInnerMin(this.innerMin),e=this.__getInnerMax(this.innerMax);return{model:null===this.value?t:Et(this.value,t,e),dragging:!1}},watch:{modelUpdate(){this.model=null===this.value?this.computedInnerMin:Et(this.value,this.computedInnerMin,this.computedInnerMax),this.__updateValue(!0)}},computed:{classes(){return"q-knob non-selectable"+(!0===this.editable?" q-knob--editable":!0===this.disable?" disabled":"")},computedInnerMin(){return this.__getInnerMin(this.innerMin)},computedInnerMax(){return this.__getInnerMax(this.innerMax)},modelUpdate(){return`${this.value}|${this.computedInnerMin}|${this.computedInnerMax}`},editable(){return!1===this.disable&&!1===this.readonly},decimals(){return(String(this.step).trim("0").split(".")[1]||"").length},computedStep(){return 0===this.step?1:this.step},computedInstantFeedback(){return!0===this.instantFeedback||!0===this.dragging},onEvents(){return!0===this.$q.platform.is.mobile?{click:this.__click}:{mousedown:this.__activate,click:this.__click,keydown:this.__keydown,keyup:this.__keyup}},attrs(){const t={role:"slider","aria-valuemin":this.computedInnerMin,"aria-valuemax":this.computedInnerMax,"aria-valuenow":this.value};return!0===this.editable?t.tabindex=this.tabindex:t["aria-"+(!0===this.disable?"disabled":"readonly")]="",t}},methods:{__getInnerMin(t){return!0===isNaN(t)||this.innerMin<this.min?this.min:this.innerMin},__getInnerMax(t){return!0===isNaN(t)||t>this.max?this.max:this.innerMax},__updateCenterPosition(){const{top:t,left:e,width:i,height:n}=this.$el.getBoundingClientRect();this.centerPosition={top:t+n/2,left:e+i/2}},__pan(t){t.isFinal?(this.__updatePosition(t.evt,!0),this.dragging=!1):t.isFirst?(this.__updateCenterPosition(),this.dragging=!0,this.__updatePosition(t.evt)):this.__updatePosition(t.evt)},__click(t){this.__updateCenterPosition(),this.__updatePosition(t,!0)},__keydown(t){if(!xa.includes(t.keyCode))return;P(t);const e=([34,33].includes(t.keyCode)?10:1)*this.computedStep,i=[34,37,40].includes(t.keyCode)?-e:e;this.model=Et(parseFloat((this.model+i).toFixed(this.decimals)),this.computedInnerMin,this.computedInnerMax),this.__updateValue()},__keyup(t){xa.includes(t.keyCode)&&this.__updateValue(!0)},__activate(t){this.__updateCenterPosition(),this.__updatePosition(t)},__updatePosition(t,e){const i=this.centerPosition,n=k(t),s=Math.abs(n.top-i.top),r=Math.sqrt(s**2+Math.abs(n.left-i.left)**2);let o=Math.asin(s/r)*(180/Math.PI);o=n.top<i.top?i.left<n.left?90-o:270+o:i.left<n.left?o+90:270-o,!0===this.$q.lang.rtl?o=Lt(-o-this.angle,0,360):this.angle&&(o=Lt(o-this.angle,0,360)),!0===this.reverse&&(o=360-o);let a=this.min+o/360*(this.max-this.min);if(0!==this.step){const t=this.computedStep,e=a%t;a=a-e+(Math.abs(e)>=t/2?(e<0?-1:1)*t:0),a=parseFloat(a.toFixed(this.decimals))}a=Et(a,this.computedInnerMin,this.computedInnerMax),this.$emit("drag-value",a),this.model!==a&&(this.model=a),this.__updateValue(e)},__updateValue(t){this.value!==this.model&&this.$emit("input",this.model),!0===t&&this.$emit("change",this.model)},__getNameInput(){return this.$createElement("input",{attrs:this.formAttrs})}},render(t){const e={class:this.classes,attrs:this.attrs,props:{...this.$props,value:this.model,instantFeedback:this.computedInstantFeedback}};return!0===this.editable&&(e.on=this.onEvents,e.directives=Pt(this,"dir",[{name:"touch-pan",value:this.__pan,modifiers:{prevent:!0,stop:!0,mouse:!0}}]),void 0!==this.name&&(e.scopedSlots={internal:this.__getNameInput})),t(cs,e,Zt(this,"default"))}});const{passive:wa}=w;var Ca=a["a"].extend({name:"QScrollObserver",props:{debounce:[String,Number],horizontal:Boolean,scrollTarget:{default:void 0}},render:M,data(){return{pos:0,dir:!0===this.horizontal?"right":"down",dirChanged:!1,dirChangePos:0}},watch:{scrollTarget(){this.__unconfigureScrollTarget(),this.__configureScrollTarget()},"$q.lang.rtl"(){this.__emit()}},methods:{getPosition(){return{position:this.pos,direction:this.dir,directionChanged:this.dirChanged,inflexionPosition:this.dirChangePos}},trigger(t){if(!0===t||0===this.debounce||"0"===this.debounce)this.__emit();else if(void 0===this.clearTimer){const[t,e]=this.debounce?[setTimeout(this.__emit,this.debounce),clearTimeout]:[requestAnimationFrame(this.__emit),cancelAnimationFrame];this.clearTimer=()=>{e(t),this.clearTimer=void 0}}},__emit(){void 0!==this.clearTimer&&this.clearTimer();const t=!0===this.horizontal?Hi:Vi,e=Math.max(0,t(this.__scrollTarget)),i=e-this.pos,n=!0===this.horizontal?i<0?"left":"right":i<0?"up":"down";this.dirChanged=this.dir!==n,this.dirChanged&&(this.dir=n,this.dirChangePos=this.pos),this.pos=e,this.$emit("scroll",this.getPosition())},__configureScrollTarget(){this.__scrollTarget=Fi(this.$el.parentNode,this.scrollTarget),this.__scrollTarget.addEventListener("scroll",this.trigger,wa),this.trigger(!0)},__unconfigureScrollTarget(){void 0!==this.__scrollTarget&&(this.__scrollTarget.removeEventListener("scroll",this.trigger,wa),this.__scrollTarget=void 0)}},mounted(){this.__configureScrollTarget()},beforeDestroy(){void 0!==this.clearTimer&&this.clearTimer(),this.__unconfigureScrollTarget()}}),Ma=a["a"].extend({name:"QLayout",mixins:[Kt],provide(){return{layout:this}},props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())}},data(){return{height:this.$q.screen.height,width:!0===this.container?0:this.$q.screen.width,containerHeight:0,scrollbarWidth:!0===u?0:Ji(),header:{size:0,offset:0,space:!1},right:{size:300,offset:0,space:!1},footer:{size:0,offset:0,space:!1},left:{size:300,offset:0,space:!1},scroll:{position:0,direction:"down"}}},computed:{rows(){const t=this.view.toLowerCase().split(" ");return{top:t[0].split(""),middle:t[1].split(""),bottom:t[2].split("")}},style(){return!0===this.container?null:{minHeight:this.$q.screen.height+"px"}},targetStyle(){if(0!==this.scrollbarWidth)return{[!0===this.$q.lang.rtl?"left":"right"]:this.scrollbarWidth+"px"}},targetChildStyle(){if(0!==this.scrollbarWidth)return{[!0===this.$q.lang.rtl?"right":"left"]:0,[!0===this.$q.lang.rtl?"left":"right"]:`-${this.scrollbarWidth}px`,width:`calc(100% + ${this.scrollbarWidth}px)`}},totalWidth(){return this.width+this.scrollbarWidth},classes(){return"q-layout q-layout--"+(!0===this.container?"containerized":"standard")},scrollbarEvtAction(){return!0!==this.container&&this.scrollbarWidth>0?"add":"remove"}},watch:{scrollbarEvtAction:"__updateScrollEvent"},created(){this.instances={}},mounted(){"add"===this.scrollbarEvtAction&&this.__updateScrollEvent("add")},beforeDestroy(){"add"===this.scrollbarEvtAction&&this.__updateScrollEvent("remove")},render(t){const e=t("div",{class:this.classes,style:this.style,attrs:{tabindex:-1},on:{...this.qListeners}},te([t(Ca,{on:Pt(this,"scroll",{scroll:this.__onPageScroll})}),t(ks,{on:Pt(this,"resizeOut",{resize:this.__onPageResize})})],this,"default"));return!0===this.container?t("div",{staticClass:"q-layout-container overflow-hidden"},[t(ks,{on:Pt(this,"resizeIn",{resize:this.__onContainerResize})}),t("div",{staticClass:"absolute-full",style:this.targetStyle},[t("div",{staticClass:"scroll",style:this.targetChildStyle},[e])])]):e},methods:{__animate(){void 0!==this.timer?clearTimeout(this.timer):document.body.classList.add("q-body--layout-animate"),this.timer=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),this.timer=void 0},150)},__onPageScroll(t){!0!==this.container&&!0===document.qScrollPrevented||(this.scroll=t),void 0!==this.qListeners.scroll&&this.$emit("scroll",t)},__onPageResize({height:t,width:e}){let i=!1;this.height!==t&&(i=!0,this.height=t,void 0!==this.qListeners["scroll-height"]&&this.$emit("scroll-height",t),this.__updateScrollbarWidth()),this.width!==e&&(i=!0,this.width=e),!0===i&&void 0!==this.qListeners.resize&&this.$emit("resize",{height:t,width:e})},__onContainerResize({height:t}){this.containerHeight!==t&&(this.containerHeight=t,this.__updateScrollbarWidth())},__updateScrollbarWidth(){if(!0===this.container){const t=this.height>this.containerHeight?Ji():0;this.scrollbarWidth!==t&&(this.scrollbarWidth=t)}},__updateScrollEvent(t){void 0!==this.timerScrollbar&&"remove"===t&&(clearTimeout(this.timerScrollbar),this.__restoreScrollbar()),window[t+"EventListener"]("resize",this.__hideScrollbar)},__hideScrollbar(){if(void 0===this.timerScrollbar){const t=document.body;if(t.scrollHeight>this.$q.screen.height)return;t.classList.add("hide-scrollbar")}else clearTimeout(this.timerScrollbar);this.timerScrollbar=setTimeout(this.__restoreScrollbar,200)},__restoreScrollbar(){this.timerScrollbar=void 0,document.body.classList.remove("hide-scrollbar")}}}),Ta=a["a"].extend({name:"QMarkupTable",mixins:[ye,Kt],props:{dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:t=>["horizontal","vertical","cell","none"].includes(t)},wrapCells:Boolean},computed:{classes(){return`q-table--${this.separator}-separator`+(!0===this.isDark?" q-table--dark q-table__card--dark q-dark":"")+(!0===this.dense?" q-table--dense":"")+(!0===this.flat?" q-table--flat":"")+(!0===this.bordered?" q-table--bordered":"")+(!0===this.square?" q-table--square":"")+(!1===this.wrapCells?" q-table--no-wrap":"")}},render(t){return t("div",{staticClass:"q-markup-table q-table__container q-table__card",class:this.classes,on:{...this.qListeners}},[t("table",{staticClass:"q-table"},Zt(this,"default"))])}}),ka=a["a"].extend({name:"QNoSsr",mixins:[Ts,Qt,Kt],props:{placeholder:String},render(t){const e={on:{...this.qListeners}};if(!0===this.canRender){const i=Zt(this,"default");return void 0===i?i:i.length>1?t(this.tag,e,i):i[0]}e.staticClass="q-no-ssr-placeholder";const i=Zt(this,"placeholder");return void 0!==i?i.length>1?t(this.tag,e,i):i[0]:void 0!==this.placeholder?t(this.tag,e,[this.placeholder]):void 0}}),Ea=a["a"].extend({name:"QRadio",mixins:[ye,es,Cn,is],props:{value:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},computed:{isTrue(){return this.value===this.val},classes(){return"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(!0===this.disable?" disabled":"")+(!0===this.isDark?" q-radio--dark":"")+(!0===this.dense?" q-radio--dense":"")+(!0===this.leftLabel?" reverse":"")},innerClass(){const t=void 0===this.color||!0!==this.keepColor&&!0!==this.isTrue?"":" text-"+this.color;return`q-radio__inner--${!0===this.isTrue?"truthy":"falsy"}${t}`},computedIcon(){return!0===this.isTrue?this.checkedIcon:this.uncheckedIcon},computedTabindex(){return!0===this.disable?-1:this.tabindex||0},formAttrs(){const t={type:"radio"};return void 0!==this.name&&Object.assign(t,{name:this.name,value:this.val}),t},formDomProps(){if(void 0!==this.name&&!0===this.isTrue)return{checked:!0}},attrs(){const t={tabindex:this.computedTabindex,role:"radio","aria-label":this.label,"aria-checked":!0===this.isTrue?"true":"false"};return!0===this.disable&&(t["aria-disabled"]="true"),t}},methods:{set(t){void 0!==t&&(P(t),this.__refocusTarget(t)),!0!==this.disable&&!0!==this.isTrue&&this.$emit("input",this.val,t)}},render(t){const e=void 0!==this.computedIcon?[t("div",{key:"icon",staticClass:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[t(ge,{staticClass:"q-radio__icon",props:{name:this.computedIcon}})])]:[t("svg",{key:"svg",staticClass:"q-radio__bg absolute non-selectable",attrs:{focusable:"false",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}}),t("path",{staticClass:"q-radio__check",attrs:{d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"}})])];!0!==this.disable&&this.__injectFormInput(e,"unshift","q-radio__native q-ma-none q-pa-none");const i=[t("div",{staticClass:"q-radio__inner relative-position",class:this.innerClass,style:this.sizeStyle,attrs:{"aria-hidden":"true"}},e)];void 0!==this.__refocusTargetEl&&i.push(this.__refocusTargetEl);const n=void 0!==this.label?te([this.label],this,"default"):Zt(this,"default");return void 0!==n&&i.push(t("div",{staticClass:"q-radio__label q-anchor--skip"},n)),t("div",{class:this.classes,attrs:this.attrs,on:Pt(this,"inpExt",{click:this.set,keydown:t=>{13!==t.keyCode&&32!==t.keyCode||P(t)},keyup:t=>{13!==t.keyCode&&32!==t.keyCode||this.set(t)}})},i)}}),La=a["a"].extend({name:"QToggle",mixins:[ns],props:{icon:String,iconColor:String},computed:{computedIcon(){return(!0===this.isTrue?this.checkedIcon:!0===this.isIndeterminate?this.indeterminateIcon:this.uncheckedIcon)||this.icon},computedIconColor(){if(!0===this.isTrue)return this.iconColor}},methods:{__getInner(t){return[t("div",{staticClass:"q-toggle__track"}),t("div",{staticClass:"q-toggle__thumb absolute flex flex-center no-wrap"},void 0!==this.computedIcon?[t(ge,{props:{name:this.computedIcon,color:this.computedIconColor}})]:void 0)]}},created(){this.type="toggle"}});const Aa={radio:Ea,checkbox:ss,toggle:La},Pa=Object.keys(Aa);var Ra=a["a"].extend({name:"QOptionGroup",mixins:[ye,Kt],props:{value:{required:!0},options:{type:Array,validator(t){return t.every(t=>"value"in t&&"label"in t)}},name:String,type:{default:"radio",validator:t=>Pa.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},computed:{component(){return Aa[this.type]},model(){return Array.isArray(this.value)?this.value.slice():this.value},classes(){return"q-option-group q-gutter-x-sm"+(!0===this.inline?" q-option-group--inline":"")},attrs(){if("radio"===this.type){const t={role:"radiogroup"};return!0===this.disable&&(t["aria-disabled"]="true"),t}return{role:"group"}}},methods:{__update(t){this.$emit("input",t)}},created(){const t=Array.isArray(this.value);"radio"===this.type?t&&console.error("q-option-group: model should not be array"):!1===t&&console.error("q-option-group: model should be array in your case")},render(t){return t("div",{class:this.classes,attrs:this.attrs,on:{...this.qListeners}},this.options.map((e,i)=>{const n=void 0!==this.$scopedSlots["label-"+i]?this.$scopedSlots["label-"+i](e):void 0!==this.$scopedSlots.label?this.$scopedSlots.label(e):void 0;return t("div",[t(this.component,{props:{value:this.value,val:e.value,name:void 0===e.name?this.name:e.name,disable:this.disable||e.disable,label:void 0===n?e.label:void 0,leftLabel:void 0===e.leftLabel?this.leftLabel:e.leftLabel,color:void 0===e.color?this.color:e.color,checkedIcon:e.checkedIcon,uncheckedIcon:e.uncheckedIcon,dark:e.dark||this.isDark,size:void 0===e.size?this.size:e.size,dense:this.dense,keepColor:void 0===e.keepColor?this.keepColor:e.keepColor},on:Pt(this,"inp",{input:this.__update})},n)])}))}}),Oa=a["a"].extend({name:"QPage",mixins:[Kt],inject:{pageContainer:{default(){console.error("QPage needs to be child of QPageContainer")}},layout:{}},props:{padding:Boolean,styleFn:Function},computed:{style(){const t=(!0===this.layout.header.space?this.layout.header.size:0)+(!0===this.layout.footer.space?this.layout.footer.size:0);if("function"===typeof this.styleFn){const e=!0===this.layout.container?this.layout.containerHeight:this.$q.screen.height;return this.styleFn(t,e)}return{minHeight:!0===this.layout.container?this.layout.containerHeight-t+"px":0===this.$q.screen.height?`calc(100vh - ${t}px)`:this.$q.screen.height-t+"px"}},classes(){if(!0===this.padding)return"q-layout-padding"}},render(t){return t("main",{staticClass:"q-page",style:this.style,class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}}),Ia=a["a"].extend({name:"QPageContainer",mixins:[Kt],inject:{layout:{default(){console.error("QPageContainer needs to be child of QLayout")}}},provide:{pageContainer:!0},computed:{style(){const t={};return!0===this.layout.header.space&&(t.paddingTop=this.layout.header.size+"px"),!0===this.layout.right.space&&(t["padding"+(!0===this.$q.lang.rtl?"Left":"Right")]=this.layout.right.size+"px"),!0===this.layout.footer.space&&(t.paddingBottom=this.layout.footer.size+"px"),!0===this.layout.left.space&&(t["padding"+(!0===this.$q.lang.rtl?"Right":"Left")]=this.layout.left.size+"px"),t}},render(t){return t("div",{staticClass:"q-page-container",style:this.style,on:{...this.qListeners}},Zt(this,"default"))}}),Da=a["a"].extend({name:"QPageSticky",mixins:[Kt],inject:{layout:{default(){console.error("QPageSticky needs to be child of QLayout")}}},props:{position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,validator:t=>2===t.length},expand:Boolean},computed:{attach(){const t=this.position;return{top:t.indexOf("top")>-1,right:t.indexOf("right")>-1,bottom:t.indexOf("bottom")>-1,left:t.indexOf("left")>-1,vertical:"top"===t||"bottom"===t,horizontal:"left"===t||"right"===t}},top(){return this.layout.header.offset},right(){return this.layout.right.offset},bottom(){return this.layout.footer.offset},left(){return this.layout.left.offset},style(){let t=0,e=0;const i=this.attach,n=!0===this.$q.lang.rtl?-1:1;!0===i.top&&0!==this.top?e=this.top+"px":!0===i.bottom&&0!==this.bottom&&(e=-this.bottom+"px"),!0===i.left&&0!==this.left?t=n*this.left+"px":!0===i.right&&0!==this.right&&(t=-n*this.right+"px");const s={transform:`translate(${t}, ${e})`};return this.offset&&(s.margin=`${this.offset[1]}px ${this.offset[0]}px`),!0===i.vertical?(0!==this.left&&(s[!0===this.$q.lang.rtl?"right":"left"]=this.left+"px"),0!==this.right&&(s[!0===this.$q.lang.rtl?"left":"right"]=this.right+"px")):!0===i.horizontal&&(0!==this.top&&(s.top=this.top+"px"),0!==this.bottom&&(s.bottom=this.bottom+"px")),s},classes(){return`fixed-${this.position} q-page-sticky--${!0===this.expand?"expand":"shrink"}`}},render(t){const e=Zt(this,"default");return t("div",{staticClass:"q-page-sticky row flex-center",class:this.classes,style:this.style,on:{...this.qListeners}},!0===this.expand?e:[t("div",e)])}}),Na=a["a"].extend({name:"QPageScroller",mixins:[Da],props:{scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{default:()=>[18,18]}},inject:{layout:{default(){console.error("QPageScroller needs to be used within a QLayout")}}},data(){return{showing:this.__isVisible()}},computed:{scrollHeight(){return this.layout.height-(!0===this.layout.container?this.layout.containerHeight:this.$q.screen.height)},onEvents(){return{...this.qListeners,click:this.__onClick}}},watch:{"layout.scroll.position"(){this.__updateVisibility()},reverse:{handler(t){!0===t?void 0===this.heightWatcher&&(this.heightWatcher=this.$watch("scrollHeight",this.__updateVisibility)):void 0!==this.heightWatcher&&this.__cleanup()},immediate:!0}},methods:{__isVisible(){return!0===this.reverse?this.scrollHeight-this.layout.scroll.position>this.scrollOffset:this.layout.scroll.position>this.scrollOffset},__onClick(t){const e=Fi(!0===this.layout.container?this.$el:this.layout.$el);Qi(e,!0===this.reverse?this.layout.height:0,this.duration),this.$emit("click",t)},__updateVisibility(){const t=this.__isVisible();this.showing!==t&&(this.showing=t)},__cleanup(){this.heightWatcher(),this.heightWatcher=void 0}},render(t){return t("transition",{props:{name:"q-transition--fade"}},!0===this.showing?[t("div",{staticClass:"q-page-scroller",on:this.onEvents},[Da.options.render.call(this,t)])]:null)},beforeDestroy(){void 0!==this.heightWatcher&&this.__cleanup()}});function za(t,e){return[!0,!1].includes(t)?t:e}var qa=a["a"].extend({name:"QPagination",mixins:[ye,Kt],props:{value:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:t=>("string"===typeof t?parseInt(t,10):t)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:t=>""===t||ti.includes(t)},activeColor:String,activeTextColor:String,padding:{type:String,default:"3px 2px"}},data(){return{newPage:null}},watch:{min(){this.model=this.value},max(){this.model=this.value}},computed:{model:{get(){return this.value},set(t){if(t=parseInt(t,10),this.disable||isNaN(t))return;const e=Et(t,this.__min,this.__max);this.$emit("input",e)}},inputPlaceholder(){return this.model+" / "+this.__max},__min(){return parseInt(this.min,10)},__max(){return parseInt(this.max,10)},__maxPages(){return parseInt(this.maxPages,10)},__boundaryLinks(){return za(this.boundaryLinks,this.input)},__boundaryNumbers(){return za(this.boundaryNumbers,!this.input)},__directionLinks(){return za(this.directionLinks,this.input)},__ellipses(){return za(this.ellipses,!this.input)},__btnDesign(){return ei(this,"flat")},__btnActiveDesign(){const t={[this.__btnDesign]:!1};return""!==this.activeDesign&&(t[this.activeDesign]=!0),t},icons(){const t=[this.iconFirst||this.$q.iconSet.pagination.first,this.iconPrev||this.$q.iconSet.pagination.prev,this.iconNext||this.$q.iconSet.pagination.next,this.iconLast||this.$q.iconSet.pagination.last];return!0===this.$q.lang.rtl?t.reverse():t},attrs(){const t={role:"navigation"};return!0===this.disable&&(t["aria-disabled"]="true"),t},btnProps(){return{[this.__btnDesign]:!0,round:this.round,rounded:this.rounded,padding:this.padding,color:this.color,textColor:this.textColor,size:this.size,ripple:null===this.ripple||this.ripple}},activeBtnProps(){return{...this.__btnActiveDesign,color:this.activeColor||this.color,textColor:this.activeTextColor||this.textColor}},btnConfig(){let t=Math.max(this.__maxPages,1+(this.__ellipses?2:0)+(this.__boundaryNumbers?2:0));const e={pgFrom:this.__min,pgTo:this.__max,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:Math.max(2,String(this.__max).length)+"em"}};return this.__maxPages&&t<this.__max-this.__min+1&&(t=1+2*Math.floor(t/2),e.pgFrom=Math.max(this.__min,Math.min(this.__max-t+1,this.value-Math.floor(t/2))),e.pgTo=Math.min(this.__max,e.pgFrom+t-1),this.__boundaryNumbers&&(e.boundaryStart=!0,e.pgFrom++),this.__ellipses&&e.pgFrom>this.__min+(this.__boundaryNumbers?1:0)&&(e.ellipsesStart=!0,e.pgFrom++),this.__boundaryNumbers&&(e.boundaryEnd=!0,e.pgTo--),this.__ellipses&&e.pgTo<this.__max-(this.__boundaryNumbers?1:0)&&(e.ellipsesEnd=!0,e.pgTo--)),e},inputEvents(){const t=()=>{this.model=this.newPage,this.newPage=null};return{input:t=>{this.newPage=t},keyup:e=>{!0===ut(e,13)&&t()},blur:t}}},methods:{set(t){this.model=t},setByOffset(t){this.model=this.model+t},__getBtn(t,e,i,n,s){return e.props={...this.btnProps,...i},e.attrs={"aria-label":n,"aria-current":"false",...e.attrs},!0===s&&(Object.assign(e.props,this.activeBtnProps),e.attrs["aria-current"]="true"),void 0!==n&&(void 0!==this.toFn?e.props.to=this.toFn(n):e.on={click:()=>{this.set(n)}}),t(li,e)}},render(t){const e=[],i=[];let n;if(!0===this.__boundaryLinks&&(e.push(this.__getBtn(t,{key:"bls"},{disable:this.disable||this.value<=this.__min,icon:this.icons[0]},this.__min)),i.unshift(this.__getBtn(t,{key:"ble"},{disable:this.disable||this.value>=this.__max,icon:this.icons[3]},this.__max))),!0===this.__directionLinks&&(e.push(this.__getBtn(t,{key:"bdp"},{disable:this.disable||this.value<=this.__min,icon:this.icons[1]},this.value-1)),i.unshift(this.__getBtn(t,{key:"bdn"},{disable:this.disable||this.value>=this.__max,icon:this.icons[2]},this.value+1))),!0!==this.input){n=[];const{pgFrom:s,pgTo:r,marginalStyle:o}=this.btnConfig;if(!0===this.btnConfig.boundaryStart){const i=this.__min===this.value;e.push(this.__getBtn(t,{key:"bns",style:o},{disable:this.disable,label:this.__min},this.__min,i))}if(!0===this.btnConfig.boundaryEnd){const e=this.__max===this.value;i.unshift(this.__getBtn(t,{key:"bne",style:o},{disable:this.disable,label:this.__max},this.__max,e))}!0===this.btnConfig.ellipsesStart&&e.push(this.__getBtn(t,{key:"bes",style:o},{disable:this.disable,label:"…",ripple:!1},s-1)),!0===this.btnConfig.ellipsesEnd&&i.unshift(this.__getBtn(t,{key:"bee",style:o},{disable:this.disable,label:"…",ripple:!1},r+1));for(let e=s;e<=r;e++)n.push(this.__getBtn(t,{key:"bpg"+e,style:o},{disable:this.disable,label:e},e,e===this.value))}return t("div",{staticClass:"q-pagination row no-wrap items-center",class:{disabled:this.disable},attrs:this.attrs,on:{...this.qListeners}},[t("div",{staticClass:"q-pagination__content row no-wrap items-center"},[...e,t("div",{staticClass:"q-pagination__middle row justify-center",on:!0===this.input?Pt(this,"stop",{input:L}):null},!0===this.input?[t(ma,{staticClass:"inline",style:{width:this.inputPlaceholder.length/1.5+"em"},props:{type:"number",dense:!0,value:this.newPage,disable:this.disable,dark:this.isDark,borderless:!0,inputClass:this.inputClass,inputStyle:this.inputStyle},attrs:{placeholder:this.inputPlaceholder,min:this.__min,max:this.__max},on:{...this.inputEvents}})]:n),...i])])}}),Ba=function(t){let e,i,n=!1;function s(){i=arguments,!0!==n&&(n=!0,e=requestAnimationFrame(()=>{t.apply(this,i),i=void 0,n=!1}))}return s.cancel=()=>{window.cancelAnimationFrame(e),n=!1},s};const{passive:Fa}=w;var Ua=a["a"].extend({name:"QParallax",mixins:[Kt],props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:t=>t>=0&&t<=1},scrollTarget:{default:void 0}},data(){return{scrolling:!1,percentScrolled:0}},watch:{height(){!0===this.working&&this.__updatePos()},scrollTarget(){!0===this.working&&(this.__stop(),this.__start())}},methods:{__update(t){this.percentScrolled=t,void 0!==this.qListeners.scroll&&this.$emit("scroll",t)},__updatePos(){let t,e,i;this.__scrollTarget===window?(t=0,e=window.innerHeight,i=e):(t=Be(this.__scrollTarget).top,e=Fe(this.__scrollTarget),i=t+e);const n=Be(this.$el).top,s=n+this.height;if(void 0!==this.observer||s>t&&n<i){const t=(i-n)/(this.height+e);this.__setPos((this.mediaHeight-this.height)*t*this.speed),this.__update(t)}},__setPos(t){this.media.style.transform=`translate3d(-50%,${Math.round(t)}px,0)`},__onResize(){this.mediaHeight=this.media.naturalHeight||this.media.videoHeight||Fe(this.media),!0===this.working&&this.__updatePos()},__start(){this.working=!0,this.__scrollTarget=Fi(this.$el,this.scrollTarget),this.__scrollTarget.addEventListener("scroll",this.__updatePos,Fa),window.addEventListener("resize",this.__resizeHandler,Fa),this.__updatePos()},__stop(){!0===this.working&&(this.working=!1,this.__setPos.cancel(),this.__update.cancel(),this.__resizeHandler.cancel(),this.__scrollTarget.removeEventListener("scroll",this.__updatePos,Fa),window.removeEventListener("resize",this.__resizeHandler,Fa),this.__scrollTarget=void 0)}},render(t){return t("div",{staticClass:"q-parallax",style:{height:this.height+"px"},on:{...this.qListeners}},[t("div",{ref:"mediaParent",staticClass:"q-parallax__media absolute-full"},void 0!==this.$scopedSlots.media?this.$scopedSlots.media():[t("img",{ref:"media",attrs:{src:this.src}})]),t("div",{staticClass:"q-parallax__content absolute-full column flex-center"},void 0!==this.$scopedSlots.content?this.$scopedSlots.content({percentScrolled:this.percentScrolled}):Zt(this,"default"))])},mounted(){this.__setPos=Ba(this.__setPos),this.__update=Ba(this.__update),this.__resizeHandler=Ba(this.__onResize),this.media=void 0!==this.$scopedSlots.media?this.$refs.mediaParent.children[0]:this.$refs.media,this.media.onload=this.media.onloadstart=this.media.loadedmetadata=this.__onResize,this.__onResize(),this.media.style.display="initial",void 0!==window.IntersectionObserver?(this.observer=new IntersectionObserver(t=>{this[!0===t[0].isIntersecting?"__start":"__stop"]()}),this.observer.observe(this.$el)):this.__start()},beforeDestroy(){this.__stop(),void 0!==this.observer&&this.observer.disconnect(),this.media.onload=this.media.onloadstart=this.media.loadedmetadata=null}});function $a(t,e=new WeakMap){if(Object(t)!==t)return t;if(e.has(t))return e.get(t);const i=t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):t instanceof Set?new Set:t instanceof Map?new Map:"function"!==typeof t.constructor?Object.create(null):void 0!==t.prototype&&"function"===typeof t.prototype.constructor?t:new t.constructor;if("function"===typeof t.constructor&&"function"===typeof t.valueOf){const i=t.valueOf();if(Object(i)!==i){const n=new t.constructor(i);return e.set(t,n),n}}return e.set(t,i),t instanceof Set?t.forEach(t=>{i.add($a(t,e))}):t instanceof Map&&t.forEach((t,n)=>{i.set(n,$a(t,e))}),Object.assign(i,...Object.keys(t).map(i=>({[i]:$a(t[i],e)})))}var Va=a["a"].extend({name:"QPopupEdit",mixins:[Nt],props:{value:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},contentClass:String,disable:Boolean},data(){return{modelChanged:!1,model:null}},computed:{classes(){return"q-popup-edit"+(void 0!==this.contentClass?" "+this.contentClass:"")},modelValue(){return!0===this.modelChanged?this.model:this.value},initialValue(){return!0!==this.modelChanged?this.model:this.value},defaultSlotScope(){return Es({initialValue:this.initialValue,updatePosition:this.__reposition,emitValue:this.__changeModel,validate:this.validate,set:this.set,cancel:this.cancel},"value",()=>this.modelValue,this.__changeModel)},menuProps(){return{...this.qAttrs,cover:this.cover,contentClass:this.classes}}},methods:{set(){!0===this.validate(this.modelValue)&&(!0===this.__hasChanged()&&(this.$emit("save",this.modelValue,this.initialValue),!0===this.modelChanged&&this.$emit("input",this.modelValue)),this.__close())},cancel(){!0===this.__hasChanged()&&(this.$emit("cancel",this.modelValue,this.initialValue),!0!==this.modelChanged&&this.$emit("input",this.initialValue)),this.__close()},show(t){void 0!==this.$refs.menu&&this.$refs.menu.show(t)},hide(t){void 0!==this.$refs.menu&&this.$refs.menu.hide(t)},__hasChanged(){return!1===Wn(this.modelValue,this.initialValue)},__changeModel(t){!0!==this.disable&&(this.model=t,this.modelChanged=!0)},__close(){this.validated=!0,!0===this.$refs.menu.showing&&this.$refs.menu.hide()},__reposition(){this.$nextTick(()=>{this.$refs.menu.updatePosition()})},__getContent(t){const e=Zt(this,"title",this.title),i=void 0===this.$scopedSlots.default?[]:[].concat(this.$scopedSlots.default(this.defaultSlotScope));return e&&i.unshift(t("div",{staticClass:"q-dialog__title q-mt-sm q-mb-sm"},[e])),!0===this.buttons&&i.push(t("div",{staticClass:"q-popup-edit__buttons row justify-center no-wrap"},[t(li,{props:{flat:!0,color:this.color,label:this.labelCancel||this.$q.lang.label.cancel},on:Pt(this,"cancel",{click:this.cancel})}),t(li,{props:{flat:!0,color:this.color,label:this.labelSet||this.$q.lang.label.set},on:Pt(this,"ok",{click:this.set})})])),i}},render(t){if(!0!==this.disable)return t(mn,{ref:"menu",props:this.menuProps,on:Pt(this,"menu",{"before-show":()=>{this.validated=!1,this.modelChanged=!1,this.model=$a(this.value),this.watcher=this.$watch("value",this.__reposition),this.$emit("before-show")},show:()=>{this.$emit("show")},"escape-key":this.cancel,"before-hide":()=>{this.watcher(),!1===this.validated&&!0===this.__hasChanged()&&(!0===this.autoSave&&!0===this.validate(this.model)?(this.$emit("save",this.modelValue,this.initialValue),!0===this.modelChanged&&this.$emit("input",this.modelValue)):(this.$emit("cancel",this.modelValue,this.initialValue),!0!==this.modelChanged&&this.$emit("input",this.initialValue))),this.$emit("before-hide")},hide:()=>{this.$emit("hide")},keyup:t=>{!0===ut(t,13)&&this.set()}})},this.__getContent(t))}}),Ha=a["a"].extend({name:"QPopupProxy",mixins:[Nt,Kt,di],props:{breakpoint:{type:[String,Number],default:450}},data(){const t=parseInt(this.breakpoint,10);return{type:this.$q.screen.width<t||this.$q.screen.height<t?"dialog":"menu"}},computed:{parsedBreakpoint(){return parseInt(this.breakpoint,10)},onEvents(){return{...this.qListeners,hide:this.__onHide}}},watch:{"$q.screen.width"(t){!0!==this.$refs.popup.showing&&this.__updateType(t,this.$q.screen.height,this.parsedBreakpoint)},"$q.screen.height"(t){!0!==this.$refs.popup.showing&&this.__updateType(this.$q.screen.width,t,this.parsedBreakpoint)},breakpoint(t){!0!==this.$refs.popup.showing&&this.__updateType(this.$q.screen.width,this.$q.screen.height,parseInt(t,10))}},methods:{toggle(t){this.$refs.popup.toggle(t)},show(t){this.$refs.popup.show(t)},hide(t){this.$refs.popup.hide(t)},__onHide(t){this.__updateType(this.$q.screen.width,this.$q.screen.height,this.parsedBreakpoint),this.$emit("hide",t)},__updateType(t,e,i){const n=t<i||e<i?"dialog":"menu";this.type!==n&&(this.type=n)}},render(t){const e=Zt(this,"default"),i="menu"===this.type&&void 0!==e&&void 0!==e[0]&&void 0!==e[0].componentOptions&&void 0!==e[0].componentOptions.Ctor&&void 0!==e[0].componentOptions.Ctor.sealedOptions&&["QDate","QTime","QCarousel","QColor"].includes(e[0].componentOptions.Ctor.sealedOptions.name)?{cover:!0,maxHeight:"99vh"}:{},n={ref:"popup",props:{...i,...this.qAttrs},on:this.onEvents};let s;return"dialog"===this.type?s=Xr:(s=mn,n.props.target=this.target,n.props.contextMenu=this.contextMenu,n.props.noParentEvent=!0,n.props.separateClosePopup=!0),t(s,n,e)}});function Ga(t,e,i){return{transform:!0===e?`translateX(${!0===i.lang.rtl?"-":""}100%) scale3d(${-t},1,1)`:`scale3d(${t},1,1)`}}var Wa=a["a"].extend({name:"QLinearProgress",mixins:[Kt,ye,Yt({xs:2,sm:4,md:6,lg:10,xl:14})],props:{value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,instantFeedback:Boolean},computed:{motion(){return!0===this.indeterminate||!0===this.query},widthReverse(){return this.reverse!==this.query},classes(){return"q-linear-progress"+(void 0!==this.color?" text-"+this.color:"")+(!0===this.reverse||!0===this.query?" q-linear-progress--reverse":"")+(!0===this.rounded?" rounded-borders":"")},trackStyle(){return Ga(void 0!==this.buffer?this.buffer:1,this.widthReverse,this.$q)},trackClass(){return`q-linear-progress__track--with${!0===this.instantFeedback?"out":""}-transition q-linear-progress__track--`+(!0===this.isDark?"dark":"light")+(void 0!==this.trackColor?" bg-"+this.trackColor:"")},modelStyle(){return Ga(!0===this.motion?1:this.value,this.widthReverse,this.$q)},modelClasses(){return`q-linear-progress__model--with${!0===this.instantFeedback?"out":""}-transition q-linear-progress__model--${!0===this.motion?"in":""}determinate`},stripeStyle(){return{width:100*this.value+"%"}},stripeClass(){return!0===this.reverse?"absolute-right":"absolute-left"},attrs(){return{role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":!0===this.indeterminate?void 0:this.value}}},render(t){const e=[t("div",{staticClass:"q-linear-progress__track absolute-full",style:this.trackStyle,class:this.trackClass}),t("div",{staticClass:"q-linear-progress__model absolute-full",style:this.modelStyle,class:this.modelClasses})];return!0===this.stripe&&!1===this.motion&&e.push(t("div",{staticClass:"q-linear-progress__stripe",style:this.stripeStyle,class:this.stripeClass})),t("div",{style:this.sizeStyle,class:this.classes,attrs:this.attrs,on:{...this.qListeners}},te(e,this,"default"))}});const ja=40,Ya=20;var Xa=a["a"].extend({name:"QPullToRefresh",mixins:[Kt],directives:{TouchPan:bs},props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:{default:void 0}},data(){return{state:"pull",pullRatio:0,pulling:!1,pullPosition:-ja,animating:!1,positionCSS:{}}},computed:{style(){return{opacity:this.pullRatio,transform:`translateY(${this.pullPosition}px) rotate(${360*this.pullRatio}deg)`}},classes(){return"q-pull-to-refresh__puller row flex-center"+(!0===this.animating?" q-pull-to-refresh__puller--animating":"")+(void 0!==this.bgColor?" bg-"+this.bgColor:"")},directives(){if(!0!==this.disable){const t={down:!0};return!0!==this.noMouse&&(t.mouse=!0),[{name:"touch-pan",modifiers:t,value:this.__pull}]}},contentClass(){return"q-pull-to-refresh__content"+(!0===this.pulling?" no-pointer-events":"")}},watch:{scrollTarget(){this.updateScrollTarget()}},methods:{trigger(){this.$emit("refresh",()=>{this.__animateTo({pos:-ja,ratio:0},()=>{this.state="pull"})})},updateScrollTarget(){this.__scrollTarget=Fi(this.$el,this.scrollTarget)},__pull(t){if(!0===t.isFinal)return void(!0===this.pulling&&(this.pulling=!1,"pulled"===this.state?(this.state="refreshing",this.__animateTo({pos:Ya}),this.trigger()):"pull"===this.state&&this.__animateTo({pos:-ja,ratio:0})));if(!0===this.animating||"refreshing"===this.state)return!1;if(!0===t.isFirst){if(0!==Vi(this.__scrollTarget)||"down"!==t.direction)return!0===this.pulling&&(this.pulling=!1,this.state="pull",this.__animateTo({pos:-ja,ratio:0})),!1;this.pulling=!0;const{top:e,left:i}=this.$el.getBoundingClientRect();this.positionCSS={top:e+"px",left:i+"px",width:window.getComputedStyle(this.$el).getPropertyValue("width")}}A(t.evt);const e=Math.min(140,Math.max(0,t.distance.y));this.pullPosition=e-ja,this.pullRatio=Et(e/(Ya+ja),0,1);const i=this.pullPosition>Ya?"pulled":"pull";this.state!==i&&(this.state=i)},__animateTo({pos:t,ratio:e},i){this.animating=!0,this.pullPosition=t,void 0!==e&&(this.pullRatio=e),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.animating=!1,i&&i()},300)}},mounted(){this.updateScrollTarget()},beforeDestroy(){clearTimeout(this.timer)},render(t){return t("div",{staticClass:"q-pull-to-refresh",on:{...this.qListeners},directives:this.directives},[t("div",{class:this.contentClass},Zt(this,"default")),t("div",{staticClass:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:this.positionCSS},[t("div",{style:this.style,class:this.classes},["refreshing"!==this.state?t(ge,{props:{name:this.icon||this.$q.iconSet.pullToRefresh.icon,color:this.color,size:"32px"}}):t(qe,{props:{size:"24px",color:this.color}})])])])}});const Qa={MIN:0,RANGE:1,MAX:2};var Ka=a["a"].extend({name:"QRange",mixins:[Cs],props:{value:{type:Object,default:()=>({min:null,max:null}),validator:t=>"min"in t&&"max"in t},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},data(){const t=this.__getInnerMin(this.innerMin),e=this.__getInnerMax(this.innerMax);return{model:{min:null===this.value.min?t:Et(this.value.min,t,e),max:null===this.value.max?e:Et(this.value.max,t,e)},curMinRatio:0,curMaxRatio:0}},computed:{modelMinRatio(){return this.__convertModelToRatio(this.model.min)},modelMaxRatio(){return this.__convertModelToRatio(this.model.max)},ratioMin(){return!0===this.active?this.curMinRatio:this.modelMinRatio},ratioMax(){return!0===this.active?this.curMaxRatio:this.modelMaxRatio},selectionBarStyle(){const t={[this.positionProp]:100*this.ratioMin+"%",[this.sizeProp]:100*(this.ratioMax-this.ratioMin)+"%"};return void 0!==this.selectionImg&&(t.backgroundImage=`url(${this.selectionImg}) !important`),t},trackContainerEvents(){if(!0!==this.editable)return{};if(!0===this.$q.platform.is.mobile)return{click:this.__onMobileClick};const t={mousedown:this.__onActivate};return!0!==this.dragRange&&!0!==this.dragOnlyRange||Object.assign(t,{focus:()=>{this.focus="both"},blur:this.__onBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}),t},trackContainerAttrs(){return{tabindex:!0===this.$q.platform.is.mobile||!this.dragRange&&!0!==this.dragOnlyRange?null:this.computedTabindex}},thumbAttrs(){return{tabindex:!0!==this.dragOnlyRange?this.computedTabindex:null}},thumbMinEvents(){return this.__getEvents("min")},thumbMaxEvents(){return this.__getEvents("max")},thumbMinLabel(){return void 0!==this.leftLabelValue?this.leftLabelValue:this.model.min},thumbMaxLabel(){return void 0!==this.rightLabelValue?this.rightLabelValue:this.model.max},thumbMinClasses(){const t=this.leftThumbColor||this.thumbColor||this.color;return`q-slider__thumb q-slider__thumb${this.axis} q-slider__thumb${this.axis}-${!0===this.isReversed?"rtl":"ltr"} absolute non-selectable`+(!1!==this.preventFocus||"min"!==this.focus&&"both"!==this.focus?"":" q-slider--focus")+(void 0!==t?" text-"+t:"")},thumbMaxClasses(){const t=this.rightThumbColor||this.thumbColor||this.color;return`q-slider__thumb q-slider__thumb${this.axis} q-slider__thumb${this.axis}-${!0===this.isReversed?"rtl":"ltr"} absolute non-selectable`+(!1!==this.preventFocus||"max"!==this.focus&&"both"!==this.focus?"":" q-slider--focus")+(void 0!==t?" text-"+t:"")},thumbMinStyle(){return{width:this.thumbSize,height:this.thumbSize,[this.positionProp]:100*this.ratioMin+"%",zIndex:"min"===this.focus?2:void 0}},thumbMaxStyle(){return{width:this.thumbSize,height:this.thumbSize,[this.positionProp]:100*this.ratioMax+"%",zIndex:"max"===this.focus?2:void 0}},thumbMinPinColor(){const t=this.leftLabelColor||this.labelColor;return void 0!==t?" text-"+t:""},thumbMaxPinColor(){const t=this.rightLabelColor||this.labelColor;return void 0!==t?" text-"+t:""},thumbMinTextContainerStyle(){return this.__getTextContainerStyle(this.ratioMin)},thumbMaxTextContainerStyle(){return this.__getTextContainerStyle(this.ratioMax)},thumbMinTextClass(){const t=this.leftLabelTextColor||this.labelTextColor;return"q-slider__text"+(void 0!==t?" text-"+t:"")},thumbMaxTextClass(){const t=this.rightLabelTextColor||this.labelTextColor;return"q-slider__text"+(void 0!==t?" text-"+t:"")},formAttrs(){return{type:"hidden",name:this.name,value:`${this.value.min}|${this.value.max}`}},modelUpdate(){return`${this.value.min}|${this.value.max}|${this.computedInnerMin}|${this.computedInnerMax}`}},watch:{modelUpdate(){this.model.min=null===this.value.min?this.computedInnerMin:Et(this.value.min,this.computedInnerMin,this.computedInnerMax),this.model.max=null===this.value.max?this.computedInnerMax:Et(this.value.max,this.computedInnerMin,this.computedInnerMax)}},methods:{__updateValue(t){this.model.min===this.value.min&&this.model.max===this.value.max||this.$emit("input",{...this.model}),!0===t&&this.$emit("change",{...this.model})},__getDragging(t){const{left:e,top:i,width:n,height:s}=this.$el.getBoundingClientRect(),r=!0===this.dragOnlyRange?0:!0===this.vertical?this.$refs.minThumb.offsetHeight/(2*s):this.$refs.minThumb.offsetWidth/(2*n),o={left:e,top:i,width:n,height:s,valueMin:this.model.min,valueMax:this.model.max,ratioMin:this.modelMinRatio,ratioMax:this.modelMaxRatio},a=this.__getDraggingRatio(t,o);return!0!==this.dragOnlyRange&&a<o.ratioMin+r?o.type=Qa.MIN:!0===this.dragOnlyRange||a<o.ratioMax-r?!0===this.dragRange||!0===this.dragOnlyRange?(o.type=Qa.RANGE,Object.assign(o,{offsetRatio:a,offsetModel:this.__convertRatioToModel(a),rangeValue:o.valueMax-o.valueMin,rangeRatio:o.ratioMax-o.ratioMin})):o.type=o.ratioMax-a<a-o.ratioMin?Qa.MAX:Qa.MIN:o.type=Qa.MAX,o},__updatePosition(t,e=this.dragging){let i;const n=this.__getDraggingRatio(t,e),s=this.__convertRatioToModel(n);switch(e.type){case Qa.MIN:n<=e.ratioMax?(i={minR:n,maxR:e.ratioMax,min:s,max:e.valueMax},this.focus="min"):(i={minR:e.ratioMax,maxR:n,min:e.valueMax,max:s},this.focus="max");break;case Qa.MAX:n>=e.ratioMin?(i={minR:e.ratioMin,maxR:n,min:e.valueMin,max:s},this.focus="max"):(i={minR:n,maxR:e.ratioMin,min:s,max:e.valueMin},this.focus="min");break;case Qa.RANGE:const t=n-e.offsetRatio,r=Et(e.ratioMin+t,0,1-e.rangeRatio),o=s-e.offsetModel,a=Et(e.valueMin+o,this.min,this.max-e.rangeValue);i={minR:r,maxR:r+e.rangeRatio,min:parseFloat(a.toFixed(this.computedDecimals)),max:parseFloat((a+e.rangeValue).toFixed(this.computedDecimals))},this.focus="both";break}this.model=null===this.model.min||null===this.model.max?{min:i.min||this.min,max:i.max||this.max}:{min:i.min,max:i.max},!0!==this.snap||0===this.step?(this.curMinRatio=i.minR,this.curMaxRatio=i.maxR):(this.curMinRatio=this.__convertModelToRatio(this.model.min),this.curMaxRatio=this.__convertModelToRatio(this.model.max))},__getEvents(t){return!0!==this.$q.platform.is.mobile&&!0===this.editable&&!0!==this.dragOnlyRange?{focus:()=>{this.focus=t},blur:this.__onBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}:{}},__onKeydown(t){if(!ws.includes(t.keyCode))return;P(t);const e=([34,33].includes(t.keyCode)?10:1)*this.computedStep,i=([34,37,40].includes(t.keyCode)?-1:1)*(!0===this.isReversed?-1:1)*(!0===this.vertical?-1:1)*e;if("both"===this.focus){const t=this.model.max-this.model.min,e=Et(parseFloat((this.model.min+i).toFixed(this.computedDecimals)),this.computedInnerMin,this.computedInnerMax-t);this.model={min:e,max:parseFloat((e+t).toFixed(this.computedDecimals))}}else{if(!1===this.focus)return;{const t=this.focus;this.model={...this.model,[t]:Et(parseFloat((this.model[t]+i).toFixed(this.computedDecimals)),"min"===t?this.computedInnerMin:this.model.min,"max"===t?this.computedInnerMax:this.model.max)}}}this.__updateValue()}},render(t){const e=this.__getContent(t,e=>{e.push(this.__getThumb(t,{pinColor:this.thumbMinPinColor,textContainerStyle:this.thumbMinTextContainerStyle,textClass:this.thumbMinTextClass,label:this.thumbMinLabel,classes:this.thumbMinClasses,style:this.thumbMinStyle,nodeData:{ref:"minThumb",key:"tmin",on:this.thumbMinEvents,attrs:this.thumbAttrs}}),this.__getThumb(t,{pinColor:this.thumbMaxPinColor,textContainerStyle:this.thumbMaxTextContainerStyle,textClass:this.thumbMaxTextClass,label:this.thumbMaxLabel,classes:this.thumbMaxClasses,style:this.thumbMaxStyle,nodeData:{key:"tmax",on:this.thumbMaxEvents,attrs:this.thumbAttrs}}))});return t("div",{class:"q-range "+this.classes+(null===this.value.min||null===this.value.max?" q-slider--no-value":""),attrs:{...this.attributes,"aria-valuenow":this.value.min+"|"+this.value.max}},e)}}),Za=a["a"].extend({name:"QRating",mixins:[Xt,Cn,Kt],props:{value:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},data(){return{mouseModel:0}},computed:{editable(){return!0!==this.readonly&&!0!==this.disable},classes(){return`q-rating--${!0===this.editable?"":"non-"}editable`+(!0===this.noDimming?" q-rating--no-dimming":"")+(!0===this.disable?" disabled":"")+(void 0!==this.color&&!1===Array.isArray(this.color)?" text-"+this.color:"")},iconData(){const t=!0===Array.isArray(this.icon)?this.icon.length:0,e=!0===Array.isArray(this.iconSelected)?this.iconSelected.length:0,i=!0===Array.isArray(this.iconHalf)?this.iconHalf.length:0,n=!0===Array.isArray(this.color)?this.color.length:0,s=!0===Array.isArray(this.colorSelected)?this.colorSelected.length:0,r=!0===Array.isArray(this.colorHalf)?this.colorHalf.length:0;return{iconLen:t,icon:t>0?this.icon[t-1]:this.icon,selIconLen:e,selIcon:e>0?this.iconSelected[e-1]:this.iconSelected,halfIconLen:i,halfIcon:i>0?this.iconHalf[e-1]:this.iconHalf,colorLen:n,color:n>0?this.color[n-1]:this.color,selColorLen:s,selColor:s>0?this.colorSelected[s-1]:this.colorSelected,halfColorLen:r,halfColor:r>0?this.colorHalf[r-1]:this.colorHalf}},iconLabel(){if("string"===typeof this.iconAriaLabel){const t=this.iconAriaLabel.length>0?this.iconAriaLabel+" ":"";return e=>`${t}${e}`}if(!0===Array.isArray(this.iconAriaLabel)){const t=this.iconAriaLabel.length;if(t>0)return e=>this.iconAriaLabel[Math.min(e,t)-1]}return(t,e)=>`${e} ${t}`},stars(){const t=[],e=this.iconData,i=Math.ceil(this.value),n=!0===this.editable?0:null,s=void 0===this.iconHalf||i===this.value?-1:i;for(let r=1;r<=this.max;r++){const o=0===this.mouseModel&&this.value>=r||this.mouseModel>0&&this.mouseModel>=r,a=s===r&&this.mouseModel<r,l=this.mouseModel>0&&(!0===a?i:this.value)>=r&&this.mouseModel<r,h=!0===a?r<=e.halfColorLen?this.colorHalf[r-1]:e.halfColor:void 0!==e.selColor&&!0===o?r<=e.selColorLen?this.colorSelected[r-1]:e.selColor:r<=e.colorLen?this.color[r-1]:e.color,c=(!0===a?r<=e.halfIconLen?this.iconHalf[r-1]:e.halfIcon:void 0===e.selIcon||!0!==o&&!0!==l?r<=e.iconLen?this.icon[r-1]:e.icon:r<=e.selIconLen?this.iconSelected[r-1]:e.selIcon)||this.$q.iconSet.rating.icon;t.push({name:c,attrs:{tabindex:n,role:"radio","aria-checked":this.value===r?"true":"false","aria-label":this.iconLabel(r,c)},classes:"q-rating__icon"+(!0===o||!0===a?" q-rating__icon--active":"")+(!0===l?" q-rating__icon--exselected":"")+(this.mouseModel===r?" q-rating__icon--hovered":"")+(void 0!==h?" text-"+h:"")})}return t},attrs(){const t={role:"radiogroup"};return!0===this.disable&&(t["aria-disabled"]="true"),!0===this.readonly&&(t["aria-readonly"]="true"),t}},methods:{__set(t){if(!0===this.editable){const e=Et(parseInt(t,10),1,parseInt(this.max,10)),i=!0!==this.noReset&&this.value===e?0:e;i!==this.value&&this.$emit("input",i),this.mouseModel=0}},__setHoverValue(t){!0===this.editable&&(this.mouseModel=t)},__keyup(t,e){switch(t.keyCode){case 13:case 32:return this.__set(e),P(t);case 37:case 40:return this.$refs["rt"+(e-1)]&&this.$refs["rt"+(e-1)].focus(),P(t);case 39:case 38:return this.$refs["rt"+(e+1)]&&this.$refs["rt"+(e+1)].focus(),P(t)}}},render(t){const e=[];return this.stars.forEach(({classes:i,name:n,attrs:s},r)=>{const o=r+1;e.push(t("div",{key:o,ref:"rt"+o,class:"q-rating__icon-container flex flex-center",attrs:s,on:Pt(this,"i#"+o,{click:()=>{this.__set(o)},mouseover:()=>{this.__setHoverValue(o)},mouseout:()=>{this.mouseModel=0},focus:()=>{this.__setHoverValue(o)},blur:()=>{this.mouseModel=0},keyup:t=>{this.__keyup(t,o)}})},te([t(ge,{class:i,props:{name:n}})],this,"tip-"+o)))}),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(e,"push"),t("div",{staticClass:"q-rating row inline items-center",class:this.classes,style:this.sizeStyle,attrs:this.attrs,on:{...this.qListeners}},e)}}),Ja=a["a"].extend({name:"QResponsive",mixins:[Zo,Kt],render(t){return t("div",{staticClass:"q-responsive",on:{...this.qListeners}},[t("div",{staticClass:"q-responsive__filler overflow-hidden"},[t("div",{style:this.ratioStyle})]),t("div",{staticClass:"q-responsive__content absolute-full fit"},Zt(this,"default"))])}});const tl=t=>t>=250?50:Math.ceil(t/5),el=["vertical","horizontal"],il={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}};var nl=a["a"].extend({name:"QScrollArea",mixins:[ye],directives:{TouchPan:bs},props:{thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},horizontal:Boolean,tabindex:[String,Number]},data(){return{tempShowing:!1,panning:!1,hover:!1,container:{vertical:0,horizontal:0},scroll:{vertical:{position:0,size:0},horizontal:{position:0,size:0}}}},computed:{classes(){return"q-scrollarea"+(!0===this.isDark?" q-scrollarea--dark":"")},verticalScrollPercentage(){const t=this.scroll.vertical.size-this.container.vertical;if(t<=0)return 0;const e=Et(this.scroll.vertical.position/t,0,1);return Math.round(1e4*e)/1e4},horizontalScrollPercentage(){const t=this.scroll.horizontal.size-this.container.horizontal;if(t<=0)return 0;const e=Et(Math.abs(this.scroll.horizontal.position)/t,0,1);return Math.round(1e4*e)/1e4},verticalThumbHidden(){return!0!==(null===this.visible?this.hover:this.visible)&&!1===this.tempShowing&&!1===this.panning||this.scroll.vertical.size<=this.container.vertical+1},horizontalThumbHidden(){return!0!==(null===this.visible?this.hover:this.visible)&&!1===this.tempShowing&&!1===this.panning||this.scroll.horizontal.size<=this.container.horizontal+1},verticalThumbStart(){return this.verticalScrollPercentage*(this.container.vertical-this.verticalThumbSize)},horizontalThumbStart(){return this.horizontalScrollPercentage*(this.container.horizontal-this.horizontalThumbSize)},verticalThumbSize(){return Math.round(Et(this.container.vertical*this.container.vertical/this.scroll.vertical.size,tl(this.container.vertical),this.container.vertical))},horizontalThumbSize(){return Math.round(Et(this.container.horizontal*this.container.horizontal/this.scroll.horizontal.size,tl(this.container.horizontal),this.container.horizontal))},verticalStyle(){return{...this.thumbStyle,...this.verticalThumbStyle,top:this.verticalThumbStart+"px",height:this.verticalThumbSize+"px"}},horizontalStyle(){return{...this.thumbStyle,...this.horizontalThumbStyle,[!0===this.$q.lang.rtl?"right":"left"]:this.horizontalThumbStart+"px",width:this.horizontalThumbSize+"px"}},verticalThumbClass(){return"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(!0===this.verticalThumbHidden?" q-scrollarea__thumb--invisible":"")},horizontalThumbClass(){return"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(!0===this.horizontalThumbHidden?" q-scrollarea__thumb--invisible":"")},verticalBarClass(){return"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(!0===this.verticalThumbHidden?" q-scrollarea__bar--invisible":"")},horizontalBarClass(){return"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(!0===this.horizontalThumbHidden?" q-scrollarea__bar--invisible":"")},scrollComputed(){return{vertical:{...this.scroll.vertical,percentage:this.verticalScrollPercentage,thumbHidden:this.verticalThumbHidden,thumbStart:this.verticalThumbStart,thumbSize:this.verticalThumbSize,style:this.verticalStyle,thumbClass:this.verticalThumbClass,barClass:this.verticalBarClass},horizontal:{...this.scroll.horizontal,percentage:this.horizontalScrollPercentage,thumbHidden:this.horizontalThumbHidden,thumbStart:this.horizontalThumbStart,thumbSize:this.horizontalThumbSize,style:this.horizontalStyle,thumbClass:this.horizontalThumbClass,barClass:this.horizontalBarClass}}},mainStyle(){return!0===this.verticalThumbHidden&&!0===this.horizontalThumbHidden?this.contentStyle:this.contentActiveStyle},verticalThumbDirectives(){return[{name:"touch-pan",modifiers:{vertical:!0,prevent:!0,mouse:!0,mouseAllDir:!0},value:t=>{this.__panThumb(t,"vertical")}}]},horizontalThumbDirectives(){return[{name:"touch-pan",modifiers:{horizontal:!0,prevent:!0,mouse:!0,mouseAllDir:!0},value:t=>{this.__panThumb(t,"horizontal")}}]},scrollAttrs(){if(void 0!==this.tabindex)return{tabindex:this.tabindex}}},watch:{"$q.lang.rtl"(t){this.setScrollPosition("horizontal",Math.abs(this.scroll.horizontal.position)*(!0===t?-1:1))}},methods:{getScrollTarget(){return this.$refs.target},getScroll(){const t={};return el.forEach(e=>{const i=this.scrollComputed[e];t[e+"Position"]=i.position,t[e+"Percentage"]=i.percentage,t[e+"Size"]=i.size,t[e+"ContainerSize"]=this.container[e]}),t},getScrollPosition(t){return"both"===t?{top:this.scroll.vertical.position,left:this.scroll.horizontal.position}:(!0!==el.includes(t)&&(t=!0===this.horizontal?"horizontal":"vertical"),this.scroll[t].position)},getScrollPercentage(t){return"both"===t?{top:this.verticalScrollPercentage,left:this.horizontalScrollPercentage}:(!0!==el.includes(t)&&(t=!0===this.horizontal?"horizontal":"vertical"),this[t+"ScrollPercentage"])},setScrollPosition(t,e,i){if(!1===el.includes(t)){if(!0===isNaN(t))return void console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");[t,e,i]=[!0===this.horizontal?"horizontal":"vertical",t,e]}const n="vertical"===t?Xi:Ki;n(this.$refs.target,e,i)},setScrollPercentage(t,e,i){if(!1===el.includes(t)){if(!0===isNaN(t))return void console.error("[QScrollArea]: wrong first param of setScrollPercentage (vertical/horizontal)");[t,e,i]=[!0===this.horizontal?"horizontal":"vertical",t,e]}this.setScrollPosition(t,e*(this.scroll[t].size-this.container[t])*("horizontal"===t&&!0===this.$q.lang.rtl?-1:1),i)},__updateContainer({height:t,width:e}){let i=!1;this.container.vertical!==t&&(this.container.vertical=t,i=!0),this.container.horizontal!==e&&(this.container.horizontal=e,i=!0),!0===i&&this.__startTimer()},__updateVerticalScroll({position:t}){this.scroll.vertical.position!==t&&(this.scroll.vertical.position=t,this.__startTimer())},__updateHorizontalScroll({position:t}){this.scroll.horizontal.position!==t&&(this.scroll.horizontal.position=t,this.__startTimer())},__updateScrollSize({height:t,width:e}){let i=!1;this.scroll.horizontal.size!==e&&(this.scroll.horizontal.size=e,i=!0),this.scroll.vertical.size!==t&&(this.scroll.vertical.size=t,i=!0),!0===i&&this.__startTimer()},__panThumb(t,e){const i=this.scrollComputed[e];if(!0===t.isFinal){if(!0!==this.panning)return;this.panning=!1}else if(!0===t.isFirst){if(!0===i.thumbHidden)return;this.refPos=i.position,this.panning=!0}else if(!0!==this.panning)return;const n=il[e],s=this.container[e],r=(i.size-s)/(s-i.thumbSize),o=t.distance[n.dist],a=this.refPos+(t.direction===n.dir?1:-1)*o*r;this.__setScroll(a,e)},__mouseDown(t,e){const i=this.scrollComputed[e];if(!0!==i.thumbHidden){const n=t[il[e].offset];if(n<i.thumbStart||n>i.thumbStart+i.thumbSize){const t=n-i.thumbSize/2;this.__setScroll(t/this.container[e]*i.size,e)}const s="vertical"===e?this.$refs.verticalThumb:this.$refs.horizontalThumb;void 0!==s&&s.dispatchEvent(new MouseEvent(t.type,t))}},__verticalMouseDown(t){this.__mouseDown(t,"vertical")},__horizontalMouseDown(t){this.__mouseDown(t,"horizontal")},__startTimer(){!0===this.tempShowing?clearTimeout(this.timer):this.tempShowing=!0,this.timer=setTimeout(()=>{this.tempShowing=!1},this.delay),void 0!==this.$listeners.scroll&&this.__emitScroll()},__setScroll(t,e){this.$refs.target[il[e].scroll]=t},__mouseEnter(){this.hover=!0},__mouseLeave(){this.hover=!1}},render(t){return t("div",{class:this.classes,on:Pt(this,"desk",{mouseenter:this.__mouseEnter,mouseleave:this.__mouseLeave})},[t("div",{ref:"target",staticClass:"q-scrollarea__container scroll relative-position fit hide-scrollbar",attrs:this.scrollAttrs},[t("div",{staticClass:"q-scrollarea__content absolute",style:this.mainStyle},te([t(ks,{props:{debounce:0},on:Pt(this,"resizeIn",{resize:this.__updateScrollSize})})],this,"default")),t(Ca,{on:Pt(this,"scrollV",{scroll:this.__updateVerticalScroll})}),t(Ca,{props:{horizontal:!0},on:Pt(this,"scrollH",{scroll:this.__updateHorizontalScroll})})]),t(ks,{props:{debounce:0},on:Pt(this,"resizeOut",{resize:this.__updateContainer})}),t("div",{class:this.verticalBarClass,style:[this.barStyle,this.verticalBarStyle],attrs:It,on:Pt(this,"barV",{mousedown:this.__verticalMouseDown})}),t("div",{class:this.horizontalBarClass,style:[this.barStyle,this.horizontalBarStyle],attrs:It,on:Pt(this,"barH",{mousedown:this.__horizontalMouseDown})}),t("div",{ref:"verticalThumb",class:this.verticalThumbClass,style:this.verticalStyle,attrs:It,directives:this.verticalThumbDirectives}),t("div",{ref:"horizontalThumb",class:this.horizontalThumbClass,style:this.horizontalStyle,attrs:It,directives:this.horizontalThumbDirectives})])},created(){this.__emitScroll=z(()=>{const t=this.getScroll();t.ref=this,this.$emit("scroll",t)},0)},activated(){if(void 0===this.__scrollPosition)return;const t=this.getScrollTarget();void 0!==t&&(Ki(t,this.__scrollPosition.left),Xi(t,this.__scrollPosition.top))},deactivated(){this.__scrollPosition=this.getScrollPosition("both")},beforeDestroy(){this.__emitScroll.cancel(),clearTimeout(this.timer)}});const sl=1e3,rl=["start","center","end","start-force","center-force","end-force"],ol=Array.prototype.filter;function al(t,e){return t+e}function ll(t,e,i,n,s,r,o,a){const l=t===window?document.scrollingElement||document.documentElement:t,h=!0===s?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-o-a,scrollMaxSize:0,offsetStart:-o,offsetEnd:-a};if(!0===s?(t===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=l.scrollLeft,c.scrollViewSize+=l.clientWidth),c.scrollMaxSize=l.scrollWidth,!0===r&&(c.scrollStart=(!0===Bi()?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(t===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=l.scrollTop,c.scrollViewSize+=l.clientHeight),c.scrollMaxSize=l.scrollHeight),void 0!==i)for(let u=i.previousElementSibling;null!==u;u=u.previousElementSibling)!1===u.classList.contains("q-virtual-scroll--skip")&&(c.offsetStart+=u[h]);if(void 0!==n)for(let u=n.nextElementSibling;null!==u;u=u.nextElementSibling)!1===u.classList.contains("q-virtual-scroll--skip")&&(c.offsetEnd+=u[h]);if(e!==t){const i=l.getBoundingClientRect(),n=e.getBoundingClientRect();!0===s?(c.offsetStart+=n.left-i.left,c.offsetEnd-=n.width):(c.offsetStart+=n.top-i.top,c.offsetEnd-=n.height),t!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function hl(t,e,i,n){"end"===e&&(e=(t===window?document.body:t)[!0===i?"scrollWidth":"scrollHeight"]),t===window?!0===i?(!0===n&&(e=(!0===Bi()?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):!0===i?(!0===n&&(e=(!0===Bi()?t.scrollWidth-t.offsetWidth:0)-e),t.scrollLeft=e):t.scrollTop=e}function cl(t,e,i,n){if(i>=n)return 0;const s=e.length,r=Math.floor(i/sl),o=Math.floor((n-1)/sl)+1;let a=t.slice(r,o).reduce(al,0);return i%sl!==0&&(a-=e.slice(r*sl,i).reduce(al,0)),n%sl!==0&&n!==s&&(a-=e.slice(n,o*sl).reduce(al,0)),a}const ul={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]};function dl(t,e){void 0===dl.isSupported&&(dl.isSupported=void 0!==window.getComputedStyle(document.body).overflowAnchor),!1!==dl.isSupported&&void 0!==t&&(cancelAnimationFrame(t._qOverflowAnimationFrame),t._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(void 0===t)return;const i=t.children||[];ol.call(i,t=>t.dataset&&void 0!==t.dataset.qVsAnchor).forEach(t=>{delete t.dataset.qVsAnchor});const n=i[e];n&&n.dataset&&(n.dataset.qVsAnchor="")}))}const pl=Object.keys(ul);var fl={props:{virtualScrollHorizontal:Boolean,...ul},data(){return{virtualScrollSliceRange:{from:0,to:0}}},watch:{needsSliceRecalc(){this.__setVirtualScrollSize()},needsReset(){this.reset()}},computed:{needsReset(){return["virtualScrollItemSizeComputed","virtualScrollHorizontal"].map(t=>this[t]).join(";")},needsSliceRecalc(){return this.needsReset+";"+["virtualScrollSliceRatioBefore","virtualScrollSliceRatioAfter"].map(t=>this[t]).join(";")},colspanAttr(){return void 0!==this.tableColspan?{colspan:this.tableColspan}:{colspan:100}},virtualScrollItemSizeComputed(){return this.virtualScrollItemSize}},methods:{reset(){this.__resetVirtualScroll(this.prevToIndex,!0)},refresh(t){this.__resetVirtualScroll(void 0===t?this.prevToIndex:t)},scrollTo(t,e){const i=this.__getVirtualScrollTarget();if(void 0===i||null===i||8===i.nodeType)return;const n=ll(i,this.__getVirtualScrollEl(),this.$refs.before,this.$refs.after,this.virtualScrollHorizontal,this.$q.lang.rtl,this.virtualScrollStickySizeStart,this.virtualScrollStickySizeEnd);this.__scrollViewSize!==n.scrollViewSize&&this.__setVirtualScrollSize(n.scrollViewSize),this.__setVirtualScrollSliceRange(i,n,Math.min(this.virtualScrollLength-1,Math.max(0,parseInt(t,10)||0)),0,rl.indexOf(e)>-1?e:this.prevToIndex>-1&&t>this.prevToIndex?"end":"start")},__onVirtualScrollEvt(){const t=this.__getVirtualScrollTarget();if(void 0===t||null===t||8===t.nodeType)return;const e=ll(t,this.__getVirtualScrollEl(),this.$refs.before,this.$refs.after,this.virtualScrollHorizontal,this.$q.lang.rtl,this.virtualScrollStickySizeStart,this.virtualScrollStickySizeEnd),i=this.virtualScrollLength-1,n=e.scrollMaxSize-e.offsetStart-e.offsetEnd-this.virtualScrollPaddingAfter;if(this.prevScrollStart===e.scrollStart)return;if(e.scrollMaxSize<=0)return void this.__setVirtualScrollSliceRange(t,e,0,0);this.__scrollViewSize!==e.scrollViewSize&&this.__setVirtualScrollSize(e.scrollViewSize),this.__updateVirtualScrollSizes(this.virtualScrollSliceRange.from);const s=Math.floor(e.scrollMaxSize-Math.max(e.scrollViewSize,e.offsetEnd)-Math.min(this.virtualScrollSizes[i],e.scrollViewSize/2));if(s>0&&Math.ceil(e.scrollStart)>=s)return void this.__setVirtualScrollSliceRange(t,e,i,e.scrollMaxSize-e.offsetEnd-this.virtualScrollSizesAgg.reduce(al,0));let r=0,o=e.scrollStart-e.offsetStart,a=o;if(o<=n&&o+e.scrollViewSize>=this.virtualScrollPaddingBefore)o-=this.virtualScrollPaddingBefore,r=this.virtualScrollSliceRange.from,a=o;else for(let l=0;o>=this.virtualScrollSizesAgg[l]&&r<i;l++)o-=this.virtualScrollSizesAgg[l],r+=sl;while(o>0&&r<i)o-=this.virtualScrollSizes[r],o>-e.scrollViewSize?(r++,a=o):a=this.virtualScrollSizes[r]+o;this.__setVirtualScrollSliceRange(t,e,r,a)},__setVirtualScrollSliceRange(t,e,i,n,s){const r="string"===typeof s&&s.indexOf("-force")>-1,o=!0===r?s.replace("-force",""):s,a=void 0!==o?o:"start";let l=Math.max(0,i-this.virtualScrollSliceSizeComputed[a]),h=l+this.virtualScrollSliceSizeComputed.total;h>this.virtualScrollLength&&(h=this.virtualScrollLength,l=Math.max(0,h-this.virtualScrollSliceSizeComputed.total)),this.prevScrollStart=e.scrollStart;const c=l!==this.virtualScrollSliceRange.from||h!==this.virtualScrollSliceRange.to;if(!1===c&&void 0===o)return void this.__emitScroll(i);const{activeElement:u}=document,d=this.$refs.content;!0===c&&void 0!==d&&d!==u&&!0===d.contains(u)&&(d.addEventListener("focusout",this.__onBlurRefocusFn),setTimeout(()=>{void 0!==d&&d.removeEventListener("focusout",this.__onBlurRefocusFn)})),dl(d,i-l);const p=void 0!==o?this.virtualScrollSizes.slice(l,i).reduce(al,0):0;if(!0===c){const t=h>=this.virtualScrollSliceRange.from&&l<=this.virtualScrollSliceRange.to?this.virtualScrollSliceRange.to:h;this.virtualScrollSliceRange={from:l,to:t},this.virtualScrollPaddingBefore=cl(this.virtualScrollSizesAgg,this.virtualScrollSizes,0,l),this.virtualScrollPaddingAfter=cl(this.virtualScrollSizesAgg,this.virtualScrollSizes,this.virtualScrollSliceRange.to,this.virtualScrollLength),requestAnimationFrame(()=>{this.virtualScrollSliceRange.to!==h&&this.prevScrollStart===e.scrollStart&&(this.virtualScrollSliceRange={from:this.virtualScrollSliceRange.from,to:h},this.virtualScrollPaddingAfter=cl(this.virtualScrollSizesAgg,this.virtualScrollSizes,h,this.virtualScrollLength))})}requestAnimationFrame(()=>{if(this.prevScrollStart!==e.scrollStart)return;!0===c&&this.__updateVirtualScrollSizes(l);const s=this.virtualScrollSizes.slice(l,i).reduce(al,0),a=s+e.offsetStart+this.virtualScrollPaddingBefore,h=a+this.virtualScrollSizes[i];let u=a+n;if(void 0!==o){const t=s-p,n=e.scrollStart+t;u=!0!==r&&n<a&&h<n+e.scrollViewSize?n:"end"===o?h-e.scrollViewSize:a-("start"===o?0:Math.round((e.scrollViewSize-this.virtualScrollSizes[i])/2))}this.prevScrollStart=u,hl(t,u,this.virtualScrollHorizontal,this.$q.lang.rtl),this.__emitScroll(i)})},__updateVirtualScrollSizes(t){const e=this.$refs.content;if(void 0!==e){const i=ol.call(e.children||[],t=>t.classList&&!1===t.classList.contains("q-virtual-scroll--skip")),n=i.length,s=!0===this.virtualScrollHorizontal?t=>t.getBoundingClientRect().width:t=>t.offsetHeight;let r,o,a=t;for(let t=0;t<n;){r=s(i[t]),t++;while(t<n&&!0===i[t].classList.contains("q-virtual-scroll--with-prev"))r+=s(i[t]),t++;o=r-this.virtualScrollSizes[a],0!==o&&(this.virtualScrollSizes[a]+=o,this.virtualScrollSizesAgg[Math.floor(a/sl)]+=o),a++}}},__resetVirtualScroll(t,e){const i=1*this.virtualScrollItemSizeComputed;!0!==e&&!1!==Array.isArray(this.virtualScrollSizes)||(this.virtualScrollSizes=[]);const n=this.virtualScrollSizes.length;this.virtualScrollSizes.length=this.virtualScrollLength;for(let r=this.virtualScrollLength-1;r>=n;r--)this.virtualScrollSizes[r]=i;const s=Math.floor((this.virtualScrollLength-1)/sl);this.virtualScrollSizesAgg=[];for(let r=0;r<=s;r++){let t=0;const e=Math.min((r+1)*sl,this.virtualScrollLength);for(let i=r*sl;i<e;i++)t+=this.virtualScrollSizes[i];this.virtualScrollSizesAgg.push(t)}this.prevToIndex=-1,this.prevScrollStart=void 0,this.virtualScrollPaddingBefore=cl(this.virtualScrollSizesAgg,this.virtualScrollSizes,0,this.virtualScrollSliceRange.from),this.virtualScrollPaddingAfter=cl(this.virtualScrollSizesAgg,this.virtualScrollSizes,this.virtualScrollSliceRange.to,this.virtualScrollLength),t>=0?(this.__updateVirtualScrollSizes(this.virtualScrollSliceRange.from),this.$nextTick(()=>{this.scrollTo(t)})):this.__onVirtualScrollEvt()},__setVirtualScrollSize(t){if(void 0===t&&"undefined"!==typeof window){const e=this.__getVirtualScrollTarget();void 0!==e&&null!==e&&8!==e.nodeType&&(t=ll(e,this.__getVirtualScrollEl(),this.$refs.before,this.$refs.after,this.virtualScrollHorizontal,this.$q.lang.rtl,this.virtualScrollStickySizeStart,this.virtualScrollStickySizeEnd).scrollViewSize)}this.__scrollViewSize=t;const e=parseFloat(this.virtualScrollSliceRatioBefore)||0,i=parseFloat(this.virtualScrollSliceRatioAfter)||0,n=1+e+i,s=void 0===t||t<=0?1:Math.ceil(t/this.virtualScrollItemSizeComputed),r=Math.max(1,s,Math.ceil((this.virtualScrollSliceSize>0?this.virtualScrollSliceSize:10)/n));this.virtualScrollSliceSizeComputed={total:Math.ceil(r*n),start:Math.ceil(r*e),center:Math.ceil(r*(.5+e)),end:Math.ceil(r*(1+e)),view:s}},__padVirtualScroll(t,e,i){const n=!0===this.virtualScrollHorizontal?"width":"height",s={["--q-virtual-scroll-item-"+n]:this.virtualScrollItemSizeComputed+"px"};return["tbody"===e?t(e,{staticClass:"q-virtual-scroll__padding",key:"before",ref:"before"},[t("tr",[t("td",{style:{[n]:this.virtualScrollPaddingBefore+"px",...s},attrs:this.colspanAttr})])]):t(e,{staticClass:"q-virtual-scroll__padding",key:"before",ref:"before",style:{[n]:this.virtualScrollPaddingBefore+"px",...s}}),t(e,{staticClass:"q-virtual-scroll__content",key:"content",ref:"content",attrs:{tabindex:-1}},i),"tbody"===e?t(e,{staticClass:"q-virtual-scroll__padding",key:"after",ref:"after"},[t("tr",[t("td",{style:{[n]:this.virtualScrollPaddingAfter+"px",...s},attrs:this.colspanAttr})])]):t(e,{staticClass:"q-virtual-scroll__padding",key:"after",ref:"after",style:{[n]:this.virtualScrollPaddingAfter+"px",...s}})]},__emitScroll(t){this.prevToIndex!==t&&(void 0!==this.qListeners["virtual-scroll"]&&this.$emit("virtual-scroll",{index:t,from:this.virtualScrollSliceRange.from,to:this.virtualScrollSliceRange.to-1,direction:t<this.prevToIndex?"decrease":"increase",ref:this}),this.prevToIndex=t)},__onBlurRefocusFn(){void 0!==this.$refs.content&&this.$refs.content.focus()}},created(){this.__setVirtualScrollSize()},activated(){if(!0!==this.shouldActivate)return;const t=this.__getVirtualScrollTarget();void 0!==this.prevScrollStart&&void 0!==t&&null!==t&&8!==t.nodeType?hl(t,this.prevScrollStart,this.virtualScrollHorizontal,this.$q.lang.rtl):this.scrollTo(this.prevToIndex)},deactivated(){this.shouldActivate=!0},beforeMount(){this.__onVirtualScrollEvt=z(this.__onVirtualScrollEvt,!0===this.$q.platform.is.ios?120:35),this.__setVirtualScrollSize()},beforeDestroy(){this.__onVirtualScrollEvt.cancel()}};const ml=t=>["add","add-unique","toggle"].includes(t),gl=".*+?^${}()|[]\\";var vl=a["a"].extend({name:"QSelect",mixins:[Vo,fl,fa,Mn,Kt],props:{value:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueSanitize:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsSanitize:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:ml},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0}},data(){return{menu:!1,dialog:!1,optionIndex:-1,inputValue:"",dialogFieldFocused:!1}},watch:{innerValue:{handler(t){this.innerValueCache=t,!0===this.useInput&&!0===this.fillInput&&!0!==this.multiple&&!0!==this.innerLoading&&(!0!==this.dialog&&!0!==this.menu||!0!==this.hasValue)&&(!0!==this.userInputValue&&this.__resetInputValue(),!0!==this.dialog&&!0!==this.menu||this.filter(""))},immediate:!0},fillInput(){this.__resetInputValue()},menu(t){this.__updateMenu(t)},virtualScrollLength(t,e){!0===this.menu&&!1===this.innerLoading&&(this.__resetVirtualScroll(-1,!0),this.$nextTick(()=>{!0===this.menu&&!1===this.innerLoading&&(t>e?this.__resetVirtualScroll():this.__updateMenu(!0))}))}},computed:{isOptionsDark(){return null===this.optionsDark?this.isDark:this.optionsDark},virtualScrollLength(){return Array.isArray(this.options)?this.options.length:0},fieldClass(){return`q-select q-field--auto-height q-select--with${!0!==this.useInput?"out":""}-input q-select--with${!0!==this.useChips?"out":""}-chips q-select--`+(!0===this.multiple?"multiple":"single")},computedInputClass(){return!0===this.hideSelected||0===this.innerValue.length?this.inputClass:void 0===this.inputClass?"q-field__input--padding":[this.inputClass,"q-field__input--padding"]},menuContentClass(){return(!0===this.virtualScrollHorizontal?"q-virtual-scroll--horizontal":"")+(this.popupContentClass?" "+this.popupContentClass:"")},innerValue(){const t=!0===this.mapOptions&&!0!==this.multiple,e=void 0===this.value||null===this.value&&!0!==t?[]:!0===this.multiple&&Array.isArray(this.value)?this.value:[this.value];if(!0===this.mapOptions&&!0===Array.isArray(this.options)){const i=!0===this.mapOptions&&void 0!==this.innerValueCache?this.innerValueCache:[],n=e.map(t=>this.__getOption(t,i));return null===this.value&&!0===t?n.filter(t=>null!==t):n}return e},noOptions(){return 0===this.virtualScrollLength},selectedString(){return this.innerValue.map(t=>this.getOptionLabel(t)).join(", ")},sanitizeFn(){return!0===this.optionsSanitize?()=>!0:t=>void 0!==t&&null!==t&&!0===t.sanitize},displayAsText(){return!0===this.displayValueSanitize||void 0===this.displayValue&&(!0===this.optionsSanitize||this.innerValue.some(this.sanitizeFn))},computedTabindex(){return!0===this.focused?this.tabindex:-1},selectedScope(){return this.innerValue.map((t,e)=>({index:e,opt:t,sanitize:this.sanitizeFn(t),selected:!0,removeAtIndex:this.__removeAtIndexAndFocus,toggleOption:this.toggleOption,tabindex:this.computedTabindex}))},optionScope(){if(0===this.virtualScrollLength)return[];const{from:t,to:e}=this.virtualScrollSliceRange,{options:i,optionEls:n}=this.__optionScopeCache;return this.options.slice(t,e).map((e,s)=>{const r=this.isOptionDisabled(e),o=t+s,a={clickable:!0,active:!1,activeClass:this.computedOptionsSelectedClass,manualFocus:!0,focused:!1,disable:r,tabindex:-1,dense:this.optionsDense,dark:this.isOptionsDark},l={role:"option",id:`${this.targetUid}_${o}`};!0!==r&&(!0===this.isOptionSelected(e)&&(a.active=!0),l["aria-selected"]=!0===a.active?"true":"false",this.optionIndex===o&&(a.focused=!0));const h={click:()=>{this.toggleOption(e)}};!0===this.$q.platform.is.desktop&&(h.mousemove=()=>{!0===this.menu&&this.setOptionIndex(o)});const c={index:o,opt:e,sanitize:this.sanitizeFn(e),selected:a.active,focused:a.focused,toggleOption:this.toggleOption,setOptionIndex:this.setOptionIndex,itemProps:a,itemAttrs:l};return void 0!==i[s]&&!0===Wn(c,i[s])||(i[s]=c,n[s]=void 0),{...c,itemEvents:h}})},dropdownArrowIcon(){return void 0!==this.dropdownIcon?this.dropdownIcon:this.$q.iconSet.arrow.dropdown},squaredMenu(){return!1===this.optionsCover&&!0!==this.outlined&&!0!==this.standout&&!0!==this.borderless&&!0!==this.rounded},computedOptionsSelectedClass(){return void 0!==this.optionsSelectedClass?this.optionsSelectedClass:void 0!==this.color?"text-"+this.color:""},innerOptionsValue(){return this.innerValue.map(t=>this.getOptionValue(t))},getOptionValue(){return this.__getPropValueFn("optionValue","value")},getOptionLabel(){return this.__getPropValueFn("optionLabel","label")},isOptionDisabled(){const t=this.__getPropValueFn("optionDisable","disable");return(...e)=>!0===t.apply(null,e)},inputControlEvents(){const t={input:this.__onInput,change:this.__onChange,keydown:this.__onTargetKeydown,keyup:this.__onTargetAutocomplete,keypress:this.__onTargetKeypress,focus:this.__selectInputText,click:t=>{!0===this.hasDialog&&L(t)}};return t.compositionstart=t.compositionupdate=t.compositionend=this.__onComposition,t},virtualScrollItemSizeComputed(){return void 0===this.virtualScrollItemSize?!0===this.optionsDense?24:48:this.virtualScrollItemSize},comboboxAttrs(){const t={tabindex:this.tabindex,role:"combobox","aria-label":this.label,"aria-readonly":!0===this.readonly?"true":"false","aria-autocomplete":!0===this.useInput?"list":"none","aria-expanded":!0===this.menu?"true":"false","aria-owns":this.targetUid+"_lb","aria-controls":this.targetUid+"_lb"};return this.optionIndex>=0&&(t["aria-activedescendant"]=`${this.targetUid}_${this.optionIndex}`),t},listboxAttrs(){const t={id:this.targetUid+"_lb",role:"listbox","aria-multiselectable":!0===this.multiple?"true":"false"};return t}},methods:{getEmittingOptionValue(t){return!0===this.emitValue?this.getOptionValue(t):t},removeAtIndex(t){if(t>-1&&t<this.innerValue.length)if(!0===this.multiple){const e=this.value.slice();this.$emit("remove",{index:t,value:e.splice(t,1)[0]}),this.$emit("input",e)}else this.$emit("input",null)},__removeAtIndexAndFocus(t){this.removeAtIndex(t),this.__focus()},add(t,e){const i=this.getEmittingOptionValue(t);if(!0!==this.multiple)return!0===this.fillInput&&this.updateInputValue(this.getOptionLabel(t),!0,!0),void this.$emit("input",i);if(0===this.innerValue.length)return this.$emit("add",{index:0,value:i}),void this.$emit("input",!0===this.multiple?[i]:i);if(!0===e&&!0===this.isOptionSelected(t))return;if(void 0!==this.maxValues&&this.value.length>=this.maxValues)return;const n=this.value.slice();this.$emit("add",{index:n.length,value:i}),n.push(i),this.$emit("input",n)},toggleOption(t,e){if(!0!==this.editable||void 0===t||!0===this.isOptionDisabled(t))return;const i=this.getOptionValue(t);if(!0!==this.multiple)return!0!==e&&(this.updateInputValue(!0===this.fillInput?this.getOptionLabel(t):"",!0,!0),this.dialogFieldFocused=!1,document.activeElement.blur(),this.hidePopup()),void 0!==this.$refs.target&&this.$refs.target.focus(),void(0!==this.innerValue.length&&!0===Wn(this.getOptionValue(this.innerValue[0]),i)||this.$emit("input",!0===this.emitValue?i:t));if((!0!==this.hasDialog||!0===this.dialogFieldFocused)&&this.__focus(),this.__selectInputText(),0===this.innerValue.length){const e=!0===this.emitValue?i:t;return this.$emit("add",{index:0,value:e}),void this.$emit("input",!0===this.multiple?[e]:e)}const n=this.value.slice(),s=this.innerOptionsValue.findIndex(t=>Wn(t,i));if(s>-1)this.$emit("remove",{index:s,value:n.splice(s,1)[0]});else{if(void 0!==this.maxValues&&n.length>=this.maxValues)return;const e=!0===this.emitValue?i:t;this.$emit("add",{index:n.length,value:e}),n.push(e)}this.$emit("input",n)},setOptionIndex(t){if(!0!==this.$q.platform.is.desktop)return;const e=t>-1&&t<this.virtualScrollLength?t:-1;this.optionIndex!==e&&(this.optionIndex=e)},moveOptionSelection(t=1,e){if(!0===this.menu){let i=this.optionIndex;do{i=Lt(i+t,-1,this.virtualScrollLength-1)}while(-1!==i&&i!==this.optionIndex&&!0===this.isOptionDisabled(this.options[i]));this.optionIndex!==i&&(cancelAnimationFrame(this.moveAnimationFrame),this.moveAnimationFrame=requestAnimationFrame(()=>{this.setOptionIndex(i),this.scrollTo(i),!0!==e&&!0===this.useInput&&!0===this.fillInput&&this.__setInputValue(i>=0?this.getOptionLabel(this.options[i]):this.defaultInputValue)}))}},__getOption(t,e){const i=e=>Wn(this.getOptionValue(e),t);return this.options.find(i)||e.find(i)||t},__getPropValueFn(t,e){const i=void 0!==this[t]?this[t]:e;return"function"===typeof i?i:t=>null!==t&&"object"===typeof t&&i in t?t[i]:t},isOptionSelected(t){const e=this.getOptionValue(t);return void 0!==this.innerOptionsValue.find(t=>Wn(t,e))},__selectInputText(t){!0===this.useInput&&void 0!==this.$refs.target&&(void 0===t||this.$refs.target===t.target&&t.target.value===this.selectedString)&&this.$refs.target.select()},__onTargetKeyup(t){!0===ut(t,27)&&!0===this.menu&&(L(t),this.hidePopup(),this.__resetInputValue()),this.$emit("keyup",t)},__onTargetAutocomplete(t){const{value:e}=t.target;if(void 0===t.keyCode)if(t.target.value="",clearTimeout(this.inputTimer),this.__resetInputValue(),"string"===typeof e&&e.length>0){const t=e.toLocaleLowerCase(),i=e=>{const i=this.options.find(i=>e(i).toLocaleLowerCase()===t);return void 0!==i&&(-1===this.innerValue.indexOf(i)?this.toggleOption(i):this.hidePopup(),!0)},n=t=>{!0!==i(this.getOptionValue)&&!0!==i(this.getOptionLabel)&&!0!==t&&this.filter(e,!0,()=>n(!0))};n()}else this.__clearValue(t);else this.__onTargetKeyup(t)},__onTargetKeypress(t){this.$emit("keypress",t)},__onTargetKeydown(t){if(this.$emit("keydown",t),!0===ct(t))return;const e=this.inputValue.length>0&&(void 0!==this.newValueMode||void 0!==this.qListeners["new-value"]),i=!0!==t.shiftKey&&!0!==this.multiple&&(this.optionIndex>-1||!0===e);if(27===t.keyCode)return void A(t);if(9===t.keyCode&&!1===i)return void this.__closeMenu();if(void 0===t.target||t.target.id!==this.targetUid)return;if(40===t.keyCode&&!0!==this.innerLoading&&!1===this.menu)return P(t),void this.showPopup();if(8===t.keyCode&&!0!==this.hideSelected&&0===this.inputValue.length)return void(!0===this.multiple&&Array.isArray(this.value)?this.removeAtIndex(this.value.length-1):!0!==this.multiple&&null!==this.value&&this.$emit("input",null));35!==t.keyCode&&36!==t.keyCode||"string"===typeof this.inputValue&&0!==this.inputValue.length||(P(t),this.optionIndex=-1,this.moveOptionSelection(36===t.keyCode?1:-1,this.multiple)),33!==t.keyCode&&34!==t.keyCode||void 0===this.virtualScrollSliceSizeComputed||(P(t),this.optionIndex=Math.max(-1,Math.min(this.virtualScrollLength,this.optionIndex+(33===t.keyCode?-1:1)*this.virtualScrollSliceSizeComputed.view)),this.moveOptionSelection(33===t.keyCode?1:-1,this.multiple)),38!==t.keyCode&&40!==t.keyCode||(P(t),this.moveOptionSelection(38===t.keyCode?-1:1,this.multiple));const n=this.virtualScrollLength;if((void 0===this.searchBuffer||this.searchBufferExp<Date.now())&&(this.searchBuffer=""),n>0&&!0!==this.useInput&&void 0!==t.key&&1===t.key.length&&t.altKey===t.ctrlKey&&(32!==t.keyCode||this.searchBuffer.length>0)){!0!==this.menu&&this.showPopup(t);const e=t.key.toLocaleLowerCase(),i=1===this.searchBuffer.length&&this.searchBuffer[0]===e;this.searchBufferExp=Date.now()+1500,!1===i&&(P(t),this.searchBuffer+=e);const s=new RegExp("^"+this.searchBuffer.split("").map(t=>gl.indexOf(t)>-1?"\\"+t:t).join(".*"),"i");let r=this.optionIndex;if(!0===i||r<0||!0!==s.test(this.getOptionLabel(this.options[r])))do{r=Lt(r+1,-1,n-1)}while(r!==this.optionIndex&&(!0===this.isOptionDisabled(this.options[r])||!0!==s.test(this.getOptionLabel(this.options[r]))));this.optionIndex!==r&&this.$nextTick(()=>{this.setOptionIndex(r),this.scrollTo(r),r>=0&&!0===this.useInput&&!0===this.fillInput&&this.__setInputValue(this.getOptionLabel(this.options[r]))})}else if(13===t.keyCode||32===t.keyCode&&!0!==this.useInput&&""===this.searchBuffer||9===t.keyCode&&!1!==i)if(9!==t.keyCode&&P(t),this.optionIndex>-1&&this.optionIndex<n)this.toggleOption(this.options[this.optionIndex]);else{if(!0===e){const t=(t,e)=>{if(e){if(!0!==ml(e))return}else e=this.newValueMode;void 0!==t&&null!==t&&(this.updateInputValue("",!0!==this.multiple,!0),this["toggle"===e?"toggleOption":"add"](t,"add-unique"===e),!0!==this.multiple&&(void 0!==this.$refs.target&&this.$refs.target.focus(),this.hidePopup()))};if(void 0!==this.qListeners["new-value"]?this.$emit("new-value",this.inputValue,t):t(this.inputValue),!0!==this.multiple)return}!0===this.menu?this.__closeMenu():!0!==this.innerLoading&&this.showPopup()}},__getVirtualScrollEl(){return!0===this.hasDialog?this.$refs.menuContent:void 0!==this.$refs.menu&&void 0!==this.$refs.menu.__portal?this.$refs.menu.__portal.$el:void 0},__getVirtualScrollTarget(){return this.__getVirtualScrollEl()},__getSelection(t){return!0===this.hideSelected?[]:void 0!==this.$scopedSlots["selected-item"]?this.selectedScope.map(t=>this.$scopedSlots["selected-item"](t)).slice():void 0!==this.$scopedSlots.selected?[].concat(this.$scopedSlots.selected()):!0===this.useChips?this.selectedScope.map((e,i)=>t(rs,{key:"rem#"+i,props:{removable:!0===this.editable&&!0!==this.isOptionDisabled(e.opt),dense:!0,textColor:this.color,tabindex:this.computedTabindex},on:Pt(this,"rem#"+i,{remove(){e.removeAtIndex(i)}})},[t("span",{staticClass:"ellipsis",domProps:{[!0===e.sanitize?"textContent":"innerHTML"]:this.getOptionLabel(e.opt)}})])):[t("span",{domProps:{[this.displayAsText?"textContent":"innerHTML"]:void 0!==this.displayValue?this.displayValue:this.selectedString}})]},__getControl(t,e){const i=this.__getSelection(t),n=!0===e||!0!==this.dialog||!0!==this.hasDialog;if(!0===this.useInput)i.push(this.__getInput(t,e,n));else if(!0===this.editable){const s=!0===n?this.comboboxAttrs:void 0;i.push(t("input",{ref:!0===n?"target":void 0,key:"d_t",staticClass:"q-select__focus-target",attrs:{id:!0===n?this.targetUid:void 0,readonly:!0,"data-autofocus":(!0===e?!0===n:this.autofocus)||void 0,...s},on:Pt(this,"f-tget",{keydown:this.__onTargetKeydown,keyup:this.__onTargetKeyup,keypress:this.__onTargetKeypress})})),!0===n&&"string"===typeof this.autocomplete&&this.autocomplete.length>0&&i.push(t("input",{key:"autoinp",staticClass:"q-select__autocomplete-input",attrs:{autocomplete:this.autocomplete,tabindex:-1},on:Pt(this,"autoinp",{keyup:this.__onTargetAutocomplete})}))}if(void 0!==this.nameProp&&!0!==this.disable&&this.innerOptionsValue.length>0){const e=this.innerOptionsValue.map(e=>t("option",{attrs:{value:e,selected:!0}}));i.push(t("select",{staticClass:"hidden",attrs:{name:this.nameProp,multiple:this.multiple}},e))}const s=!0===this.useInput||!0!==n?void 0:this.qAttrs;return t("div",{staticClass:"q-field__native row items-center",attrs:s},i)},__getOptions(t){if(!0!==this.menu)return;if(!0===this.noOptions)return void 0!==this.$scopedSlots["no-option"]?this.$scopedSlots["no-option"]({inputValue:this.inputValue}):void 0;void 0!==this.$scopedSlots.option&&this.__optionScopeCache.optionSlot!==this.$scopedSlots.option&&(this.__optionScopeCache.optionSlot=this.$scopedSlots.option,this.__optionScopeCache.optionEls=[]);const e=void 0!==this.$scopedSlots.option?this.$scopedSlots.option:e=>t(no,{key:e.index,props:e.itemProps,attrs:e.itemAttrs,on:e.itemEvents},[t(so,[t(Co,{domProps:{[!0===e.sanitize?"textContent":"innerHTML"]:this.getOptionLabel(e.opt)}})])]),{optionEls:i}=this.__optionScopeCache;let n=this.__padVirtualScroll(t,"div",this.optionScope.map((t,n)=>(void 0===i[n]&&(i[n]=e(t)),i[n])));return void 0!==this.$scopedSlots["before-options"]&&(n=this.$scopedSlots["before-options"]().concat(n)),te(n,this,"after-options")},__getInnerAppend(t){return!0!==this.loading&&!0!==this.innerLoadingIndicator&&!0!==this.hideDropdownIcon?[t(ge,{staticClass:"q-select__dropdown-icon"+(!0===this.menu?" rotate-180":""),props:{name:this.dropdownArrowIcon}})]:null},__getInput(t,e,i){const n=!0===i?{...this.comboboxAttrs,...this.qAttrs}:void 0,s={ref:!0===i?"target":void 0,key:"i_t",staticClass:"q-field__input q-placeholder col",style:this.inputStyle,class:this.computedInputClass,domProps:{value:void 0!==this.inputValue?this.inputValue:""},attrs:{type:"search",...n,id:!0===i?this.targetUid:void 0,maxlength:this.maxlength,autocomplete:this.autocomplete,"data-autofocus":(!0===e?!0===i:this.autofocus)||void 0,disabled:!0===this.disable,readonly:!0===this.readonly},on:this.inputControlEvents};return!0!==e&&!0===this.hasDialog&&(s.staticClass+=" no-pointer-events"),t("input",s)},__onChange(t){this.__onComposition(t)},__onInput(t){clearTimeout(this.inputTimer),t&&t.target&&!0===t.target.qComposing||(this.__setInputValue(t.target.value||""),this.userInputValue=!0,this.defaultInputValue=this.inputValue,!0===this.focused||!0===this.hasDialog&&!0!==this.dialogFieldFocused||this.__focus(),void 0!==this.qListeners.filter&&(this.inputTimer=setTimeout(()=>{this.filter(this.inputValue)},this.inputDebounce)))},__setInputValue(t){this.inputValue!==t&&(this.inputValue=t,this.$emit("input-value",t))},updateInputValue(t,e,i){this.userInputValue=!0!==i,!0===this.useInput&&(this.__setInputValue(t),!0!==e&&!0===i||(this.defaultInputValue=t),!0!==e&&this.filter(t))},filter(t,e,i){if(void 0===this.qListeners.filter||!0!==e&&!0!==this.focused)return;!0===this.innerLoading?this.$emit("filter-abort"):(this.innerLoading=!0,this.innerLoadingIndicator=!0),""!==t&&!0!==this.multiple&&this.innerValue.length>0&&!0!==this.userInputValue&&t===this.getOptionLabel(this.innerValue[0])&&(t="");const n=setTimeout(()=>{!0===this.menu&&(this.menu=!1)},10);clearTimeout(this.filterId),this.filterId=n,this.$emit("filter",t,(t,s)=>{!0!==e&&!0!==this.focused||this.filterId!==n||(clearTimeout(this.filterId),"function"===typeof t&&t(),this.innerLoadingIndicator=!1,this.$nextTick(()=>{this.innerLoading=!1,!0===this.editable&&(!0===e?!0===this.menu&&this.hidePopup():!0===this.menu?this.__updateMenu(!0):(this.menu=!0,!0===this.hasDialog&&(this.dialog=!0))),"function"===typeof s&&this.$nextTick(()=>{s(this)}),"function"===typeof i&&this.$nextTick(()=>{i(this)})}))},()=>{!0===this.focused&&this.filterId===n&&(clearTimeout(this.filterId),this.innerLoading=!1,this.innerLoadingIndicator=!1),!0===this.menu&&(this.menu=!1)})},__getControlEvents(){const t=t=>{this.__onControlFocusout(t,()=>{this.__resetInputValue(),this.__closeMenu()})};return{focusin:this.__onControlFocusin,focusout:t,"popup-show":this.__onControlPopupShow,"popup-hide":e=>{void 0!==e&&L(e),this.$emit("popup-hide",e),this.hasPopupOpen=!1,t(e)},click:t=>{if(A(t),!0!==this.hasDialog&&!0===this.menu)return this.__closeMenu(),void(void 0!==this.$refs.target&&this.$refs.target.focus());this.showPopup(t)}}},__getControlChild(t){if(!1!==this.editable&&(!0===this.dialog||!0!==this.noOptions||void 0!==this.$scopedSlots["no-option"]))return this["__get"+(!0===this.hasDialog?"Dialog":"Menu")](t)},__getMenu(t){return t(mn,{key:"menu",ref:"menu",props:{value:this.menu,fit:!0!==this.menuShrink,cover:!0===this.optionsCover&&!0!==this.noOptions&&!0!==this.useInput,anchor:this.menuAnchor,self:this.menuSelf,offset:this.menuOffset,contentClass:this.menuContentClass,contentStyle:this.popupContentStyle,dark:this.isOptionsDark,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:this.squaredMenu,transitionShow:this.transitionShow,transitionHide:this.transitionHide,separateClosePopup:!0},attrs:this.listboxAttrs,on:Pt(this,"menu",{"&scroll":this.__onVirtualScrollEvt,"before-hide":this.__closeMenu,show:this.__onMenuShow})},this.__getOptions(t))},__onMenuShow(){this.__setVirtualScrollSize()},__onDialogFieldFocus(t){L(t),void 0!==this.$refs.target&&this.$refs.target.focus(),this.dialogFieldFocused=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)},__onDialogFieldBlur(t){L(t),this.$nextTick(()=>{this.dialogFieldFocused=!1})},__getDialog(t){const e=[t(Vo,{staticClass:"col-auto "+this.fieldClass,props:{...this.$props,for:this.targetUid,dark:this.isOptionsDark,square:!0,filled:!0,itemAligned:!1,loading:this.innerLoadingIndicator,stackLabel:this.inputValue.length>0},on:{...this.qListeners,focus:this.__onDialogFieldFocus,blur:this.__onDialogFieldBlur},scopedSlots:{...this.$scopedSlots,rawControl:()=>this.__getControl(t,!0),before:void 0,after:void 0}})];return!0===this.menu&&e.push(t("div",{key:"virtMenu",ref:"menuContent",staticClass:"col scroll",class:this.menuContentClass,style:this.popupContentStyle,attrs:this.listboxAttrs,on:Pt(this,"virtMenu",{click:A,"&scroll":this.__onVirtualScrollEvt})},this.__getOptions(t))),t(Xr,{key:"dialog",ref:"dialog",props:{value:this.dialog,dark:this.isOptionsDark,position:!0===this.useInput?"top":void 0,transitionShow:this.transitionShowComputed,transitionHide:this.transitionHide},on:Pt(this,"dialog",{"before-hide":this.__onDialogBeforeHide,hide:this.__onDialogHide,show:this.__onDialogShow})},[t("div",{staticClass:"q-select__dialog"+(!0===this.isOptionsDark?" q-select__dialog--dark q-dark":"")+(!0===this.dialogFieldFocused?" q-select__dialog--focused":"")},e)])},__onDialogBeforeHide(){!0===this.useInput&&!0!==this.$q.platform.is.desktop||(this.$refs.dialog.__refocusTarget=this.$el.querySelector(".q-field__native > [tabindex]:last-child")),this.focused=!1,this.dialogFieldFocused=!1},__onDialogHide(t){!0!==this.$q.platform.is.desktop&&document.activeElement.blur(),this.hidePopup(),!1===this.focused&&this.$emit("blur",t),this.__resetInputValue()},__onDialogShow(){const t=document.activeElement;null!==t&&t.id===this.targetUid||this.$refs.target===t||void 0===this.$refs.target||this.$refs.target.focus(),this.__setVirtualScrollSize()},__closeMenu(){void 0!==this.__optionScopeCache&&(this.__optionScopeCache.optionEls=[]),!0!==this.dialog&&(this.optionIndex=-1,!0===this.menu&&(this.menu=!1),!1===this.focused&&(clearTimeout(this.filterId),this.filterId=void 0,!0===this.innerLoading&&(this.$emit("filter-abort"),this.innerLoading=!1,this.innerLoadingIndicator=!1)))},showPopup(t){!0===this.editable&&(!0===this.hasDialog?(this.__onControlFocusin(t),this.dialog=!0,this.$nextTick(()=>{this.__focus()})):this.__focus(),void 0!==this.qListeners.filter?this.filter(this.inputValue):!0===this.noOptions&&void 0===this.$scopedSlots["no-option"]||(this.menu=!0))},hidePopup(){this.dialog=!1,this.__closeMenu()},__resetInputValue(){!0===this.useInput&&this.updateInputValue(!0!==this.multiple&&!0===this.fillInput&&this.innerValue.length>0&&this.getOptionLabel(this.innerValue[0])||"",!0,!0)},__updateMenu(t){let e=-1;if(!0===t){if(this.innerValue.length>0){const t=this.getOptionValue(this.innerValue[0]);e=this.options.findIndex(e=>Wn(this.getOptionValue(e),t))}this.__resetVirtualScroll(e)}this.setOptionIndex(e)},__onPreRender(){this.hasDialog=(!0===this.$q.platform.is.mobile||"dialog"===this.behavior)&&("menu"!==this.behavior&&(!0!==this.useInput||(void 0!==this.$scopedSlots["no-option"]||void 0!==this.qListeners.filter||!1===this.noOptions))),this.transitionShowComputed=!0===this.hasDialog&&!0===this.useInput&&!0===this.$q.platform.is.ios?"fade":this.transitionShow},__onPostRender(){!1===this.dialog&&void 0!==this.$refs.menu&&this.$refs.menu.updatePosition()},updateMenuPosition(){this.__onPostRender()}},beforeMount(){this.__optionScopeCache={optionSlot:this.$scopedSlots.option,options:[],optionEls:[]}},beforeDestroy(){this.__optionScopeCache=void 0,clearTimeout(this.inputTimer)}});const _l=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],yl=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var bl=a["a"].extend({name:"QSkeleton",mixins:[ye,Qt,Kt],props:{type:{type:String,validator:t=>_l.includes(t),default:"rect"},animation:{type:String,validator:t=>yl.includes(t),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String},computed:{style(){return void 0!==this.size?{width:this.size,height:this.size}:{width:this.width,height:this.height}},classes(){return`q-skeleton--${!0===this.isDark?"dark":"light"} q-skeleton--type-${this.type}`+("none"!==this.animation?" q-skeleton--anim q-skeleton--anim-"+this.animation:"")+(!0===this.square?" q-skeleton--square":"")+(!0===this.bordered?" q-skeleton--bordered":"")}},render(t){return t(this.tag,{staticClass:"q-skeleton",class:this.classes,style:this.style,on:{...this.qListeners}},Zt(this,"default"))}});const xl=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];var Sl=a["a"].extend({name:"QSlideItem",mixins:[ye,Kt],props:{leftColor:String,rightColor:String,topColor:String,bottomColor:String},directives:{TouchPan:bs},computed:{langDir(){return!0===this.$q.lang.rtl?{left:"right",right:"left"}:{left:"left",right:"right"}}},methods:{reset(){this.$refs.content.style.transform="translate(0,0)",this.__emitSlide(this.__showing,0,!0)},__emitSlide(t,e,i){void 0!==this.qListeners.slide&&this.$emit("slide",{side:t,ratio:e,isReset:i})},__pan(t){const e=this.$refs.content;if(t.isFirst)this.__dir=null,this.__size={left:0,right:0,top:0,bottom:0},this.__scale=0,e.classList.add("no-transition"),xl.forEach(t=>{if(void 0!==this.$scopedSlots[t[0]]){const e=this.$refs[t[0]+"Content"];e.style.transform="scale(1)",this.__size[t[0]]=e.getBoundingClientRect()[t[3]]}}),this.__axis="up"===t.direction||"down"===t.direction?"Y":"X";else{if(t.isFinal)return e.classList.remove("no-transition"),void(1===this.__scale?(e.style.transform=`translate${this.__axis}(${100*this.__dir}%)`,this.timer=setTimeout(()=>{this.$emit(this.__showing,{reset:this.reset}),this.$emit("action",{side:this.__showing,reset:this.reset})},230)):(e.style.transform="translate(0,0)",this.__emitSlide(this.__showing,0,!0)));t.direction="X"===this.__axis?t.offset.x<0?"left":"right":t.offset.y<0?"up":"down"}if(void 0===this.$scopedSlots.left&&t.direction===this.langDir.right||void 0===this.$scopedSlots.right&&t.direction===this.langDir.left||void 0===this.$scopedSlots.top&&"down"===t.direction||void 0===this.$scopedSlots.bottom&&"up"===t.direction)return void(e.style.transform="translate(0,0)");let i,n,s;"X"===this.__axis?(n="left"===t.direction?-1:1,i=1===n?this.langDir.left:this.langDir.right,s=t.distance.x):(n="up"===t.direction?-2:2,i=2===n?"top":"bottom",s=t.distance.y),null!==this.__dir&&Math.abs(n)!==Math.abs(this.__dir)||(this.__dir!==n&&(["left","right","top","bottom"].forEach(t=>{void 0!==this.$refs[t]&&(this.$refs[t].style.visibility=i===t?"visible":"hidden")}),this.__showing=i,this.__dir=n),this.__scale=Math.max(0,Math.min(1,(s-40)/this.__size[i])),e.style.transform=`translate${this.__axis}(${s*n/Math.abs(n)}px)`,this.$refs[i+"Content"].style.transform=`scale(${this.__scale})`,this.__emitSlide(i,this.__scale,!1))}},render(t){const e=[],i={left:void 0!==this.$scopedSlots[this.langDir.right],right:void 0!==this.$scopedSlots[this.langDir.left],up:void 0!==this.$scopedSlots.bottom,down:void 0!==this.$scopedSlots.top},n=Object.keys(i).filter(t=>!0===i[t]);return xl.forEach(i=>{const n=i[0];void 0!==this.$scopedSlots[n]&&e.push(t("div",{ref:n,class:`q-slide-item__${n} absolute-full row no-wrap items-${i[1]} justify-${i[2]}`+(void 0!==this[n+"Color"]?" bg-"+this[n+"Color"]:"")},[t("div",{ref:n+"Content"},this.$scopedSlots[n]())]))}),e.push(t("div",{ref:"content",key:"content",staticClass:"q-slide-item__content",directives:n.length>0?Rt(this,"dir#"+n.join(""),()=>{const t={prevent:!0,stop:!0,mouse:!0};return n.forEach(e=>{t[e]=!0}),[{name:"touch-pan",value:this.__pan,modifiers:t}]}):null},Zt(this,"default"))),t("div",{staticClass:"q-slide-item q-item-type overflow-hidden",class:!0===this.isDark?"q-slide-item--dark q-dark":"",on:{...this.qListeners}},e)},beforeDestroy(){clearTimeout(this.timer)}}),wl=a["a"].extend({name:"QSpace",mixins:[Kt],render(t){return t("div",{staticClass:"q-space",on:{...this.qListeners}})}}),Cl=a["a"].extend({name:"QSpinnerAudio",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",fill:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{transform:"matrix(1 0 0 -1 0 80)"}},[t("rect",{attrs:{width:"10",height:"20",rx:"3"}},[t("animate",{attrs:{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"15",width:"10",height:"80",rx:"3"}},[t("animate",{attrs:{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"30",width:"10",height:"50",rx:"3"}},[t("animate",{attrs:{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"45",width:"10",height:"30",rx:"3"}},[t("animate",{attrs:{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"}})])])])}}),Ml=a["a"].extend({name:"QSpinnerBall",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",stroke:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"}},[t("circle",{attrs:{cx:"5",cy:"50",r:"5"}},[t("animate",{attrs:{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"27",cy:"5",r:"5"}},[t("animate",{attrs:{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"49",cy:"50",r:"5"}},[t("animate",{attrs:{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"}})])])])}}),Tl=a["a"].extend({name:"QSpinnerBars",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",fill:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"}},[t("rect",{attrs:{y:"10",width:"15",height:"120",rx:"6"}},[t("animate",{attrs:{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"30",y:"10",width:"15",height:"120",rx:"6"}},[t("animate",{attrs:{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"60",width:"15",height:"140",rx:"6"}},[t("animate",{attrs:{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"90",y:"10",width:"15",height:"120",rx:"6"}},[t("animate",{attrs:{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"}})]),t("rect",{attrs:{x:"120",y:"10",width:"15",height:"120",rx:"6"}},[t("animate",{attrs:{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"}})])])}}),kl=a["a"].extend({name:"QSpinnerBox",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[t("rect",{attrs:{x:"25",y:"25",width:"50",height:"50",fill:"none","stroke-width":"4",stroke:"currentColor"}},[t("animateTransform",{attrs:{id:"spinnerBox",attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",dur:"0.5s",begin:"rectBox.end"}})]),t("rect",{attrs:{x:"27",y:"27",width:"46",height:"50",fill:"currentColor"}},[t("animate",{attrs:{id:"rectBox",attributeName:"height",begin:"0s;spinnerBox.end",dur:"1.3s",from:"50",to:"0",fill:"freeze"}})])])}}),El=a["a"].extend({name:"QSpinnerClock",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[t("circle",{attrs:{cx:"50",cy:"50",r:"48",fill:"none","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor"}}),t("line",{attrs:{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"85",y2:"50.5"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2s",repeatCount:"indefinite"}})]),t("line",{attrs:{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"49.5",y2:"74"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"15s",repeatCount:"indefinite"}})])])}}),Ll=a["a"].extend({name:"QSpinnerComment",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[t("rect",{attrs:{x:"0",y:"0",width:"100",height:"100",fill:"none"}}),t("path",{attrs:{d:"M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z",fill:"currentColor"}}),t("circle",{attrs:{cx:"30",cy:"47",r:"5",fill:"#fff"}},[t("animate",{attrs:{attributeName:"opacity",from:"0",to:"1",values:"0;1;1",keyTimes:"0;0.2;1",dur:"1s",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"50",cy:"47",r:"5",fill:"#fff"}},[t("animate",{attrs:{attributeName:"opacity",from:"0",to:"1",values:"0;0;1;1",keyTimes:"0;0.2;0.4;1",dur:"1s",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"70",cy:"47",r:"5",fill:"#fff"}},[t("animate",{attrs:{attributeName:"opacity",from:"0",to:"1",values:"0;0;1;1",keyTimes:"0;0.4;0.6;1",dur:"1s",repeatCount:"indefinite"}})])])}}),Al=a["a"].extend({name:"QSpinnerCube",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[t("rect",{attrs:{x:"0",y:"0",width:"100",height:"100",fill:"none"}}),t("g",{attrs:{transform:"translate(25 25)"}},[t("rect",{attrs:{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.9"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"}})])]),t("g",{attrs:{transform:"translate(75 25)"}},[t("rect",{attrs:{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.8"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0.1s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"}})])]),t("g",{attrs:{transform:"translate(25 75)"}},[t("rect",{staticClass:"cube",attrs:{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.7"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0.3s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"}})])]),t("g",{attrs:{transform:"translate(75 75)"}},[t("rect",{staticClass:"cube",attrs:{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.6"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0.2s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"}})])])])}}),Pl=a["a"].extend({name:"QSpinnerDots",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",fill:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"}},[t("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[t("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":".3"}},[t("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[t("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])}}),Rl=a["a"].extend({name:"QSpinnerFacebook",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"}},[t("g",{attrs:{transform:"translate(20 50)"}},[t("rect",{attrs:{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"}})])]),t("g",{attrs:{transform:"translate(50 50)"}},[t("rect",{attrs:{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"}})])]),t("g",{attrs:{transform:"translate(80 50)"}},[t("rect",{attrs:{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"}})])])])}}),Ol=a["a"].extend({name:"QSpinnerGears",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{transform:"translate(-20,-20)"}},[t("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"}})])]),t("g",{attrs:{transform:"translate(20,20) rotate(15 50 50)"}},[t("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"}})])])])}}),Il=a["a"].extend({name:"QSpinnerGrid",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",fill:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg"}},[t("circle",{attrs:{cx:"12.5",cy:"12.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"12.5",cy:"52.5",r:"12.5","fill-opacity":".5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"52.5",cy:"12.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"52.5",cy:"52.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"92.5",cy:"12.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"92.5",cy:"52.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"12.5",cy:"92.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"52.5",cy:"92.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"92.5",cy:"92.5",r:"12.5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"}})])])}}),Dl=a["a"].extend({name:"QSpinnerHearts",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",fill:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z","fill-opacity":".5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"0s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"}})]),t("path",{attrs:{d:"M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z","fill-opacity":".5"}},[t("animate",{attrs:{attributeName:"fill-opacity",begin:"0.7s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"}})]),t("path",{attrs:{d:"M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"}})])}}),Nl=a["a"].extend({name:"QSpinnerHourglass",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"}},[t("g",[t("path",{staticClass:"glass",attrs:{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}}),t("clipPath",{attrs:{id:"uil-hourglass-clip1"}},[t("rect",{staticClass:"clip",attrs:{x:"15",y:"20",width:"70",height:"25"}},[t("animate",{attrs:{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}}),t("animate",{attrs:{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"}})])]),t("clipPath",{attrs:{id:"uil-hourglass-clip2"}},[t("rect",{staticClass:"clip",attrs:{x:"15",y:"55",width:"70",height:"25"}},[t("animate",{attrs:{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}}),t("animate",{attrs:{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"}})])]),t("path",{staticClass:"sand",attrs:{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}}),t("path",{staticClass:"sand",attrs:{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}}),t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"}})])])}}),zl=a["a"].extend({name:"QSpinnerInfinity",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[t("path",{attrs:{d:"M24.3,30C11.4,30,5,43.3,5,50s6.4,20,19.3,20c19.3,0,32.1-40,51.4-40C88.6,30,95,43.3,95,50s-6.4,20-19.3,20C56.4,70,43.6,30,24.3,30z",fill:"none",stroke:"currentColor","stroke-width":"8","stroke-dasharray":"10.691205342610678 10.691205342610678","stroke-dashoffset":"0"}},[t("animate",{attrs:{attributeName:"stroke-dashoffset",from:"0",to:"21.382410685221355",begin:"0",dur:"2s",repeatCount:"indefinite",fill:"freeze"}})])])}}),ql=a["a"].extend({name:"QSpinnerIos",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"}},[t("g",{attrs:{"stroke-width":"4","stroke-linecap":"round"}},[t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"}})]),t("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"}},[t("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"}})])])])}}),Bl=a["a"].extend({name:"QSpinnerOrbit",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[t("circle",{attrs:{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}}),t("circle",{attrs:{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"}})])])}}),Fl=a["a"].extend({name:"QSpinnerOval",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",stroke:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"}},[t("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),t("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})])])])}}),Ul=a["a"].extend({name:"QSpinnerPie",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0 50A50 50 0 0 1 50 0L50 50L0 50",fill:"currentColor",opacity:"0.5"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"0.8s",repeatCount:"indefinite"}})]),t("path",{attrs:{d:"M50 0A50 50 0 0 1 100 50L50 50L50 0",fill:"currentColor",opacity:"0.5"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"1.6s",repeatCount:"indefinite"}})]),t("path",{attrs:{d:"M100 50A50 50 0 0 1 50 100L50 50L100 50",fill:"currentColor",opacity:"0.5"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2.4s",repeatCount:"indefinite"}})]),t("path",{attrs:{d:"M50 100A50 50 0 0 1 0 50L50 50L50 100",fill:"currentColor",opacity:"0.5"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"3.2s",repeatCount:"indefinite"}})])])}}),$l=a["a"].extend({name:"QSpinnerPuff",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",stroke:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{fill:"none","fill-rule":"evenodd","stroke-width":"2"}},[t("circle",{attrs:{cx:"22",cy:"22",r:"1"}},[t("animate",{attrs:{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"22",cy:"22",r:"1"}},[t("animate",{attrs:{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}})])])])}}),Vl=a["a"].extend({name:"QSpinnerRadio",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{transform:"scale(0.55)"}},[t("circle",{attrs:{cx:"30",cy:"150",r:"30",fill:"currentColor"}},[t("animate",{attrs:{attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:"0",repeatCount:"indefinite",keyTimes:"0;0.5;1",values:"0;1;1"}})]),t("path",{attrs:{d:"M90,150h30c0-49.7-40.3-90-90-90v30C63.1,90,90,116.9,90,150z",fill:"currentColor"}},[t("animate",{attrs:{attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:"0.1",repeatCount:"indefinite",keyTimes:"0;0.5;1",values:"0;1;1"}})]),t("path",{attrs:{d:"M150,150h30C180,67.2,112.8,0,30,0v30C96.3,30,150,83.7,150,150z",fill:"currentColor"}},[t("animate",{attrs:{attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:"0.2",repeatCount:"indefinite",keyTimes:"0;0.5;1",values:"0;1;1"}})])])])}}),Hl=a["a"].extend({name:"QSpinnerRings",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",stroke:"currentColor",width:this.cSize,height:this.cSize,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"}},[t("circle",{attrs:{cx:"22",cy:"22",r:"6"}},[t("animate",{attrs:{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"22",cy:"22",r:"6"}},[t("animate",{attrs:{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}}),t("animate",{attrs:{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"}})]),t("circle",{attrs:{cx:"22",cy:"22",r:"8"}},[t("animate",{attrs:{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"}})])])])}}),Gl=a["a"].extend({name:"QSpinnerTail",mixins:[ze],render(t){return t("svg",{staticClass:"q-spinner",class:this.classes,on:{...this.qListeners},attrs:{focusable:"false",width:this.cSize,height:this.cSize,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"}},[t("defs",[t("linearGradient",{attrs:{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"}},[t("stop",{attrs:{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}}),t("stop",{attrs:{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}}),t("stop",{attrs:{"stop-color":"currentColor",offset:"100%"}})])]),t("g",{attrs:{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"}},[t("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}})]),t("circle",{attrs:{fill:"currentColor",cx:"36",cy:"18",r:"1"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}})])])])}}),Wl=a["a"].extend({name:"QSplitter",mixins:[ye,Kt],directives:{TouchPan:bs},props:{value:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:t=>["%","px"].includes(t)},limits:{type:Array,validator:t=>2===t.length&&("number"===typeof t[0]&&"number"===typeof t[1]&&(t[0]>=0&&t[0]<=t[1]))},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},watch:{value:{immediate:!0,handler(t){this.__normalize(t,this.computedLimits)}},limits:{deep:!0,handler(){this.$nextTick(()=>{this.__normalize(this.value,this.computedLimits)})}}},computed:{classes(){return(!0===this.horizontal?"column":"row")+" q-splitter--"+(!0===this.horizontal?"horizontal":"vertical")+" q-splitter--"+(!0===this.disable?"disabled":"workable")+(!0===this.isDark?" q-splitter--dark":"")},prop(){return!0===this.horizontal?"height":"width"},side(){return!0!==this.reverse?"before":"after"},computedLimits(){return void 0!==this.limits?this.limits:"%"===this.unit?[10,90]:[50,1/0]},styles(){return{[this.side]:{[this.prop]:this.__getCSSValue(this.value)}}},separatorDirectives(){if(!0!==this.disable)return[{name:"touch-pan",value:this.__pan,modifiers:{[!0===this.horizontal?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}}]}},methods:{__pan(t){if(!0===t.isFirst){const t=this.$el.getBoundingClientRect()[this.prop];return this.__dir=!0===this.horizontal?"up":"left",this.__maxValue="%"===this.unit?100:t,this.__value=Math.min(this.__maxValue,this.computedLimits[1],Math.max(this.computedLimits[0],this.value)),this.__multiplier=(!0!==this.reverse?1:-1)*(!0===this.horizontal?1:!0===this.$q.lang.rtl?-1:1)*("%"===this.unit?0===t?0:100/t:1),void this.$el.classList.add("q-splitter--active")}if(!0===t.isFinal)return this.__normalized!==this.value&&this.$emit("input",this.__normalized),void this.$el.classList.remove("q-splitter--active");const e=this.__value+this.__multiplier*(t.direction===this.__dir?-1:1)*t.distance[!0===this.horizontal?"y":"x"];this.__normalized=Math.min(this.__maxValue,this.computedLimits[1],Math.max(this.computedLimits[0],e)),this.$refs[this.side].style[this.prop]=this.__getCSSValue(this.__normalized),!0===this.emitImmediately&&this.value!==this.__normalized&&this.$emit("input",this.__normalized)},__normalize(t,e){t<e[0]?this.$emit("input",e[0]):t>e[1]&&this.$emit("input",e[1])},__getCSSValue(t){return("%"===this.unit?t:Math.round(t))+this.unit}},render(t){const e=!0===this.disable?{"aria-disabled":"true"}:void 0,i=[t("div",{ref:"before",staticClass:"q-splitter__panel q-splitter__before"+(!0===this.reverse?" col":""),style:this.styles.before,class:this.beforeClass,on:Pt(this,"stop",{input:L})},Zt(this,"before")),t("div",{staticClass:"q-splitter__separator",style:this.separatorStyle,class:this.separatorClass,attrs:e},[t("div",{staticClass:"absolute-full q-splitter__separator-area",directives:this.separatorDirectives},Zt(this,"separator"))]),t("div",{ref:"after",staticClass:"q-splitter__panel q-splitter__after"+(!0===this.reverse?"":" col"),style:this.styles.after,class:this.afterClass,on:Pt(this,"stop",{input:L})},Zt(this,"after"))];return t("div",{staticClass:"q-splitter no-wrap",class:this.classes,on:{...this.qListeners}},te(i,this,"default"))}}),jl=a["a"].extend({name:"StepHeader",mixins:[Nt],directives:{Ripple:Xe},props:{stepper:{},step:{}},computed:{isActive(){return this.stepper.value===this.step.name},isDisable(){const t=this.step.disable;return!0===t||""===t},isError(){const t=this.step.error;return!0===t||""===t},isDone(){const t=this.step.done;return!1===this.isDisable&&(!0===t||""===t)},headerNav(){const t=this.step.headerNav,e=!0===t||""===t||void 0===t;return!1===this.isDisable&&this.stepper.headerNav&&e},hasPrefix(){return this.step.prefix&&(!1===this.isActive||"none"===this.stepper.activeIcon)&&(!1===this.isError||"none"===this.stepper.errorIcon)&&(!1===this.isDone||"none"===this.stepper.doneIcon)},icon(){const t=this.step.icon||this.stepper.inactiveIcon;if(!0===this.isActive){const e=this.step.activeIcon||this.stepper.activeIcon;return"none"===e?t:e||this.$q.iconSet.stepper.active}if(!0===this.isError){const e=this.step.errorIcon||this.stepper.errorIcon;return"none"===e?t:e||this.$q.iconSet.stepper.error}if(!1===this.isDisable&&!0===this.isDone){const e=this.step.doneIcon||this.stepper.doneIcon;return"none"===e?t:e||this.$q.iconSet.stepper.done}return t},color(){const t=!0===this.isError?this.step.errorColor||this.stepper.errorColor:void 0;if(!0===this.isActive){const e=this.step.activeColor||this.stepper.activeColor||this.step.color;return void 0!==e?e:t}return void 0!==t?t:!1===this.isDisable&&!0===this.isDone?this.step.doneColor||this.stepper.doneColor||this.step.color||this.stepper.inactiveColor:this.step.color||this.stepper.inactiveColor},classes(){return"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(void 0!==this.color?" text-"+this.color:"")+(!0===this.isError?" q-stepper__tab--error q-stepper__tab--error-with-"+(!0===this.hasPrefix?"prefix":"icon"):"")+(!0===this.isActive?" q-stepper__tab--active":"")+(!0===this.isDone?" q-stepper__tab--done":"")+(!0===this.headerNav?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(!0===this.isDisable?" q-stepper__tab--disabled":"")}},methods:{activate(){void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus(),!1===this.isActive&&this.stepper.goTo(this.step.name)},keyup(t){13===t.keyCode&&!1===this.isActive&&this.stepper.goTo(this.step.name)}},render(t){const e={class:this.classes};!0===this.stepper.headerNav&&(e.directives=[{name:"ripple",value:this.headerNav}]),!0===this.headerNav&&Object.assign(e,{on:Pt(this,"headnavon",{click:this.activate,keyup:this.keyup}),attrs:!0===this.isDisable?{tabindex:-1,"aria-disabled":"true"}:{tabindex:this.qAttrs.tabindex||0}});const i=[t("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget"}),t("div",{staticClass:"q-stepper__dot row flex-center q-stepper__line relative-position"},[t("span",{staticClass:"row flex-center"},[!0===this.hasPrefix?this.step.prefix:t(ge,{props:{name:this.icon}})])])];if(void 0!==this.step.title&&null!==this.step.title){const e=[t("div",{staticClass:"q-stepper__title"},[this.step.title])];void 0!==this.step.caption&&null!==this.step.caption&&e.push(t("div",{staticClass:"q-stepper__caption"},[this.step.caption])),i.push(t("div",{staticClass:"q-stepper__label q-stepper__line relative-position"},e))}return t("div",e,i)}});const Yl={role:"tabpanel"},Xl=a["a"].extend({name:"QStepWrapper",render(t){return t("div",{staticClass:"q-stepper__step-content"},[t("div",{staticClass:"q-stepper__step-inner"},Zt(this,"default"))])}});var Ql=a["a"].extend({name:"QStep",inject:{stepper:{default(){console.error("QStep needs to be child of QStepper")}}},mixins:[Fn],props:{icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean},computed:{isActive(){return this.stepper.value===this.name},onEvents(){return!0!==this.isActive||!0!==this.stepper.vertical||!0!==this.$q.platform.is.ios&&!0===this.$q.platform.is.chrome?{...this.qListeners}:{...this.qListeners,scroll:this.__keepScroll}}},methods:{__keepScroll(t){const{target:e}=t;e.scrollTop>0&&(e.scrollTop=0),void 0!==this.qListeners.scroll&&this.$emit("scroll",t)}},render(t){const e=this.stepper.vertical,i=!0===e&&!0===this.stepper.keepAlive?t("keep-alive",!0===this.isActive?[t(Xl,{key:this.name},Zt(this,"default"))]:void 0):!0!==e||!0===this.isActive?Xl.options.render.call(this,t):void 0;return t("div",{staticClass:"q-stepper__step",attrs:Yl,on:this.onEvents},!0===e?[t(jl,{props:{stepper:this.stepper,step:this}}),!0===this.stepper.animated?t(Mo,[i]):i]:[i])}}),Kl=a["a"].extend({name:"QStepper",provide(){return{stepper:this}},mixins:[ye,Bn],props:{flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},computed:{classes(){return"q-stepper q-stepper--"+(!0===this.vertical?"vertical":"horizontal")+(!0===this.flat||!0===this.isDark?" q-stepper--flat no-shadow":"")+(!0===this.bordered||!0===this.isDark&&!1===this.flat?" q-stepper--bordered":"")+(!0===this.isDark?" q-stepper--dark q-dark":"")},headerClasses(){return`q-stepper__header row items-stretch justify-between q-stepper__header--${!0===this.alternativeLabels?"alternative":"standard"}-labels`+(!1===this.flat||!0===this.bordered?" q-stepper__header--border":"")+(!0===this.contracted?" q-stepper__header--contracted":"")+(void 0!==this.headerClass?" "+this.headerClass:"")}},methods:{__getContent(t){const e=Zt(this,"message",[]);if(!0===this.vertical){this.__isValidPanelName(this.value)&&this.__updatePanelIndex();const i=t("div",{staticClass:"q-stepper__content",on:Pt(this,"stop",{input:L})},Zt(this,"default"));return void 0===e?[i]:e.concat(i)}return[t("div",{class:this.headerClasses},this.panels.map(e=>{const i=e.componentOptions.propsData;return t(jl,{key:i.name,props:{stepper:this,step:i}})}))].concat(e,t("div",{staticClass:"q-stepper__content q-panel-parent",directives:this.panelDirectives},this.__getPanelContent(t)))},__renderPanels(t){return t("div",{class:this.classes,on:{...this.qListeners}},te(this.__getContent(t),this,"navigation"))}}}),Zl=a["a"].extend({name:"QStepperNavigation",mixins:[Kt],render(t){return t("div",{staticClass:"q-stepper__nav",on:{...this.qListeners}},Zt(this,"default"))}}),Jl={computed:{marginalsScope(){return{pagination:this.computedPagination,pagesNumber:this.pagesNumber,isFirstPage:this.isFirstPage,isLastPage:this.isLastPage,firstPage:this.firstPage,prevPage:this.prevPage,nextPage:this.nextPage,lastPage:this.lastPage,inFullscreen:this.inFullscreen,toggleFullscreen:this.toggleFullscreen}}},methods:{__getTopDiv(t){const e=this.$scopedSlots.top,i=this.$scopedSlots["top-left"],n=this.$scopedSlots["top-right"],s=this.$scopedSlots["top-selection"],r=!0===this.hasSelectionMode&&void 0!==s&&this.rowsSelectedNumber>0,o="q-table__top relative-position row items-center";if(void 0!==e)return t("div",{staticClass:o},[e(this.marginalsScope)]);let a;return!0===r?a=s(this.marginalsScope).slice():(a=[],void 0!==i?a.push(t("div",{staticClass:"q-table-control"},[i(this.marginalsScope)])):this.title&&a.push(t("div",{staticClass:"q-table__control"},[t("div",{staticClass:"q-table__title",class:this.titleClass},this.title)]))),void 0!==n&&(a.push(t("div",{staticClass:"q-table__separator col"})),a.push(t("div",{staticClass:"q-table__control"},[n(this.marginalsScope)]))),0!==a.length?t("div",{staticClass:o},a):void 0}}},th=a["a"].extend({name:"QTh",mixins:[Kt],props:{props:Object,autoWidth:Boolean},render(t){const e={...this.qListeners};if(void 0===this.props)return t("th",{on:e,class:!0===this.autoWidth?"q-table--col-auto-width":null},Zt(this,"default"));let i,n;const s=this.$vnode.key;if(s){if(i=this.props.colsMap[s],void 0===i)return}else i=this.props.col;if(!0===i.sortable){const e="right"===i.align?"unshift":"push";n=Jt(this,"default",[]),n[e](t(ge,{props:{name:this.$q.iconSet.table.arrowUp},staticClass:i.__iconClass}))}else n=Zt(this,"default");const r=!0===i.sortable?{click:t=>{this.props.sort(i),this.$emit("click",t)}}:{};return t("th",{on:{...e,...r},style:i.headerStyle,class:i.__thClass+(!0===this.autoWidth?" q-table--col-auto-width":"")},n)}}),eh={computed:{headerSelectedValue(){return!0===this.someRowsSelected?null:this.allRowsSelected}},methods:{__getTHead(t){const e=this.__getTHeadTR(t);return!0===this.loading&&void 0===this.$scopedSlots.loading&&e.push(t("tr",{staticClass:"q-table__progress"},[t("th",{staticClass:"relative-position",attrs:{colspan:this.computedColspan}},this.__getProgress(t))])),t("thead",e)},__getTHeadTR(t){const e=this.$scopedSlots.header,i=this.$scopedSlots["header-cell"];if(void 0!==e)return e(this.__getHeaderScope({header:!0})).slice();const n=this.computedCols.map(e=>{const n=this.$scopedSlots["header-cell-"+e.name],s=void 0!==n?n:i,r=this.__getHeaderScope({col:e});return void 0!==s?s(r):t(th,{key:e.name,props:{props:r}},e.label)});if(!0===this.singleSelection&&!0!==this.grid)n.unshift(t("th",{staticClass:"q-table--col-auto-width"},[" "]));else if(!0===this.multipleSelection){const e=this.$scopedSlots["header-selection"],i=void 0!==e?e(this.__getHeaderScope({})):[t(ss,{props:{color:this.color,value:this.headerSelectedValue,dark:this.isDark,dense:this.dense},on:Pt(this,"inp",{input:this.__onMultipleSelectionSet})})];n.unshift(t("th",{staticClass:"q-table--col-auto-width"},i))}return[t("tr",{style:this.tableHeaderStyle,class:this.tableHeaderClass},n)]},__getHeaderScope(t){return Object.assign(t,{cols:this.computedCols,sort:this.sort,colsMap:this.computedColsMap,color:this.color,dark:this.isDark,dense:this.dense}),!0===this.multipleSelection&&(Es(t,"selected",()=>this.headerSelectedValue,this.__onMultipleSelectionSet),t.partialSelected=this.someRowsSelected,t.multipleSelect=!0),t},__onMultipleSelectionSet(t){!0===this.someRowsSelected&&(t=!1),this.__updateSelection(this.computedRows.map(this.getRowKey),this.computedRows,t)}}},ih={methods:{__getTBodyTR(t,e,i,n){const s=this.getRowKey(e),r=this.isRowSelected(s);if(void 0!==i)return i(this.__getBodyScope({key:s,row:e,pageIndex:n,__trClass:r?"selected":""}));const o=this.$scopedSlots["body-cell"],a=this.computedCols.map(i=>{const r=this.$scopedSlots["body-cell-"+i.name],a=void 0!==r?r:o;return void 0!==a?a(this.__getBodyCellScope({key:s,row:e,pageIndex:n,col:i})):t("td",{class:i.__tdClass(e),style:i.__tdStyle(e)},this.getCellValue(i,e))});if(!0===this.hasSelectionMode){const i=this.$scopedSlots["body-selection"],o=void 0!==i?i(this.__getBodySelectionScope({key:s,row:e,pageIndex:n})):[t(ss,{props:{value:r,color:this.color,dark:this.isDark,dense:this.dense},on:{input:(t,i)=>{this.__updateSelection([s],[e],t,i)}}})];a.unshift(t("td",{staticClass:"q-table--col-auto-width"},o))}const l={key:s,class:{selected:r},on:{}};return void 0!==this.qListeners["row-click"]&&(l.class["cursor-pointer"]=!0,l.on.click=t=>{this.$emit("row-click",t,e,n)}),void 0!==this.qListeners["row-dblclick"]&&(l.class["cursor-pointer"]=!0,l.on.dblclick=t=>{this.$emit("row-dblclick",t,e,n)}),void 0!==this.qListeners["row-contextmenu"]&&(l.class["cursor-pointer"]=!0,l.on.contextmenu=t=>{this.$emit("row-contextmenu",t,e,n)}),t("tr",l,a)},__getTBody(t){const e=this.$scopedSlots.body,i=this.$scopedSlots["top-row"],n=this.$scopedSlots["bottom-row"];let s=this.computedRows.map((i,n)=>this.__getTBodyTR(t,i,e,n));return void 0!==i&&(s=i({cols:this.computedCols}).concat(s)),void 0!==n&&(s=s.concat(n({cols:this.computedCols}))),t("tbody",s)},__getVirtualTBodyTR(t){const e=this.$scopedSlots.body;return i=>this.__getTBodyTR(t,i.item,e,i.index)},__getBodyScope(t){return this.__injectBodyCommonScope(t),t.cols=t.cols.map(e=>Es({...e},"value",()=>this.getCellValue(e,t.row))),t},__getBodyCellScope(t){return this.__injectBodyCommonScope(t),Es(t,"value",()=>this.getCellValue(t.col,t.row))},__getBodySelectionScope(t){return this.__injectBodyCommonScope(t),t},__injectBodyCommonScope(t){Object.assign(t,{cols:this.computedCols,colsMap:this.computedColsMap,sort:this.sort,rowIndex:this.firstRowIndex+t.pageIndex,color:this.color,dark:this.isDark,dense:this.dense}),!0===this.hasSelectionMode&&Es(t,"selected",()=>this.isRowSelected(t.key),(e,i)=>{this.__updateSelection([t.key],[t.row],e,i)}),Es(t,"expand",()=>this.isRowExpanded(t.key),e=>{this.__updateExpanded(t.key,e)})},getCellValue(t,e){const i="function"===typeof t.field?t.field(e):e[t.field];return void 0!==t.format?t.format(i,e):i}}};const nh="q-table__bottom row items-center";var sh={props:{hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean},computed:{navIcon(){const t=[this.iconFirstPage||this.$q.iconSet.table.firstPage,this.iconPrevPage||this.$q.iconSet.table.prevPage,this.iconNextPage||this.$q.iconSet.table.nextPage,this.iconLastPage||this.$q.iconSet.table.lastPage];return!0===this.$q.lang.rtl?t.reverse():t}},methods:{__getBottomDiv(t){if(!0===this.hideBottom)return;if(!0===this.nothingToDisplay){if(!0===this.hideNoData)return;const e=!0===this.loading?this.loadingLabel||this.$q.lang.table.loading:this.filter?this.noResultsLabel||this.$q.lang.table.noResults:this.noDataLabel||this.$q.lang.table.noData,i=this.$scopedSlots["no-data"],n=void 0!==i?[i({message:e,icon:this.$q.iconSet.table.warning,filter:this.filter})]:[t(ge,{staticClass:"q-table__bottom-nodata-icon",props:{name:this.$q.iconSet.table.warning}}),e];return t("div",{staticClass:nh+" q-table__bottom--nodata"},n)}const e=this.$scopedSlots.bottom;if(void 0!==e)return t("div",{staticClass:nh},[e(this.marginalsScope)]);const i=!0!==this.hideSelectedBanner&&!0===this.hasSelectionMode&&this.rowsSelectedNumber>0?[t("div",{staticClass:"q-table__control"},[t("div",[(this.selectedRowsLabel||this.$q.lang.table.selectedRecords)(this.rowsSelectedNumber)])])]:[];return!0!==this.hidePagination?t("div",{staticClass:nh+" justify-end"},this.__getPaginationDiv(t,i)):i.length>0?t("div",{staticClass:nh},i):void 0},__getPaginationDiv(t,e){let i;const{rowsPerPage:n}=this.computedPagination,s=this.paginationLabel||this.$q.lang.table.pagination,r=this.$scopedSlots.pagination,o=this.rowsPerPageOptions.length>1;if(e.push(t("div",{staticClass:"q-table__separator col"})),!0===o&&e.push(t("div",{staticClass:"q-table__control"},[t("span",{staticClass:"q-table__bottom-item"},[this.rowsPerPageLabel||this.$q.lang.table.recordsPerPage]),t(vl,{staticClass:"q-table__select inline q-table__bottom-item",props:{color:this.color,value:n,options:this.computedRowsPerPageOptions,displayValue:0===n?this.$q.lang.table.allRows:n,dark:this.isDark,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0},on:Pt(this,"pgSize",{input:t=>{this.setPagination({page:1,rowsPerPage:t.value})}})})])),void 0!==r)i=r(this.marginalsScope);else if(i=[t("span",0!==n?{staticClass:"q-table__bottom-item"}:{},[n?s(this.firstRowIndex+1,Math.min(this.lastRowIndex,this.computedRowsNumber),this.computedRowsNumber):s(1,this.filteredSortedRowsNumber,this.computedRowsNumber)])],0!==n&&this.pagesNumber>1){const e={color:this.color,round:!0,dense:!0,flat:!0};!0===this.dense&&(e.size="sm"),this.pagesNumber>2&&i.push(t(li,{key:"pgFirst",props:{...e,icon:this.navIcon[0],disable:this.isFirstPage},on:Pt(this,"pgFirst",{click:this.firstPage})})),i.push(t(li,{key:"pgPrev",props:{...e,icon:this.navIcon[1],disable:this.isFirstPage},on:Pt(this,"pgPrev",{click:this.prevPage})}),t(li,{key:"pgNext",props:{...e,icon:this.navIcon[2],disable:this.isLastPage},on:Pt(this,"pgNext",{click:this.nextPage})})),this.pagesNumber>2&&i.push(t(li,{key:"pgLast",props:{...e,icon:this.navIcon[3],disable:this.isLastPage},on:Pt(this,"pgLast",{click:this.lastPage})}))}return e.push(t("div",{staticClass:"q-table__control"},i)),e}}},rh={methods:{__getGridHeader(t){const e=!0===this.gridHeader?[t("table",{staticClass:"q-table"},[this.__getTHead(t)])]:!0===this.loading&&void 0===this.$scopedSlots.loading?this.__getProgress(t):void 0;return t("div",{staticClass:"q-table__middle"},e)},__getGridBody(t){const e=void 0!==this.$scopedSlots.item?this.$scopedSlots.item:e=>{const i=e.cols.map(e=>t("div",{staticClass:"q-table__grid-item-row"},[t("div",{staticClass:"q-table__grid-item-title"},[e.label]),t("div",{staticClass:"q-table__grid-item-value"},[e.value])]));if(!0===this.hasSelectionMode){const n=this.$scopedSlots["body-selection"],s=void 0!==n?n(e):[t(ss,{props:{value:e.selected,color:this.color,dark:this.isDark,dense:this.dense},on:{input:(t,i)=>{this.__updateSelection([e.key],[e.row],t,i)}}})];i.unshift(t("div",{staticClass:"q-table__grid-item-row"},s),t(Eo,{props:{dark:this.isDark}}))}const n={staticClass:"q-table__grid-item-card"+this.cardDefaultClass,class:this.cardClass,style:this.cardStyle,on:{}};return void 0===this.qListeners["row-click"]&&void 0===this.qListeners["row-dblclick"]||(n.staticClass+=" cursor-pointer"),void 0!==this.qListeners["row-click"]&&(n.on.click=t=>{this.$emit("row-click",t,e.row,e.pageIndex)}),void 0!==this.qListeners["row-dblclick"]&&(n.on.dblclick=t=>{this.$emit("row-dblclick",t,e.row,e.pageIndex)}),t("div",{staticClass:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3",class:!0===e.selected?"q-table__grid-item--selected":""},[t("div",n,i)])};return t("div",{staticClass:"q-table__grid-content row",class:this.cardContainerClass,style:this.cardContainerStyle},this.computedRows.map((t,i)=>e(this.__getBodyScope({key:this.getRowKey(t),row:t,pageIndex:i}))))}}},oh=function(t,e,i){return t("div",{...e,staticClass:"q-table__middle"+(void 0!==e.staticClass?" "+e.staticClass:"")},[t("table",{staticClass:"q-table"},i)])};const ah={list:io,table:Ta};var lh=a["a"].extend({name:"QVirtualScroll",mixins:[Nt,Kt,fl],props:{type:{type:String,default:"list",validator:t=>["list","table","__qtable"].includes(t)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},computed:{virtualScrollLength(){return this.itemsSize>=0&&void 0!==this.itemsFn?parseInt(this.itemsSize,10):Array.isArray(this.items)?this.items.length:0},virtualScrollScope(){if(0===this.virtualScrollLength)return[];const t=(t,e)=>({index:this.virtualScrollSliceRange.from+e,item:t});return void 0===this.itemsFn?this.items.slice(this.virtualScrollSliceRange.from,this.virtualScrollSliceRange.to).map(t):this.itemsFn(this.virtualScrollSliceRange.from,this.virtualScrollSliceRange.to-this.virtualScrollSliceRange.from).map(t)},classes(){return"q-virtual-scroll q-virtual-scroll"+(!0===this.virtualScrollHorizontal?"--horizontal":"--vertical")+(void 0!==this.scrollTarget?"":" scroll")},attrs(){return void 0!==this.scrollTarget?void 0:{tabindex:0}}},watch:{virtualScrollLength(){this.__resetVirtualScroll()},scrollTarget(){this.__unconfigureScrollTarget(),this.__configureScrollTarget()}},methods:{__getVirtualScrollEl(){return this.$el},__getVirtualScrollTarget(){return this.__scrollTarget},__configureScrollTarget(){this.__scrollTarget=Fi(this.$el,this.scrollTarget),this.__scrollTarget.addEventListener("scroll",this.__onVirtualScrollEvt,w.passive)},__unconfigureScrollTarget(){void 0!==this.__scrollTarget&&(this.__scrollTarget.removeEventListener("scroll",this.__onVirtualScrollEvt,w.passive),this.__scrollTarget=void 0)}},beforeMount(){this.__resetVirtualScroll()},mounted(){this.__configureScrollTarget()},activated(){this.__configureScrollTarget()},deactivated(){this.__unconfigureScrollTarget()},beforeDestroy(){this.__unconfigureScrollTarget()},render(t){if(void 0===this.$scopedSlots.default)return void console.error("QVirtualScroll: default scoped slot is required for rendering",this);let e=this.__padVirtualScroll(t,"list"===this.type?"div":"tbody",this.virtualScrollScope.map(this.$scopedSlots.default));return void 0!==this.$scopedSlots.before&&(e=this.$scopedSlots.before().concat(e)),e=te(e,this,"after"),"__qtable"===this.type?oh(t,{staticClass:this.classes},e):t(ah[this.type],{class:this.classes,attrs:this.attrs,props:this.qAttrs,on:{...this.qListeners}},e)}});function hh(t,e){return new Date(t)-new Date(e)}var ch={props:{sortMethod:{type:Function,default(t,e,i){const n=this.colList.find(t=>t.name===e);if(void 0===n||void 0===n.field)return t;const s=!0===i?-1:1,r="function"===typeof n.field?t=>n.field(t):t=>t[n.field];return t.sort((t,e)=>{let i=r(t),o=r(e);return null===i||void 0===i?-1*s:null===o||void 0===o?1*s:void 0!==n.sort?n.sort(i,o,t,e)*s:!0===Qn(i)&&!0===Qn(o)?(i-o)*s:!0===Yn(i)&&!0===Yn(o)?hh(i,o)*s:"boolean"===typeof i&&"boolean"===typeof o?(i-o)*s:([i,o]=[i,o].map(t=>(t+"").toLocaleString().toLowerCase()),i<o?-1*s:i===o?0:s)})}},columnSortOrder:{type:String,validator:t=>"ad"===t||"da"===t,default:"ad"}},computed:{columnToSort(){const{sortBy:t}=this.computedPagination;if(t)return this.colList.find(e=>e.name===t)||null}},methods:{sort(t){let e=this.columnSortOrder;if(!0===jn(t))t.sortOrder&&(e=t.sortOrder),t=t.name;else{const i=this.colList.find(e=>e.name===t);void 0!==i&&i.sortOrder&&(e=i.sortOrder)}let{sortBy:i,descending:n}=this.computedPagination;i!==t?(i=t,n="da"===e):!0===this.binaryStateSort?n=!n:!0===n?"ad"===e?i=null:n=!1:"ad"===e?n=!0:i=null,this.setPagination({sortBy:i,descending:n,page:1})}}},uh={props:{filter:[String,Object],filterMethod:{type:Function,default(t,e,i=this.computedCols,n=this.getCellValue){const s=e?e.toLowerCase():"";return t.filter(t=>i.some(e=>{const i=n(e,t)+"",r="undefined"===i||"null"===i?"":i.toLowerCase();return-1!==r.indexOf(s)}))}}},watch:{filter:{handler(){this.$nextTick(()=>{this.setPagination({page:1},!0)})},deep:!0}}};function dh(t,e){for(const i in e)if(e[i]!==t[i])return!1;return!0}function ph(t){return t.page<1&&(t.page=1),void 0!==t.rowsPerPage&&t.rowsPerPage<1&&(t.rowsPerPage=0),t}var fh={props:{pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]}},computed:{computedPagination(){const t=void 0!==this.qListeners["update:pagination"]?{...this.innerPagination,...this.pagination}:this.innerPagination;return ph(t)},firstRowIndex(){const{page:t,rowsPerPage:e}=this.computedPagination;return(t-1)*e},lastRowIndex(){const{page:t,rowsPerPage:e}=this.computedPagination;return t*e},isFirstPage(){return 1===this.computedPagination.page},pagesNumber(){return 0===this.computedPagination.rowsPerPage?1:Math.max(1,Math.ceil(this.computedRowsNumber/this.computedPagination.rowsPerPage))},isLastPage(){return 0===this.lastRowIndex||this.computedPagination.page>=this.pagesNumber},computedRowsPerPageOptions(){const t=this.rowsPerPageOptions.includes(this.innerPagination.rowsPerPage)?this.rowsPerPageOptions:[this.innerPagination.rowsPerPage].concat(this.rowsPerPageOptions);return t.map(t=>({label:0===t?this.$q.lang.table.allRows:""+t,value:t}))}},watch:{pagesNumber(t,e){if(t===e)return;const i=this.computedPagination.page;t&&!i?this.setPagination({page:1}):t<i&&this.setPagination({page:t})}},methods:{__sendServerRequest(t){this.requestServerInteraction({pagination:t,filter:this.filter})},setPagination(t,e){const i=ph({...this.computedPagination,...t});dh(this.computedPagination,i)?!0===this.isServerSide&&!0===e&&this.__sendServerRequest(i):!0!==this.isServerSide?void 0!==this.pagination&&void 0!==this.qListeners["update:pagination"]?this.$emit("update:pagination",i):this.innerPagination=i:this.__sendServerRequest(i)},firstPage(){this.setPagination({page:1})},prevPage(){const{page:t}=this.computedPagination;t>1&&this.setPagination({page:t-1})},nextPage(){const{page:t,rowsPerPage:e}=this.computedPagination;this.lastRowIndex>0&&t*e<this.computedRowsNumber&&this.setPagination({page:t+1})},lastPage(){this.setPagination({page:this.pagesNumber})}},created(){void 0!==this.qListeners["update:pagination"]&&this.$emit("update:pagination",{...this.computedPagination})}},mh={props:{selection:{type:String,default:"none",validator:t=>["single","multiple","none"].includes(t)},selected:{type:Array,default:()=>[]}},computed:{selectedKeys(){const t={};return this.selected.map(this.getRowKey).forEach(e=>{t[e]=!0}),t},hasSelectionMode(){return"none"!==this.selection},singleSelection(){return"single"===this.selection},multipleSelection(){return"multiple"===this.selection},allRowsSelected(){return this.computedRows.length>0&&this.computedRows.every(t=>!0===this.selectedKeys[this.getRowKey(t)])},someRowsSelected(){return!0!==this.allRowsSelected&&this.computedRows.some(t=>!0===this.selectedKeys[this.getRowKey(t)])},rowsSelectedNumber(){return this.selected.length}},methods:{isRowSelected(t){return!0===this.selectedKeys[t]},clearSelection(){this.$emit("update:selected",[])},__updateSelection(t,e,i,n){this.$emit("selection",{rows:e,added:i,keys:t,evt:n});const s=!0===this.singleSelection?!0===i?e:[]:!0===i?this.selected.concat(e):this.selected.filter(e=>!1===t.includes(this.getRowKey(e)));this.$emit("update:selected",s)}}};function gh(t){return Array.isArray(t)?t.slice():[]}var vh={props:{expanded:Array},data(){return{innerExpanded:gh(this.expanded)}},watch:{expanded(t){this.innerExpanded=gh(t)}},methods:{isRowExpanded(t){return this.innerExpanded.includes(t)},setExpanded(t){void 0!==this.expanded?this.$emit("update:expanded",t):this.innerExpanded=t},__updateExpanded(t,e){const i=this.innerExpanded.slice(),n=i.indexOf(t);!0===e?-1===n&&(i.push(t),this.setExpanded(i)):-1!==n&&(i.splice(n,1),this.setExpanded(i))}}},_h={props:{visibleColumns:Array},computed:{colList(){if(void 0!==this.columns)return this.columns;const t=this.data[0];return void 0!==t?Object.keys(t).map(e=>({name:e,label:e.toUpperCase(),field:e,align:Qn(t[e])?"right":"left",sortable:!0})):[]},computedCols(){const{sortBy:t,descending:e}=this.computedPagination,i=void 0!==this.visibleColumns?this.colList.filter(t=>!0===t.required||!0===this.visibleColumns.includes(t.name)):this.colList;return i.map(i=>{const n=i.align||"right",s="text-"+n;return{...i,align:n,__iconClass:"q-table__sort-icon q-table__sort-icon--"+n,__thClass:s+(void 0!==i.headerClasses?" "+i.headerClasses:"")+(!0===i.sortable?" sortable":"")+(i.name===t?" sorted "+(!0===e?"sort-desc":""):""),__tdStyle:void 0!==i.style?"function"!==typeof i.style?()=>i.style:i.style:()=>null,__tdClass:void 0!==i.classes?"function"!==typeof i.classes?()=>s+" "+i.classes:t=>s+" "+i.classes(t):()=>s}})},computedColsMap(){const t={};return this.computedCols.forEach(e=>{t[e.name]=e}),t},computedColspan(){return void 0!==this.tableColspan?this.tableColspan:this.computedCols.length+(!0===this.hasSelectionMode?1:0)}}};const yh={};pl.forEach(t=>{yh[t]={}});var bh=a["a"].extend({name:"QTable",mixins:[ye,Kt,$n,Jl,eh,ih,sh,rh,ch,uh,fh,mh,vh,_h],props:{data:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,binaryStateSort:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:t=>["horizontal","vertical","cell","none"].includes(t)},wrapCells:Boolean,virtualScroll:Boolean,...yh,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object]},data(){return{innerPagination:Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:this.rowsPerPageOptions.length>0?this.rowsPerPageOptions[0]:5},this.pagination)}},watch:{needsReset(){!0===this.hasVirtScroll&&void 0!==this.$refs.virtScroll&&this.$refs.virtScroll.reset()}},computed:{getRowKey(){return"function"===typeof this.rowKey?this.rowKey:t=>t[this.rowKey]},hasVirtScroll(){return!0!==this.grid&&!0===this.virtualScroll},needsReset(){return["tableStyle","tableClass","tableHeaderStyle","tableHeaderClass","__containerClass"].map(t=>this[t]).join(";")},filteredSortedRows(){let t=this.data;if(!0===this.isServerSide||0===t.length)return t;const{sortBy:e,descending:i}=this.computedPagination;return this.filter&&(t=this.filterMethod(t,this.filter,this.computedCols,this.getCellValue)),void 0!==this.columnToSort&&(t=this.sortMethod(this.data===t?t.slice():t,e,i)),t},filteredSortedRowsNumber(){return this.filteredSortedRows.length},computedRows(){let t=this.filteredSortedRows;if(!0===this.isServerSide)return t;const{rowsPerPage:e}=this.computedPagination;return 0!==e&&(0===this.firstRowIndex&&this.data!==t?t.length>this.lastRowIndex&&(t=t.slice(0,this.lastRowIndex)):t=t.slice(this.firstRowIndex,this.lastRowIndex)),t},computedRowsNumber(){return!0===this.isServerSide?this.computedPagination.rowsNumber||0:this.filteredSortedRowsNumber},nothingToDisplay(){return 0===this.computedRows.length},isServerSide(){return void 0!==this.computedPagination.rowsNumber},cardDefaultClass(){return" q-table__card"+(!0===this.isDark?" q-table__card--dark q-dark":"")+(!0===this.square?" q-table--square":"")+(!0===this.flat?" q-table--flat":"")+(!0===this.bordered?" q-table--bordered":"")},__containerClass(){return`q-table__container q-table--${this.separator}-separator column no-wrap`+(!0===this.grid?" q-table--grid":this.cardDefaultClass)+(!0===this.isDark?" q-table--dark":"")+(!0===this.dense?" q-table--dense":"")+(!1===this.wrapCells?" q-table--no-wrap":"")+(!0===this.inFullscreen?" fullscreen scroll":"")},containerClass(){return this.__containerClass+(!0===this.loading?" q-table--loading":"")},virtProps(){const t={};return pl.forEach(e=>{t[e]=this[e]}),void 0===t.virtualScrollItemSize&&(t.virtualScrollItemSize=!0===this.dense?28:48),t}},render(t){const e=[this.__getTopDiv(t)],i={staticClass:this.containerClass};return!0===this.grid?e.push(this.__getGridHeader(t)):Object.assign(i,{class:this.cardClass,style:this.cardStyle}),e.push(this.__getBody(t),this.__getBottomDiv(t)),!0===this.loading&&void 0!==this.$scopedSlots.loading&&e.push(this.$scopedSlots.loading()),t("div",i,e)},methods:{requestServerInteraction(t={}){this.$nextTick(()=>{this.$emit("request",{pagination:t.pagination||this.computedPagination,filter:t.filter||this.filter,getCellValue:this.getCellValue})})},resetVirtualScroll(){!0===this.hasVirtScroll&&this.$refs.virtScroll.reset()},__getBody(t){if(!0===this.grid)return this.__getGridBody(t);const e=!0!==this.hideHeader?this.__getTHead(t):null;if(!0===this.hasVirtScroll){const i=this.$scopedSlots["top-row"],n=this.$scopedSlots["bottom-row"],s={default:this.__getVirtualTBodyTR(t)};if(void 0!==i){const n=t("tbody",i({cols:this.computedCols}));s.before=null===e?()=>[n]:()=>[e].concat(n)}else null!==e&&(s.before=()=>e);return void 0!==n&&(s.after=()=>t("tbody",n({cols:this.computedCols}))),t(lh,{ref:"virtScroll",props:{...this.virtProps,items:this.computedRows,type:"__qtable",tableColspan:this.computedColspan},on:Pt(this,"vs",{"virtual-scroll":this.__onVScroll}),class:this.tableClass,style:this.tableStyle,scopedSlots:s})}return oh(t,{staticClass:"scroll",class:this.tableClass,style:this.tableStyle},[e,this.__getTBody(t)])},scrollTo(t,e){if(void 0!==this.$refs.virtScroll)return void this.$refs.virtScroll.scrollTo(t,e);t=parseInt(t,10);const i=this.$el.querySelector(`tbody tr:nth-of-type(${t+1})`);if(null!==i){const e=this.$el.querySelector(".q-table__middle.scroll"),n=i.offsetTop-this.virtualScrollStickySizeStart,s=n<e.scrollTop?"decrease":"increase";e.scrollTop=n,this.$emit("virtual-scroll",{index:t,from:0,to:this.pagination.rowsPerPage-1,direction:s})}},__onVScroll(t){this.$emit("virtual-scroll",t)},__getProgress(t){return[t(Wa,{staticClass:"q-table__linear-progress",props:{color:this.color,dark:this.isDark,indeterminate:!0,trackColor:"transparent"}})]}}}),xh=a["a"].extend({name:"QTr",mixins:[Kt],props:{props:Object,noHover:Boolean},computed:{classes(){return"q-tr"+(void 0===this.props||!0===this.props.header?"":" "+this.props.__trClass)+(!0===this.noHover?" q-tr--no-hover":"")}},render(t){return t("tr",{on:{...this.qListeners},class:this.classes},Zt(this,"default"))}}),Sh=a["a"].extend({name:"QTd",mixins:[Kt],props:{props:Object,autoWidth:Boolean,noHover:Boolean},computed:{classes(){return"q-td"+(!0===this.autoWidth?" q-table--col-auto-width":"")+(!0===this.noHover?" q-td--no-hover":"")+" "}},render(t){const e=this.qListeners;if(void 0===this.props)return t("td",{on:e,class:this.classes},Zt(this,"default"));const i=this.$vnode.key,n=void 0!==this.props.colsMap&&i?this.props.colsMap[i]:this.props.col;if(void 0===n)return;const s=this.props.row;return t("td",{on:e,style:n.__tdStyle(s),class:this.classes+n.__tdClass(s)},Zt(this,"default"))}}),wh=a["a"].extend({name:"QRouteTab",mixins:[Ds,De],watch:{routeModel(){this.$tabs.__verifyRouteModel()}},computed:{routeModel(){return`${this.name} | ${this.exact} | ${(this.resolvedLink||{}).href}`},hasRouterLinkProps(){return void 0!==this.$router&&!0!==this.hasHrefLink&&void 0!==this.to&&null!==this.to&&""!==this.to}},render(t){return this.__renderTab(t,this.linkTag)}}),Ch=a["a"].extend({name:"QTime",mixins:[nr],directives:{TouchPan:bs},props:{mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},data(){const t=fr(this.value,this.__getMask(),this.__getLocale(),this.calendar,this.__getDefaultDateModel());let e="Hour";return null!==t.hour&&(null===t.minute?e="Minute":!0===this.withSeconds&&null===t.second&&(e="Second")),{view:e,isAM:null===t.hour||t.hour<12,innerModel:t}},watch:{value(t){const e=fr(t,this.computedMask,this.computedLocale,this.calendar,this.defaultDateModel);e.dateHash===this.innerModel.dateHash&&e.timeHash===this.innerModel.timeHash||(this.innerModel=e,null===e.hour?this.view="Hour":this.isAM=e.hour<12)},computedMask(){this.$nextTick(()=>{this.__updateValue()})},computedLocale(){this.$nextTick(()=>{this.__updateValue()})}},computed:{classes(){return"q-time q-time--"+(!0===this.landscape?"landscape":"portrait")+(!0===this.isDark?" q-time--dark q-dark":"")+(!0===this.disable?" disabled":!0===this.readonly?" q-time--readonly":"")+(!0===this.bordered?" q-time--bordered":"")+(!0===this.square?" q-time--square no-border-radius":"")+(!0===this.flat?" q-time--flat no-shadow":"")},stringModel(){const t=this.innerModel;return{hour:null===t.hour?"--":!0===this.computedFormat24h?At(t.hour):String(!0===this.isAM?0===t.hour?12:t.hour:t.hour>12?t.hour-12:t.hour),minute:null===t.minute?"--":At(t.minute),second:null===t.second?"--":At(t.second)}},defaultDateModel(){return this.__getDefaultDateModel()},computedFormat24h(){return null!==this.format24h?this.format24h:this.$q.lang.date.format24h},pointerStyle(){const t="Hour"===this.view,e=!0===t?12:60,i=this.innerModel[this.view.toLowerCase()],n=Math.round(i*(360/e))-180;let s=`rotate(${n}deg) translateX(-50%)`;return!0===t&&!0===this.computedFormat24h&&this.innerModel.hour>=12&&(s+=" scale(.7)"),{transform:s}},minLink(){return null!==this.innerModel.hour},secLink(){return!0===this.minLink&&null!==this.innerModel.minute},hourInSelection(){return void 0!==this.hourOptions?t=>this.hourOptions.includes(t):void 0!==this.options?t=>this.options(t,null,null):void 0},minuteInSelection(){return void 0!==this.minuteOptions?t=>this.minuteOptions.includes(t):void 0!==this.options?t=>this.options(this.innerModel.hour,t,null):void 0},secondInSelection(){return void 0!==this.secondOptions?t=>this.secondOptions.includes(t):void 0!==this.options?t=>this.options(this.innerModel.hour,this.innerModel.minute,t):void 0},validHours(){if(void 0!==this.hourInSelection){const t=this.__getValidValues(0,11,this.hourInSelection),e=this.__getValidValues(12,11,this.hourInSelection);return{am:t,pm:e,values:t.values.concat(e.values)}}},validMinutes(){if(void 0!==this.minuteInSelection)return this.__getValidValues(0,59,this.minuteInSelection)},validSeconds(){if(void 0!==this.secondInSelection)return this.__getValidValues(0,59,this.secondInSelection)},viewValidOptions(){switch(this.view){case"Hour":return this.validHours;case"Minute":return this.validMinutes;case"Second":return this.validSeconds}},positions(){let t,e,i=0,n=1;const s=void 0!==this.viewValidOptions?this.viewValidOptions.values:void 0;"Hour"===this.view?!0===this.computedFormat24h?(t=0,e=23):(t=0,e=11,!1===this.isAM&&(i=12)):(t=0,e=55,n=5);const r=[];for(let o=t,a=t;o<=e;o+=n,a++){const t=o+i,e=void 0!==s&&!1===s.includes(t),n="Hour"===this.view&&0===o?!0===this.computedFormat24h?"00":"12":o;r.push({val:t,index:a,disable:e,label:n})}return r}},methods:{setNow(){const t={...this.__getCurrentDate(),...this.__getCurrentTime()};this.__updateValue(t),Object.assign(this.innerModel,t),this.view="Hour"},__getValidValues(t,e,i){const n=Array.apply(null,{length:e+1}).map((e,n)=>{const s=n+t;return{index:s,val:!0===i(s)}}).filter(t=>!0===t.val).map(t=>t.index);return{min:n[0],max:n[n.length-1],values:n,threshold:e+1}},__getWheelDist(t,e,i){const n=Math.abs(t-e);return Math.min(n,i-n)},__getNormalizedClockValue(t,{min:e,max:i,values:n,threshold:s}){if(t===e)return e;if(t<e||t>i)return this.__getWheelDist(t,e,s)<=this.__getWheelDist(t,i,s)?e:i;const r=n.findIndex(e=>t<=e),o=n[r-1],a=n[r];return t-o<=a-t?o:a},__getMask(){return"persian"!==this.calendar&&null!==this.mask?this.mask:"HH:mm"+(!0===this.withSeconds?":ss":"")},__getDefaultDateModel(){if("string"!==typeof this.defaultDate){const t=this.__getCurrentDate(!0);return t.dateHash=this.__getDayHash(t),t}return fr(this.defaultDate,"YYYY/MM/DD",void 0,this.calendar)},__click(t){!0!==this.__shouldAbortInteraction()&&(!0!==this.$q.platform.is.desktop&&this.__updateClock(t,this.__getClockRect()),this.__goToNextView())},__activate(t){!0!==this.__shouldAbortInteraction()&&this.__updateClock(t,this.__getClockRect())},__shouldAbortInteraction(){return!0===this._isBeingDestroyed||!0===this._isDestroyed||void 0!==this.viewValidOptions&&(0===this.viewValidOptions.values.length||"Hour"===this.view&&!0!==this.computedFormat24h&&0===this.validHours[!0===this.isAM?"am":"pm"].values.length)},__getClockRect(){const t=this.$refs.clock,{top:e,left:i,width:n}=t.getBoundingClientRect(),s=n/2;return{top:e+s,left:i+s,dist:.7*s}},__goToNextView(){"Hour"===this.view?this.view="Minute":this.withSeconds&&"Minute"===this.view&&(this.view="Second")},__drag(t){if(!0!==this.__shouldAbortInteraction()){if(!0===t.isFirst)return this.draggingClockRect=this.__getClockRect(),void(this.dragCache=this.__updateClock(t.evt,this.draggingClockRect));this.dragCache=this.__updateClock(t.evt,this.draggingClockRect,this.dragCache),!0===t.isFinal&&(this.draggingClockRect=!1,this.dragCache=null,this.__goToNextView())}},__updateClock(t,e,i){const n=k(t),s=Math.abs(n.top-e.top),r=Math.sqrt(Math.pow(Math.abs(n.top-e.top),2)+Math.pow(Math.abs(n.left-e.left),2));let o,a=Math.asin(s/r)*(180/Math.PI);if(a=n.top<e.top?e.left<n.left?90-a:270+a:e.left<n.left?a+90:270-a,"Hour"===this.view){if(o=a/30,void 0!==this.validHours){const t=!0!==this.computedFormat24h?!0===this.isAM:this.validHours.am.values.length>0&&this.validHours.pm.values.length>0?r>=e.dist:this.validHours.am.values.length>0;o=this.__getNormalizedClockValue(o+(!0===t?0:12),this.validHours[!0===t?"am":"pm"])}else o=Math.round(o),!0===this.computedFormat24h?r<e.dist?o<12&&(o+=12):12===o&&(o=0):!0===this.isAM&&12===o?o=0:!1===this.isAM&&12!==o&&(o+=12);!0===this.computedFormat24h&&(this.isAM=o<12)}else o=Math.round(a/6)%60,"Minute"===this.view&&void 0!==this.validMinutes?o=this.__getNormalizedClockValue(o,this.validMinutes):"Second"===this.view&&void 0!==this.validSeconds&&(o=this.__getNormalizedClockValue(o,this.validSeconds));return i!==o&&this["__set"+this.view](o),o},__onKeyupHour(t){if(13===t.keyCode)this.view="Hour";else if([37,39].includes(t.keyCode)){const e=37===t.keyCode?-1:1;if(void 0!==this.validHours){const t=!0===this.computedFormat24h?this.validHours.values:this.validHours[!0===this.isAM?"am":"pm"].values;if(0===t.length)return;if(null===this.innerModel.hour)this.__setHour(t[0]);else{const i=(t.length+t.indexOf(this.innerModel.hour)+e)%t.length;this.__setHour(t[i])}}else{const t=!0===this.computedFormat24h?24:12,i=!0!==this.computedFormat24h&&!1===this.isAM?12:0,n=null===this.innerModel.hour?-e:this.innerModel.hour;this.__setHour(i+(24+n+e)%t)}}},__onKeyupMinute(t){if(13===t.keyCode)this.view="Minute";else if([37,39].includes(t.keyCode)){const e=37===t.keyCode?-1:1;if(void 0!==this.validMinutes){const t=this.validMinutes.values;if(0===t.length)return;if(null===this.innerModel.minute)this.__setMinute(t[0]);else{const i=(t.length+t.indexOf(this.innerModel.minute)+e)%t.length;this.__setMinute(t[i])}}else{const t=null===this.innerModel.minute?-e:this.innerModel.minute;this.__setMinute((60+t+e)%60)}}},__onKeyupSecond(t){if(13===t.keyCode)this.view="Second";else if([37,39].includes(t.keyCode)){const e=37===t.keyCode?-1:1;if(void 0!==this.validSeconds){const t=this.validSeconds.values;if(0===t.length)return;if(null===this.innerModel.seconds)this.__setSecond(t[0]);else{const i=(t.length+t.indexOf(this.innerModel.second)+e)%t.length;this.__setSecond(t[i])}}else{const t=null===this.innerModel.second?-e:this.innerModel.second;this.__setSecond((60+t+e)%60)}}},__getHeader(t){const e=[t("div",{staticClass:"q-time__link",class:"Hour"===this.view?"q-time__link--active":"cursor-pointer",attrs:{tabindex:this.computedTabindex},on:Pt(this,"vH",{click:()=>{this.view="Hour"},keyup:this.__onKeyupHour})},[this.stringModel.hour]),t("div",[":"]),t("div",!0===this.minLink?{staticClass:"q-time__link",class:"Minute"===this.view?"q-time__link--active":"cursor-pointer",attrs:{tabindex:this.computedTabindex},on:Pt(this,"vM",{click:()=>{this.view="Minute"},keyup:this.__onKeyupMinute})}:{staticClass:"q-time__link"},[this.stringModel.minute])];return!0===this.withSeconds&&e.push(t("div",[":"]),t("div",!0===this.secLink?{staticClass:"q-time__link",class:"Second"===this.view?"q-time__link--active":"cursor-pointer",attrs:{tabindex:this.computedTabindex},on:Pt(this,"vS",{click:()=>{this.view="Second"},keyup:this.__onKeyupSecond})}:{staticClass:"q-time__link"},[this.stringModel.second])),t("div",{staticClass:"q-time__header flex flex-center no-wrap",class:this.headerClass},[t("div",{staticClass:"q-time__header-label row items-center no-wrap",attrs:{dir:"ltr"}},e),!1===this.computedFormat24h?t("div",{staticClass:"q-time__header-ampm column items-between no-wrap"},[t("div",{staticClass:"q-time__link",class:!0===this.isAM?"q-time__link--active":"cursor-pointer",attrs:{tabindex:this.computedTabindex},on:Pt(this,"AM",{click:this.__setAm,keyup:t=>{13===t.keyCode&&this.__setAm()}})},["AM"]),t("div",{staticClass:"q-time__link",class:!0!==this.isAM?"q-time__link--active":"cursor-pointer",attrs:{tabindex:this.computedTabindex},on:Pt(this,"PM",{click:this.__setPm,keyup:t=>{13===t.keyCode&&this.__setPm()}})},["PM"])]):null])},__getClock(t){const e=this.view.toLowerCase(),i=this.innerModel[e];return t("div",{staticClass:"q-time__content col relative-position"},[t("transition",{props:{name:"q-transition--scale"}},[t("div",{key:"clock"+this.view,staticClass:"q-time__container-parent absolute-full"},[t("div",{ref:"clock",staticClass:"q-time__container-child fit overflow-hidden"},[t("div",{staticClass:"q-time__clock cursor-pointer non-selectable",on:Pt(this,"click",{click:this.__click,mousedown:this.__activate}),directives:Pt(this,"touch",[{name:"touch-pan",value:this.__drag,modifiers:{stop:!0,prevent:!0,mouse:!0}}])},[t("div",{staticClass:"q-time__clock-circle fit"},[t("div",{staticClass:"q-time__clock-pointer",style:this.pointerStyle,class:null===this.innerModel[e]?"hidden":void 0!==this.color?"text-"+this.color:""}),this.positions.map(e=>t("div",{staticClass:"q-time__clock-position row flex-center q-time__clock-pos-"+e.index,class:e.val===i?this.headerClass.concat(" q-time__clock-position--active"):!0===e.disable?"q-time__clock-position--disable":null},[t("span",[e.label])]))])])])])]),!0===this.nowBtn?t(li,{staticClass:"q-time__now-button absolute",props:{icon:this.$q.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:this.color,textColor:this.textColor,tabindex:this.computedTabindex},on:Pt(this,"now",{click:this.setNow})}):null])},__setHour(t){this.innerModel.hour!==t&&(this.innerModel.hour=t,this.innerModel.minute=null,this.innerModel.second=null)},__setMinute(t){this.innerModel.minute!==t&&(this.innerModel.minute=t,this.innerModel.second=null,!0!==this.withSeconds&&this.__updateValue({minute:t}))},__setSecond(t){this.innerModel.second!==t&&this.__updateValue({second:t})},__setAm(){!1===this.isAM&&(this.isAM=!0,null!==this.innerModel.hour&&(this.innerModel.hour-=12,this.__verifyAndUpdate()))},__setPm(){!0===this.isAM&&(this.isAM=!1,null!==this.innerModel.hour&&(this.innerModel.hour+=12,this.__verifyAndUpdate()))},__verifyAndUpdate(){return void 0!==this.hourInSelection&&!0!==this.hourInSelection(this.innerModel.hour)?(this.innerModel=fr(),void(this.view="Hour")):void 0!==this.minuteInSelection&&!0!==this.minuteInSelection(this.innerModel.minute)?(this.innerModel.minute=null,this.innerModel.second=null,void(this.view="Minute")):!0===this.withSeconds&&void 0!==this.secondInSelection&&!0!==this.secondInSelection(this.innerModel.second)?(this.innerModel.second=null,void(this.view="Second")):void(null===this.innerModel.hour||null===this.innerModel.minute||!0===this.withSeconds&&null===this.innerModel.second||this.__updateValue())},__updateValue(t){const e=Object.assign({...this.innerModel},t),i="persian"===this.calendar?At(e.hour)+":"+At(e.minute)+(!0===this.withSeconds?":"+At(e.second):""):Sr(new Date(e.year,null===e.month?null:e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),this.computedMask,this.computedLocale,e.year,e.timezoneOffset);e.changed=i!==this.value,this.$emit("input",i,e)}},render(t){const e=[this.__getClock(t)],i=Zt(this,"default");return void 0!==i&&e.push(t("div",{staticClass:"q-time__actions"},i)),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(e,"push"),t("div",{class:this.classes,on:{...this.qListeners},attrs:{tabindex:-1}},[this.__getHeader(t),t("div",{staticClass:"q-time__main col overflow-auto"},e)])}}),Mh=a["a"].extend({name:"QTimeline",mixins:[ye,Kt],provide(){return{__timeline:this}},props:{color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},computed:{classes(){return`q-timeline--${this.layout} q-timeline--${this.layout}--${this.side}`+(!0===this.isDark?" q-timeline--dark":"")}},render(t){return t("ul",{staticClass:"q-timeline",class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}}),Th=a["a"].extend({name:"QTimelineEntry",inject:{__timeline:{default(){console.error("QTimelineEntry needs to be child of QTimeline")}}},mixins:[Kt],props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},computed:{colorClass(){return"text-"+(this.color||this.__timeline.color)},classes(){return"q-timeline__entry--"+this.side+(void 0!==this.icon||void 0!==this.avatar?" q-timeline__entry--icon":"")},reverse(){return"comfortable"===this.__timeline.layout&&"left"===this.__timeline.side}},render(t){const e=Jt(this,"default",[]);if(void 0!==this.body&&e.unshift(this.body),!0===this.heading){const i=[t("div"),t("div"),t(this.tag,{staticClass:"q-timeline__heading-title"},e)];return t("div",{staticClass:"q-timeline__heading",on:{...this.qListeners}},!0===this.reverse?i.reverse():i)}let i;void 0!==this.icon?i=[t(ge,{staticClass:"row items-center justify-center",props:{name:this.icon}})]:void 0!==this.avatar&&(i=[t("img",{staticClass:"q-timeline__dot-img",domProps:{src:this.avatar}})]);const n=[t("div",{staticClass:"q-timeline__subtitle"},[t("span",Zt(this,"subtitle",[this.subtitle]))]),t("div",{staticClass:"q-timeline__dot",class:this.colorClass},i),t("div",{staticClass:"q-timeline__content"},[t("h6",{staticClass:"q-timeline__title"},Zt(this,"title",[this.title]))].concat(e))];return t("li",{staticClass:"q-timeline__entry",class:this.classes,on:{...this.qListeners}},!0===this.reverse?n.reverse():n)}});const kh={role:"toolbar"};var Eh=a["a"].extend({name:"QToolbar",mixins:[Kt],props:{inset:Boolean},render(t){return t("div",{staticClass:"q-toolbar row no-wrap items-center",class:this.inset?"q-toolbar--inset":null,attrs:kh,on:{...this.qListeners}},Zt(this,"default"))}}),Lh=a["a"].extend({name:"QToolbarTitle",mixins:[Kt],props:{shrink:Boolean},computed:{classes(){return"q-toolbar__title ellipsis"+(!0===this.shrink?" col-shrink":"")}},render(t){return t("div",{class:this.classes,on:{...this.qListeners}},Zt(this,"default"))}});const Ah=["none","strict","leaf","leaf-filtered"];var Ph=a["a"].extend({name:"QTree",mixins:[ye],props:{nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:t=>Ah.includes(t)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:{type:Function,default(t,e){const i=e.toLowerCase();return t[this.labelKey]&&t[this.labelKey].toLowerCase().indexOf(i)>-1}},duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},computed:{classes(){return"q-tree q-tree--"+(!0===this.dense?"dense":"standard")+(!0===this.noConnectors?" q-tree--no-connectors":"")+(!0===this.isDark?" q-tree--dark":"")+(void 0!==this.color?" text-"+this.color:"")},hasSelection(){return void 0!==this.selected},computedIcon(){return this.icon||this.$q.iconSet.tree.icon},computedControlColor(){return this.controlColor||this.color},textColorClass(){if(void 0!==this.textColor)return"text-"+this.textColor},selectedColorClass(){const t=this.selectedColor||this.color;if(t)return"text-"+t},meta(){const t={},e=(i,n)=>{const s=i.tickStrategy||(n?n.tickStrategy:this.tickStrategy),r=i[this.nodeKey],o=i[this.childrenKey]&&i[this.childrenKey].length>0,a=!0!==i.disabled&&!0===this.hasSelection&&!1!==i.selectable,l=!0!==i.disabled&&!1!==i.expandable,h="none"!==s,c="strict"===s,u="leaf-filtered"===s,d="leaf"===s||"leaf-filtered"===s;let p=!0!==i.disabled&&!1!==i.tickable;!0===d&&!0===p&&n&&!0!==n.tickable&&(p=!1);let f=i.lazy;!0===f&&void 0!==this.lazy[r]&&!0===Array.isArray(i[this.childrenKey])&&(f=this.lazy[r]);const m={key:r,parent:n,isParent:o,lazy:f,disabled:i.disabled,link:!0!==i.disabled&&(!0===a||!0===l&&(!0===o||!0===f)),children:[],matchesFilter:!this.filter||this.filterMethod(i,this.filter),selected:r===this.selected&&!0===a,selectable:a,expanded:!0===o&&this.innerExpanded.includes(r),expandable:l,noTick:!0===i.noTick||!0!==c&&f&&"loaded"!==f,tickable:p,tickStrategy:s,hasTicking:h,strictTicking:c,leafFilteredTicking:u,leafTicking:d,ticked:(!0===c||!0!==o)&&this.innerTicked.includes(r)};if(t[r]=m,!0===o&&(m.children=i[this.childrenKey].map(t=>e(t,m)),this.filter&&(!0!==m.matchesFilter?m.matchesFilter=m.children.some(t=>t.matchesFilter):!0!==m.noTick&&!0!==m.disabled&&!0===m.tickable&&!0===u&&!0===m.children.every(t=>!0!==t.matchesFilter||!0===t.noTick||!0!==t.tickable)&&(m.tickable=!1)),!0===m.matchesFilter&&(!0!==m.noTick&&!0!==c&&!0===m.children.every(t=>t.noTick)&&(m.noTick=!0),d))){if(m.ticked=!1,m.indeterminate=m.children.some(t=>!0===t.indeterminate),m.tickable=!0===m.tickable&&m.children.some(t=>t.tickable),!0!==m.indeterminate){const t=m.children.reduce((t,e)=>!0===e.ticked?t+1:t,0);t===m.children.length?m.ticked=!0:t>0&&(m.indeterminate=!0)}!0===m.indeterminate&&(m.indeterminateNextState=m.children.every(t=>!0!==t.tickable||!0!==t.ticked))}return m};return this.nodes.forEach(t=>e(t,null)),t}},data(){return{lazy:{},innerTicked:this.ticked||[],innerExpanded:this.expanded||[]}},watch:{ticked(t){this.innerTicked=t},expanded(t){this.innerExpanded=t}},methods:{getNodeByKey(t){const e=[].reduce,i=(n,s)=>n||!s?n:!0===Array.isArray(s)?e.call(Object(s),i,n):s[this.nodeKey]===t?s:s[this.childrenKey]?i(null,s[this.childrenKey]):void 0;return i(null,this.nodes)},getTickedNodes(){return this.innerTicked.map(t=>this.getNodeByKey(t))},getExpandedNodes(){return this.innerExpanded.map(t=>this.getNodeByKey(t))},isExpanded(t){return!(!t||!this.meta[t])&&this.meta[t].expanded},collapseAll(){void 0!==this.expanded?this.$emit("update:expanded",[]):this.innerExpanded=[]},expandAll(){const t=this.innerExpanded,e=i=>{i[this.childrenKey]&&i[this.childrenKey].length>0&&!1!==i.expandable&&!0!==i.disabled&&(t.push(i[this.nodeKey]),i[this.childrenKey].forEach(e))};this.nodes.forEach(e),void 0!==this.expanded?this.$emit("update:expanded",t):this.innerExpanded=t},setExpanded(t,e,i=this.getNodeByKey(t),n=this.meta[t]){if(n.lazy&&"loaded"!==n.lazy){if("loading"===n.lazy)return;this.$set(this.lazy,t,"loading"),!0!==Array.isArray(i[this.childrenKey])&&this.$set(i,this.childrenKey,[]),this.$emit("lazy-load",{node:i,key:t,done:e=>{this.lazy[t]="loaded",this.$set(i,this.childrenKey,!0===Array.isArray(e)?e:[]),this.$nextTick(()=>{const e=this.meta[t];e&&!0===e.isParent&&this.__setExpanded(t,!0)})},fail:()=>{this.$delete(this.lazy,t),0===i[this.childrenKey].length&&this.$delete(i,this.childrenKey)}})}else!0===n.isParent&&!0===n.expandable&&this.__setExpanded(t,e)},__setExpanded(t,e){let i=this.innerExpanded;const n=void 0!==this.expanded;if(!0===n&&(i=i.slice()),e){if(this.accordion&&this.meta[t]){const e=[];this.meta[t].parent?this.meta[t].parent.children.forEach(i=>{i.key!==t&&!0===i.expandable&&e.push(i.key)}):this.nodes.forEach(i=>{const n=i[this.nodeKey];n!==t&&e.push(n)}),e.length>0&&(i=i.filter(t=>!1===e.includes(t)))}i=i.concat([t]).filter((t,e,i)=>i.indexOf(t)===e)}else i=i.filter(e=>e!==t);!0===n?this.$emit("update:expanded",i):this.innerExpanded=i},isTicked(t){return!(!t||!this.meta[t])&&this.meta[t].ticked},setTicked(t,e){let i=this.innerTicked;const n=void 0!==this.ticked;!0===n&&(i=i.slice()),i=e?i.concat(t).filter((t,e,i)=>i.indexOf(t)===e):i.filter(e=>!1===t.includes(e)),!0===n&&this.$emit("update:ticked",i)},__getSlotScope(t,e,i){const n={tree:this,node:t,key:i,color:this.color,dark:this.isDark};return Es(n,"expanded",()=>e.expanded,t=>{t!==e.expanded&&this.setExpanded(i,t)}),Es(n,"ticked",()=>e.ticked,t=>{t!==e.ticked&&this.setTicked([i],t)}),n},__getChildren(t,e){return(this.filter?e.filter(t=>this.meta[t[this.nodeKey]].matchesFilter):e).map(e=>this.__getNode(t,e))},__getNodeMedia(t,e){if(void 0!==e.icon)return t(ge,{staticClass:"q-tree__icon q-mr-sm",props:{name:e.icon,color:e.iconColor}});const i=e.img||e.avatar;return i?t("img",{staticClass:`q-tree__${e.img?"img":"avatar"} q-mr-sm`,attrs:{src:i}}):void 0},__getNode(t,e){const i=e[this.nodeKey],n=this.meta[i],s=e.header&&this.$scopedSlots["header-"+e.header]||this.$scopedSlots["default-header"],r=!0===n.isParent?this.__getChildren(t,e[this.childrenKey]):[],o=r.length>0||n.lazy&&"loaded"!==n.lazy;let a=e.body&&this.$scopedSlots["body-"+e.body]||this.$scopedSlots["default-body"];const l=void 0!==s||void 0!==a?this.__getSlotScope(e,n,i):null;return void 0!==a&&(a=t("div",{staticClass:"q-tree__node-body relative-position"},[t("div",{class:this.textColorClass},[a(l)])])),t("div",{key:i,staticClass:"q-tree__node relative-position",class:{"q-tree__node--parent":o,"q-tree__node--child":!o}},[t("div",{staticClass:"q-tree__node-header relative-position row no-wrap items-center",class:{"q-tree__node--link q-hoverable q-focusable":n.link,"q-tree__node--selected":n.selected,"q-tree__node--disabled":n.disabled},attrs:{tabindex:n.link?0:-1},on:{click:t=>{this.__onClick(e,n,t)},keypress:t=>{!0!==ct(t)&&(13===t.keyCode?this.__onClick(e,n,t,!0):32===t.keyCode&&this.__onExpandClick(e,n,t,!0))}}},[t("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget_"+n.key}),"loading"===n.lazy?t(qe,{staticClass:"q-tree__spinner",props:{color:this.computedControlColor}}):!0===o?t(ge,{staticClass:"q-tree__arrow",class:{"q-tree__arrow--rotate":n.expanded},props:{name:this.computedIcon},on:{click:t=>{this.__onExpandClick(e,n,t)}}}):null,!0===n.hasTicking&&!0!==n.noTick?t(ss,{staticClass:"q-tree__tickbox",props:{value:!0===n.indeterminate?null:n.ticked,color:this.computedControlColor,dark:this.isDark,dense:!0,keepColor:!0,disable:!0!==n.tickable},on:{keydown:P,input:t=>{this.__onTickedClick(n,t)}}}):null,t("div",{staticClass:"q-tree__node-header-content col row no-wrap items-center",class:n.selected?this.selectedColorClass:this.textColorClass},[s?s(l):[this.__getNodeMedia(t,e),t("div",e[this.labelKey])]])]),!0===o?!0===this.noTransition?t("div",{staticClass:"q-tree__node-collapsible",class:this.textColorClass,directives:[{name:"show",value:n.expanded}]},[a,t("div",{staticClass:"q-tree__children",class:{"q-tree__node--disabled":n.disabled}},r)]):t(Mo,{props:{duration:this.duration},on:Pt(this,"slide",{show:()=>{this.$emit("after-show")},hide:()=>{this.$emit("after-hide")}})},[t("div",{staticClass:"q-tree__node-collapsible",class:this.textColorClass,directives:[{name:"show",value:n.expanded}]},[a,t("div",{staticClass:"q-tree__children",class:{"q-tree__node--disabled":n.disabled}},r)])]):a])},__blur(t){const e=this.$refs["blurTarget_"+t];void 0!==e&&e.focus()},__onClick(t,e,i,n){!0!==n&&this.__blur(e.key),this.hasSelection&&e.selectable?!1===this.noSelectionUnset?this.$emit("update:selected",e.key!==this.selected?e.key:null):e.key!==this.selected&&this.$emit("update:selected",void 0===e.key?null:e.key):this.__onExpandClick(t,e,i,n),"function"===typeof t.handler&&t.handler(t)},__onExpandClick(t,e,i,n){void 0!==i&&P(i),!0!==n&&this.__blur(e.key),this.setExpanded(e.key,!e.expanded,t,e)},__onTickedClick(t,e){if(!0===t.indeterminate&&(e=t.indeterminateNextState),t.strictTicking)this.setTicked([t.key],e);else if(t.leafTicking){const i=[],n=t=>{t.isParent?(!0!==e&&!0!==t.noTick&&!0===t.tickable&&i.push(t.key),!0===t.leafTicking&&t.children.forEach(n)):!0===t.noTick||!0!==t.tickable||!0===t.leafFilteredTicking&&!0!==t.matchesFilter||i.push(t.key)};n(t),this.setTicked(i,e)}}},render(t){const e=this.__getChildren(t,this.nodes);return t("div",{class:this.classes},0===e.length?this.filter?this.noResultsLabel||this.$q.lang.tree.noResults:this.noNodesLabel||this.$q.lang.tree.noNodes:e)},created(){!0===this.defaultExpandAll&&this.expandAll()}}),Rh=a["a"].extend({name:"QUploaderBase",mixins:[ye,Wo],props:{label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},provide(){return{__qUploaderGetInput:this.__getInputControl}},data(){return{files:[],queuedFiles:[],uploadedFiles:[],dnd:!1,expanded:!1,uploadSize:0,uploadedSize:0}},watch:{isUploading(t,e){!1===e&&!0===t?this.$emit("start"):!0===e&&!1===t&&this.$emit("finish")}},computed:{canUpload(){return!0===this.editable&&!0!==this.isBusy&&!0!==this.isUploading&&this.queuedFiles.length>0},canAddFiles(){return!0===this.editable&&!0!==this.isUploading&&(!0===this.multiple||0===this.queuedFiles.length)&&(void 0===this.maxFiles||this.files.length<this.maxFilesNumber)&&(void 0===this.maxTotalSize||this.uploadSize<this.maxTotalSizeNumber)},uploadProgress(){return 0===this.uploadSize?0:this.uploadedSize/this.uploadSize},uploadProgressLabel(){return this.__getProgressLabel(this.uploadProgress)},uploadedSizeLabel(){return kt(this.uploadedSize)},uploadSizeLabel(){return kt(this.uploadSize)},colorClass(){const t=[];return void 0!==this.color&&t.push("bg-"+this.color),void 0!==this.textColor&&t.push("text-"+this.textColor),t.join(" ")},editable(){return!0!==this.disable&&!0!==this.readonly}},methods:{reset(){this.disable||(this.abort(),this.uploadedSize=0,this.uploadSize=0,this.__revokeImgURLs(),this.files=[],this.queuedFiles=[],this.uploadedFiles=[])},removeUploadedFiles(){this.__removeFiles(["uploaded"],()=>{this.uploadedFiles=[]})},removeQueuedFiles(){this.__removeFiles(["idle","failed"],({size:t})=>{this.uploadSize-=t,this.queuedFiles=[]})},__removeFiles(t,e){if(!0===this.disable)return;const i={files:[],size:0},n=this.files.filter(e=>-1===t.indexOf(e.__status)||(i.size+=e.size,i.files.push(e),void 0!==e.__img&&window.URL.revokeObjectURL(e.__img.src),!1));i.files.length>0&&(this.files=n,void 0!==e&&e(i),this.$emit("removed",i.files))},removeFile(t){this.disable||("uploaded"===t.__status?this.uploadedFiles=this.uploadedFiles.filter(e=>e.__key!==t.__key):"uploading"===t.__status?t.__abort():this.uploadSize-=t.size,this.files=this.files.filter(e=>e.__key!==t.__key||(void 0!==e.__img&&window.URL.revokeObjectURL(e.__img.src),!1)),this.queuedFiles=this.queuedFiles.filter(e=>e.__key!==t.__key),this.$emit("removed",[t]))},__revokeImgURLs(){this.files.forEach(t=>{void 0!==t.__img&&window.URL.revokeObjectURL(t.__img.src)})},__getFileInput(){return this.$refs.input||this.$el.getElementsByClassName("q-uploader__input")[0]},__getProgressLabel(t){return(100*t).toFixed(2)+"%"},__updateFile(t,e,i){if(t.__status=e,"idle"===e)return t.__uploaded=0,t.__progress=0,t.__sizeLabel=kt(t.size),void(t.__progressLabel="0.00%");"failed"!==e?(t.__uploaded="uploaded"===e?t.size:i,t.__progress="uploaded"===e?1:Math.min(.9999,t.__uploaded/t.size),t.__progressLabel=this.__getProgressLabel(t.__progress),this.$forceUpdate()):this.$forceUpdate()},__addFiles(t,e){const i=this.__processFiles(t,e,this.files,!0),n=this.__getFileInput();void 0!==n&&(n.value=""),void 0!==i&&(i.forEach(t=>{if(this.__updateFile(t,"idle"),this.uploadSize+=t.size,!0!==this.noThumbnails&&t.type.toUpperCase().startsWith("IMAGE")){const e=new Image;e.src=window.URL.createObjectURL(t),t.__img=e}}),this.files=this.files.concat(i),this.queuedFiles=this.queuedFiles.concat(i),this.$emit("added",i),!0===this.autoUpload&&this.upload())},__getBtn(t,e,i,n){if(!0===e)return t(li,{props:{type:"a",icon:this.$q.iconSet.uploader[i],flat:!0,dense:!0},on:{click:"add"===i?this.pickFiles:n}},"add"===i?this.__getInputControl(t):null)},__getInputControl(t){return[t("input",{ref:"input",staticClass:"q-uploader__input overflow-hidden absolute-full",attrs:{tabindex:-1,type:"file",title:"",accept:this.accept,capture:this.capture,...!0===this.multiple?{multiple:!0}:{}},on:Pt(this,"input",{mousedown:L,click:this.pickFiles,change:this.__addFiles})})]},__getHeader(t){return void 0!==this.$scopedSlots.header?this.$scopedSlots.header(this):[t("div",{staticClass:"q-uploader__header-content column"},[t("div",{staticClass:"flex flex-center no-wrap q-gutter-xs"},[this.__getBtn(t,this.queuedFiles.length>0,"removeQueue",this.removeQueuedFiles),this.__getBtn(t,this.uploadedFiles.length>0,"removeUploaded",this.removeUploadedFiles),!0===this.isUploading?t(qe,{staticClass:"q-uploader__spinner"}):null,t("div",{staticClass:"col column justify-center"},[void 0!==this.label?t("div",{staticClass:"q-uploader__title"},[this.label]):null,t("div",{staticClass:"q-uploader__subtitle"},[this.uploadSizeLabel+" / "+this.uploadProgressLabel])]),this.__getBtn(t,this.canAddFiles,"add",this.pickFiles),this.__getBtn(t,!1===this.hideUploadBtn&&!0===this.canUpload,"upload",this.upload),this.__getBtn(t,this.isUploading,"clear",this.abort)])])]},__getList(t){return void 0!==this.$scopedSlots.list?this.$scopedSlots.list(this):this.files.map(e=>t("div",{key:e.__key,staticClass:"q-uploader__file relative-position",class:{"q-uploader__file--img":!0!==this.noThumbnails&&void 0!==e.__img,"q-uploader__file--failed":"failed"===e.__status,"q-uploader__file--uploaded":"uploaded"===e.__status},style:!0!==this.noThumbnails&&void 0!==e.__img?{backgroundImage:'url("'+e.__img.src+'")'}:null},[t("div",{staticClass:"q-uploader__file-header row flex-center no-wrap"},["failed"===e.__status?t(ge,{staticClass:"q-uploader__file-status",props:{name:this.$q.iconSet.type.negative,color:"negative"}}):null,t("div",{staticClass:"q-uploader__file-header-content col"},[t("div",{staticClass:"q-uploader__title"},[e.name]),t("div",{staticClass:"q-uploader__subtitle row items-center no-wrap"},[e.__sizeLabel+" / "+e.__progressLabel])]),"uploading"===e.__status?t(cs,{props:{value:e.__progress,min:0,max:1,indeterminate:0===e.__progress}}):t(li,{props:{round:!0,dense:!0,flat:!0,icon:this.$q.iconSet.uploader["uploaded"===e.__status?"done":"clear"]},on:{click:()=>{this.removeFile(e)}}})])]))}},beforeDestroy(){!0===this.isUploading&&this.abort(),this.files.length>0&&this.__revokeImgURLs()},render(t){const e=[t("div",{staticClass:"q-uploader__header",class:this.colorClass},this.__getHeader(t)),t("div",{staticClass:"q-uploader__list scroll"},this.__getList(t)),this.__getDnd(t,"uploader")];return!0===this.isBusy&&e.push(t("div",{staticClass:"q-uploader__overlay absolute-full flex flex-center"},[t(qe)])),t("div",{staticClass:"q-uploader column no-wrap",class:{"q-uploader--dark q-dark":this.isDark,"q-uploader--bordered":this.bordered,"q-uploader--square no-border-radius":this.square,"q-uploader--flat no-shadow":this.flat,"disabled q-uploader--disable":this.disable,"q-uploader--dnd":this.dnd},on:!0===this.canAddFiles?Pt(this,"drag",{dragover:this.__onDragOver,dragleave:this.__onDragLeave}):null},e)}});function Oh(t){return"function"===typeof t?t:()=>t}var Ih={props:{url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:t=>t.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},data(){return{xhrs:[],promises:[],workingThreads:0}},computed:{xhrProps(){return{url:Oh(this.url),method:Oh(this.method),headers:Oh(this.headers),formFields:Oh(this.formFields),fieldName:Oh(this.fieldName),withCredentials:Oh(this.withCredentials),sendRaw:Oh(this.sendRaw),batch:Oh(this.batch)}},isUploading(){return this.workingThreads>0},isBusy(){return this.promises.length>0}},methods:{abort(){this.xhrs.forEach(t=>{t.abort()}),this.promises.length>0&&(this.abortPromises=!0)},upload(){if(!1===this.canUpload)return;const t=this.queuedFiles.slice(0);this.queuedFiles=[],this.xhrProps.batch(t)?this.__runFactory(t):t.forEach(t=>{this.__runFactory([t])})},__runFactory(t){if(this.workingThreads++,"function"!==typeof this.factory)return void this.__uploadFiles(t,{});const e=this.factory(t);if(e)if("function"===typeof e.catch&&"function"===typeof e.then){this.promises.push(e);const i=i=>{!0!==this._isBeingDestroyed&&!0!==this._isDestroyed&&(this.promises=this.promises.filter(t=>t!==e),0===this.promises.length&&(this.abortPromises=!1),this.queuedFiles=this.queuedFiles.concat(t),t.forEach(t=>{this.__updateFile(t,"failed")}),this.$emit("factory-failed",i,t),this.workingThreads--)};e.then(n=>{!0===this.abortPromises?i(new Error("Aborted")):!0!==this._isBeingDestroyed&&!0!==this._isDestroyed&&(this.promises=this.promises.filter(t=>t!==e),this.__uploadFiles(t,n))}).catch(i)}else this.__uploadFiles(t,e||{});else this.$emit("factory-failed",new Error("QUploader: factory() does not return properly"),t),this.workingThreads--},__uploadFiles(t,e){const i=new FormData,n=new XMLHttpRequest,s=(t,i)=>void 0!==e[t]?Oh(e[t])(i):this.xhrProps[t](i),r=s("url",t);if(!r)return console.error("q-uploader: invalid or no URL specified"),void this.workingThreads--;const o=s("formFields",t);void 0!==o&&o.forEach(t=>{i.append(t.name,t.value)});let a,l=0,h=0,c=0,u=0;n.upload.addEventListener("progress",e=>{if(!0===a)return;const i=Math.min(u,e.loaded);this.uploadedSize+=i-c,c=i;let n=c-h;for(let s=l;n>0&&s<t.length;s++){const e=t[s],i=n>e.size;if(!i)return void this.__updateFile(e,"uploading",n);n-=e.size,l++,h+=e.size,this.__updateFile(e,"uploading",e.size)}},!1),n.onreadystatechange=()=>{n.readyState<4||(n.status&&n.status<400?(this.uploadedFiles=this.uploadedFiles.concat(t),t.forEach(t=>{this.__updateFile(t,"uploaded")}),this.$emit("uploaded",{files:t,xhr:n})):(a=!0,this.uploadedSize-=c,this.queuedFiles=this.queuedFiles.concat(t),t.forEach(t=>{this.__updateFile(t,"failed")}),this.$emit("failed",{files:t,xhr:n})),this.workingThreads--,this.xhrs=this.xhrs.filter(t=>t!==n))},n.open(s("method",t),r),!0===s("withCredentials",t)&&(n.withCredentials=!0);const d=s("headers",t);void 0!==d&&d.forEach(t=>{n.setRequestHeader(t.name,t.value)});const p=s("sendRaw",t);t.forEach(t=>{this.__updateFile(t,"uploading",0),!0!==p&&i.append(s("fieldName",t),t,t.name),t.xhr=n,t.__abort=()=>{n.abort()},u+=t.size}),this.$emit("uploading",{files:t,xhr:n}),this.xhrs.push(n),!0===p?n.send(new Blob(t)):n.send(i)}}},Dh=a["a"].extend({name:"QUploader",mixins:[Rh,Ih]}),Nh=a["a"].extend({name:"QUploaderAddTrigger",inject:{__qUploaderGetInput:{default(){console.error("QUploaderAddTrigger needs to be child of QUploader")}}},render(t){return this.__qUploaderGetInput(t)}}),zh=a["a"].extend({name:"QVideo",mixins:[Zo,Kt],props:{src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},computed:{iframeData(){return{attrs:{src:this.src,frameborder:"0",title:this.title,allowfullscreen:!0,fetchpriority:this.fetchpriority,loading:this.loading,referrerpolicy:this.referrerpolicy}}},classes(){return"q-video"+(void 0!==this.ratio?" q-video--responsive":"")}},render(t){return t("div",{class:this.classes,style:this.ratioStyle,on:{...this.qListeners}},[t("iframe",this.iframeData)])}});function qh(t){if(!1===t)return 0;if(!0===t||void 0===t)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}function Bh(t){const e=t.__qclosepopup;void 0!==e&&(t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup)}var Fh={name:"close-popup",bind(t,{value:e},i){void 0!==t.__qclosepopup&&(Bh(t),t.__qclosepopup_destroyed=!0);const n={depth:qh(e),handler(t){0!==n.depth&&setTimeout(()=>{wi(i.componentInstance||i.context,t,n.depth)})},handlerKey(t){!0===ut(t,13)&&n.handler(t)}};t.__qclosepopup=n,t.addEventListener("click",n.handler),t.addEventListener("keyup",n.handlerKey)},update(t,{value:e,oldValue:i}){void 0!==t.__qclosepopup&&e!==i&&(t.__qclosepopup.depth=qh(e))},unbind(t){void 0===t.__qclosepopup_destroyed?Bh(t):delete t.__qclosepopup_destroyed}};function Uh(t){const e=t.__qgoback;void 0!==e&&(t.removeEventListener("click",e.goBack),t.removeEventListener("keyup",e.goBackKey),delete t.__qgoback)}var $h={name:"go-back",bind(t,{value:e,modifiers:i},n){void 0!==t.__qgoback&&(Uh(t),t.__qgoback_destroyed=!0);const s={value:e,position:window.history.length-1,single:i.single,goBack(){const t=n.context.$router;!0===s.single?t.go(-1):!0===b.is.nativeMobile?t.go(s.position-window.history.length):t.replace(s.value)},goBackKey(t){!0===ut(t,13)&&s.goBack()}};t.__qgoback=s,t.addEventListener("click",s.goBack),t.addEventListener("keyup",s.goBackKey)},update(t,{value:e,oldValue:i}){const n=t.__qgoback;void 0!==n&&e!==i&&(n.value=e)},unbind(t){void 0===t.__qgoback_destroyed?Uh(t):delete t.__qgoback_destroyed}};let Vh=0,Hh=void 0;function Gh(t,e){void 0===Hh&&(Hh=document.createElement("div"),Hh.style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(Hh));const i=t.getBoundingClientRect(),n=Hh.getBoundingClientRect(),{marginLeft:s,marginRight:r,marginTop:o,marginBottom:a}=window.getComputedStyle(t),l=parseInt(s,10)+parseInt(r,10),h=parseInt(o,10)+parseInt(a,10);return{left:i.left-n.left,top:i.top-n.top,width:i.right-i.left,height:i.bottom-i.top,widthM:i.right-i.left+(!0===e?0:l),heightM:i.bottom-i.top+(!0===e?0:h),marginH:!0===e?l:0,marginV:!0===e?h:0}}function Wh(t){return{width:t.scrollWidth,height:t.scrollHeight}}const jh=["Top","Right","Bottom","Left"],Yh=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],Xh=/-block|-inline|block-|inline-/,Qh=/(-block|-inline|block-|inline-).*:/;function Kh(t,e){const i=window.getComputedStyle(t),n={};for(let s=0;s<e.length;s++){const t=e[s];if(""===i[t])if("cssText"===t){const e=i.length;let s="";for(let t=0;t<e;t++)!0!==Xh.test(i[t])&&(s+=i[t]+": "+i[i[t]]+"; ");n[t]=s}else if(["borderWidth","borderStyle","borderColor"].indexOf(t)>-1){const e=t.replace("border","");let s="";for(let t=0;t<jh.length;t++){const n="border"+jh[t]+e;s+=i[n]+" "}n[t]=s}else if("borderRadius"===t){let e="",s="";for(let t=0;t<Yh.length;t++){const n=i[Yh[t]].split(" ");e+=n[0]+" ",s+=(void 0===n[1]?n[0]:n[1])+" "}n[t]=e+"/ "+s}else n[t]=i[t];else n[t]="cssText"===t?i[t].split(";").filter(t=>!0!==Qh.test(t)).join(";"):i[t]}return n}const Zh=["absolute","fixed","relative","sticky"];function Jh(t){let e=t,i=0;while(null!==e&&e!==document){const{position:n,zIndex:s}=window.getComputedStyle(e),r=Number(s);r>i&&(e===t||!0===Zh.includes(n))&&(i=r),e=e.parentNode}return i}function tc(t){return{from:t.from,to:void 0!==t.to?t.to:t.from}}function ec(t){return"number"===typeof t?t={duration:t}:"function"===typeof t&&(t={onEnd:t}),{...t,waitFor:void 0===t.waitFor?0:t.waitFor,duration:!0===isNaN(t.duration)?300:parseInt(t.duration,10),easing:"string"===typeof t.easing&&t.easing.length>0?t.easing:"ease-in-out",delay:!0===isNaN(t.delay)?0:parseInt(t.delay,10),fill:"string"===typeof t.fill&&t.fill.length>0?t.fill:"none",resize:!0===t.resize,useCSS:!0===t.useCSS||!0===t.usecss,hideFromClone:!0===t.hideFromClone||!0===t.hidefromclone,keepToClone:!0===t.keepToClone||!0===t.keeptoclone,tween:!0===t.tween,tweenFromOpacity:!0===isNaN(t.tweenFromOpacity)?.6:parseFloat(t.tweenFromOpacity),tweenToOpacity:!0===isNaN(t.tweenToOpacity)?.5:parseFloat(t.tweenToOpacity)}}function ic(t){return t&&t.ownerDocument===document&&null!==t.parentNode}function nc(t){let e=()=>!1,i=!1,n=!0;const s=tc(t),r=ec(t),o=$e(s.from);if(!0!==ic(o))return e;"function"===typeof o.qMorphCancel&&o.qMorphCancel();let a=void 0,l=void 0,h=void 0,c=void 0;const u=o.parentNode,d=o.nextElementSibling,p=Gh(o,r.resize),{width:f,height:m}=Wh(u),{borderWidth:g,borderStyle:v,borderColor:_,borderRadius:y,backgroundColor:b,transform:x,position:S,cssText:w}=Kh(o,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),C=o.classList.toString(),M=o.style.cssText,T=o.cloneNode(!0),k=!0===r.tween?o.cloneNode(!0):void 0;void 0!==k&&(k.className=k.classList.toString().split(" ").filter(t=>!1===/^bg-/.test(t)).join(" ")),!0===r.hideFromClone&&T.classList.add("q-morph--internal"),T.setAttribute("aria-hidden","true"),T.style.transition="none",T.style.animation="none",T.style.pointerEvents="none",u.insertBefore(T,d),o.qMorphCancel=()=>{i=!0,T.remove(),void 0!==k&&k.remove(),!0===r.hideFromClone&&T.classList.remove("q-morph--internal"),o.qMorphCancel=void 0};const E=()=>{const t=$e(s.to);if(!0===i||!0!==ic(t))return void("function"===typeof o.qMorphCancel&&o.qMorphCancel());o!==t&&"function"===typeof t.qMorphCancel&&t.qMorphCancel(),!0!==r.keepToClone&&t.classList.add("q-morph--internal"),T.classList.add("q-morph--internal");const{width:d,height:E}=Wh(u),{width:L,height:A}=Wh(t.parentNode);!0!==r.hideFromClone&&T.classList.remove("q-morph--internal"),t.qMorphCancel=()=>{i=!0,T.remove(),void 0!==k&&k.remove(),!0===r.hideFromClone&&T.classList.remove("q-morph--internal"),!0!==r.keepToClone&&t.classList.remove("q-morph--internal"),o.qMorphCancel=void 0,t.qMorphCancel=void 0};const P=()=>{if(!0===i)return void("function"===typeof t.qMorphCancel&&t.qMorphCancel());!0!==r.hideFromClone&&(T.classList.add("q-morph--internal"),T.innerHTML="",T.style.left=0,T.style.right="unset",T.style.top=0,T.style.bottom="unset",T.style.transform="none"),!0!==r.keepToClone&&t.classList.remove("q-morph--internal");const s=t.parentNode,{width:P,height:R}=Wh(s),O=t.cloneNode(r.keepToClone);O.setAttribute("aria-hidden","true"),!0!==r.keepToClone&&(O.style.left=0,O.style.right="unset",O.style.top=0,O.style.bottom="unset",O.style.transform="none",O.style.pointerEvents="none"),O.classList.add("q-morph--internal");const I=t===o&&u===s?T:t.nextElementSibling;s.insertBefore(O,I);const{borderWidth:D,borderStyle:N,borderColor:z,borderRadius:q,backgroundColor:B,transform:F,position:U,cssText:$}=Kh(t,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),V=t.classList.toString(),H=t.style.cssText;t.style.cssText=$,t.style.transform="none",t.style.animation="none",t.style.transition="none",t.className=V.split(" ").filter(t=>!1===/^bg-/.test(t)).join(" ");const G=Gh(t,r.resize),W=p.left-G.left,j=p.top-G.top,Y=p.width/(G.width>0?G.width:10),X=p.height/(G.height>0?G.height:100),Q=f-d,K=m-E,Z=P-L,J=R-A,tt=Math.max(p.widthM,Q),et=Math.max(p.heightM,K),it=Math.max(G.widthM,Z),nt=Math.max(G.heightM,J),st=o===t&&!1===["absolute","fixed"].includes(U)&&!1===["absolute","fixed"].includes(S);let rt="fixed"===U,ot=s;while(!0!==rt&&ot!==document)rt="fixed"===window.getComputedStyle(ot).position,ot=ot.parentNode;if(!0!==r.hideFromClone&&(T.style.display="block",T.style.flex="0 0 auto",T.style.opacity=0,T.style.minWidth="unset",T.style.maxWidth="unset",T.style.minHeight="unset",T.style.maxHeight="unset",T.classList.remove("q-morph--internal")),!0!==r.keepToClone&&(O.style.display="block",O.style.flex="0 0 auto",O.style.opacity=0,O.style.minWidth="unset",O.style.maxWidth="unset",O.style.minHeight="unset",O.style.maxHeight="unset"),O.classList.remove("q-morph--internal"),"string"===typeof r.classes&&(t.className+=" "+r.classes),"string"===typeof r.style)t.style.cssText+=" "+r.style;else if(!0===jn(r.style))for(const e in r.style)t.style[e]=r.style[e];const at=Jh(T),lt=Jh(t),ht=!0===rt?document.documentElement:{scrollLeft:0,scrollTop:0};t.style.position=!0===rt?"fixed":"absolute",t.style.left=G.left-ht.scrollLeft+"px",t.style.right="unset",t.style.top=G.top-ht.scrollTop+"px",t.style.margin=0,!0===r.resize&&(t.style.minWidth="unset",t.style.maxWidth="unset",t.style.minHeight="unset",t.style.maxHeight="unset",t.style.overflow="hidden",t.style.overflowX="hidden",t.style.overflowY="hidden"),document.body.appendChild(t),void 0!==k&&(k.style.cssText=w,k.style.transform="none",k.style.animation="none",k.style.transition="none",k.style.position=t.style.position,k.style.left=p.left-ht.scrollLeft+"px",k.style.right="unset",k.style.top=p.top-ht.scrollTop+"px",k.style.margin=0,k.style.pointerEvents="none",!0===r.resize&&(k.style.minWidth="unset",k.style.maxWidth="unset",k.style.minHeight="unset",k.style.maxHeight="unset",k.style.overflow="hidden",k.style.overflowX="hidden",k.style.overflowY="hidden"),document.body.appendChild(k));const ct=i=>{o===t&&!0!==n?(t.style.cssText=M,t.className=C):(t.style.cssText=H,t.className=V),O.parentNode===s&&s.insertBefore(t,O),T.remove(),O.remove(),void 0!==k&&k.remove(),e=()=>!1,o.qMorphCancel=void 0,t.qMorphCancel=void 0,"function"===typeof r.onEnd&&r.onEnd(!0===n?"to":"from",!0===i)};if(!0!==r.useCSS&&"function"===typeof t.animate){const s=!0===r.resize?{transform:`translate(${W}px, ${j}px)`,width:tt+"px",height:et+"px"}:{transform:`translate(${W}px, ${j}px) scale(${Y}, ${X})`},u=!0===r.resize?{width:it+"px",height:nt+"px"}:{},d=!0===r.resize?{width:tt+"px",height:et+"px"}:{},f=!0===r.resize?{transform:`translate(${-1*W}px, ${-1*j}px)`,width:it+"px",height:nt+"px"}:{transform:`translate(${-1*W}px, ${-1*j}px) scale(${1/Y}, ${1/X})`},m=void 0!==k?{opacity:r.tweenToOpacity}:{backgroundColor:b},S=void 0!==k?{opacity:1}:{backgroundColor:B};c=t.animate([{margin:0,borderWidth:g,borderStyle:v,borderColor:_,borderRadius:y,zIndex:at,transformOrigin:"0 0",...s,...m},{margin:0,borderWidth:D,borderStyle:N,borderColor:z,borderRadius:q,zIndex:lt,transformOrigin:"0 0",transform:F,...u,...S}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay}),l=void 0===k?void 0:k.animate([{opacity:r.tweenFromOpacity,margin:0,borderWidth:g,borderStyle:v,borderColor:_,borderRadius:y,zIndex:at,transformOrigin:"0 0",transform:x,...d},{opacity:0,margin:0,borderWidth:D,borderStyle:N,borderColor:z,borderRadius:q,zIndex:lt,transformOrigin:"0 0",...f}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay}),a=!0===r.hideFromClone||!0===st?void 0:T.animate([{margin:`${K<0?K/2:0}px ${Q<0?Q/2:0}px`,width:tt+p.marginH+"px",height:et+p.marginV+"px"},{margin:0,width:0,height:0}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay}),h=!0===r.keepToClone?void 0:O.animate([!0===st?{margin:`${K<0?K/2:0}px ${Q<0?Q/2:0}px`,width:tt+p.marginH+"px",height:et+p.marginV+"px"}:{margin:0,width:0,height:0},{margin:`${J<0?J/2:0}px ${Z<0?Z/2:0}px`,width:it+G.marginH+"px",height:nt+G.marginV+"px"}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay});const w=t=>{void 0!==a&&a.cancel(),void 0!==l&&l.cancel(),void 0!==h&&h.cancel(),c.cancel(),c.removeEventListener("finish",w),c.removeEventListener("cancel",w),ct(t),a=void 0,l=void 0,h=void 0,c=void 0};o.qMorphCancel=()=>{o.qMorphCancel=void 0,i=!0,w()},t.qMorphCancel=()=>{t.qMorphCancel=void 0,i=!0,w()},c.addEventListener("finish",w),c.addEventListener("cancel",w),e=t=>!0!==i&&void 0!==c&&(!0===t?(w(!0),!0):(n=!0!==n,void 0!==a&&a.reverse(),void 0!==l&&l.reverse(),void 0!==h&&h.reverse(),c.reverse(),!0))}else{const s="q-morph-anim-"+ ++Vh,a=document.createElement("style"),l=!0===r.resize?`\n            transform: translate(${W}px, ${j}px);\n            width: ${tt}px;\n            height: ${et}px;\n          `:`transform: translate(${W}px, ${j}px) scale(${Y}, ${X});`,h=!0===r.resize?`\n            width: ${it}px;\n            height: ${nt}px;\n          `:"",c=!0===r.resize?`\n            width: ${tt}px;\n            height: ${et}px;\n          `:"",u=!0===r.resize?`\n            transform: translate(${-1*W}px, ${-1*j}px);\n            width: ${it}px;\n            height: ${nt}px;\n          `:`transform: translate(${-1*W}px, ${-1*j}px) scale(${1/Y}, ${1/X});`,d=void 0!==k?`opacity: ${r.tweenToOpacity};`:`background-color: ${b};`,f=void 0!==k?"opacity: 1;":`background-color: ${B};`,m=void 0===k?"":`\n            @keyframes ${s}-from-tween {\n              0% {\n                opacity: ${r.tweenFromOpacity};\n                margin: 0;\n                border-width: ${g};\n                border-style: ${v};\n                border-color: ${_};\n                border-radius: ${y};\n                z-index: ${at};\n                transform-origin: 0 0;\n                transform: ${x};\n                ${c}\n              }\n\n              100% {\n                opacity: 0;\n                margin: 0;\n                border-width: ${D};\n                border-style: ${N};\n                border-color: ${z};\n                border-radius: ${q};\n                z-index: ${lt};\n                transform-origin: 0 0;\n                ${u}\n              }\n            }\n          `,S=!0===r.hideFromClone||!0===st?"":`\n            @keyframes ${s}-from {\n              0% {\n                margin: ${K<0?K/2:0}px ${Q<0?Q/2:0}px;\n                width: ${tt+p.marginH}px;\n                height: ${et+p.marginV}px;\n              }\n\n              100% {\n                margin: 0;\n                width: 0;\n                height: 0;\n              }\n            }\n          `,w=!0===st?`\n            margin: ${K<0?K/2:0}px ${Q<0?Q/2:0}px;\n            width: ${tt+p.marginH}px;\n            height: ${et+p.marginV}px;\n          `:"\n            margin: 0;\n            width: 0;\n            height: 0;\n          ",C=!0===r.keepToClone?"":`\n            @keyframes ${s}-to {\n              0% {\n                ${w}\n              }\n\n              100% {\n                margin: ${J<0?J/2:0}px ${Z<0?Z/2:0}px;\n                width: ${it+G.marginH}px;\n                height: ${nt+G.marginV}px;\n              }\n            }\n          `;a.innerHTML=`\n          @keyframes ${s} {\n            0% {\n              margin: 0;\n              border-width: ${g};\n              border-style: ${v};\n              border-color: ${_};\n              border-radius: ${y};\n              background-color: ${b};\n              z-index: ${at};\n              transform-origin: 0 0;\n              ${l}\n              ${d}\n            }\n\n            100% {\n              margin: 0;\n              border-width: ${D};\n              border-style: ${N};\n              border-color: ${z};\n              border-radius: ${q};\n              background-color: ${B};\n              z-index: ${lt};\n              transform-origin: 0 0;\n              transform: ${F};\n              ${h}\n              ${f}\n            }\n          }\n\n          ${S}\n\n          ${m}\n\n          ${C}\n        `,document.head.appendChild(a);let M="normal";T.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${s}-from`,void 0!==k&&(k.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${s}-from-tween`),O.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${s}-to`,t.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${s}`;const E=e=>{e===Object(e)&&e.animationName!==s||(t.removeEventListener("animationend",E),t.removeEventListener("animationcancel",E),ct(),a.remove())};o.qMorphCancel=()=>{o.qMorphCancel=void 0,i=!0,E()},t.qMorphCancel=()=>{t.qMorphCancel=void 0,i=!0,E()},t.addEventListener("animationend",E),t.addEventListener("animationcancel",E),e=e=>!!(!0!==i&&t&&T&&O)&&(!0===e?(E(),!0):(n=!0!==n,M="normal"===M?"reverse":"normal",T.style.animationDirection=M,k.style.animationDirection=M,O.style.animationDirection=M,t.style.animationDirection=M,!0))}};if(r.waitFor>0||"transitionend"===r.waitFor||r.waitFor===Object(r.waitFor)&&"function"===typeof r.waitFor.then){const e=r.waitFor>0?new Promise(t=>setTimeout(t,r.waitFor)):"transitionend"===r.waitFor?new Promise(e=>{const i=setTimeout(()=>{n()},400),n=s=>{clearTimeout(i),t&&(t.removeEventListener("transitionend",n),t.removeEventListener("transitioncancel",n)),e()};t.addEventListener("transitionend",n),t.addEventListener("transitioncancel",n)}):r.waitFor;e.then(P).catch(()=>{"function"===typeof t.qMorphCancel&&t.qMorphCancel()})}else P()};return"function"===typeof t.onToggle&&t.onToggle(),requestAnimationFrame(E),t=>e(t)}const sc={},rc=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],oc=["resize","useCSS","hideFromClone","keepToClone","tween"];function ac(t,e){t.clsAction!==e&&(t.clsAction=e,t.el.classList[e]("q-morph--invisible"))}function lc(t){if(!0===t.animating||t.queue.length<2)return;const[e,i]=t.queue;t.animating=!0,e.animating=!0,i.animating=!0,ac(e,"remove"),ac(i,"remove");const n=nc({from:e.el,to:i.el,onToggle(){ac(e,"add"),ac(i,"remove")},...i.opts,onEnd(n,s){void 0!==i.opts.onEnd&&i.opts.onEnd(n,s),!0!==s&&(e.animating=!1,i.animating=!1,t.animating=!1,t.cancel=void 0,t.queue.shift(),lc(t))}});t.cancel=()=>{n(!0),t.cancel=void 0}}function hc(t,e){const i=e.opts;oc.forEach(e=>{i[e]=!0===t[e]})}function cc(t,e){const i="string"===typeof t&&t.length>0?t.split(":"):[];e.name=i[0],e.group=i[1],Object.assign(e.opts,{duration:!0===isNaN(i[2])?300:parseFloat(i[2]),waitFor:i[3]})}function uc(t,e){void 0!==t.group&&(e.group=t.group),void 0!==t.name&&(e.name=t.name);const i=e.opts;rc.forEach(e=>{void 0!==t[e]&&(i[e]=t[e])})}function dc(t,e){if(e.name!==t)!1===e.animating&&ac(e,"add");else{const i=sc[e.group];void 0===i?(sc[e.group]={name:e.group,model:t,queue:[e],animating:!1},ac(e,"remove")):i.model!==t&&(i.model=t,i.queue.push(e),!1===i.animating&&2===i.queue.length&&lc(i))}}function pc(t,e){let i;Object(e)===e?(i=""+e.model,uc(e,t),hc(e,t)):i=""+e,i!==t.model?(t.model=i,dc(i,t)):!1===t.animating&&void 0!==t.clsAction&&t.el.classList[t.clsAction]("q-morph--invisible")}function fc(t){const e=t.__qmorph;if(void 0!==e){const i=sc[e.group];if(void 0!==i){const t=i.queue.indexOf(e);-1!==t&&(i.queue=i.queue.filter(t=>t!==e),0===i.queue.length&&(void 0!==i.cancel&&i.cancel(),delete sc[e.group]))}"add"===e.clsAction&&t.classList.remove("q-morph--invisible"),delete t.__qmorph}}var mc={name:"morph",inserted(t,e){void 0!==t.__qmorph&&(fc(t),t.__qmorph_destroyed=!0);const i={el:t,animating:!1,opts:{}};hc(e.modifiers,i),cc(e.arg,i),pc(i,e.value),t.__qmorph=i},update(t,e){const i=t.__qmorph;void 0!==i&&pc(i,e.value)},unbind(t){void 0===t.__qmorph_destroyed?fc(t):delete t.__qmorph_destroyed}};const gc={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0};function vc(t,e,i){e.handler=i,void 0!==e.observer&&e.observer.disconnect(),e.observer=new MutationObserver(i=>{if("function"===typeof e.handler){const n=e.handler(i);!1!==n&&!0!==e.once||_c(t)}}),e.observer.observe(t,e.opts)}function _c(t){const e=t.__qmutation;void 0!==e&&(void 0!==e.observer&&e.observer.disconnect(),delete t.__qmutation)}var yc={name:"mutation",inserted(t,{modifiers:{once:e,...i},value:n}){void 0!==t.__qmutation&&(_c(t),t.__qmutation_destroyed=!0);const s={once:e,opts:0===Object.keys(i).length?gc:i};vc(t,s,n),t.__qmutation=s},update(t,{oldValue:e,value:i}){const n=t.__qmutation;void 0!==n&&e!==i&&vc(t,n,i)},unbind(t){void 0===t.__qmutation_destroyed?_c(t):delete t.__qmutation_destroyed}};function bc(t,{value:e,oldValue:i}){"function"===typeof e?(t.handler=e,"function"!==typeof i&&(t.scrollTarget.addEventListener("scroll",t.scroll,w.passive),t.scroll())):t.scrollTarget.removeEventListener("scroll",t.scroll,w.passive)}function xc(t){const e=t.__qscrollfire;void 0!==e&&(e.scrollTarget.removeEventListener("scroll",e.scroll,w.passive),e.scroll.cancel(),delete t.__qscrollfire)}var Sc={name:"scroll-fire",inserted(t,e){void 0!==t.__qscrollfire&&(xc(t),t.__qscrollfire_destroyed=!0);const i={scrollTarget:Fi(t),scroll:z(()=>{let e,n;i.scrollTarget===window?(n=t.getBoundingClientRect().bottom,e=window.innerHeight):(n=Be(t).top+Fe(t),e=Be(i.scrollTarget).top+Fe(i.scrollTarget)),n>0&&n<e&&(i.scrollTarget.removeEventListener("scroll",i.scroll,w.passive),i.handler(t))},25)};bc(i,e),t.__qscrollfire=i},update(t,e){void 0!==t.__qscrollfire&&e.value!==e.oldValue&&bc(t.__qscrollfire,e)},unbind(t){void 0===t.__qscrollfire_destroyed?xc(t):delete t.__qscrollfire_destroyed}};function wc(t,{value:e,oldValue:i}){"function"===typeof e?(t.handler=e,"function"!==typeof i&&t.scrollTarget.addEventListener("scroll",t.scroll,w.passive)):t.scrollTarget.removeEventListener("scroll",t.scroll,w.passive)}function Cc(t){const e=t.__qscroll;void 0!==e&&(e.scrollTarget.removeEventListener("scroll",e.scroll,w.passive),delete t.__qscroll)}var Mc={name:"scroll",inserted(t,e){void 0!==t.__qscroll&&(Cc(t),t.__qscroll_destroyed=!0);const i={scrollTarget:Fi(t),scroll(){i.handler($i(i.scrollTarget),Hi(i.scrollTarget))}};wc(i,e),t.__qscroll=i},update(t,e){void 0!==t.__qscroll&&e.oldValue!==e.value&&wc(t.__qscroll,e)},unbind(t){void 0===t.__qscroll_destroyed?Cc(t):delete t.__qscroll_destroyed}};function Tc(t){const e=t.__qtouchhold;void 0!==e&&(N(e,"main"),N(e,"temp"),clearTimeout(e.timer),void 0!==e.styleCleanup&&e.styleCleanup(),delete t.__qtouchhold)}var kc={name:"touch-hold",bind(t,e){void 0!==t.__qtouchhold&&(Tc(t),t.__qtouchhold_destroyed=!0);const{modifiers:i}=e;if(!0!==i.mouse&&!0!==b.has.touch)return;const n={handler:e.value,noop:M,mouseStart(t){"function"===typeof n.handler&&!0===T(t)&&(D(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(t,!0))},touchStart(t){if(void 0!==t.target&&"function"===typeof n.handler){const e=t.target;D(n,"temp",[[e,"touchmove","move","passiveCapture"],[e,"touchcancel","end","notPassiveCapture"],[e,"touchend","end","notPassiveCapture"]]),n.start(t)}},start(t,e){n.origin=k(t);const i=Date.now();!0===b.is.mobile&&(document.body.classList.add("non-selectable"),ui(),n.styleCleanup=t=>{n.styleCleanup=void 0;const e=()=>{document.body.classList.remove("non-selectable")};!0===t?(ui(),setTimeout(e,10)):e()}),n.triggered=!1,n.sensitivity=!0===e?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout(()=>{ui(),n.triggered=!0,n.handler({evt:t,touch:!0!==e,mouse:!0===e,position:n.origin,duration:Date.now()-i})},n.duration)},move(t){const{top:e,left:i}=k(t);(Math.abs(i-n.origin.left)>=n.sensitivity||Math.abs(e-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(t){N(n,"temp"),void 0!==n.styleCleanup&&n.styleCleanup(n.triggered),!0===n.triggered?void 0!==t&&P(t):clearTimeout(n.timer)}},s=[600,5,7];"string"===typeof e.arg&&e.arg.length>0&&e.arg.split(":").forEach((t,e)=>{const i=parseInt(t,10);i&&(s[e]=i)}),[n.duration,n.touchSensitivity,n.mouseSensitivity]=s,t.__qtouchhold=n,!0===i.mouse&&D(n,"main",[[t,"mousedown","mouseStart","passive"+(!0===i.mouseCapture||!0===i.mousecapture?"Capture":"")]]),!0===b.has.touch&&D(n,"main",[[t,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[t,"touchend","noop","passiveCapture"]])},update(t,e){const i=t.__qtouchhold;void 0!==i&&e.oldValue!==e.value&&("function"!==typeof e.value&&i.end(),i.handler=e.value)},unbind(t){void 0===t.__qtouchhold_destroyed?Tc(t):delete t.__qtouchhold_destroyed}};const Ec={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Lc=new RegExp(`^([\\d+]+|${Object.keys(Ec).join("|")})$`,"i");function Ac(t,e){const{top:i,left:n}=k(t);return Math.abs(n-e.left)>=7||Math.abs(i-e.top)>=7}function Pc(t){const e=t.__qtouchrepeat;void 0!==e&&(clearTimeout(e.timer),N(e,"main"),N(e,"temp"),void 0!==e.styleCleanup&&e.styleCleanup(),delete t.__qtouchrepeat)}var Rc={name:"touch-repeat",bind(t,{modifiers:e,value:i,arg:n}){void 0!==t.__qtouchrepeat&&(Pc(t),t.__qtouchrepeat_destroyed=!0);const s=Object.keys(e).reduce((t,e)=>{if(!0===Lc.test(e)){const i=isNaN(parseInt(e,10))?Ec[e.toLowerCase()]:parseInt(e,10);i>=0&&t.push(i)}return t},[]);if(!0!==e.mouse&&!0!==b.has.touch&&0===s.length)return;const r="string"===typeof n&&n.length>0?n.split(":").map(t=>parseInt(t,10)):[0,600,300],o=r.length-1,a={keyboard:s,handler:i,noop:M,mouseStart(t){void 0===a.event&&"function"===typeof a.handler&&!0===T(t)&&(D(a,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),a.start(t,!0))},keyboardStart(e){if("function"===typeof a.handler&&!0===ut(e,s)){if((0===r[0]||void 0!==a.event)&&(P(e),t.focus(),void 0!==a.event))return;D(a,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),a.start(e,!1,!0)}},touchStart(t){if(void 0!==t.target&&"function"===typeof a.handler){const e=t.target;D(a,"temp",[[e,"touchmove","move","passiveCapture"],[e,"touchcancel","end","notPassiveCapture"],[e,"touchend","end","notPassiveCapture"]]),a.start(t)}},start(t,e,i){function n(t){a.styleCleanup=void 0,document.documentElement.style.cursor="";const e=()=>{document.body.classList.remove("non-selectable")};!0===t?(ui(),setTimeout(e,10)):e()}!0!==i&&(a.origin=k(t)),!0===b.is.mobile&&(document.body.classList.add("non-selectable"),ui(),a.styleCleanup=n),a.event={touch:!0!==e&&!0!==i,mouse:!0===e,keyboard:!0===i,startTime:Date.now(),repeatCount:0};const s=()=>{if(void 0===a.event)return;0===a.event.repeatCount&&(a.event.evt=t,!0===i?a.event.keyCode=t.keyCode:a.event.position=k(t),!0!==b.is.mobile&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),ui(),a.styleCleanup=n)),a.event.duration=Date.now()-a.event.startTime,a.event.repeatCount+=1,a.handler(a.event);const e=o<a.event.repeatCount?o:a.event.repeatCount;a.timer=setTimeout(s,r[e])};0===r[0]?s():a.timer=setTimeout(s,r[0])},move(t){void 0!==a.event&&!0===Ac(t,a.origin)&&clearTimeout(a.timer)},end(t){void 0!==a.event&&(void 0!==a.styleCleanup&&a.styleCleanup(!0),void 0!==t&&a.event.repeatCount>0&&P(t),N(a,"temp"),clearTimeout(a.timer),a.event=void 0)}};t.__qtouchrepeat=a,!0===e.mouse&&D(a,"main",[[t,"mousedown","mouseStart","passive"+(!0===e.mouseCapture||!0===e.mousecapture?"Capture":"")]]),!0===b.has.touch&&D(a,"main",[[t,"touchstart","touchStart","passive"+(!0===e.capture?"Capture":"")],[t,"touchend","noop","passiveCapture"]]),s.length>0&&D(a,"main",[[t,"keydown","keyboardStart","notPassive"+(!0===e.keyCapture||!0===e.keycapture?"Capture":"")]])},update(t,{oldValue:e,value:i}){const n=t.__qtouchrepeat;void 0!==n&&e!==i&&("function"!==typeof i&&n.end(),n.handler=i)},unbind(t){void 0===t.__qtouchrepeat_destroyed?Pc(t):delete t.__qtouchrepeat_destroyed}};let Oc;function Ic(){return S.is.winphone?"msapplication-navbutton-color":S.is.safari?"apple-mobile-web-app-status-bar-style":"theme-color"}function Dc(t){const e=document.getElementsByTagName("META");for(const i in e)if(e[i].name===t)return e[i]}function Nc(t){void 0===Oc&&(Oc=Ic());let e=Dc(Oc);const i=void 0===e;i&&(e=document.createElement("meta"),e.setAttribute("name",Oc)),e.setAttribute("content",t),i&&document.head.appendChild(e)}var zc={install({$q:t,cfg:e}){this.set=!1!==l||!0!==S.is.mobile||!0!==S.is.nativeMobile&&!0!==S.is.winphone&&!0!==S.is.safari&&!0!==S.is.webkit&&!0!==S.is.vivaldi?M:t=>{const e=t||at("primary");!0===S.is.nativeMobile&&window.StatusBar?window.StatusBar.backgroundColorByHexString(e):Nc(e)},t.addressbarColor=this,e.addressbarColor&&this.set(e.addressbarColor)}};const qc={};function Bc(t,e){try{const i=t[e]();return void 0===i?Promise.resolve():i}catch(i){return Promise.reject(i)}}function Fc(t){t.activeEl=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null,t.isActive=null!==t.activeEl}var Uc={isCapable:!1,isActive:!1,activeEl:null,request(t){if(!0===this.isCapable){const e=t||document.documentElement;if(e!==this.activeEl){const t=!0===b.is.ie&&null!==this.activeEl&&e.contains(this.activeEl)?this.exit():Promise.resolve();return t.then(()=>Bc(e,qc.request)).catch(t=>null!==this.activeEl?this.exit().then(()=>Bc(e,qc.request)):Promise.reject(t)).then(t=>(Fc(this),t))}}return this.__getErr()},exit(){return!0===this.isCapable&&!0===this.isActive?Bc(document,qc.exit).then(t=>(Fc(this),this.isActive?this.exit():t)):this.__getErr()},toggle(t){const e=t||document.documentElement;return this.activeEl===e?this.exit():this.request(e)},install({$q:t}){t.fullscreen=this,this.__getErr=()=>Promise.resolve(),!0!==l&&(qc.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(t=>void 0!==document.documentElement[t]),this.isCapable=void 0!==qc.request,!1!==this.isCapable?(qc.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(t=>document[t]),Fc(this),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(t=>{document[t]=()=>{Fc(this)}}),a["a"].util.defineReactive(this,"isActive",this.isActive),a["a"].util.defineReactive(this,"activeEl",this.activeEl)):this.__getErr=()=>Promise.reject("Not capable"))}},$c={appVisible:!1,install({$q:t}){if(!0===l)return void(this.appVisible=t.appVisible=!0);let e,i;"undefined"!==typeof document.hidden?(e="hidden",i="visibilitychange"):"undefined"!==typeof document.msHidden?(e="msHidden",i="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(e="webkitHidden",i="webkitvisibilitychange");const n=()=>{this.appVisible=t.appVisible=!document[e]};n(),i&&"undefined"!==typeof document[e]&&(a["a"].util.defineReactive(t,"appVisible",this.appVisible),document.addEventListener(i,n,!1))}};const Vc={staticClass:"row items-stretch justify-start",attrs:{role:"list"}},Hc={attrs:{role:"list"}},Gc={tabindex:0,role:"listitem"};var Wc=a["a"].extend({name:"BottomSheetPlugin",mixins:[ye,Nt],inheritAttrs:!1,props:{title:String,message:String,actions:Array,grid:Boolean,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},computed:{dialogProps(){return{...this.qAttrs,position:"bottom"}}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onOk(t){this.$emit("ok",t),this.hide()},__getGrid(t){return this.actions.map(e=>{const i=e.avatar||e.img;return void 0===e.label?t(Eo,{staticClass:"col-all",props:{dark:this.isDark}}):t("div",{staticClass:"q-bottom-sheet__item q-hoverable q-focusable cursor-pointer relative-position",class:e.classes,attrs:Gc,on:{click:()=>{this.onOk(e)},keyup:t=>{13===t.keyCode&&this.onOk(e)}}},[t("div",{staticClass:"q-focus-helper"}),e.icon?t(ge,{props:{name:e.icon,color:e.color}}):i?t("img",{attrs:{src:i},staticClass:e.avatar?"q-bottom-sheet__avatar":null}):t("div",{staticClass:"q-bottom-sheet__empty-icon"}),t("div",[e.label])])})},__getList(t){return this.actions.map(e=>{const i=e.avatar||e.img;return void 0===e.label?t(Eo,{props:{spaced:!0,dark:this.isDark}}):t(no,{staticClass:"q-bottom-sheet__item",class:e.classes,props:{tabindex:0,clickable:!0,dark:this.isDark},on:{click:()=>{this.onOk(e)}}},[t(so,{props:{avatar:!0}},[e.icon?t(ge,{props:{name:e.icon,color:e.color}}):i?t("img",{attrs:{src:i},staticClass:e.avatar?"q-bottom-sheet__avatar":null}):null]),t(so,[e.label])])})}},render(t){const e=[];return this.title&&e.push(t(En,{staticClass:"q-dialog__title"},[this.title])),this.message&&e.push(t(En,{staticClass:"q-dialog__message"},[this.message])),e.push(!0===this.grid?t("div",Vc,this.__getGrid(t)):t("div",Hc,this.__getList(t))),t(Xr,{ref:"dialog",props:this.dialogProps,on:Pt(this,"hide",{hide:()=>{this.$emit("hide")}})},[t(kn,{staticClass:"q-bottom-sheet q-bottom-sheet--"+(!0===this.grid?"grid":"list")+(!0===this.isDark?" q-bottom-sheet--dark q-dark":""),style:this.cardStyle,class:this.cardClass},e)])}});const jc={onOk:()=>jc,okCancel:()=>jc,hide:()=>jc,update:()=>jc};function Yc(t,e){for(const i in e)"spinner"!==i&&Object(e[i])===e[i]?(t[i]=Object(t[i])!==t[i]?{}:{...t[i]},Yc(t[i],e[i])):t[i]=e[i]}let Xc;function Qc(t,e){if(void 0!==t)return t;if(void 0!==e)return e;if(void 0===Xc){const t=document.getElementById("q-app");t&&t.__vue__&&(Xc=t.__vue__.$root)}return Xc}var Kc=function(t){return({className:e,class:i,style:n,component:s,root:r,parent:o,...h})=>{if(!0===l)return jc;void 0!==i&&(h.cardClass=i),void 0!==n&&(h.cardStyle=n);const c=void 0!==s;let u,d;!0===c?u=s:(u=t,d=h);const p=[],f=[],m={onOk(t){return p.push(t),m},onCancel(t){return f.push(t),m},onDismiss(t){return p.push(t),f.push(t),m},hide(){return y.$refs.dialog.hide(),m},update({className:t,class:e,style:i,component:n,root:s,parent:r,...o}){return null!==y&&(void 0!==e&&(o.cardClass=e),void 0!==i&&(o.cardStyle=i),!0===c?Object.assign(h,o):(Yc(h,o),d={...h}),y.$forceUpdate()),m}},g=document.createElement("div");document.body.appendChild(g);let v=!1;const _={ok:t=>{v=!0,p.forEach(e=>{e(t)})},hide:()=>{y.$destroy(),y.$el.remove(),y=null,!0!==v&&f.forEach(t=>{t()})}};let y=new a["a"]({name:"QGlobalDialog",el:g,parent:Qc(o,r),render(t){return t(u,{ref:"dialog",props:h,attrs:d,on:_})},mounted(){void 0!==this.$refs.dialog?this.$refs.dialog.show():_["hook:mounted"]=()=>{void 0!==this.$refs.dialog&&this.$refs.dialog.show()}}});return m}},Zc={install({$q:t}){this.create=t.bottomSheet=Kc(Wc)}};function Jc(t){return encodeURIComponent(t)}function tu(t){return decodeURIComponent(t)}function eu(t){return Jc(t===Object(t)?JSON.stringify(t):""+t)}function iu(t){if(""===t)return t;0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t=tu(t.replace(/\+/g," "));try{t=JSON.parse(t)}catch(hd){}return t}function nu(t){const e=new Date;return e.setMilliseconds(e.getMilliseconds()+t),e.toUTCString()}function su(t){let e=0;const i=t.match(/(\d+)d/),n=t.match(/(\d+)h/),s=t.match(/(\d+)m/),r=t.match(/(\d+)s/);return i&&(e+=864e5*i[1]),n&&(e+=36e5*n[1]),s&&(e+=6e4*s[1]),r&&(e+=1e3*r[1]),0===e?t:nu(e)}function ru(t,e,i={},n){let s,r;void 0!==i.expires&&("[object Date]"===Object.prototype.toString.call(i.expires)?s=i.expires.toUTCString():"string"===typeof i.expires?s=su(i.expires):(r=parseFloat(i.expires),s=!1===isNaN(r)?nu(864e5*r):i.expires));const o=`${Jc(t)}=${eu(e)}`,a=[o,void 0!==s?"; Expires="+s:"",i.path?"; Path="+i.path:"",i.domain?"; Domain="+i.domain:"",i.sameSite?"; SameSite="+i.sameSite:"",i.httpOnly?"; HttpOnly":"",i.secure?"; Secure":"",i.other?"; "+i.other:""].join("");if(n){n.req.qCookies?n.req.qCookies.push(a):n.req.qCookies=[a],n.res.setHeader("Set-Cookie",n.req.qCookies);let e=n.req.headers.cookie||"";if(void 0!==s&&r<0){const i=ou(t,n);void 0!==i&&(e=e.replace(`${t}=${i}; `,"").replace(`; ${t}=${i}`,"").replace(`${t}=${i}`,""))}else e=e?`${o}; ${e}`:a;n.req.headers.cookie=e}else document.cookie=a}function ou(t,e){const i=e?e.req.headers:document,n=i.cookie?i.cookie.split("; "):[],s=n.length;let r,o,a,l=t?null:{},h=0;for(;h<s;h++)if(r=n[h].split("="),o=tu(r.shift()),a=r.join("="),t){if(t===o){l=iu(a);break}}else l[o]=a;return l}function au(t,e,i){ru(t,"",{expires:-1,...e},i)}function lu(t,e){return null!==ou(t,e)}function hu(t){return{get:e=>ou(e,t),set:(e,i,n)=>ru(e,i,n,t),has:e=>lu(e,t),remove:(e,i)=>au(e,i,t),getAll:()=>ou(null,t)}}var cu={parseSSR(t){return void 0!==t?hu(t):this},install({$q:t,queues:e}){!0===l?e.server.push((t,e)=>{t.cookies=hu(e.ssr)}):(Object.assign(this,hu()),t.cookies=this)}},uu=a["a"].extend({name:"DialogPlugin",mixins:[ye,Nt],inheritAttrs:!1,props:{title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},computed:{classes(){return"q-dialog-plugin"+(!0===this.isDark?" q-dialog-plugin--dark q-dark":"")+(!1!==this.progress?" q-dialog-plugin--progress":"")},spinner(){if(!1!==this.progress)return!0===jn(this.progress)?{component:this.progress.spinner||qe,props:{color:this.progress.color||this.vmColor}}:{component:qe,props:{color:this.vmColor}}},hasForm(){return void 0!==this.prompt||void 0!==this.options},okLabel(){return!0===jn(this.ok)||!0===this.ok?this.$q.lang.label.ok:this.ok},cancelLabel(){return!0===jn(this.cancel)||!0===this.cancel?this.$q.lang.label.cancel:this.cancel},vmColor(){return this.color||(!0===this.isDark?"amber":"primary")},okDisabled(){return void 0!==this.prompt?void 0!==this.prompt.isValid&&!0!==this.prompt.isValid(this.prompt.model):void 0!==this.options?void 0!==this.options.isValid&&!0!==this.options.isValid(this.options.model):void 0},okProps(){return{color:this.vmColor,label:this.okLabel,ripple:!1,disable:this.okDisabled,...!0===jn(this.ok)?this.ok:{flat:!0}}},cancelProps(){return{color:this.vmColor,label:this.cancelLabel,ripple:!1,...!0===jn(this.cancel)?this.cancel:{flat:!0}}}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},getPrompt(t){return[t(ma,{props:{value:this.prompt.model,type:this.prompt.type,label:this.prompt.label,stackLabel:this.prompt.stackLabel,outlined:this.prompt.outlined,filled:this.prompt.filled,standout:this.prompt.standout,rounded:this.prompt.rounded,square:this.prompt.square,counter:this.prompt.counter,maxlength:this.prompt.maxlength,prefix:this.prompt.prefix,suffix:this.prompt.suffix,color:this.vmColor,dense:!0,autofocus:!0,dark:this.isDark},attrs:this.prompt.attrs,on:Pt(this,"prompt",{input:t=>{this.prompt.model=t},keyup:t=>{!0!==this.okDisabled&&"textarea"!==this.prompt.type&&!0===ut(t,13)&&this.onOk()}})})]},getOptions(t){return[t(Ra,{props:{value:this.options.model,type:this.options.type,color:this.vmColor,inline:this.options.inline,options:this.options.items,dark:this.isDark},on:Pt(this,"opts",{input:t=>{this.options.model=t}})})]},getButtons(t){const e=[];if(this.cancel&&e.push(t(li,{props:this.cancelProps,attrs:{"data-autofocus":"cancel"===this.focus&&!0!==this.hasForm},on:Pt(this,"cancel",{click:this.onCancel})})),this.ok&&e.push(t(li,{props:this.okProps,attrs:{"data-autofocus":"ok"===this.focus&&!0!==this.hasForm},on:Pt(this,"ok",{click:this.onOk})})),e.length>0)return t(Ln,{staticClass:!0===this.stackButtons?"items-end":null,props:{vertical:this.stackButtons,align:"right"}},e)},onOk(){this.$emit("ok",$a(this.getData())),this.hide()},onCancel(){this.hide()},getData(){return void 0!==this.prompt?this.prompt.model:void 0!==this.options?this.options.model:void 0},getSection(t,e,i){return!0===this.html?t(En,{staticClass:e,domProps:{innerHTML:i}}):t(En,{staticClass:e},[i])}},render(t){const e=[];return this.title&&e.push(this.getSection(t,"q-dialog__title",this.title)),!1!==this.progress&&e.push(t(En,{staticClass:"q-dialog__progress"},[t(this.spinner.component,{props:this.spinner.props})])),this.message&&e.push(this.getSection(t,"q-dialog__message",this.message)),void 0!==this.prompt?e.push(t(En,{staticClass:"scroll q-dialog-plugin__form"},this.getPrompt(t))):void 0!==this.options&&e.push(t(Eo,{props:{dark:this.isDark}}),t(En,{staticClass:"scroll q-dialog-plugin__form"},this.getOptions(t)),t(Eo,{props:{dark:this.isDark}})),(this.ok||this.cancel)&&e.push(this.getButtons(t)),t(Xr,{ref:"dialog",props:{...this.qAttrs,value:this.value},on:Pt(this,"hide",{hide:()=>{this.$emit("hide")}})},[t(kn,{staticClass:this.classes,style:this.cardStyle,class:this.cardClass,props:{dark:this.isDark}},e)])}}),du={install({$q:t}){this.create=t.dialog=Kc(uu)}},pu={isActive:!1,start:M,stop:M,increment:M,setDefaults:M,install({$q:t,cfg:e}){if(t.loadingBar=this,!0===l)return;const i=void 0!==e.loadingBar?{...e.loadingBar}:{},n={start:()=>{this.isActive=!0},stop:()=>{this.isActive=!1}},s=new a["a"]({name:"LoadingBar",devtools:{hide:!0},beforeCreate(){void 0===this._routerRoot&&(this._routerRoot={})},render:t=>t(Wt,{ref:"bar",props:i,on:n})}).$mount().$refs.bar;Object.assign(this,{start:s.start,stop:s.stop,increment:s.increment,setDefaults:t=>{!0===jn(t)&&Object.assign(i,t),s.$parent.$forceUpdate()}}),a["a"].util.defineReactive(this,"isActive",this.isActive),a["a"].util.defineReactive(s,"isActive",this.isActive),s.setDefaults=this.setDefaults,document.body.appendChild(s.$parent.$el)}};let fu,mu,gu=0,vu={},_u={};const yu={group:"__default_quasar_group__",delay:0,message:!1,spinnerSize:80,spinnerColor:"white",messageColor:"white",backgroundColor:"black",spinner:qe,customClass:""},bu={...yu};function xu(t){if(t&&void 0!==t.group&&void 0!==_u[t.group])return Object.assign(_u[t.group],t);const e=!0===jn(t)&&!0===t.ignoreDefaults?{...yu,...t}:{...bu,...t};return _u[e.group]=e,e}const Su={isActive:!1,show(t){if(!0===l)return;vu=xu(t);const{group:e}=vu;return vu.customClass+=" text-"+vu.backgroundColor,this.isActive=!0,void 0!==fu?(vu.uid=gu,fu.$forceUpdate()):(vu.uid=++gu,clearTimeout(mu),mu=setTimeout(()=>{mu=void 0;const t=document.createElement("div");document.body.appendChild(t),fu=new a["a"]({name:"QLoading",devtools:{hide:!0},beforeCreate(){void 0===this._routerRoot&&(this._routerRoot={})},el:t,mounted(){Vr(!0)},render:t=>t("transition",{props:{name:"q-transition--fade",appear:!0},on:Pt(this,"tr",{"after-leave":()=>{!0!==this.isActive&&void 0!==fu&&(Vr(!1),fu.$destroy(),fu.$el.remove(),fu=void 0)}})},[!0===this.isActive?t("div",{staticClass:"q-loading fullscreen column flex-center z-max",key:vu.uid,class:vu.customClass.trim()},[t(vu.spinner,{props:{color:vu.spinnerColor,size:vu.spinnerSize}}),vu.message&&t("div",{class:"text-"+vu.messageColor,domProps:{[!0===vu.sanitize?"textContent":"innerHTML"]:vu.message}})||void 0]):null])})},vu.delay)),t=>{void 0!==t&&Object(t)===t?this.show({...t,group:e}):this.hide(e)}},hide(t){if(!0===this.isActive){if(void 0===t)_u={};else{if(void 0===_u[t])return;{delete _u[t];const e=Object.keys(_u);if(0!==e.length){const t=e[e.length-1];return void this.show({group:t})}}}void 0!==mu&&(clearTimeout(mu),mu=void 0),this.isActive=!1}},setDefaults(t){!0===jn(t)&&Object.assign(bu,t)},install({$q:t,cfg:{loading:e}}){this.setDefaults(e),t.loading=this}};!1===l&&a["a"].util.defineReactive(Su,"isActive",Su.isActive);var wu=Su;let Cu,Mu;function Tu(t){t.title&&(t.title=t.titleTemplate?t.titleTemplate(t.title):t.title,delete t.titleTemplate),[["meta","content"],["link","href"]].forEach(e=>{const i=t[e[0]],n=e[1];for(const t in i){const e=i[t];e.template&&(1===Object.keys(e).length?delete i[t]:(e[n]=e.template(e[n]||""),delete e.template))}})}function ku(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(t[i]!==e[i])return!0}function Eu(t){return!1===["class","style"].includes(t)}function Lu(t){return!1===["lang","dir"].includes(t)}function Au(t,e){const i={},n={};return void 0===t?{add:e,remove:n}:(t.title!==e.title&&(i.title=e.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(s=>{const r=t[s],o=e[s];if(n[s]=[],void 0!==r&&null!==r){i[s]={};for(const t in r)!1===o.hasOwnProperty(t)&&n[s].push(t);for(const t in o)!1===r.hasOwnProperty(t)?i[s][t]=o[t]:!0===ku(r[t],o[t])&&(n[s].push(t),i[s][t]=o[t])}else i[s]=o}),{add:i,remove:n})}function Pu({add:t,remove:e}){t.title&&(document.title=t.title),Object.keys(e).length>0&&(["meta","link","script"].forEach(t=>{e[t].forEach(e=>{document.head.querySelector(`${t}[data-qmeta="${e}"]`).remove()})}),e.htmlAttr.filter(Lu).forEach(t=>{document.documentElement.removeAttribute(t)}),e.bodyAttr.filter(Eu).forEach(t=>{document.body.removeAttribute(t)})),["meta","link","script"].forEach(e=>{const i=t[e];for(const t in i){const n=document.createElement(e);for(const e in i[t])"innerHTML"!==e&&n.setAttribute(e,i[t][e]);n.setAttribute("data-qmeta",t),"script"===e&&(n.innerHTML=i[t].innerHTML||""),document.head.appendChild(n)}}),Object.keys(t.htmlAttr).filter(Lu).forEach(e=>{document.documentElement.setAttribute(e,t.htmlAttr[e]||"")}),Object.keys(t.bodyAttr).filter(Eu).forEach(e=>{document.body.setAttribute(e,t.bodyAttr[e]||"")})}function Ru(t,e){!0!==t._inactive&&(!0===qu(t)&&(So(!0,e,t.__qMeta),!0===t.$options.meta.stopPropagation)||t.$children.forEach(t=>{Ru(t,e)}))}function Ou(){!0===Mu&&(Mu=!1,this.$root.__currentMeta=window.__Q_META__);const t={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};Ru(this.$root,t),Tu(t),Pu(Au(this.$root.__currentMeta,t)),this.$root.__currentMeta=t}function Iu(t){return e=>{const i=t[e];return e+(!0!==i&&void 0!==i?`="${i}"`:"")}}function Du(t){let e="";return t.title&&(e+=`<title>${t.title}</title>`),["meta","link","script"].forEach(i=>{const n=t[i];for(const t in n){const s=Object.keys(n[t]).filter(t=>"innerHTML"!==t).map(Iu(n[t]));e+=`<${i} ${s.join(" ")} data-qmeta="${t}">`,"script"===i&&(e+=(n[t].innerHTML||"")+"<\/script>")}}),e}function Nu(t,e,i){const n={title:"",titleTemplate:null,meta:{},link:{},htmlAttr:{},bodyAttr:{},noscript:{}};Ru(t,n),Tu(n);const s=void 0!==i&&void 0!==i.nonce?` nonce="${i.nonce}"`:"",r={"%%Q_HTML_ATTRS%%":Object.keys(n.htmlAttr).filter(Lu).map(Iu(n.htmlAttr)).join(" "),"%%Q_HEAD_TAGS%%":Du(n),"%%Q_BODY_ATTRS%%":Object.keys(n.bodyAttr).filter(Eu).map(Iu(n.bodyAttr)).join(" "),"%%Q_BODY_TAGS%%":Object.keys(n.noscript).map(t=>`<noscript data-qmeta="${t}">${n.noscript[t]}</noscript>`).join("")+`<script${s}>window.__Q_META__=${delete n.noscript&&JSON.stringify(n)}<\/script>`};return Object.keys(r).forEach(t=>{e=e.replace(t,r[t])}),e}function zu(){"function"===typeof this.$options.meta?(void 0===this.$options.computed&&(this.$options.computed={}),this.$options.computed.__qMeta=this.$options.meta):!0===qu(this)&&(this.__qMeta=this.$options.meta)}function qu(t){return void 0!==t.$options.meta&&null!==t.$options.meta}function Bu(){!0===qu(this)&&this.__qMetaUpdate()}var Fu={install({queues:t}){!0===l?(a["a"].prototype.$getMetaHTML=t=>(e,i)=>Nu(t,e,i),a["a"].mixin({beforeCreate:zu}),t.server.push((t,e)=>{e.ssr.Q_HTML_ATTRS+=" %%Q_HTML_ATTRS%%",Object.assign(e.ssr,{Q_HEAD_TAGS:"%%Q_HEAD_TAGS%%",Q_BODY_ATTRS:"%%Q_BODY_ATTRS%%",Q_BODY_TAGS:"%%Q_BODY_TAGS%%"})})):(Mu=c,a["a"].mixin({beforeCreate:zu,created(){!0===qu(this)&&(this.__qMetaUnwatch=this.$watch("__qMeta",this.__qMetaUpdate))},activated:Bu,deactivated:Bu,beforeMount:Bu,destroyed(){!0===qu(this)&&(this.__qMetaUnwatch(),this.__qMetaUpdate())},methods:{__qMetaUpdate(){clearTimeout(Cu),Cu=setTimeout(Ou.bind(this),50)}}}))}};let Uu,$u=0;const Vu={},Hu={},Gu={},Wu={},ju=/^\s*$/,Yu=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],Xu=["top-left","top-right","bottom-left","bottom-right"],Qu={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function Ku(t,e,i){if(!t)return td("parameter required");let n;const s={textColor:"white"};if(!0!==t.ignoreDefaults&&Object.assign(s,Vu),!1===jn(t)&&(s.type&&Object.assign(s,Qu[s.type]),t={message:t}),Object.assign(s,Qu[t.type||s.type],t),"function"===typeof s.icon&&(s.icon=s.icon(e.$q)),s.spinner?!0===s.spinner&&(s.spinner=qe):s.spinner=!1,s.meta={hasMedia:Boolean(!1!==s.spinner||s.icon||s.avatar),hasText:Ju(s.message)||Ju(s.caption)},s.position){if(!1===Yu.includes(s.position))return td("wrong position",t)}else s.position="bottom";if(void 0===s.timeout)s.timeout=5e3;else{const e=parseInt(s.timeout,10);if(isNaN(e)||e<0)return td("wrong timeout",t);s.timeout=e}0===s.timeout?s.progress=!1:!0===s.progress&&(s.meta.progressClass="q-notification__progress"+(s.progressClass?" "+s.progressClass:""),s.meta.progressStyle={animationDuration:s.timeout+1e3+"ms"});const r=(!0===Array.isArray(t.actions)?t.actions:[]).concat(!0!==t.ignoreDefaults&&!0===Array.isArray(Vu.actions)?Vu.actions:[]).concat(void 0!==Qu[t.type]&&!0===Array.isArray(Qu[t.type].actions)?Qu[t.type].actions:[]),{closeBtn:o}=s;if(o&&r.push({label:"string"===typeof o?o:e.$q.lang.label.close}),s.actions=r.map(({handler:t,noDismiss:e,style:i,class:n,attrs:s,...r})=>({staticClass:n,style:i,props:{flat:!0,...r},attrs:s,on:{click:"function"===typeof t?()=>{t(),!0!==e&&a()}:()=>{a()}}})),void 0===s.multiLine&&(s.multiLine=s.actions.length>1),Object.assign(s.meta,{staticClass:"q-notification row items-stretch q-notification--"+(!0===s.multiLine?"multi-line":"standard")+(void 0!==s.color?" bg-"+s.color:"")+(void 0!==s.textColor?" text-"+s.textColor:"")+(void 0!==s.classes?" "+s.classes:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(!0===s.multiLine?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(!0===s.multiLine?"":" col"),leftClass:!0===s.meta.hasText?"additional":"single",attrs:{role:"alert",...s.attrs}}),!1===s.group?(s.group=void 0,s.meta.group=void 0):(void 0!==s.group&&!0!==s.group||(s.group=[s.message,s.caption,s.multiline].concat(s.actions.map(({props:t})=>`${t.label}*${t.icon}`)).join("|")),s.meta.group=s.group+"|"+s.position),0===s.actions.length?s.actions=void 0:s.meta.actionsClass="q-notification__actions row items-center "+(!0===s.multiLine?"justify-end":"col-auto")+(!0===s.meta.hasMedia?" q-notification__actions--with-media":""),void 0!==i){clearTimeout(i.notif.meta.timer),s.meta.uid=i.notif.meta.uid;const t=Gu[s.position].indexOf(i.notif);Gu[s.position][t]=s}else{const e=Hu[s.meta.group];if(void 0===e){if(s.meta.uid=$u++,s.meta.badge=1,-1!==["left","right","center"].indexOf(s.position))Gu[s.position].splice(Math.floor(Gu[s.position].length/2),0,s);else{const t=s.position.indexOf("top")>-1?"unshift":"push";Gu[s.position][t](s)}void 0!==s.group&&(Hu[s.meta.group]=s)}else{if(clearTimeout(e.meta.timer),void 0!==s.badgePosition){if(!1===Xu.includes(s.badgePosition))return td("wrong badgePosition",t)}else s.badgePosition="top-"+(s.position.indexOf("left")>-1?"right":"left");s.meta.uid=e.meta.uid,s.meta.badge=e.meta.badge+1,s.meta.badgeClass="q-notification__badge q-notification__badge--"+s.badgePosition+(void 0!==s.badgeColor?" bg-"+s.badgeColor:"")+(void 0!==s.badgeTextColor?" text-"+s.badgeTextColor:"")+(s.badgeClass?" "+s.badgeClass:"");const i=Gu[s.position].indexOf(e);Gu[s.position][i]=Hu[s.meta.group]=s}}const a=()=>{Zu(s,e),n=void 0};return e.$forceUpdate(),s.timeout>0&&(s.meta.timer=setTimeout(()=>{a()},s.timeout+1e3)),void 0!==s.group?e=>{void 0!==e?td("trying to update a grouped one which is forbidden",t):a()}:(n={dismiss:a,config:t,notif:s},void 0===i?t=>{if(void 0!==n)if(void 0===t)n.dismiss();else{const i=Object.assign({},n.config,t,{group:!1,position:s.position});Ku(i,e,n)}}:void Object.assign(i,n))}function Zu(t,e){clearTimeout(t.meta.timer);const i=Gu[t.position].indexOf(t);if(-1!==i){void 0!==t.group&&delete Hu[t.meta.group];const n=e.$refs[""+t.meta.uid];if(n){const{width:t,height:e}=getComputedStyle(n);n.style.left=n.offsetLeft+"px",n.style.width=t,n.style.height=e}Gu[t.position].splice(i,1),e.$forceUpdate(),"function"===typeof t.onDismiss&&t.onDismiss()}}function Ju(t){return void 0!==t&&null!==t&&!0!==ju.test(t)}function td(t,e){return console.error("Notify: "+t,e),!1}const ed={name:"QNotifications",devtools:{hide:!0},beforeCreate(){void 0===this._routerRoot&&(this._routerRoot={})},render(t){return t("div",{staticClass:"q-notifications"},Yu.map(e=>t("transition-group",{key:e,staticClass:Wu[e],tag:"div",props:{name:"q-notification--"+e,mode:"out-in"}},Gu[e].map(e=>{const{meta:i}=e,n=[];if(!0===i.hasMedia&&(!1!==e.spinner?n.push(t(e.spinner,{staticClass:"q-notification__spinner q-notification__spinner--"+i.leftClass,props:{color:e.spinnerColor,size:e.spinnerSize}})):e.icon?n.push(t(ge,{staticClass:"q-notification__icon q-notification__icon--"+i.leftClass,attrs:{role:"img"},props:{name:e.icon,color:e.iconColor,size:e.iconSize}})):e.avatar&&n.push(t(ve,{staticClass:"q-notification__avatar q-notification__avatar--"+i.leftClass},[t("img",{attrs:{src:e.avatar,"aria-hidden":"true"}})]))),!0===i.hasText){let i;const s={staticClass:"q-notification__message col"};if(!0===e.html)s.domProps={innerHTML:e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message};else{const n=[e.message];i=e.caption?[t("div",n),t("div",{staticClass:"q-notification__caption"},[e.caption])]:n}n.push(t("div",s,i))}const s=[t("div",{staticClass:i.contentClass},n)];return!0===e.progress&&s.push(t("div",{key:`${i.uid}|p|${i.badge}`,staticClass:i.progressClass,style:i.progressStyle})),void 0!==e.actions&&s.push(t("div",{staticClass:i.actionsClass},e.actions.map(e=>t(li,{...e})))),i.badge>1&&s.push(t("div",{key:`${i.uid}|${i.badge}`,staticClass:i.badgeClass,style:e.badgeStyle},[i.badge])),t("div",{ref:""+i.uid,key:i.uid,staticClass:i.staticClass,attrs:i.attrs},[t("div",{staticClass:i.wrapperClass},s)])}))))},mounted(){if(void 0!==this.$q.fullscreen&&!0===this.$q.fullscreen.isCapable){const t=()=>{const t=He(this.$q.fullscreen.activeEl);this.$el.parentElement!==t&&t.appendChild(this.$el)};this.unwatchFullscreen=this.$watch("$q.fullscreen.activeEl",z(t,50)),!0===this.$q.fullscreen.isActive&&t()}},beforeDestroy(){void 0!==this.unwatchFullscreen&&this.unwatchFullscreen()}};var id={setDefaults(t){!0!==l&&!0===jn(t)&&Object.assign(Vu,t)},registerType(t,e){!0!==l&&!0===jn(e)&&(Qu[t]=e)},install({$q:t}){if(t.notify=this.create=!0===l?M:t=>Ku(t,Uu),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,void 0!==t.config.notify&&this.setDefaults(t.config.notify),!0!==l){Yu.forEach(t=>{Gu[t]=[];const e=!0===["left","center","right"].includes(t)?"center":t.indexOf("top")>-1?"top":"bottom",i=t.indexOf("left")>-1?"start":t.indexOf("right")>-1?"end":"center",n=["left","right"].includes(t)?`items-${"left"===t?"start":"end"} justify-center`:"center"===t?"flex-center":"items-"+i;Wu[t]=`q-notifications__list q-notifications__list--${e} fixed column no-wrap ${n}`});const t=document.createElement("div");document.body.appendChild(t),Uu=new a["a"](ed),Uu.$mount(t)}}};function nd(t){return!0===Yn(t)?"__q_date|"+t.toUTCString():!0===Xn(t)?"__q_expr|"+t.source:"number"===typeof t?"__q_numb|"+t:"boolean"===typeof t?"__q_bool|"+(t?"1":"0"):"string"===typeof t?"__q_strn|"+t:"function"===typeof t?"__q_strn|"+t.toString():t===Object(t)?"__q_objt|"+JSON.stringify(t):t}function sd(t){const e=t.length;if(e<9)return t;const i=t.substr(0,8),n=t.substring(9);switch(i){case"__q_date":return new Date(n);case"__q_expr":return new RegExp(n);case"__q_numb":return Number(n);case"__q_bool":return Boolean("1"===n);case"__q_strn":return""+n;case"__q_objt":return JSON.parse(n);default:return t}}function rd(){const t=()=>null;return{has:()=>!1,getLength:()=>0,getItem:t,getIndex:t,getKey:t,getAll:()=>{},getAllKeys:()=>[],set:M,remove:M,clear:M,isEmpty:()=>!0}}function od(t){const e=window[t+"Storage"],i=t=>{const i=e.getItem(t);return i?sd(i):null};return{has:t=>null!==e.getItem(t),getLength:()=>e.length,getItem:i,getIndex:t=>t<e.length?i(e.key(t)):null,getKey:t=>t<e.length?e.key(t):null,getAll:()=>{let t;const n={},s=e.length;for(let r=0;r<s;r++)t=e.key(r),n[t]=i(t);return n},getAllKeys:()=>{const t=[],i=e.length;for(let n=0;n<i;n++)t.push(e.key(n));return t},set:(t,i)=>{e.setItem(t,nd(i))},remove:t=>{e.removeItem(t)},clear:()=>{e.clear()},isEmpty:()=>0===e.length}}var ad={install({$q:t}){const e=!0===l||!1===b.has.webStorage?rd():od("local");t.localStorage=e,Object.assign(this,e)}},ld={install({$q:t}){const e=!0===l||!1===b.has.webStorage?rd():od("session");t.sessionStorage=e,Object.assign(this,e)}};e["D"]={...Mt,install(t,e){Mt.install(t,{components:n,directives:s,plugins:r,...e})}}}}]);
//# sourceMappingURL=chunk-vendors-legacy.bfb955a9.js.map